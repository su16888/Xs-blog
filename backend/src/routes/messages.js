(function(_0x1cd828,_0x41d553){function _0xec5975(_0x27e794,_0x5d0bff,_0x335721,_0x3c40cc){return _0x_0x555e(_0x5d0bff- -0xc6,_0x27e794);}function _0x2ee34e(_0x2c6ed8,_0x1246de,_0x1cf447,_0x2ae4b8){return _0x_0x555e(_0x2ae4b8- -0x211,_0x1cf447);}const _0x1546d1=_0x1cd828();while(!![]){try{const _0x24313c=-parseInt(_0x2ee34e(-0x149,-0x123,-0x149,-0x13b))/(0x3*-0xc0b+0x226d+0x13*0x17)*(-parseInt(_0x2ee34e(-0x14d,-0x132,-0x178,-0x155))/(-0x13*0x203+0x657*0x5+0x688))+parseInt(_0x2ee34e(-0x125,-0x13a,-0x152,-0x140))/(0x1*0x25cf+0x86+-0x2652)*(-parseInt(_0xec5975(0x24,0x1c,0x18,0x9))/(0x75c*0x4+-0x37d+-0x19ef))+-parseInt(_0xec5975(0x7,0x21,0x14,0x1b))/(-0x2049+0xb*-0x7f+0x25c3)+-parseInt(_0x2ee34e(-0x13a,-0x154,-0x154,-0x150))/(-0x1804+-0xeba+0x26c4)+parseInt(_0x2ee34e(-0x129,-0x14b,-0x166,-0x143))/(-0x4*0x897+0x749+0x1*0x1b1a)*(-parseInt(_0x2ee34e(-0x16c,-0x161,-0x154,-0x149))/(0x355*-0x1+0x580+0x1*-0x223))+parseInt(_0xec5975(-0x23,-0xf,-0x2c,-0x17))/(-0x1236+-0x7*-0x541+-0x1288)*(-parseInt(_0xec5975(0x24,0x15,0xc,0x7))/(-0x1231+0x1c56+0x1*-0xa1b))+-parseInt(_0x2ee34e(-0x10d,-0x13f,-0x116,-0x11a))/(0x1efe*0x1+0x9b8+0x167*-0x1d)*(-parseInt(_0x2ee34e(-0x112,-0x131,-0x136,-0x12e))/(-0x4*-0x952+0x1*0x539+-0x2a75));if(_0x24313c===_0x41d553)break;else _0x1546d1['push'](_0x1546d1['shift']());}catch(_0x13e952){_0x1546d1['push'](_0x1546d1['shift']());}}}(_0x_0x200f,-0x1*-0x28497+-0x1*-0x8ddcb+-0x61bd5));const _0x_0x30779c=(function(){let _0x4572f1=!![];return function(_0x11beeb,_0x536d07){const _0x3d513f=_0x4572f1?function(){function _0x4b4931(_0x25d166,_0x1eca4a,_0x1bfbe1,_0x546b2c){return _0x_0x555e(_0x1bfbe1- -0x10d,_0x25d166);}function _0x581c80(_0x277569,_0x34f61d,_0x196943,_0x19d019){return _0x_0x555e(_0x34f61d-0x3a8,_0x19d019);}if('UbBzZ'!==_0x581c80(0x4a3,0x4a1,0x48a,0x4a6)){if(_0x536d07){const _0x5e4dfc=_0x536d07[_0x581c80(0x4a3,0x487,0x4a7,0x470)](_0x11beeb,arguments);return _0x536d07=null,_0x5e4dfc;}}else console['error'](_0x581c80(0x441,0x463,0x479,0x464),_0x321878),_0x372534[_0x4b4931(-0x44,-0x36,-0x23,-0x33)](0x158b+-0xc9b*0x3+-0x91d*-0x2)[_0x581c80(0x44c,0x46a,0x47a,0x479)]({'success':![],'message':_0x4b4931(-0x16,-0x4f,-0x36,-0x57)});}:function(){};return _0x4572f1=![],_0x3d513f;};}()),_0x_0x230a30=_0x_0x30779c(this,function(){function _0x4f7d79(_0x133bd2,_0x113614,_0x41f064,_0x4367f3){return _0x_0x555e(_0x4367f3-0x19a,_0x41f064);}function _0x3572d3(_0x235c40,_0x1f58aa,_0x198473,_0x1e7747){return _0x_0x555e(_0x198473-0xf8,_0x1e7747);}return _0x_0x230a30[_0x3572d3(0x1ad,0x1af,0x1ac,0x1ce)]()[_0x4f7d79(0x273,0x28a,0x2a5,0x28b)](_0x3572d3(0x1e2,0x1d0,0x1c2,0x1b5))[_0x4f7d79(0x231,0x263,0x256,0x24e)]()[_0x4f7d79(0x256,0x268,0x24c,0x260)](_0x_0x230a30)[_0x4f7d79(0x26d,0x27b,0x26b,0x28b)]('(((.+)+)+)+$');});function _0x_0x555e(_0x20eaea,_0x1b844a){const _0x57baf0=_0x_0x200f();return _0x_0x555e=function(_0x4bb97b,_0x1af714){_0x4bb97b=_0x4bb97b-(-0x2*-0x4a9+-0x3*-0x1e9+-0x1*0xe59);let _0x853383=_0x57baf0[_0x4bb97b];if(_0x_0x555e['LvTdRr']===undefined){var _0x2ca070=function(_0x5527a8){const _0x20d475='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3ac358='',_0x2c5c5='',_0x423bae=_0x3ac358+_0x2ca070;for(let _0x58ab41=0x10c4+-0x1dfb+-0x1*-0xd37,_0x1be6fc,_0x418bf8,_0x5f1298=0x2310+-0x19*0xb+-0x21fd;_0x418bf8=_0x5527a8['charAt'](_0x5f1298++);~_0x418bf8&&(_0x1be6fc=_0x58ab41%(-0xce*-0x11+0x1910+-0x26ba)?_0x1be6fc*(-0x1fb7*-0x1+-0x35d*-0x6+0x3*-0x1137)+_0x418bf8:_0x418bf8,_0x58ab41++%(0x3*-0x136+-0x1db+-0x1*-0x581))?_0x3ac358+=_0x423bae['charCodeAt'](_0x5f1298+(-0x11d7+0x1b*-0x43+-0xce*-0x1f))-(-0xdcc+0x2253+-0x147d)!==-0xe41+0x1*0x166f+-0x417*0x2?String['fromCharCode'](-0x925+-0x775+0x1199&_0x1be6fc>>(-(0x207e+-0x5b8+-0x1ac4)*_0x58ab41&-0x11+0x244*0x11+-0x266d*0x1)):_0x58ab41:0x97e+-0x2169+-0x7f9*-0x3){_0x418bf8=_0x20d475['indexOf'](_0x418bf8);}for(let _0x4cf4eb=-0x11e0+-0x922+0x1*0x1b02,_0x23d293=_0x3ac358['length'];_0x4cf4eb<_0x23d293;_0x4cf4eb++){_0x2c5c5+='%'+('00'+_0x3ac358['charCodeAt'](_0x4cf4eb)['toString'](-0x1*0x1af0+0x2517+0xa17*-0x1))['slice'](-(-0x1798+0x1b9a+-0x400*0x1));}return decodeURIComponent(_0x2c5c5);};_0x_0x555e['IvKBrM']=_0x2ca070,_0x20eaea=arguments,_0x_0x555e['LvTdRr']=!![];}const _0x5ca0a9=_0x57baf0[0x3*0x9f+-0xe9+0x2*-0x7a],_0x5b06ae=_0x4bb97b+_0x5ca0a9,_0x5f7cc=_0x20eaea[_0x5b06ae];if(!_0x5f7cc){const _0x5b8d29=function(_0xdf706b){this['IcwjvV']=_0xdf706b,this['YYAiRA']=[0x1121+-0xc01*0x1+-0x51f,-0x298*0xe+-0xf2f+-0x1*-0x337f,0x264c+-0x27*-0x89+-0x13b9*0x3],this['HfFeVY']=function(){return'newState';},this['oFURWw']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['bdWOrk']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5b8d29['prototype']['veitfe']=function(){const _0x231b55=new RegExp(this['oFURWw']+this['bdWOrk']),_0x54e55e=_0x231b55['test'](this['HfFeVY']['toString']())?--this['YYAiRA'][0x1707+-0xf25*0x2+0x26c*0x3]:--this['YYAiRA'][0x824+-0x1c63*0x1+-0x47*-0x49];return this['ukIhjL'](_0x54e55e);},_0x5b8d29['prototype']['ukIhjL']=function(_0x31dd2a){if(!Boolean(~_0x31dd2a))return _0x31dd2a;return this['uuLIRJ'](this['IcwjvV']);},_0x5b8d29['prototype']['uuLIRJ']=function(_0x27c04e){for(let _0x2e16ba=0x1514+0x2*-0x12ca+0x84*0x20,_0x2eb544=this['YYAiRA']['length'];_0x2e16ba<_0x2eb544;_0x2e16ba++){this['YYAiRA']['push'](Math['round'](Math['random']())),_0x2eb544=this['YYAiRA']['length'];}return _0x27c04e(this['YYAiRA'][-0x8*0x7c+0x11cc+-0x63*0x24]);},new _0x5b8d29(_0x_0x555e)['veitfe'](),_0x853383=_0x_0x555e['IvKBrM'](_0x853383),_0x20eaea[_0x5b06ae]=_0x853383;}else _0x853383=_0x5f7cc;return _0x853383;},_0x_0x555e(_0x20eaea,_0x1b844a);}_0x_0x230a30();const express=require('express');function _0x_0x316939(_0xd4295b,_0x4eee1d,_0x3e5c27,_0x595250){return _0x_0x555e(_0x4eee1d-0x1e6,_0x3e5c27);}const router=express[_0x_0x5c8c5f(-0x125,-0x128,-0x118,-0x10c)](),Message=require('../models/Message');function _0x_0x200f(){const _0xb03494=['5PYQ5yIg57g7','5PU05PAW55wz6kIa54Q25Ocb5AsX6lsLoG','nJiZnZrIsezSsLO','y3jLyxrL','wejkuxG','5O+q5lQK55wz6kIa5AsX6lsLoG','6i635y+w55wz6kIa6k+M5Oof5AsX6lsL','ntiYnZyYtfjSCgnh','ANnVBG','C2f2zq','6i635y+w55wz6kIa5AsX6lsLoG','BMfTzq','y29UC3rYDwn0B3i','C3rYAw5NAwz5','mtGZntm2suTbuwve','zMLUzej5ugS','kcGOlISPkYKRksSK','55wz6kIa5O+q5lQK5OIq5yQF77Ym5OIr5lUS5lYA5Bc95B+R5Ase55cg','y2f0y2G','z3PdCfO','mti2r0XlEwfY','CgvUzgLUzW','yuTKCeO','mZy2z0PIweT2','55wz6kIa5lIn5A2y5zYO','Chv0','6i635y+w55wz6kIa6k+M5Oof5AsX6lsLoG','5yIG6zMK55wz6kIa5AsX6lsLoG','mNLsrLbIBW','5PU05PAW55wz6kIa54Q25Ocb5AsX6lsL','Cg9ZDa','yNP6v1K','6AQm6k+b56cb6zsz6k+V5OIw5BEY6l+h5PYF','mtiYmJCWCMfMrfDX','uM91DgvY','zNLjBvq','CxvLCNK','yxbWBhK','zxHWB3j0CW','6AQm6k+b56cb5lIn6io95lI656M6','mtK3mZjbCNbireO','mtjzBhnos3q','55wz6kIa5yIG6zMK5OIq5yQF','5O+q5lQK55wz6kIa5AsX6lsL','6i635y+w5yIg57g75zcn56EW5AsX6lsLoG','odi0mJC1B1D2t1bU','CM9SBgjHy2S','y2vPBa','C3rHDhvZ','zMLUzefUzenVDw50qwXS','Dgv4Da','revtqW','5yIG6zMK55wz6kIa5AsX6lsL','DhjHBNnHy3rPB24','vxnLCI1bz2vUDa','C2vHCMnO','y3jLyxrLzf9HDa','twvZC2fNzunHDgvNB3j5','ug9LEwq','qNzzuMq','5y+r6ycb6ykU5lU26ycA55+L5AsX6lsLoG','mJa0mtm4nJzrBLzdBNq','CMvHza','rMzjseW','vhDtvw0','zxjYB3i','yM9KEq','lZPPza','Dg9tDhjPBMC','CgfYyw1Z','z2v0','mJi1wMnrDNbL','54Q25Ocb5PU05PAW5OIq5yQF','6i635y+w55wz6kIa5AsX6lsL'];_0x_0x200f=function(){return _0xb03494;};return _0x_0x200f();}function _0x_0x5c8c5f(_0x25fca3,_0x3f02de,_0x4132ff,_0x3edc41){return _0x_0x555e(_0x4132ff- -0x1f4,_0x3edc41);}const MessageCategory=require('../models/MessageCategory'),authenticateToken=require('../middlewares/auth'),{sequelize}=require('../config/database'),{validateCaptcha}=require('../utils/captcha'),{checkIPLimit,recordIPSubmission}=require('../utils/ipLimit'),{sendMessageNotification}=require('../utils/email'),{getClientIP}=require('../utils/ipHelper');async function getCategoryName(_0x1611d1){function _0x2b9d94(_0x28bf02,_0x2acc1a,_0x3c390a,_0x2d6a0e){return _0x_0x5c8c5f(_0x28bf02-0x170,_0x2acc1a-0x3c,_0x3c390a-0x4a9,_0x28bf02);}function _0xd6edb6(_0x6670b2,_0x30ecac,_0x4ec3dd,_0x436b2d){return _0x_0x5c8c5f(_0x6670b2-0x13c,_0x30ecac-0x6,_0x4ec3dd-0x1c7,_0x30ecac);}try{if('gzCpZ'!==_0xd6edb6(0xba,0xa9,0xa0,0xb9)){const _0x51d608=_0x105e25?function(){function _0x2a222f(_0x2ce9e1,_0x5efe75,_0x181afb,_0x492de1){return _0xd6edb6(_0x2ce9e1-0xd,_0x492de1,_0x5efe75-0x30f,_0x492de1-0xa1);}if(_0x2dc1f9){const _0x5cf675=_0x23958f[_0x2a222f(0x3cf,0x3c1,0x3dd,0x3c2)](_0x59e738,arguments);return _0x60adf1=null,_0x5cf675;}}:function(){};return _0xe48daa=![],_0x51d608;}else{const _0x186c52=await MessageCategory[_0x2b9d94(0x393,0x37b,0x37e,0x3a3)](_0x1611d1);return _0x186c52?_0x186c52[_0x2b9d94(0x36c,0x387,0x37a,0x386)]:_0x2b9d94(0x357,0x36d,0x36f,0x392);}}catch(_0x578dd9){return console[_0x2b9d94(0x3bc,0x39b,0x3b0,0x3c3)](_0x2b9d94(0x3a6,0x38b,0x39b,0x387),_0x578dd9),_0xd6edb6(0x6d,0x83,0x8d,0x9b);}}router[_0x_0x5c8c5f(-0x129,-0x159,-0x13e,-0x11c)]('/',authenticateToken,async(_0x2aa753,_0x4f3fda)=>{function _0x294e5f(_0x1dbf6e,_0x3ec87e,_0x4b556c,_0x43c5f4){return _0x_0x316939(_0x1dbf6e-0xc2,_0x1dbf6e- -0x4b5,_0x4b556c,_0x43c5f4-0x1a4);}function _0x2a3734(_0x1be669,_0x59824d,_0x45fe6a,_0x18f926){return _0x_0x316939(_0x1be669-0x73,_0x18f926- -0x395,_0x45fe6a,_0x18f926-0xc7);}try{const {page:page=-0x1848+0x32c*0x1+0x2f*0x73,limit:limit=0xb99+-0x24bd+-0x8*-0x327,status:_0x133f1b,category_id:_0x2bef3b}=_0x2aa753[_0x294e5f(-0x1f1,-0x1e6,-0x1ee,-0x1e1)],_0x305a5f=(page-(0x2*0xd34+0x24a9+-0x3f10))*limit,_0x20f535={};if(_0x133f1b)_0x20f535[_0x2a3734(-0xbc,-0xe4,-0xdf,-0xc5)]=_0x133f1b;if(_0x2bef3b)_0x20f535['category_id']=_0x2bef3b;const {count:_0x34f81c,rows:_0x1affd8}=await Message[_0x294e5f(-0x1e4,-0x1cc,-0x206,-0x1fc)]({'where':_0x20f535,'include':[{'model':MessageCategory,'as':'MessageCategory','attributes':['id',_0x294e5f(-0x20a,-0x1e6,-0x20b,-0x21c)]}],'order':[['created_at',_0x2a3734(-0x9e,-0xdd,-0xd3,-0xc2)]],'limit':parseInt(limit),'offset':parseInt(_0x305a5f)});_0x4f3fda[_0x2a3734(-0x101,-0xd0,-0xf3,-0xed)]({'success':!![],'data':_0x1affd8,'pagination':{'page':parseInt(page),'limit':parseInt(limit),'total':_0x34f81c,'pages':Math[_0x294e5f(-0x1e6,-0x1db,-0x1cc,-0x1cd)](_0x34f81c/limit)}});}catch(_0x5cc233){if(_0x2a3734(-0xb4,-0xd5,-0xca,-0xd2)!==_0x2a3734(-0xea,-0xe8,-0xd0,-0xd2))return _0x53f0d9[_0x294e5f(-0x1e5,-0x1d5,-0x1f1,-0x202)](-0xe9c+-0x5*0x4fd+-0x291d*-0x1)[_0x294e5f(-0x20d,-0x232,-0x228,-0x214)]({'success':![],'message':_0x294e5f(-0x1f5,-0x1e9,-0x1f4,-0x20d)});else console['error'](_0x2a3734(-0xff,-0x109,-0xd0,-0xeb),_0x5cc233),_0x4f3fda[_0x294e5f(-0x1e5,-0x1ca,-0x1c2,-0x1ce)](-0x1*0x19d6+-0x67*-0x1f+0xf51)[_0x294e5f(-0x20d,-0x1f6,-0x1e8,-0x212)]({'success':![],'message':_0x294e5f(-0x216,-0x235,-0x22c,-0x20d)});}}),router[_0x_0x5c8c5f(-0x11e,-0x121,-0x13e,-0x142)](_0x_0x316939(0x2f2,0x2e3,0x2d5,0x2f7),authenticateToken,async(_0x311ca1,_0x588c68)=>{function _0x4c3777(_0x51cc8c,_0x450a0f,_0xc1725,_0x17cff1){return _0x_0x5c8c5f(_0x51cc8c-0x13e,_0x450a0f-0x103,_0x17cff1-0x198,_0x51cc8c);}function _0x75eb81(_0x2d904e,_0x3a2361,_0x4f01e8,_0x5a5b9a){return _0x_0x5c8c5f(_0x2d904e-0x196,_0x3a2361-0x2b,_0x4f01e8-0x325,_0x5a5b9a);}try{if('BsOal'===_0x75eb81(0x1e8,0x212,0x1ef,0x1e0)){const _0x31420e=_0x59953d['apply'](_0x3bdcf5,arguments);return _0xc3c462=null,_0x31420e;}else{const {id:_0x2a4fc6}=_0x311ca1[_0x4c3777(0x73,0x4a,0x5f,0x59)],_0xc1409d=await Message[_0x75eb81(0x1e3,0x208,0x1fa,0x203)](_0x2a4fc6,{'include':[{'model':MessageCategory,'as':_0x75eb81(0x230,0x204,0x224,0x220),'attributes':['id','name']}]});if(!_0xc1409d)return _0x588c68[_0x4c3777(0x93,0x6e,0x6d,0x8e)](0x1f3f+0x195c+-0x3707)['json']({'success':![],'message':_0x75eb81(0x201,0x1de,0x203,0x21c)});_0x588c68[_0x75eb81(0x1e6,0x1e7,0x1f3,0x1e9)]({'success':!![],'data':_0xc1409d});}}catch(_0x319950){console[_0x75eb81(0x24b,0x247,0x22c,0x250)](_0x75eb81(0x20f,0x1f9,0x205,0x219),_0x319950),_0x588c68[_0x75eb81(0x238,0x1f7,0x21b,0x222)](0x1e9*-0x4+0x14f6*-0x1+0x1e8e)[_0x4c3777(0x83,0x4c,0x49,0x66)]({'success':![],'message':_0x4c3777(0x6c,0x4e,0x40,0x64)});}}),router[_0x_0x316939(0x2a6,0x2be,0x29f,0x2cd)]('/',async(_0x5e6364,_0x269998)=>{function _0x375eba(_0x31664d,_0x1d28f4,_0x4c35be,_0x222f84){return _0x_0x5c8c5f(_0x31664d-0x26,_0x1d28f4-0x173,_0x4c35be-0x24f,_0x31664d);}const _0x3117c5=await sequelize[_0x53b990(-0xd2,-0xf7,-0xad,-0xf3)]();function _0x53b990(_0x52d1ff,_0x532c76,_0x493a44,_0x198bfb){return _0x_0x5c8c5f(_0x52d1ff-0x72,_0x532c76-0x1ea,_0x52d1ff-0x33,_0x198bfb);}try{const {name:_0x50f68f,contact:_0x278702,category_id:_0x2a221f,content:_0x4c4104,attachments:_0x151724,captcha:_0x15a12f}=_0x5e6364[_0x375eba(0x150,0x137,0x157,0x174)],_0x275cc7=getClientIP(_0x5e6364),_0x1b782d=_0x5e6364[_0x53b990(-0x10b,-0xf2,-0x11e,-0xe8)](_0x53b990(-0xd1,-0xde,-0xf0,-0xe1));if(!_0x50f68f||!_0x278702||!_0x4c4104)return _0x269998[_0x53b990(-0xd7,-0xba,-0xee,-0xdc)](0xdf0+-0x1e68+-0x4*-0x482)[_0x375eba(0x11e,0x13c,0x11d,0x136)]({'success':![],'message':'姓名、联系方式和内容不能为空'});if(!_0x15a12f||!_0x15a12f['id']||!_0x15a12f[_0x53b990(-0xd5,-0xe1,-0xca,-0xc2)])return _0x269998[_0x375eba(0x160,0x12a,0x145,0x15b)](0xbd8*0x3+-0x4*-0x824+-0x851*0x8)[_0x375eba(0x10c,0x128,0x11d,0x13f)]({'success':![],'message':_0x53b990(-0xe0,-0xf2,-0xcc,-0xd2)});if(!validateCaptcha(_0x15a12f['id'],_0x15a12f[_0x375eba(0x14a,0x13f,0x147,0x155)]))return _0x269998['status'](0x3*0x9ad+0x1c12+0x1283*-0x3)[_0x53b990(-0xff,-0xf8,-0x100,-0xec)]({'success':![],'message':'验证码错误或已过期'});const _0x595b00=await checkIPLimit(_0x275cc7);if(!_0x595b00['allowed'])return _0x53b990(-0xcd,-0xd2,-0xc0,-0xe4)!==_0x375eba(0x13b,0x12c,0x14f,0x13c)?_0x37b07f[_0x53b990(-0xd7,-0xd2,-0xe6,-0xc2)](-0x5fc*0x5+-0x1bf6+0x56*0xb1)[_0x53b990(-0xff,-0xeb,-0x10f,-0xfb)]({'success':![],'message':_0x53b990(-0xef,-0xde,-0xd4,-0x104)}):_0x269998[_0x375eba(0x169,0x143,0x145,0x159)](-0x58+-0x1*-0x329+-0x124)[_0x375eba(0x12e,0x10a,0x11d,0x11d)]({'success':![],'message':_0x595b00['message']});const _0xa3cd6f=await Message[_0x53b990(-0x104,-0x125,-0xf7,-0x114)]({'name':_0x50f68f,'contact':_0x278702,'category_id':_0x2a221f||null,'content':_0x4c4104,'attachments':_0x151724?JSON[_0x375eba(0x136,0x12f,0x122,0x130)](_0x151724):null,'ip_address':_0x275cc7,'user_agent':_0x1b782d,'status':_0x53b990(-0xf2,-0x110,-0x105,-0xfe)},{'transaction':_0x3117c5});await recordIPSubmission(_0x275cc7);if(sendMessageNotification){if(_0x375eba(0x10f,0x112,0x12b,0x111)!=='aKdpJ')return _0x5cf4a3['status'](-0xfb4+-0x17*0x3b+0x1695)['json']({'success':![],'message':_0x53b990(-0xef,-0xf7,-0x112,-0xf9)});else{const _0x1ed00e=_0x2a221f?await getCategoryName(_0x2a221f):_0x375eba(0x112,0x102,0x115,0x137);sendMessageNotification({..._0xa3cd6f['toJSON'](),'created_at':_0xa3cd6f[_0x53b990(-0xcf,-0xc1,-0xd3,-0xb8)]},_0x1ed00e)[_0x53b990(-0xf5,-0xd9,-0xe8,-0x113)](_0x1ad9fb=>{function _0x4fbb1b(_0x5550a4,_0x3acb9a,_0xb45c68,_0x11d091){return _0x375eba(_0x5550a4,_0x3acb9a-0x2c,_0x3acb9a-0xa2,_0x11d091-0x53);}function _0x51ca9c(_0x4eef85,_0x3de3b1,_0x3846f4,_0x8ad65f){return _0x53b990(_0x4eef85-0x273,_0x3de3b1-0x1e4,_0x3846f4-0x1b0,_0x3846f4);}console[_0x51ca9c(0x1ad,0x197,0x194,0x1bd)](_0x4fbb1b(0x1d4,0x1f3,0x1e3,0x1ee),_0x1ad9fb);});}}await _0x3117c5['commit'](),_0x269998[_0x53b990(-0xd7,-0xce,-0xce,-0xc9)](0x1a3c*-0x1+0xd5*-0x21+0x367a)[_0x375eba(0x139,0x123,0x11d,0xf9)]({'success':!![],'message':_0x375eba(0x112,0x135,0x126,0x128),'data':{'id':_0xa3cd6f['id']}});}catch(_0x5ccbd9){await _0x3117c5[_0x375eba(0x141,0x166,0x143,0x121)](),console['error'](_0x53b990(-0x102,-0xfb,-0x118,-0x125),_0x5ccbd9),_0x269998[_0x375eba(0x159,0x160,0x145,0x13e)](0x2246+-0x1308+-0xd4a*0x1)[_0x375eba(0x104,0x120,0x11d,0x141)]({'success':![],'message':_0x375eba(0x122,0x138,0x140,0x159)});}}),router[_0x_0x5c8c5f(-0x118,-0x106,-0x121,-0x102)]('/:id/status',authenticateToken,async(_0x2770fe,_0x5428d9)=>{function _0x34fb2f(_0x56f88b,_0x60dec4,_0x27486e,_0x28e776){return _0x_0x316939(_0x56f88b-0x1c,_0x28e776- -0x15,_0x56f88b,_0x28e776-0x1f1);}function _0x22eec8(_0x14073b,_0xf2fef7,_0x15a7de,_0x382c20){return _0x_0x5c8c5f(_0x14073b-0x108,_0xf2fef7-0x10b,_0x15a7de-0x2b9,_0x14073b);}try{const {id:_0x498f2d}=_0x2770fe['params'],{status:_0x1a5462}=_0x2770fe[_0x22eec8(0x1bb,0x1e0,0x1c1,0x1d8)];if(![_0x34fb2f(0x2b2,0x285,0x2b5,0x2a0),_0x34fb2f(0x2de,0x2ae,0x2ca,0x2c9),'replied']['includes'](_0x1a5462))return _0x5428d9['status'](0xd*0x154+0x1*-0x63a+0x4bd*-0x2)[_0x34fb2f(0x271,0x284,0x27a,0x293)]({'success':![],'message':'状态值无效'});const _0x503644=await Message[_0x22eec8(0x16e,0x175,0x18e,0x196)](_0x498f2d);if(!_0x503644){if(_0x22eec8(0x189,0x197,0x19e,0x188)==='bzzWY')return _0x5428d9['status'](-0x2eb*-0x5+0x1b20+0x1*-0x2823)['json']({'success':![],'message':'留言不存在'});else console[_0x22eec8(0x1d5,0x1d0,0x1c0,0x1e5)](_0x34fb2f(0x2b6,0x2bf,0x2a0,0x2a5),_0x1d9613),_0x4281fe[_0x22eec8(0x18e,0x1d1,0x1af,0x1b8)](-0x1159+0x1*-0x482+0x17cf)['json']({'success':![],'message':_0x34fb2f(0x292,0x2ac,0x2a9,0x291)});}_0x503644[_0x34fb2f(0x2bf,0x298,0x2d2,0x2bb)]=_0x1a5462,await _0x503644[_0x34fb2f(0x28d,0x281,0x292,0x294)](),_0x5428d9[_0x34fb2f(0x2b8,0x2a6,0x2af,0x293)]({'success':!![],'message':_0x34fb2f(0x294,0x28c,0x2ad,0x289),'data':_0x503644});}catch(_0x52e7a6){console['error'](_0x22eec8(0x19e,0x16c,0x180,0x195),_0x52e7a6),_0x5428d9[_0x34fb2f(0x2ab,0x2c1,0x2b6,0x2bb)](-0x7*-0x3ad+0x10*-0x151+-0x2b7)[_0x34fb2f(0x26f,0x288,0x280,0x293)]({'success':![],'message':'更新留言状态失败'});}}),router['delete'](_0x_0x316939(0x2df,0x2e3,0x2c1,0x2d5),authenticateToken,async(_0x18e1d4,_0x2ce10f)=>{function _0x479437(_0x1eb143,_0x558b0e,_0x132009,_0x3a1558){return _0x_0x316939(_0x1eb143-0x12a,_0x132009- -0x2c5,_0x3a1558,_0x3a1558-0x6);}function _0xd8f2fd(_0x30b966,_0x3e6b48,_0x21b035,_0x27f273){return _0x_0x5c8c5f(_0x30b966-0x6a,_0x3e6b48-0xb6,_0x30b966- -0x185,_0x21b035);}try{if(_0x479437(0xa,0x2a,0x16,-0x9)!==_0xd8f2fd(-0x27f,-0x287,-0x280,-0x295)){const {id:_0x14ed74}=_0x18e1d4[_0x479437(-0x42,-0x32,-0x2a,-0x3d)],_0x10f351=await Message[_0x479437(-0x9,-0x12,-0x16,-0x29)](_0x14ed74);if(!_0x10f351)return _0x2ce10f[_0xd8f2fd(-0x28f,-0x291,-0x273,-0x270)](-0x4*-0x1c9+0x5*0x181+-0xd15)['json']({'success':![],'message':_0xd8f2fd(-0x2a7,-0x299,-0x2b8,-0x292)});await _0x10f351['destroy'](),_0x2ce10f['json']({'success':!![],'message':_0xd8f2fd(-0x295,-0x27a,-0x28a,-0x2b7)});}else console[_0x479437(0xe,0x6,0x1c,0x12)](_0x479437(-0x1a,-0x15,-0x1b,-0x3e),_0x269637),_0x2e1ab2[_0x479437(0x1,0xe,0xb,-0x8)](-0x1*0x2701+-0xc80+0x3575)['json']({'success':![],'message':_0xd8f2fd(-0x2c0,-0x2c0,-0x2b8,-0x2a9)});}catch(_0x57e62c){console[_0x479437(0x24,0x16,0x1c,0x39)](_0x479437(-0x24,-0x18,-0xa,-0x2),_0x57e62c),_0x2ce10f[_0xd8f2fd(-0x28f,-0x27b,-0x26c,-0x28a)](0xa*-0x212+0xf21+-0x29*-0x2f)[_0x479437(-0x32,-0x5,-0x1d,0x0)]({'success':![],'message':_0x479437(0x34,0x2b,0xf,-0x6)});}}),module[_0x_0x5c8c5f(-0x136,-0x11a,-0x114,-0x132)]=router;