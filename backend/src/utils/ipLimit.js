(function(_0x42d88f,_0x322059){function _0xfb1155(_0x57ee56,_0x3b5469,_0x2e824a,_0xd30116){return _0x_0x1010(_0x2e824a-0x2f1,_0x3b5469);}function _0x47dd03(_0x870a86,_0x46424e,_0xabbaa,_0x4d06d7){return _0x_0x1010(_0x870a86-0x131,_0xabbaa);}const _0x84309d=_0x42d88f();while(!![]){try{const _0x5af817=parseInt(_0x47dd03(0x1e9,0x1fa,0x1f5,0x1ef))/(0x14*0x1d3+-0xd81*0x1+-0x16fa)*(parseInt(_0xfb1155(0x3bd,0x395,0x3aa,0x3be))/(0x2*0x41b+0x92*0x1c+-0x4*0x60b))+-parseInt(_0x47dd03(0x1e2,0x1d0,0x1e5,0x1d3))/(-0x1761+-0x157d+0x2ce1)+-parseInt(_0xfb1155(0x3b0,0x3cf,0x3bb,0x3c7))/(0x2289+-0x3de+-0x1ea7*0x1)+-parseInt(_0xfb1155(0x3be,0x3b3,0x3b5,0x3a1))/(-0x199f*0x1+0x1*-0xe1d+-0x27c1*-0x1)+-parseInt(_0xfb1155(0x3bf,0x3bb,0x3c3,0x3cf))/(-0xe73+0x26cc+-0x1853)*(parseInt(_0x47dd03(0x1f0,0x1e4,0x1f7,0x1dd))/(-0x324+-0x2*0x45+0x3b5))+parseInt(_0x47dd03(0x1e0,0x1e7,0x1e9,0x1f1))/(-0x2*-0x113c+0xf11+-0x3181)*(parseInt(_0xfb1155(0x3ac,0x3a8,0x39c,0x393))/(0x185*-0x1+-0x19*-0x3a+0x2*-0x20e))+-parseInt(_0x47dd03(0x1ef,0x200,0x1fc,0x1e5))/(0x1ccf+0x16a8+-0x1*0x336d)*(-parseInt(_0xfb1155(0x3b9,0x3c8,0x3c1,0x3c0))/(0x1164+0x1*0xae+0x39b*-0x5));if(_0x5af817===_0x322059)break;else _0x84309d['push'](_0x84309d['shift']());}catch(_0x593ac2){_0x84309d['push'](_0x84309d['shift']());}}}(_0x_0xd823,0xb7c85*0x1+0xc98d7+-0xb*0x10f33));function _0x_0x91aba9(_0x3bf200,_0x40f3f3,_0x254acc,_0x2a526e){return _0x_0x1010(_0x3bf200-0x335,_0x254acc);}const _0x_0x132597=(function(){let _0x3bb999=!![];return function(_0x2d426e,_0x24b021){const _0x312952=_0x3bb999?function(){function _0x45ea27(_0x473e2a,_0x54565b,_0x19447a,_0x4ff17e){return _0x_0x1010(_0x54565b- -0x15a,_0x4ff17e);}function _0x41816e(_0x336f57,_0xa91ef5,_0x1b64b0,_0x58fbb3){return _0x_0x1010(_0x1b64b0- -0x38,_0x58fbb3);}if(_0x41816e(0x68,0x79,0x7b,0x69)!==_0x41816e(0x81,0x77,0x75,0x67)){if(_0x24b021){const _0x65398d=_0x24b021['apply'](_0x2d426e,arguments);return _0x24b021=null,_0x65398d;}}else return console[_0x45ea27(-0x8a,-0x97,-0x9a,-0x8e)](_0x45ea27(-0xb6,-0xb0,-0xb2,-0xb5)),0x1f32+-0x1259+0x1*-0xcd8;}:function(){};return _0x3bb999=![],_0x312952;};}()),_0x_0x50e32b=_0x_0x132597(this,function(){function _0x5e15ff(_0x30160b,_0x27c654,_0x4d2342,_0x2828a2){return _0x_0x1010(_0x30160b-0x242,_0x27c654);}function _0x4ecb21(_0x148553,_0x37382f,_0x328642,_0x282fca){return _0x_0x1010(_0x37382f-0x14b,_0x148553);}return _0x_0x50e32b[_0x4ecb21(0x204,0x1fd,0x1f6,0x1fc)]()[_0x4ecb21(0x21f,0x218,0x21c,0x227)](_0x5e15ff(0x313,0x311,0x305,0x312))[_0x5e15ff(0x2f4,0x2f3,0x2e1,0x2fb)]()[_0x4ecb21(0x1fa,0x207,0x215,0x1fb)](_0x_0x50e32b)['search']('(((.+)+)+)+$');});_0x_0x50e32b();function _0x_0xd823(){const _0x46c544=['mu9nzKX6Bq','mJGZnduWnM1YB3rYtG','CxvLCNK','iowWJ+AxTUwqJUwgJEIVLq','y29UC3rYDwn0B3i','5AsP5yAf5y+Q6io95O+q5lQK5lIa5QYH55wz6kIa77Ym6k+3ia','nty4mJiWugryqwHj','n0XhwNDhtG','BgfZDf9ZDwjTAxrFyxq','yLjZqwW','zxHWB3j0CW','Bg9N','odiYndGWBeD2vM1s','zxjYB3i','DMfSDwu','lt4G6kEJ5P6q5zcooG','iowKQEwqJUwgJEIVLq','y2vPBa','ntK0odCYmgX4s1jjzG','yxbWBhK','tNfRBxi','C2vHCMnO','w0Lq6zMq5yI2xsdORR7NVA7KUlOW5AsP77Ym5lIn6zMq5yI25O+q5lQK','6zMq5yI25AsP5PwWoG','nta2B1Pur0Lv','kcGOlISPkYKRksSK','otqZmJK3oe5OrwDXEG','BgvUz3rO','w0Lq6zMq5yI2xsdMNkRMIB7LIldORR7NVA7VViZKVB/NLkJPU5JORQtLGlW6idhLPkK','mZz6Cu9nvve','ELP2CNG','y3vKseu','uMzdwei','nJa5mZm2tNnuue9e','cIaGicaGieLou0vsvcbjtLrpig1LC3nHz2vFAxbFCMvJB3jKCYaOAxbFywrKCMvZCYWGBgfZDf9ZDwjTAxrFyxqPcIaGicaGifzbtfvfuYaOpYWGq1vsuKvovf9usu1fu1rbtvaPcIaGicaGie9oiervueXjq0fursblrvKGvvbeqvrfigXHC3rFC3vIBwL0x2f0id0Gq1vsuKvovf9usu1fu1rbtvakicaGia','odKXnZC3yvrRBfPY','Dg9tDhjPBMC','tuvzDMq','5Qoa5P+LsvdPMzdLIlBLPlhOTku6','B1n5EeK','BwvZC2fNzuLWtgLTAxreyxLZ','mJtLSi/ML7BLHOxLJ6ROG73MJ5dKUQtKUidMRkhNLzNOQidVViZOR7CG'];_0x_0xd823=function(){return _0x46c544;};return _0x_0xd823();}const {sequelize}=require('../config/database'),Setting=require('../models/Setting');async function getIpLimitDays(){function _0x42a983(_0x4ddd4f,_0x45c25c,_0x9e98d2,_0x53eed5){return _0x_0x1010(_0x53eed5-0x11d,_0x9e98d2);}function _0x6e33f6(_0x430125,_0x1c2c68,_0x2984bc,_0x8d0e63){return _0x_0x1010(_0x8d0e63-0x1d9,_0x430125);}try{if(_0x6e33f6(0x294,0x296,0x29f,0x29a)!==_0x42a983(0x1c0,0x1c3,0x1be,0x1cb)){const _0x4b5dde=await Setting['findOne']({'where':{'key':_0x42a983(0x1cd,0x1c5,0x1e0,0x1d3)}});if(!_0x4b5dde||!_0x4b5dde[_0x6e33f6(0x2ab,0x2ae,0x295,0x29f)])return console[_0x6e33f6(0x2a0,0x2ad,0x291,0x29c)](_0x42a983(0x1cd,0x1b4,0x1c1,0x1c7)),-0xa07+-0x466*-0x7+-0x14c2;const _0x51ed64=parseInt(_0x4b5dde[_0x6e33f6(0x28a,0x2b0,0x2ae,0x29f)]);return console[_0x6e33f6(0x290,0x2a6,0x2a2,0x29c)]('[IP限制]\x20从数据库读取的设置值:',_0x4b5dde[_0x6e33f6(0x2a9,0x29a,0x290,0x29f)],_0x6e33f6(0x2a2,0x2b0,0x2a2,0x2a0),_0x51ed64),isNaN(_0x51ed64)?0x17e7+-0x6a0+-0x1146*0x1:_0x51ed64;}else{const _0x2719a6=_0x26abff?function(){function _0x1b95c8(_0xb773ed,_0xdd0e47,_0x7947e7,_0x45cc39){return _0x42a983(_0xb773ed-0x58,_0xdd0e47-0xe9,_0x45cc39,_0xdd0e47- -0x3d9);}if(_0xaf77b2){const _0x255b00=_0x12c94c[_0x1b95c8(-0x1f6,-0x1f1,-0x1fa,-0x1f1)](_0x5a0633,arguments);return _0x1b32da=null,_0x255b00;}}:function(){};return _0x4c3df=![],_0x2719a6;}}catch(_0x10d8e1){return console[_0x6e33f6(0x2b0,0x28e,0x2ab,0x29e)]('获取IP限制天数设置失败:',_0x10d8e1),-0xe95+-0x1*-0x907+0x58f;}}async function checkIPLimit(_0x5e1e4c){function _0x5c276b(_0x1887a2,_0x1d0e8c,_0x441a6d,_0xdecd28){return _0x_0x1010(_0xdecd28- -0x2e,_0x441a6d);}function _0x1d50c3(_0x26ac59,_0x5c3f9c,_0x47dda7,_0x4e1bbe){return _0x_0x1010(_0x26ac59- -0x342,_0x4e1bbe);}try{const _0x4b82e3=await getIpLimitDays();console[_0x5c276b(0x8a,0xa4,0x94,0x95)]('[IP限制]\x20检查IP:',_0x5e1e4c,_0x1d50c3(-0x273,-0x279,-0x273,-0x26d),_0x4b82e3);if(_0x4b82e3===-0x248a+0x2648+-0x1be)return console[_0x5c276b(0x98,0x8a,0x92,0x95)](_0x1d50c3(-0x274,-0x271,-0x26d,-0x271)),{'allowed':!![]};const [_0x57787a]=await sequelize['query']('\x0a\x20\x20\x20\x20\x20\x20SELECT\x20last_submit_at\x0a\x20\x20\x20\x20\x20\x20FROM\x20message_ip_records\x0a\x20\x20\x20\x20\x20\x20WHERE\x20ip_address\x20=\x20?\x0a\x20\x20\x20\x20',{'replacements':[_0x5e1e4c]});if(_0x57787a[_0x5c276b(0xad,0x9a,0xa2,0xa5)]===0x5b3+0x1*0x1a17+0xd*-0x272)return{'allowed':!![]};const _0x375698=new Date(_0x57787a[0x2*0x1326+0x874*0x1+-0x2ec0][_0x5c276b(0x99,0x9d,0xa2,0x92)]),_0x1d5986=new Date(),_0x2f9bbd=(_0x1d5986-_0x375698)/((-0x2e*-0x36+0x1f36+-0x2502*0x1)*(0x19cd+-0x2235*0x1+-0xe*-0x9e)*(0x227e*0x1+-0x1274*0x2+0x2a6)),_0xeee14d=_0x4b82e3*(-0xda*0x1f+0x697+0x13e7);if(_0x2f9bbd<_0xeee14d){const _0x345422=Math[_0x1d50c3(-0x279,-0x27f,-0x279,-0x27a)](_0xeee14d-_0x2f9bbd),_0x509db0=Math['ceil'](_0x345422/(-0x1*0x20e7+-0xbf*0x19+0x33a6));let _0x159953;if(_0x4b82e3===0x1*-0xf4+0x155*-0x1+0x24a){if('gsVDt'==='gsVDt')_0x159953='24小时内只能提交一次留言，请\x20'+_0x345422+_0x1d50c3(-0x287,-0x27a,-0x291,-0x275);else return{'allowed':!![]};}else{if(_0x5c276b(0x7b,0x91,0x7e,0x87)==='oSyxI')_0x159953=_0x4b82e3+_0x1d50c3(-0x285,-0x289,-0x28c,-0x299)+_0x509db0+_0x1d50c3(-0x27a,-0x283,-0x26f,-0x27d);else{const _0x57e4ab=_0x1553e3[_0x1d50c3(-0x279,-0x270,-0x275,-0x27a)](_0x12c761-_0x2ccb34),_0x48f34b=_0x4566a6['ceil'](_0x57e4ab/(-0x1*-0x6f8+0x192f+-0x200f));let _0x145f84;return _0x5d00db===-0x1bac+-0x33*-0x2f+0x1250?_0x145f84=_0x5c276b(0x77,0x95,0x81,0x89)+_0x57e4ab+_0x1d50c3(-0x287,-0x289,-0x293,-0x29a):_0x145f84=_0x46d00+'天内只能提交一次留言，请\x20'+_0x48f34b+_0x1d50c3(-0x27a,-0x285,-0x280,-0x28c),{'allowed':![],'message':_0x145f84};}}return{'allowed':![],'message':_0x159953};}return{'allowed':!![]};}catch(_0x2a0fc5){if('zZvrx'!==_0x1d50c3(-0x296,-0x286,-0x29b,-0x29d))_0xb2218f='24小时内只能提交一次留言，请\x20'+_0xb32d0e+_0x1d50c3(-0x287,-0x277,-0x27e,-0x278);else return console[_0x5c276b(0x87,0xa4,0xa0,0x97)](_0x5c276b(0x83,0x95,0x75,0x86),_0x2a0fc5),{'allowed':!![]};}}async function recordIPSubmission(_0x3bae0e){function _0x28ac05(_0x48b04c,_0x5d752b,_0x1edbcf,_0x1be445){return _0x_0x1010(_0x48b04c-0x9f,_0x1be445);}function _0x2d8f02(_0x374a4b,_0x34d638,_0x77b005,_0x2e318a){return _0x_0x1010(_0x2e318a-0xf,_0x374a4b);}try{if(_0x28ac05(0x16b,0x176,0x165,0x163)===_0x2d8f02(0xea,0xef,0xda,0xdb))await sequelize[_0x2d8f02(0xd9,0xd4,0xb8,0xc9)](_0x2d8f02(0xc2,0xb3,0xcf,0xbf),{'replacements':[_0x3bae0e]});else return console[_0x2d8f02(0xc5,0xc5,0xc4,0xd2)](_0x28ac05(0x16d,0x17d,0x180,0x177)),{'allowed':!![]};}catch(_0x4dfed6){}}function _0x_0x1010(_0x1f57bb,_0x2b48df){_0x1f57bb=_0x1f57bb-(0x10e*-0x20+-0x13ac+0x3616);const _0x404dc4=_0x_0xd823();let _0x4ce39c=_0x404dc4[_0x1f57bb];if(_0x_0x1010['zLaqcT']===undefined){var _0x43e6c6=function(_0x1e2f26){const _0x1276da='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x167f88='',_0x1f9def='',_0x5202f8=_0x167f88+_0x43e6c6;for(let _0x15f035=-0x19e9+0x8d6+0x1113,_0x55c387,_0x194bf5,_0x18a614=-0x519+0xe5*0xb+-0x2*0x25f;_0x194bf5=_0x1e2f26['charAt'](_0x18a614++);~_0x194bf5&&(_0x55c387=_0x15f035%(0x17c5*-0x1+-0x763+0x1f2c)?_0x55c387*(-0x26d4+-0x1e16+-0x1c6*-0x27)+_0x194bf5:_0x194bf5,_0x15f035++%(0xde*0x28+-0x10ca+0x2fb*-0x6))?_0x167f88+=_0x5202f8['charCodeAt'](_0x18a614+(0x758+-0xb*-0x290+-0x237e))-(0x513*-0x1+0x2052+0x3e3*-0x7)!==0x2141+-0x2478+0x1*0x337?String['fromCharCode'](-0x1*0xbec+-0x2*-0x9d+0xbb1&_0x55c387>>(-(0x1d38+0x3fc+-0x2132)*_0x15f035&-0x11ca*-0x1+0x2521+0x36e5*-0x1)):_0x15f035:-0x266e+0x28a+0x23e4){_0x194bf5=_0x1276da['indexOf'](_0x194bf5);}for(let _0x288c32=-0x39d*-0x5+0x1701+-0x1489*0x2,_0x4352e5=_0x167f88['length'];_0x288c32<_0x4352e5;_0x288c32++){_0x1f9def+='%'+('00'+_0x167f88['charCodeAt'](_0x288c32)['toString'](0x1b00+-0x146c+-0x684))['slice'](-(-0x1*-0x12ff+0x6f6+-0x19f3));}return decodeURIComponent(_0x1f9def);};_0x_0x1010['pFnQRY']=_0x43e6c6,_0x_0x1010['EqhIBU']={},_0x_0x1010['zLaqcT']=!![];}const _0x480512=_0x404dc4[0x1*-0x7ab+0x2159*-0x1+0x2904],_0x40081c=_0x1f57bb+_0x480512,_0x494c41=_0x_0x1010['EqhIBU'][_0x40081c];if(!_0x494c41){const _0x30b180=function(_0x237318){this['nlbqjh']=_0x237318,this['FKzRpC']=[0x5cf+0x1af+-0x77d,-0x1*0x2335+-0x641*0x6+-0x48bb*-0x1,0x7*0x97+0x2376+0x7eb*-0x5],this['XCiqmE']=function(){return'newState';},this['XRoSvJ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['XJonyN']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x30b180['prototype']['iuElPd']=function(){const _0x5543e7=new RegExp(this['XRoSvJ']+this['XJonyN']),_0x1a64bf=_0x5543e7['test'](this['XCiqmE']['toString']())?--this['FKzRpC'][0x3*-0xa91+0x1e0+0x1dd4]:--this['FKzRpC'][0x2006+0x5d9+0x23*-0x115];return this['ZtoHII'](_0x1a64bf);},_0x30b180['prototype']['ZtoHII']=function(_0x3e7103){if(!Boolean(~_0x3e7103))return _0x3e7103;return this['rnuefB'](this['nlbqjh']);},_0x30b180['prototype']['rnuefB']=function(_0x11b05a){for(let _0x1f670e=-0x1*-0x339+-0x11b0+0x7*0x211,_0x4cdcf9=this['FKzRpC']['length'];_0x1f670e<_0x4cdcf9;_0x1f670e++){this['FKzRpC']['push'](Math['round'](Math['random']())),_0x4cdcf9=this['FKzRpC']['length'];}return _0x11b05a(this['FKzRpC'][-0x3*-0xca1+-0x1*0x204f+-0x6*0xee]);},new _0x30b180(_0x_0x1010)['iuElPd'](),_0x4ce39c=_0x_0x1010['pFnQRY'](_0x4ce39c),_0x_0x1010['EqhIBU'][_0x40081c]=_0x4ce39c;}else _0x4ce39c=_0x494c41;return _0x4ce39c;}module[_0x_0x91aba9(0x3f7,0x405,0x3e9,0x3ef)]={'checkIPLimit':checkIPLimit,'recordIPSubmission':recordIPSubmission};