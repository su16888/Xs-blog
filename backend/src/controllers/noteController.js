(function(_0x74ba3a,_0x22a556){function _0x2be2b5(_0x1b5d26,_0x6188b2,_0x2ef87d,_0x26a4b1){return _0x_0x269f(_0x1b5d26- -0xa1,_0x26a4b1);}function _0x1cd053(_0x139fc0,_0x4a00ac,_0x1df8af,_0x4533f4){return _0x_0x269f(_0x4a00ac- -0x156,_0x139fc0);}const _0x1d71eb=_0x74ba3a();while(!![]){try{const _0x16dda0=-parseInt(_0x1cd053(0x86,0x4e,0x42,0x3a))/(0x7c7*0x5+0x24b4+-0x4b96)*(parseInt(_0x2be2b5(0x102,0x13a,0xe5,0x104))/(0x600*0x2+-0x14*0x44+-0x2*0x357))+parseInt(_0x1cd053(0x82,0x56,0x41,0x22))/(0x1e64*0x1+-0x12ee+-0x1*0xb73)+parseInt(_0x2be2b5(0xe6,0x85,0x96,0xea))/(-0x28b+0x18a8+-0x1619)*(parseInt(_0x1cd053(0x1e,-0x22,-0x37,0x29))/(-0x2681+0x1018+0x166e))+-parseInt(_0x2be2b5(0xe0,0x137,0x120,0xef))/(0xb3d+-0x613+-0x524)*(-parseInt(_0x2be2b5(0x56,0x4b,0x23,0x5c))/(-0xab3+-0x232f*-0x1+-0x1875))+-parseInt(_0x1cd053(0xe,-0x3a,-0x5a,-0x71))/(-0x92+-0x4ed*-0x2+-0x940)+parseInt(_0x1cd053(-0x31,-0x11,-0x14,-0x25))/(-0x179*-0x16+-0x1639+-0xa24)*(-parseInt(_0x1cd053(0x6,-0x26,0x21,-0x37))/(-0x87*-0x19+0xb*-0x1f9+-0x92*-0xf))+-parseInt(_0x1cd053(-0x9c,-0x5b,-0xe,-0xb5))/(-0x13bb+0xc54*0x1+0x772)*(-parseInt(_0x2be2b5(0x51,-0x4,0x3c,0x67))/(-0x194b*0x1+-0xebf+0x2816));if(_0x16dda0===_0x22a556)break;else _0x1d71eb['push'](_0x1d71eb['shift']());}catch(_0x46cd12){_0x1d71eb['push'](_0x1d71eb['shift']());}}}(_0x_0x2895,0xade9c+-0x96ce6*0x1+0x4ad05));function _0x_0x2895(){const _0x21df9e=['s2T2ELi','5PEG5Pwi55Qe56Yu6k6Wsuq','DwrAuwG','zxH0zxjUywXFBgLUAW','ywXSB3DLza','Dg9vChbLCKnHC2u','cIaGicaGifnftevdvaOGicaGicaGihqUBMfTzsWGDc5JB2XVCIWkicaGicaGicbdt1vovcHUDc5UB3rLx2LKksbHCYb1C2fNzv9JB3vUDaOGicaGicbguK9nihrHz3mGDaOGicaGicbmruzuiePpsu4GBM90zv90ywDZig50ie9oihqUAwqGpsbUDc50ywDFAwqkicaGicaGr1jpvvaGqLKGDc5PzaOGicaGicbpuKrfuIbcwsb1C2fNzv9JB3vUDcbervndlcb0lM5HBwuGqvndcIaGica','qwTVAxi','z2v0uhvIBgLJtM90zuj5swq','C3vTBwfYEq','yM9KEq','vMPltha','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqXmJOG5yEg5Ash5y+r6ycb5zon5BQu','z2v0qwrTAw5oB3rLrgLZA3m','owntEfvvDq','z0zNz2e','zMLYC3rbDhrLBxb0','CMvXDwLYzwq','zgvZDhjVEq','D3zMDwy','BM9Uzq','w2DLDfb1yMXPy05VDgvcEuLKxsdLVidLP4VLPitNKiBOR7FMSyiSigLKoG','C2HVD19PBL9SAxn0','572r55Uy5RE75yQG5OIq5yQF','AhbrzwW','y2f0zwDVCNLFAwq','cIaGicaGifnftevdvaOGicaGicaGihqUAwqSihqUBMfTzsWGDc5JB2XVCIWGDc5KzxnJCMLWDgLVBIWGDc5JyxrLz29YEsWGDc5JyxrLz29YEv9PzcWkicaGicaGicbdt1vovcHUDc5UB3rLx2LKksbHCYb1C2fNzv9JB3vUDaOGicaGicbguK9nihrHz3mGDaOGicaGicbmruzuiePpsu4GBM90zv90ywDZig50ie9oihqUAwqGpsbUDc50ywDFAwqkicaGicaGr1jpvvaGqLKGDc5PzaOGicaGicbpuKrfuIbcwsb1C2fNzv9JB3vUDcbervndlcb0lM5HBwuGqvndcIaGica','z2v0ugfZC3DVCMrbDhrLBxb0u3rHDhvZ','CMvXDwLYzxnqyxnZD29Yza','C3rYAw5N','DKL2BwK','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq3oIbUB3rLugfZC3DVCMtNSBVLNOS6','Dw5KzwzPBMvK','yxv0Ag9YAxPHDgLVBG','qMvHCMvYia','y29SB3i','BNvSBa','C2v0vgfNtgLZDa','Bw9KywW','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq0oIdNRjtORRdKUi3LRzJLNkG','uwXNDMm','C3rHy2S','lI4U','Aw5JBhvKzxm','zxjYB3i','qvnd','zK9rqwG','Cgf0Aa','CfrfDvu','zgvZyW','CgfNzq','sK1kq3C','cIaGicaGicaGq09vtLqOBNqUBM90zv9PzcKGyxmGDxnHz2vFy291BNqkicaGicaGrLjptsb0ywDZihqkicaGicaGtevgvcbkt0Loig5VDgvFDgfNCYbUDcbptIb0lMLKid0GBNqUDgfNx2LKcIaGicaGieDst1vqiejzihqUAwqkicaGicaGt1jerviGqLKGDxnHz2vFy291BNqGrevtqYWGDc5Uyw1LieftqWOGicaG','Dc5Uyw1Llcb0lMnVBg9Yla','rKr1t2W','w2DLDfb1yMXPy05VDgvcEuLKxsdMLBdMJA7LUPpMN6xOR6lPLjNOR686','C291CMnLx3vYBa','y291BNq','C3vIC3rYAw5N','y2f0zwDVCNK','tMvUvui','C3rHDhvZ','zMLUzefUzenVDw50qwXS','rK95quW','AxnbCNjHEq','revtqW','w2DLDfb1yMXPy05VDgvcEuLKxsdPLjNOR6/LOiBMOiG6','z2v0tM90zurPC2TZ','w2DLDfb1yMXPy05VDgvcEuLKxsbYzxeUCxvLCNK6','5PYQ5lIk5lYG5PAh5lU2','5Q2K56Yu6k6W6zYa6kAb5A+g56cb','56Yu6k6W5lIn5A2y5zYO','z2v0tM90zunHDgvNB3jPzxm','CLjbrKm','mte0mhLjAxHWvG','l2fKBwLU','56Yu6k6W5yIB5BU65OIq5yQF','C3bSAxq','cIaGicaGifnftevdvcaQiezst00GBM90zv9KAxnRCWOGicaGicbxsevsrsbUB3rLx2LKid0GpWOGicaGicbpuKrfuIbcwsbZB3j0x29YzgvYieftqYWGy3jLyxrLzf9HDcbbu0mkicaGia','DgfNtgLZDa','mtGWngLpuMLvwq','AwnVBG','vePVAwi','Dw5RBM93BG','z2v0uhvIBgLJtM90zvrHz1n0yxrZ','y29UC3rYDwn0B3i','CfLgrLm','A01MwMG','thP5Dwe','y2f0zwDVCNLjBMzV','wNPuEhe','BgvUz3rO','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq5ytOG6zYa6kAb5A+g56cb5l2g5PYQ5O+q5l6B','rLrgu0m','q1vdBLm','C291CMnLx3r5Cgu','BM90igzVDw5K','D2HLCMu','ALHHvK0','AxPcrwq','5PAh5lU25lIk5lYG5OIq5yQF','y2vPBa','5A+g56cb6zsz6k+V5QYH5PwW6l+h5AsA77Ym6k+3mEwWJ+AxTUwqJUMhJEIVLE+8Gq','yxbWBhK','BwvKAwfFDhLWzq','z2v0tM90zxm','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq5oIdLH4BLPiFOV5tLM57MLBdMJA4','v1Pqwxm','nZaYodzYy1nRDee','mLHLq2j1sq','u1vNsge','AgvHzgvYCW','CgfYyw1Z','CvrMANy','qwztsgC','cIaGicaGierftevursbguK9nig5VDgvFzgLZA3mkicaGicaGv0HfuKuGAwqGpsa/ieforcbUB3rLx2LKid0GpWOGicaG','zgvSzxrLtM90zurPC2S','mJi2mtfpuLvpDhy','uxvLCNLuExbLCW','DMvYAwz5tM90zvbHC3n3B3jK','C2v0','BgLTAxq','C3rHCNrZv2L0Aa','DgL0Bgu','5PEG5P2d6k6/6zEU5Q2K56Yu6k6W','u0vmrunu','DxbKyxrL','kcGOlISPkYKRksSK','CMvTywLUAw5N','Dg9ku09o','ntu3mZy0tMTvAuzk','z2v0rMLSzvvYBa','C2vHCMnO','ywrKtM90zurPC2S','cIaGicaGifvqrefursbUB3rLx2rPC2TZcIaGicaGifnfvcbKAxnRx25HBwuGpsa/lcb0AxrSzsa9id8SigzPBgvFC2L6zsa9id8Sigv4DhjHy3rFy29Kzsa9id8SigrVD25SB2fKx3vYBca9id8kicaGicaGv0HfuKuGAwqGpsa/ieforcbUB3rLx2LKid0GpWOGicaG','nZeYnK90BfjVzW','rg5zzKO','BwfW','Bg9N','mJK3DevMAwXS','AuvTywy','BM90zq','DwLVqxC','DhjPBq','ChvIBgLZAgvKx2f0','BwvKAwfFDxjSCW','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqXoIdOJRFLJ5zjroAiKowkNW','56Yu6k6W5PU05PAW5OIq5yQF','z2v0qwrTAw5oB3rLCW','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq1oIdMO4dMN6xLJ5hLUipNIRBMGieSigLZx3b1yMXPC2HLzdO','zMLUzefSBa','z2v0uhvIBgLJtM90zxm','wwrwC1i','5A+g56cb6zsz6k+V','DxbSB2fKtwvKAwe','z2v0uhvIBgLJtM90zurPC2TZ','z2v0qwrTAw5oB3rLqNLjza','CxvLCNK','z2v0qwrTAw5oB3rLvgfNu3rHDhm','Ec1MB3j3yxjKzwqTzM9Y','BMfTzq','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq2oIdMO4dMN6xLR4BNOihLRzFMRRu','Dg9tDhjPBMC','CKTiuge','z2v0','C29YDa','w2DLDfb1yMXPy05VDgvcEuLKxsdMJzxOJRFLIldPLjNOR686','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq4oIbOyxnqyxnZD29YzdO','DgjswLy','CZnvCMW','zMLUzej5ugS','zM91BMq','nJmYndy1nLDOtvjjvq','C291CMnLx3rLEhq','Bwf4','y29UDgvUDa','zxzby3i','zgvSzxrLtM90zq','572r55Uy5yIG6zMK5OIq5yQF','y3jLyxrLzf9HDa','AxnFCgLUBMvK','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqXmZOG5zon5BQu5y+r6ycb5A6m5OIq','C29YDf9VCMrLCG','BgLRzq','ANnVBG','zMLSzxm','BM93','y3jLyxrLtM90zq','CgfZC3DVCMq','zgvSzxrL','DxbKyxrLtM90zurPC2S','DxbKyxrLzf9HDa','nZa0mdu4me9QuK1NBa','DgfNCW','tur6ELm','AxnFChvIBgLZAgvK','nty2nxvNAffgBq','cIaGicaGifnftevdvaOGicaGicaGia','5PwW5O2U5BQt5P+L6k+I5AsX6lsL'];_0x_0x2895=function(){return _0x21df9e;};return _0x_0x2895();}function _0x_0x269f(_0xfe019b,_0x4ccdf2){_0xfe019b=_0xfe019b-(0x179a+0x6a6+-0x1d55);const _0x138f57=_0x_0x2895();let _0x2de766=_0x138f57[_0xfe019b];if(_0x_0x269f['ZJJqIJ']===undefined){var _0xe3d19=function(_0xe92817){const _0x1782e6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2f4529='',_0x3758ff='',_0x407e0b=_0x2f4529+_0xe3d19;for(let _0x3019f5=-0x5d2+0x2*-0x3b7+0xd40,_0x4afff0,_0x4dfe22,_0x1c1b56=0x2*-0xf95+0x4dc+-0x25*-0xb6;_0x4dfe22=_0xe92817['charAt'](_0x1c1b56++);~_0x4dfe22&&(_0x4afff0=_0x3019f5%(-0x918+0x5*-0x687+-0x1*-0x29bf)?_0x4afff0*(0x72*-0x51+0x88+-0x5f7*-0x6)+_0x4dfe22:_0x4dfe22,_0x3019f5++%(-0x55*0xf+0x1*0x21c7+-0x1cc8))?_0x2f4529+=_0x407e0b['charCodeAt'](_0x1c1b56+(-0x79*0x1+0x1398+-0x1315))-(0xa03+-0x2*0xa7d+0xb01)!==-0x617*0x1+-0x24dc+-0xf*-0x2dd?String['fromCharCode'](0x24*-0x47+0x2ea*-0x7+0x1f61&_0x4afff0>>(-(-0x3*-0x153+-0x31c+-0xdb)*_0x3019f5&0x18f5+0xb5a*0x2+-0x2fa3)):_0x3019f5:0x996*-0x2+0x1*-0x12b9+0x25e5){_0x4dfe22=_0x1782e6['indexOf'](_0x4dfe22);}for(let _0x674f0e=0x13b9+-0x234d*-0x1+-0x3706,_0x1805a8=_0x2f4529['length'];_0x674f0e<_0x1805a8;_0x674f0e++){_0x3758ff+='%'+('00'+_0x2f4529['charCodeAt'](_0x674f0e)['toString'](-0x989+-0x6d8*-0x1+0x2c1))['slice'](-(0x1*-0xff8+0x227*-0xd+0x2bf5));}return decodeURIComponent(_0x3758ff);};_0x_0x269f['eCedYM']=_0xe3d19,_0x_0x269f['XByqwe']={},_0x_0x269f['ZJJqIJ']=!![];}const _0x50c489=_0x138f57[-0x22*0x9a+-0x1ae9+0x2f5d],_0x27ac57=_0xfe019b+_0x50c489,_0x52b45d=_0x_0x269f['XByqwe'][_0x27ac57];if(!_0x52b45d){const _0x3f5b6e=function(_0x48364e){this['nIAvyk']=_0x48364e,this['JKYMeH']=[-0x3*0xb5f+-0x692*-0x1+0x1b8c,0x5*0x92+0x1289+-0x1563,0xa82+-0xfcd+-0x1*-0x54b],this['eULSfp']=function(){return'newState';},this['AXNYxR']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['rAeOSw']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3f5b6e['prototype']['VjIFUi']=function(){const _0x42428d=new RegExp(this['AXNYxR']+this['rAeOSw']),_0x513fa7=_0x42428d['test'](this['eULSfp']['toString']())?--this['JKYMeH'][-0xf66+0x8d3+0x694]:--this['JKYMeH'][0x1771+-0x1606+-0x16b];return this['BcFLMZ'](_0x513fa7);},_0x3f5b6e['prototype']['BcFLMZ']=function(_0x394645){if(!Boolean(~_0x394645))return _0x394645;return this['GTWUDW'](this['nIAvyk']);},_0x3f5b6e['prototype']['GTWUDW']=function(_0xaccc6e){for(let _0x515352=-0xde2+0x11a2*0x2+-0x1562,_0x5504c7=this['JKYMeH']['length'];_0x515352<_0x5504c7;_0x515352++){this['JKYMeH']['push'](Math['round'](Math['random']())),_0x5504c7=this['JKYMeH']['length'];}return _0xaccc6e(this['JKYMeH'][-0x587+0x1d1e+0x63*-0x3d]);},new _0x3f5b6e(_0x_0x269f)['VjIFUi'](),_0x2de766=_0x_0x269f['eCedYM'](_0x2de766),_0x_0x269f['XByqwe'][_0x27ac57]=_0x2de766;}else _0x2de766=_0x52b45d;return _0x2de766;}const _0x_0xff85e=(function(){let _0x68bf73=!![];return function(_0x2d2165,_0x488a18){const _0x145487=_0x68bf73?function(){function _0x3069ac(_0x32f3c4,_0x25993b,_0x40255b,_0x30c0af){return _0x_0x269f(_0x40255b- -0x3a8,_0x32f3c4);}function _0xde2a56(_0x2b5d5c,_0x41ca8a,_0x5af864,_0x4f382f){return _0x_0x269f(_0x5af864-0x331,_0x41ca8a);}if(_0x488a18){if(_0xde2a56(0x45c,0x46f,0x47b,0x41f)!==_0xde2a56(0x4ad,0x469,0x47b,0x451))_0x56758f(_0x36f26d);else{const _0x2e834d=_0x488a18[_0x3069ac(-0x221,-0x201,-0x20a,-0x21f)](_0x2d2165,arguments);return _0x488a18=null,_0x2e834d;}}}:function(){};return _0x68bf73=![],_0x145487;};}()),_0x_0x2b24bb=_0x_0xff85e(this,function(){function _0x5041bf(_0x4e0be1,_0x4969e6,_0x4651d2,_0x30144f){return _0x_0x269f(_0x30144f- -0x18c,_0x4e0be1);}function _0x1db2b5(_0x35cb1d,_0xae4274,_0x2fbdcb,_0xc7eb77){return _0x_0x269f(_0xae4274-0x6f,_0x2fbdcb);}return _0x_0x2b24bb[_0x1db2b5(0x1d1,0x181,0x143,0x174)]()[_0x1db2b5(0x12f,0x163,0x165,0x115)]('(((.+)+)+)+$')[_0x1db2b5(0x1a5,0x181,0x1c5,0x17c)]()[_0x1db2b5(0x1e5,0x1fb,0x234,0x1a0)](_0x_0x2b24bb)[_0x1db2b5(0x12a,0x163,0x1be,0x172)]('(((.+)+)+)+$');});_0x_0x2b24bb();const {Note,Tag,Category,NoteTag}=require('../models/associations'),{Op}=require('sequelize'),config=require('../config/config'),passwordAttempts=new Map(),MAX_ATTEMPTS=0x7f*-0x1+0x3b2+-0x330,LOCKOUT_DURATION=(0x1253+0x108+0x37*-0x59)*(-0x6*-0x4cc+0x1d16+0x3*-0x1336)*(-0x263e+0x1490+0x1596),getClientIP=_0x3d4847=>_0x3d4847[_0x_0x26c62a(-0x91,-0x2e,-0x32,-0x38)][_0x_0x37731b(0x28b,0x2bd,0x2b3,0x2cc)]?.[_0x_0x26c62a(-0xb3,-0xa5,-0xf2,-0x116)](',')[0x12af+0x1c9+-0x1478]?.[_0x_0x37731b(0x2dd,0x27c,0x2a3,0x29c)]()||_0x3d4847['ip']||_0x_0x37731b(0x330,0x2e1,0x32e,0x2e9),checkPasswordAttempts=_0x24bf58=>{const _0x397264=passwordAttempts[_0x13298f(-0x1cb,-0x249,-0x21d,-0x26c)](_0x24bf58);if(!_0x397264||Date[_0x216c4b(-0x25b,-0x24a,-0x1f5,-0x21f)]()-_0x397264[_0x216c4b(-0x218,-0x22d,-0x290,-0x23c)]>LOCKOUT_DURATION){if(_0x397264)passwordAttempts[_0x13298f(-0x1e3,-0x1ce,-0x204,-0x1a9)](_0x24bf58);return{'allowed':!![],'remaining':MAX_ATTEMPTS,'count':0x0};}const _0x53be31=MAX_ATTEMPTS-_0x397264[_0x13298f(-0x1c2,-0x1fd,-0x1c1,-0x217)];function _0x216c4b(_0x4bf1d7,_0x21d827,_0x1d9276,_0xa9d5e){return _0x_0x37731b(_0x4bf1d7-0x168,_0xa9d5e,_0x21d827- -0x518,_0xa9d5e-0xb4);}function _0x13298f(_0x2bc366,_0x21419a,_0x9592e8,_0x1bd8d8){return _0x_0x26c62a(_0x9592e8- -0xfa,_0x21419a-0xe4,_0x9592e8-0x1d9,_0x2bc366);}return{'allowed':_0x53be31>-0x1*-0xd8b+-0x9*0x18d+0x2*0x35,'remaining':Math[_0x216c4b(-0x2ab,-0x256,-0x26b,-0x21c)](-0x2480+-0x8a2+0x2d22,_0x53be31),'count':_0x397264[_0x13298f(-0x21f,-0x178,-0x1c1,-0x18b)]};},recordFailedAttempt=_0x50d62b=>{const _0x2f8998=passwordAttempts[_0x2fe8f4(-0x24d,-0x28b,-0x2b5,-0x24d)](_0x50d62b);if(!_0x2f8998||Date['now']()-_0x2f8998[_0x3961d4(0x45,0x69,0x6,0xe)]>LOCKOUT_DURATION){if('cywLn'===_0x2fe8f4(-0x21f,-0x205,-0x1c2,-0x20c))_0x29ccd6(_0x171e4c);else return passwordAttempts[_0x3961d4(0x6d,0xd1,0x99,0x9a)](_0x50d62b,{'count':0x1,'firstAttempt':Date[_0x2fe8f4(-0x27b,-0x275,-0x26e,-0x2c7)]()}),{'remaining':MAX_ATTEMPTS-(-0x3*0x1bf+0xb27+0x5e9*-0x1),'count':0x1};}function _0x2fe8f4(_0x39480f,_0x14cd13,_0x5db0b7,_0x1ce86e){return _0x_0x26c62a(_0x14cd13- -0x168,_0x14cd13-0xc9,_0x5db0b7-0x2a,_0x5db0b7);}_0x2f8998[_0x3961d4(0xaf,0x92,0x94,0x7c)]++;function _0x3961d4(_0x4a49b9,_0x12bc73,_0x4193bb,_0x4fcb3b){return _0x_0x37731b(_0x4a49b9-0x10f,_0x4193bb,_0x12bc73- -0x282,_0x4fcb3b-0x1a3);}return{'remaining':Math['max'](0x2*-0x126a+0x1*0xf95+0x153f,MAX_ATTEMPTS-_0x2f8998[_0x3961d4(0x3b,0x92,0xa1,0x7b)]),'count':_0x2f8998[_0x2fe8f4(-0x1f9,-0x22f,-0x246,-0x1f4)]};},clearAttempts=_0x4d4a89=>passwordAttempts['delete'](_0x4d4a89);exports[_0x_0x26c62a(-0x130,-0x13c,-0x145,-0x15b)]=async(_0x39cd88,_0x51afd2,_0xf29c9c)=>{function _0xc11183(_0x37c0a8,_0xbe6686,_0x3b2e7e,_0xd40ee3){return _0x_0x37731b(_0x37c0a8-0x115,_0x37c0a8,_0xd40ee3- -0xa8,_0xd40ee3-0x144);}function _0x40d6ad(_0x473364,_0x2ba330,_0x424116,_0x29169c){return _0x_0x37731b(_0x473364-0x1f4,_0x473364,_0x2ba330- -0x375,_0x29169c-0x73);}try{const _0xcac20e=parseInt(_0x39cd88[_0x40d6ad(-0xad,-0xc4,-0xc2,-0xf0)][_0x40d6ad(-0x7a,-0x68,-0x1d,-0x6b)])||-0x93b+-0x1f9*-0x1+0x743,_0x3be63b=parseInt(_0x39cd88['query']['limit'])||-0x1e75+0xd7e+0x1101,_0x1fb475=_0x39cd88['query'][_0xc11183(0x243,0x22d,0x256,0x211)]||'desc',_0x36a609=(_0xcac20e-(-0x10c1+0x26*0x4f+0x508))*_0x3be63b,{category_id:_0x8df716,tag_id:_0x3466d1,category:_0x5e08c4,tag:_0x34b896,search:_0x355dc0}=_0x39cd88['query'],_0x43af5b={'is_published':!![]},_0x442616=[{'model':Tag,'as':_0x40d6ad(-0x71,-0x4b,-0x9c,-0xa1),'attributes':[_0x40d6ad(-0xf2,-0xc1,-0x69,-0x79),_0xc11183(0x225,0x26f,0x22e,0x256)],'through':{'attributes':[]},'required':![]},{'model':Category,'as':_0xc11183(0x25c,0x250,0x24c,0x28c),'attributes':[_0xc11183(0x1ea,0x1b9,0x207,0x20c),_0x40d6ad(-0x33,-0x49,-0x5b,0x19)],'required':![]}];if(_0x8df716){if(_0x40d6ad(0x23,-0x2c,-0x48,0xc)===_0xc11183(0x2b7,0x2e0,0x2d9,0x2a1))_0x43af5b[_0x40d6ad(-0x93,-0x81,-0x64,-0x9a)]=_0x8df716;else return _0x309459[_0xc11183(0x282,0x2a0,0x2a7,0x270)](0x24f*-0xb+-0x21*0x3+0x1b75)[_0x40d6ad(-0x7e,-0xa9,-0x5c,-0x5b)]({'success':![],'message':_0xc11183(0x29d,0x288,0x287,0x299),'errorCount':_0x1524ac[_0x40d6ad(-0xb8,-0x61,-0x96,-0xb6)],'remaining':0x0});}else _0x5e08c4&&(_0x43af5b['category']={[Op[_0xc11183(0x1f9,0x22d,0x22d,0x223)]]:'%'+_0x5e08c4+'%'});if(_0x3466d1)_0xc11183(0x219,0x2a3,0x291,0x25b)!==_0x40d6ad(-0x70,-0x9f,-0x91,-0x46)?(_0x442616[-0x5a*0x63+0x226d*-0x1+-0x1df*-0x25]['where']={'id':_0x3466d1},_0x442616[0x2143+-0x176e+-0x3*0x347][_0x40d6ad(-0xae,-0x89,-0x49,-0xcc)]=!![]):_0x173a08(_0x1f5e1f);else _0x34b896&&(_0x43af5b[_0xc11183(0x265,0x1d1,0x27f,0x22d)]={[Op['like']]:'%'+_0x34b896+'%'});if(_0x355dc0){if(_0xc11183(0x2e8,0x2e1,0x26d,0x28a)!=='LMRia')_0x43af5b[Op['or']]=[{'title':{[Op[_0xc11183(0x236,0x265,0x218,0x223)]]:'%'+_0x355dc0+'%'}},{'content':{[Op['like']]:'%'+_0x355dc0+'%'}},{'tags':{[Op['like']]:'%'+_0x355dc0+'%'}}];else{const _0x1b0e24=_0x2b91ed[_0x40d6ad(-0xbb,-0xe0,-0xa4,-0xbd)]();return delete _0x1b0e24['password'],delete _0x1b0e24[_0x40d6ad(-0xf0,-0xae,-0x6c,-0x4b)],delete _0x1b0e24['updated_at'],delete _0x1b0e24[_0x40d6ad(-0x5a,-0xab,-0xbe,-0x75)],_0x59e3d3[_0x40d6ad(-0xdf,-0xa9,-0xab,-0xd6)]({'success':!![],'data':{..._0x1b0e24,'requiresPassword':![]}});}}const {count:_0x413ef1,rows:_0x48b829}=await Note['findAndCountAll']({'where':_0x43af5b,'include':_0x442616,'order':[[_0xc11183(0x22b,0x25d,0x1cd,0x220),_0xc11183(0x236,0x2b3,0x28c,0x274)],[_0x40d6ad(-0x57,-0xab,-0xe6,-0x8b),_0x40d6ad(-0xa5,-0x59,-0xa3,-0xb0)],[_0xc11183(0x225,0x25f,0x1eb,0x1fc),_0x1fb475[_0xc11183(0x25d,0x293,0x21b,0x238)]()]],'limit':_0x3be63b,'offset':_0x36a609,'distinct':!![]}),_0x4d568=_0x48b829[_0xc11183(0x1ba,0x1f1,0x205,0x1f5)](_0x14e757=>{const _0x557c23=_0x14e757['toJSON']();function _0x38d593(_0x383a7e,_0x365804,_0x3f78d7,_0x3d1443){return _0x40d6ad(_0x3f78d7,_0x383a7e-0x71,_0x3f78d7-0x174,_0x3d1443-0xf3);}delete _0x557c23[_0x1dc22d(-0x1b1,-0x1bc,-0x1c1,-0x1f9)],delete _0x557c23[_0x1dc22d(-0x17e,-0x176,-0x1ca,-0x22b)];function _0x1dc22d(_0x46de86,_0x1f774e,_0x13222a,_0x3b0442){return _0xc11183(_0x3b0442,_0x1f774e-0xba,_0x13222a-0x19d,_0x13222a- -0x3e9);}return delete _0x557c23[_0x38d593(-0x31,-0x70,-0x77,0xc)],delete _0x557c23[_0x38d593(-0x3a,-0x91,-0x72,-0x1c)],delete _0x557c23['content'],_0x14e757['password']&&_0x14e757['password'][_0x1dc22d(-0x18d,-0x24b,-0x1ee,-0x21f)]()!==''&&(_0x1dc22d(-0x17c,-0x1a1,-0x16d,-0x170)!=='LJFmt'?(_0x557c23['requiresPassword']=!![],delete _0x557c23[_0x1dc22d(-0x1c0,-0x23f,-0x1ec,-0x189)],delete _0x557c23[_0x38d593(-0x26,-0x7e,0x7,-0x82)]):_0x2af658(_0x15f322)),_0x557c23;});_0x51afd2[_0x40d6ad(-0xaf,-0xa9,-0xa4,-0x67)]({'success':!![],'data':{'notes':_0x4d568,'pagination':{'current_page':_0xcac20e,'total_pages':Math[_0xc11183(0x2b7,0x250,0x25d,0x298)](_0x413ef1/_0x3be63b),'total_count':_0x413ef1,'per_page':_0x3be63b}}});}catch(_0x41b77d){if(_0x40d6ad(-0x97,-0xbe,-0x93,-0x7f)===_0x40d6ad(-0x10a,-0xd3,-0xd7,-0xb4)){const _0x36bed3=_0x516f0f(_0x2bcca4),_0x5e31d4=_0x278ca0(_0x36bed3);_0x5f5968[_0xc11183(0x1d3,0x1d7,0x1eb,0x224)]({'success':!![],'errorCount':_0x5e31d4[_0xc11183(0x25f,0x23d,0x22a,0x26c)],'remaining':_0x5e31d4['remaining']});}else _0xf29c9c(_0x41b77d);}},exports[_0x_0x37731b(0x2c3,0x307,0x2e3,0x2a0)]=async(_0x265434,_0x849f35,_0x3c3e81)=>{function _0x1b04e0(_0x3cec7a,_0xcd70d2,_0x73ca2d,_0x5969c3){return _0x_0x26c62a(_0x73ca2d-0x1cc,_0xcd70d2-0x18c,_0x73ca2d-0x1a5,_0xcd70d2);}function _0x93bb4d(_0x2b4d48,_0x4f4657,_0x1a8082,_0x314bf8){return _0x_0x37731b(_0x2b4d48-0x102,_0x314bf8,_0x1a8082- -0x33e,_0x314bf8-0x1b0);}try{console['log'](_0x93bb4d(-0x7,-0x94,-0x4e,-0x58),_0x265434[_0x93bb4d(0x5b,0x4f,0xd,-0x1b)]['id']);const {id:_0x3d7315}=_0x265434['params'];console['log'](_0x1b04e0(0xd2,0xec,0x97,0x62)),console[_0x93bb4d(-0xa8,-0x87,-0xa0,-0xf7)]('[getPublicNoteById]\x20req.body:',_0x265434['body']),console['log'](_0x1b04e0(0xd8,0xf5,0x110,0xb6),_0x265434['query']);if(!_0x3d7315||_0x3d7315===_0x1b04e0(0xbb,0xc7,0xec,0xa7)||_0x3d7315===_0x1b04e0(0x8e,0xd0,0xf0,0xcf))return _0x849f35[_0x1b04e0(0xd5,0x11c,0x109,0xc5)](0x909+-0x259a+0x1e21)[_0x1b04e0(0xb3,0x80,0xbd,0xd6)]({'success':![],'message':_0x93bb4d(-0x1b,-0x4a,-0x62,-0x6f)});const _0x3fb25a=_0x265434[_0x93bb4d(-0x3a,-0x66,-0x59,0x9)]&&_0x265434[_0x1b04e0(0x119,0xc7,0xd6,0xe1)][_0x93bb4d(-0xa,-0xa9,-0x6e,-0x11)]||_0x265434[_0x93bb4d(-0x8d,-0xe4,-0x8d,-0x54)]&&_0x265434[_0x1b04e0(0x70,0xa0,0xa2,0xc9)][_0x1b04e0(0x113,0xd5,0xc1,0x118)];let _0x46e025;try{'iEmaf'===_0x1b04e0(0x2d,0xa7,0x91,0x9c)?(console[_0x1b04e0(0xec,0x58,0x8f,0x87)]('[getPublicNoteById]\x20步骤2:\x20开始查询数据库'),_0x46e025=await Note[_0x1b04e0(0xc7,0xa6,0xaf,0x67)](_0x3d7315,{'include':[{'model':Tag,'as':_0x1b04e0(0x177,0x115,0x11b,0x100),'attributes':['name',_0x93bb4d(-0x85,-0x8e,-0x40,-0x8e)],'through':{'attributes':[]}},{'model':Category,'as':_0x1b04e0(0x132,0xfe,0x125,0x147),'attributes':[_0x1b04e0(0x6a,0x4b,0xa5,0x91),_0x1b04e0(0x16c,0x180,0x11d,0x161)]}]}),console[_0x1b04e0(0xdf,0x6c,0x8f,0xbd)]('[getPublicNoteById]\x20步骤3:\x20数据库查询完成,\x20note:',_0x46e025?_0x93bb4d(-0x2e,-0x70,-0x7f,-0x74):_0x1b04e0(0x143,0xcd,0x12c,0x162))):(_0x5a0480[_0x1b04e0(0xb2,0x146,0xe8,0xbd)]=!![],delete _0x142b37[_0x93bb4d(-0xba,-0x84,-0x99,-0x47)],delete _0xe88206[_0x1b04e0(0x8e,0x122,0xcf,0xd9)]);}catch(_0x5cdb17){return console[_0x1b04e0(0x122,0xcd,0xf8,0x159)](_0x93bb4d(-0x5e,0x35,-0x2c,0x37),_0x5cdb17),_0x849f35[_0x93bb4d(0x21,0x18,-0x26,0x29)](-0x3b*0x70+-0xcc9+0x288d)[_0x93bb4d(-0x9a,-0xc3,-0x72,-0xba)]({'success':![],'message':_0x93bb4d(-0x7b,-0x54,-0x64,-0x4a)});}if(!_0x46e025)return console[_0x93bb4d(-0x6a,-0xc1,-0xa0,-0x93)](_0x1b04e0(0xda,0x121,0xf3,0xa9)),_0x849f35[_0x1b04e0(0x15d,0x120,0x109,0xfa)](0x19ed+0xb*0x18e+-0x2973*0x1)['json']({'success':![],'message':_0x1b04e0(0x173,0xef,0x113,0x13e)});console[_0x1b04e0(0x36,0x80,0x8f,0x49)](_0x1b04e0(0xcc,0x7e,0x9a,0xb8),_0x46e025[_0x1b04e0(0x122,0xeb,0xc8,0xd3)]);if(!_0x46e025['is_published'])return _0x849f35[_0x1b04e0(0x100,0x106,0x109,0xbf)](0x191d+-0x17*-0x161+-0x3741)['json']({'success':![],'message':'无权访问此笔记'});console[_0x93bb4d(-0xb8,-0xf2,-0xa0,-0x57)](_0x93bb4d(-0x5f,-0x54,-0x89,-0x91));const _0x4b3aed=_0x46e025[_0x1b04e0(0x11d,0x96,0xc1,0xa8)];console[_0x1b04e0(0x66,0xe5,0x8f,0x9e)](_0x93bb4d(-0x22,-0x28,-0x44,-0x35),typeof _0x4b3aed);const _0x16e814=_0x4b3aed&&typeof _0x4b3aed===_0x93bb4d(-0x46,-0x6,-0x46,-0x5)&&_0x4b3aed[_0x93bb4d(-0xf1,-0x3e,-0x9b,-0x53)]()!=='';console[_0x1b04e0(0xd6,0xbd,0x8f,0x74)](_0x93bb4d(-0xa3,-0x73,-0x83,-0xcc),_0x16e814);if(_0x16e814){if(_0x93bb4d(0x5c,0x27,-0x1,0x35)!=='TtAiv'){if(!_0x3fb25a)return console[_0x93bb4d(-0x8c,-0xc9,-0xa0,-0xb1)](_0x1b04e0(0x147,0x146,0x128,0x170)),_0x849f35[_0x1b04e0(0x11a,0x61,0xbd,0x66)]({'success':!![],'data':{'id':_0x46e025['id'],'title':_0x46e025[_0x93bb4d(-0xaa,-0xe6,-0xaf,-0xb9)],'category':_0x46e025[_0x93bb4d(0x4,-0x77,-0x28,-0x79)],'category_id':_0x46e025[_0x93bb4d(-0x18,-0x53,-0x4a,-0xab)],'tags':_0x46e025[_0x93bb4d(-0x24,-0x34,-0x69,-0x47)],'tagList':_0x46e025[_0x1b04e0(0x145,0xb8,0x11b,0xdb)],'categoryInfo':_0x46e025[_0x93bb4d(0x40,0x10,-0xa,-0x34)],'is_published':_0x46e025[_0x93bb4d(-0xa9,-0x17,-0x67,-0xb8)],'is_pinned':_0x46e025['is_pinned'],'published_at':_0x46e025[_0x1b04e0(0x50,0xdf,0x95,0xdd)],'requiresPassword':!![],'content':null}});if(_0x3fb25a!==_0x4b3aed)return console['log']('[getPublicNoteById]\x20步骤9b:\x20密码错误'),_0x849f35[_0x1b04e0(0xd1,0xb5,0x109,0x137)](-0x1920+0x1b*0x11f+-0x394)[_0x93bb4d(-0xd2,-0x85,-0x72,-0x1d)]({'success':![],'message':_0x93bb4d(-0x9a,-0xe7,-0x91,-0xc8)});}else _0x546ca6[_0x93bb4d(-0xa6,-0x9b,-0x69,-0x8b)]={[_0x108945[_0x93bb4d(-0x6b,-0x36,-0x73,-0xc7)]]:'%'+_0x4968ae+'%'};}console[_0x93bb4d(-0x3e,-0x100,-0xa0,-0xf0)](_0x1b04e0(0x130,0x16e,0x136,0x128));const _0x2e7ed0=_0x46e025[_0x1b04e0(0xd1,0x91,0x86,0x4d)]();console['log']('[getPublicNoteById]\x20步骤10:\x20toJSON完成'),delete _0x2e7ed0[_0x1b04e0(0x9b,0x11f,0xc1,0x90)],delete _0x2e7ed0[_0x1b04e0(0xe7,0x102,0xb8,0xa1)],delete _0x2e7ed0[_0x93bb4d(-0x78,-0xca,-0x6b,-0x36)],delete _0x2e7ed0['sort_order'],console[_0x1b04e0(0x2b,0xc2,0x8f,0x36)]('[getPublicNoteById]\x20步骤11:\x20删除敏感字段完成'),console['log'](_0x1b04e0(0x86,0xb5,0xd8,0x96)),_0x849f35[_0x1b04e0(0x73,0xfc,0xbd,0xc9)]({'success':!![],'data':{..._0x2e7ed0,'requiresPassword':![]}}),console[_0x93bb4d(-0xa8,-0x103,-0xa0,-0x97)](_0x1b04e0(0x11a,0x90,0xba,0xa2));}catch(_0x304535){console['error'](_0x93bb4d(-0xa3,-0x39,-0x84,-0xa1),_0x304535),console[_0x1b04e0(0xd4,0xed,0xf8,0xf2)](_0x93bb4d(0x4,-0x17,-0x21,0x34),_0x304535[_0x93bb4d(-0x36,-0x54,-0x3a,-0x83)]),_0x3c3e81(_0x304535);}},exports[_0x_0x26c62a(-0xac,-0xae,-0x81,-0x74)]=async(_0x238be,_0x233f32,_0x287cf7)=>{function _0x4ce002(_0x320426,_0x303dc9,_0x49db5e,_0x39644b){return _0x_0x26c62a(_0x49db5e-0x500,_0x303dc9-0x1cb,_0x49db5e-0x1d5,_0x39644b);}function _0x2b38ce(_0x22246b,_0x4c7b83,_0x59166a,_0x354bd8){return _0x_0x37731b(_0x22246b-0x13c,_0x22246b,_0x354bd8- -0x37f,_0x354bd8-0x181);}try{const {sequelize:_0x58937c}=require('../config/database'),_0x10a534=await _0x58937c[_0x4ce002(0x39b,0x412,0x3d6,0x436)](_0x2b38ce(-0x9e,-0x3c,-0x8b,-0x9e),{'type':_0x58937c[_0x2b38ce(-0x2e,0x2,-0x26,-0x2e)][_0x4ce002(0x355,0x3db,0x3b6,0x35d)]});_0x233f32[_0x4ce002(0x418,0x43f,0x3f1,0x3f9)]({'success':!![],'data':_0x10a534});}catch(_0x52b888){_0x287cf7(_0x52b888);}};function _0x_0x26c62a(_0x5a2cbb,_0x395bfa,_0x11a2da,_0xc2fc9d){return _0x_0x269f(_0x5a2cbb- -0x237,_0xc2fc9d);}exports[_0x_0x26c62a(-0x12c,-0x150,-0xfd,-0x116)]=async(_0x524013,_0x3568e9,_0x16e372)=>{function _0x1a661c(_0x1164b3,_0x2c976,_0x5aed43,_0x3a3e1c){return _0x_0x26c62a(_0x5aed43-0x41d,_0x2c976-0xe7,_0x5aed43-0xaf,_0x3a3e1c);}function _0x344cd4(_0x520585,_0x346dde,_0x5599aa,_0x58b5cc){return _0x_0x26c62a(_0x58b5cc- -0x50,_0x346dde-0x39,_0x5599aa-0xfd,_0x520585);}try{const {id:_0x4972ee}=_0x524013[_0x344cd4(-0xd8,-0x117,-0x132,-0xe0)],{password:_0x115d58}=_0x524013[_0x344cd4(-0x1ae,-0x184,-0x1d5,-0x17a)],{sequelize:_0x1e7463}=require('../config/database');if(!_0x4972ee||_0x4972ee===_0x344cd4(-0x144,-0x117,-0xfb,-0x130)||_0x4972ee===_0x344cd4(-0xe1,-0x147,-0x15b,-0x12c))return _0x3568e9[_0x1a661c(0x378,0x308,0x35a,0x39d)](-0xb5f*-0x3+0x416*-0x2+-0x1861)['json']({'success':![],'message':_0x1a661c(0x2be,0x2fd,0x31e,0x313)});const _0x42cac6=await Note[_0x1a661c(0x325,0x30a,0x300,0x363)](_0x4972ee);if(!_0x42cac6){if(_0x1a661c(0x2ca,0x2ee,0x324,0x312)!==_0x1a661c(0x37e,0x35d,0x324,0x350))_0x4b421a(_0x35325);else return _0x3568e9[_0x344cd4(-0x155,-0x120,-0x11a,-0x113)](-0x19e2+-0x1d15*-0x1+-0x19f*0x1)[_0x344cd4(-0x129,-0x119,-0x106,-0x15f)]({'success':![],'message':'笔记不存在'});}if(!_0x42cac6['is_published'])return _0x3568e9['status'](0x154e+0x19bd+-0x2d78)[_0x344cd4(-0x179,-0x161,-0x10d,-0x15f)]({'success':![],'message':'无权访问此笔记'});const _0x35d1b9=_0x42cac6['password'],_0x5b51c2=_0x35d1b9&&typeof _0x35d1b9===_0x344cd4(-0x151,-0x16f,-0xe0,-0x133)&&_0x35d1b9[_0x344cd4(-0x171,-0x139,-0x1bc,-0x188)]()!=='';if(_0x5b51c2){if(!_0x115d58)return _0x3568e9[_0x344cd4(-0x14c,-0x16f,-0xc6,-0x113)](-0x12a+-0x912+0x39*0x35)[_0x1a661c(0x2bf,0x341,0x30e,0x2c0)]({'success':![],'message':_0x1a661c(0x318,0x325,0x363,0x311),'requiresPassword':!![]});if(_0x115d58!==_0x35d1b9){if(_0x344cd4(-0x167,-0x17b,-0x1e9,-0x18f)===_0x1a661c(0x33d,0x299,0x2de,0x2bf))return _0x3568e9[_0x1a661c(0x39d,0x3a8,0x35a,0x31f)](-0x1c0*-0x7+-0x8*0x2d9+0xc19)['json']({'success':![],'message':'密码错误'});else _0x28f4f2(_0x437a98);}}const _0x39dca2=await _0x1e7463[_0x1a661c(0x2bb,0x2e1,0x2f3,0x2bb)]('\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20note_disks\x0a\x20\x20\x20\x20\x20\x20WHERE\x20note_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20sort_order\x20ASC,\x20created_at\x20ASC\x0a\x20\x20\x20\x20',{'replacements':[_0x4972ee],'type':_0x1e7463[_0x344cd4(-0xd3,-0xe9,-0xac,-0xda)][_0x1a661c(0x2b5,0x2b0,0x2d3,0x32c)]});_0x3568e9[_0x1a661c(0x34a,0x2b7,0x30e,0x361)]({'success':!![],'data':_0x39dca2});}catch(_0xcb96a9){_0x16e372(_0xcb96a9);}},exports[_0x_0x26c62a(-0x133,-0xe0,-0x105,-0x13c)]=async(_0x32a65e,_0x523059,_0xca1a8f)=>{function _0x288315(_0x4c05dd,_0xd665e7,_0x34e874,_0x8b1cb9){return _0x_0x26c62a(_0x4c05dd-0x564,_0xd665e7-0x1ba,_0x34e874-0x177,_0x34e874);}function _0x528b9d(_0x3f78cd,_0x1012b0,_0x4a79b8,_0x11a435){return _0x_0x26c62a(_0x4a79b8-0x471,_0x1012b0-0x4a,_0x4a79b8-0x182,_0x3f78cd);}try{const _0x355931=parseInt(_0x32a65e['query'][_0x528b9d(0x407,0x3b7,0x3a3,0x350)])||-0x1*-0x24a0+0x2*0x1381+-0x4ba1,_0x3eadd7=parseInt(_0x32a65e['query']['limit'])||-0x113*0xc+0x167*-0x16+0xc*0x3a6,_0x1ca0d7=_0x32a65e[_0x528b9d(0x347,0x2f3,0x347,0x356)][_0x288315(0x442,0x460,0x482,0x4a3)]||_0x528b9d(0x3e3,0x385,0x3a2,0x3b4),_0x3ce10e=(_0x355931-(-0x2323+-0x1*-0x5cb+0x1d59*0x1))*_0x3eadd7,{category_id:_0x570ab3,tag_id:_0x57dd63,category:_0x3f475c,tag:_0x18ae48,search:_0x346708}=_0x32a65e[_0x288315(0x43a,0x40d,0x40f,0x45a)],_0x55c77c={},_0x272d92=[{'model':Tag,'as':'tagList','through':{'attributes':[]},'required':![]},{'model':Category,'as':_0x288315(0x4bd,0x4ff,0x4b1,0x480),'required':![]}];if(_0x570ab3)_0x55c77c['category_id']=_0x570ab3;else _0x3f475c&&(_0x55c77c[_0x528b9d(0x355,0x356,0x3ac,0x38c)]={[Op[_0x288315(0x454,0x442,0x437,0x419)]]:'%'+_0x3f475c+'%'});if(_0x57dd63)_0x272d92[0x12d4+-0x4*0x22+0x124c*-0x1][_0x528b9d(0x3fd,0x40f,0x3d2,0x3d7)]={'id':_0x57dd63},_0x272d92[0x2493+0x47d+-0x490*0x9]['required']=!![];else _0x18ae48&&(_0x55c77c[_0x528b9d(0x336,0x36b,0x36b,0x37c)]={[Op[_0x288315(0x454,0x405,0x466,0x3fe)]]:'%'+_0x18ae48+'%'});_0x346708&&(_0x55c77c[Op['or']]=[{'title':{[Op[_0x528b9d(0x38d,0x32f,0x361,0x378)]]:'%'+_0x346708+'%'}},{'content':{[Op['like']]:'%'+_0x346708+'%'}},{'tags':{[Op[_0x528b9d(0x321,0x319,0x361,0x345)]]:'%'+_0x346708+'%'}}]);const {count:_0x200f46,rows:_0x3f0bd8}=await Note[_0x288315(0x4a2,0x4f4,0x455,0x43f)]({'where':_0x55c77c,'include':_0x272d92,'order':[[_0x528b9d(0x37a,0x349,0x35e,0x345),_0x528b9d(0x3fe,0x380,0x3b2,0x3fe)],[_0x288315(0x453,0x471,0x46d,0x3f5),'DESC'],[_0x288315(0x42d,0x3dc,0x43a,0x403),_0x1ca0d7[_0x528b9d(0x378,0x375,0x376,0x3b0)]()]],'limit':_0x3eadd7,'offset':_0x3ce10e,'distinct':!![]});_0x523059[_0x528b9d(0x38c,0x376,0x362,0x309)]({'success':!![],'data':{'notes':_0x3f0bd8,'pagination':{'current_page':_0x355931,'total_pages':Math[_0x528b9d(0x383,0x3ed,0x3d6,0x427)](_0x200f46/_0x3eadd7),'total_count':_0x200f46,'per_page':_0x3eadd7}}});}catch(_0x1f02e7){_0xca1a8f(_0x1f02e7);}},exports[_0x_0x37731b(0x30e,0x2fd,0x2b0,0x297)]=async(_0x2f4ce3,_0xe5ce4e,_0x250413)=>{function _0x2caea3(_0x17555e,_0x3bb954,_0x49ee61,_0x171775){return _0x_0x37731b(_0x17555e-0x53,_0x3bb954,_0x171775-0x23f,_0x171775-0x1c2);}function _0x4a3874(_0x3d275e,_0x21f53f,_0x3f679d,_0x256443){return _0x_0x26c62a(_0x3f679d-0x14d,_0x21f53f-0x187,_0x3f679d-0x62,_0x3d275e);}try{if(_0x4a3874(0x73,0xe0,0x89,0x36)!==_0x2caea3(0x517,0x560,0x5c2,0x572)){const {id:_0x3ec30b}=_0x2f4ce3[_0x2caea3(0x52f,0x55d,0x53a,0x58a)],_0x1bdb67=await Note[_0x2caea3(0x547,0x516,0x561,0x4fd)](_0x3ec30b,{'include':[{'model':Tag,'as':_0x2caea3(0x598,0x542,0x579,0x569),'through':{'attributes':[]}},{'model':Category,'as':_0x2caea3(0x58c,0x578,0x57a,0x573)}]});if(!_0x1bdb67)return _0xe5ce4e['status'](0x2067+-0x5*-0x71f+-0xb*0x60a)[_0x2caea3(0x4d3,0x4b7,0x4ba,0x50b)]({'success':![],'message':_0x2caea3(0x539,0x598,0x585,0x561)});_0xe5ce4e[_0x4a3874(0x38,0x16,0x3e,0x92)]({'success':!![],'data':_0x1bdb67});}else _0x196bf5(_0x182eb5);}catch(_0x551f96){_0x250413(_0x551f96);}},exports[_0x_0x26c62a(-0x129,-0x102,-0x138,-0x132)]=async(_0x375e84,_0x5c8dd0,_0x44b5f5)=>{function _0x292637(_0xea38c0,_0x38dbaa,_0x5f00b0,_0x24f5d3){return _0x_0x26c62a(_0xea38c0- -0x1b0,_0x38dbaa-0xde,_0x5f00b0-0x158,_0x5f00b0);}function _0x397e95(_0x399796,_0x2038c3,_0x53e3ad,_0x564414){return _0x_0x37731b(_0x399796-0x50,_0x2038c3,_0x399796- -0x2ff,_0x564414-0x116);}try{const {sequelize:_0x5069e0}=require('../config/database'),_0x457ec2=await _0x5069e0['query'](_0x397e95(-0xa,-0x9,0x3d,0x51),{'type':_0x5069e0[_0x292637(-0x23a,-0x28c,-0x22f,-0x1fd)][_0x397e95(-0x6e,-0x6c,-0x7d,-0x87)]});_0x5c8dd0[_0x292637(-0x2bf,-0x2cf,-0x2d0,-0x2a7)]({'success':!![],'data':_0x457ec2});}catch(_0x3caf29){if('eFIWS'===_0x397e95(0x36,0xc,0x2d,0x6b)){const _0x580f7d=_0x456ffd['get'](_0x30f38b);if(!_0x580f7d||_0x46f8b9['now']()-_0x580f7d['firstAttempt']>_0x565206)return _0x18a0b5[_0x292637(-0x238,-0x24a,-0x215,-0x26d)](_0x60dc27,{'count':0x1,'firstAttempt':_0x37b4eb[_0x292637(-0x2bd,-0x319,-0x2cb,-0x2cc)]()}),{'remaining':_0x375a26-(-0x116+0x24df*0x1+-0x23c8),'count':0x1};return _0x580f7d[_0x292637(-0x277,-0x272,-0x26b,-0x275)]++,{'remaining':_0x1d9a0f[_0x397e95(-0x3d,-0x36,-0x6,-0x6d)](0x1ff0+-0x173b+-0x8b5,_0x173e9b-_0x580f7d['count']),'count':_0x580f7d[_0x292637(-0x277,-0x239,-0x2b9,-0x260)]};}else _0x44b5f5(_0x3caf29);}},exports[_0x_0x37731b(0x2d3,0x31a,0x2e8,0x295)]=async(_0xf23a84,_0x532987,_0xd52b3c)=>{function _0x2e30de(_0x287a46,_0xaba462,_0x2d7d06,_0x115418){return _0x_0x26c62a(_0x115418- -0x12f,_0xaba462-0x6f,_0x2d7d06-0x4e,_0x287a46);}function _0x37bf5f(_0x157b29,_0x1fd09f,_0x52ea5a,_0x1a6a8d){return _0x_0x37731b(_0x157b29-0x174,_0x157b29,_0x1a6a8d- -0xe5,_0x1a6a8d-0x2c);}try{const {id:_0x3005a3}=_0xf23a84['params'],{sequelize:_0x17bc32}=require('../config/database'),_0x15f429=await Note[_0x37bf5f(0x197,0x185,0x1f1,0x1d9)](_0x3005a3);if(!_0x15f429)return _0x532987['status'](-0x109+0x1*0x1f9+0xa4)[_0x37bf5f(0x1ef,0x242,0x225,0x1e7)]({'success':![],'message':_0x2e30de(-0x1b4,-0x1af,-0x187,-0x1e8)});const _0x120df6=await _0x17bc32[_0x37bf5f(0x1cb,0x17a,0x1a2,0x1cc)](_0x2e30de(-0x19c,-0x21c,-0x231,-0x1e1),{'replacements':[_0x3005a3],'type':_0x17bc32[_0x2e30de(-0x162,-0x15e,-0x1ce,-0x1b9)][_0x37bf5f(0x15d,0x1c1,0x1e9,0x1ac)]});_0x532987[_0x2e30de(-0x1ee,-0x21b,-0x230,-0x23e)]({'success':!![],'data':_0x120df6});}catch(_0x6cf877){_0xd52b3c(_0x6cf877);}},exports[_0x_0x26c62a(-0x97,-0x6e,-0x3e,-0xf1)]=async(_0x5a7630,_0x178049,_0x5a703c)=>{function _0x284748(_0x4ca577,_0x3cb93b,_0xd2953d,_0x4a181c){return _0x_0x26c62a(_0x3cb93b-0x114,_0x3cb93b-0x10,_0xd2953d-0x13e,_0x4a181c);}function _0x25ad0c(_0x17a0ff,_0x10d426,_0xa912ee,_0x499e49){return _0x_0x37731b(_0x17a0ff-0x75,_0xa912ee,_0x17a0ff- -0x13e,_0x499e49-0x1cf);}try{if(_0x284748(0x72,0x85,0xbd,0x39)==='qTfjv'){const _0x48e25c=parseInt(_0x5a7630[_0x25ad0c(0x173,0x1b2,0x17d,0x1bd)]['page'])||0x2d7+0x1d*0xb7+-0x1791,_0x11cfb4=parseInt(_0x5a7630[_0x284748(-0x38,-0x16,0x4b,-0x3f)][_0x25ad0c(0x216,0x26f,0x202,0x24d)])||-0x1d7+-0x21*0xb6+0xd*0x1f3,_0x32191f=_0x5a7630[_0x25ad0c(0x173,0x14f,0x1c1,0x1c2)][_0x25ad0c(0x17b,0x1b4,0x1d3,0x1bc)]||_0x25ad0c(0x1ce,0x228,0x19f,0x171),_0x346e32=(_0x48e25c-(0x413*-0x9+-0x3f*0x7+0x2665))*_0x11cfb4,{category_id:_0x23a541,tag_id:_0x1a7346,category:_0x380886,tag:_0x5d2764,search:_0x53671b}=_0x5a7630[_0x25ad0c(0x173,0x181,0x111,0x198)],_0x2ed7e8={},_0x383767=_0x5a7630[_0x284748(0xa6,0x83,0xda,0x74)][_0x25ad0c(0x1be,0x19a,0x21d,0x1ae)]&&_0x5a7630[_0x25ad0c(0x20c,0x1b7,0x24b,0x220)]['authorization'][_0x25ad0c(0x217,0x200,0x1c9,0x273)]('Bearer\x20'),isPublicRequest=!_0x5a7630[_0x284748(0x8e,0x43,0x9e,-0xb)][_0x284748(0x6b,0x3f,0x22,-0x9)](_0x25ad0c(0x1e8,0x1a6,0x1e9,0x24b)),_0x5ec86f=[{'model':Tag,'as':_0x25ad0c(0x1ec,0x1af,0x219,0x1e7),'attributes':_0x383767&&!isPublicRequest?undefined:[_0x284748(-0x26,-0x13,0x25,-0xf),_0x284748(0x1c,0x37,0x69,0x3)],'through':{'attributes':[]},'required':![]},{'model':Category,'as':_0x284748(0xaf,0x6d,0x29,0xcf),'attributes':_0x383767&&!isPublicRequest?undefined:[_0x284748(-0x59,-0x13,-0x1e,0x3f),_0x25ad0c(0x1ee,0x1a0,0x1aa,0x200)],'required':![]}];isPublicRequest&&(_0x2ed7e8[_0x284748(0x14,0x10,-0x17,0x18)]=!![],_0x2ed7e8['show_in_list']=!![]);if(_0x23a541)_0x2ed7e8['category_id']=_0x23a541;else _0x380886&&(_0x2ed7e8[_0x25ad0c(0x1d8,0x1a6,0x20c,0x18f)]={[Op[_0x25ad0c(0x18d,0x1c0,0x1e1,0x1aa)]]:'%'+_0x380886+'%'});if(_0x1a7346)_0x5ec86f[-0x61c+-0x18f6*0x1+0x1f12]['where']={'id':_0x1a7346},_0x5ec86f[-0x1cab*0x1+-0xc5b+0x2906][_0x284748(0x1e,0x25,0x24,-0x27)]=!![];else _0x5d2764&&(_0x2ed7e8[_0x25ad0c(0x197,0x1a0,0x13f,0x13b)]={[Op[_0x284748(-0xb,0x4,0x64,-0x52)]]:'%'+_0x5d2764+'%'});_0x53671b&&(_0x2ed7e8[Op['or']]=[{'title':{[Op['like']]:'%'+_0x53671b+'%'}},{'content':{[Op[_0x284748(0x22,0x4,-0x2b,0xa)]]:'%'+_0x53671b+'%'}},{'tags':{[Op[_0x25ad0c(0x18d,0x19b,0x1e4,0x1e2)]]:'%'+_0x53671b+'%'}}]);const {count:_0x28ddfe,rows:_0x1a2414}=await Note[_0x284748(-0x2,0x52,0x1f,0x5b)]({'where':_0x2ed7e8,'include':_0x5ec86f,'order':[[_0x284748(0x30,0x1,0x42,0x16),_0x284748(0x99,0x55,0x4e,-0x7)],['sort_order',_0x284748(0x2a,0x55,0x7b,-0x6)],[_0x25ad0c(0x166,0x144,0x166,0x16e),_0x32191f[_0x284748(0x23,0x19,-0x3f,0x4b)]()]],'limit':_0x11cfb4,'offset':_0x346e32,'distinct':!![]}),_0x4d724e=_0x1a2414['map'](_0x53df81=>{function _0x53ffbb(_0x2e23fb,_0x41c71f,_0xbded99,_0x15f902){return _0x25ad0c(_0x2e23fb- -0x439,_0x41c71f-0x137,_0x41c71f,_0x15f902-0x101);}function _0x412e46(_0x36d638,_0x7291e7,_0x5ddb41,_0xd87ac9){return _0x25ad0c(_0x7291e7-0x28b,_0x7291e7-0xd6,_0xd87ac9,_0xd87ac9-0xf4);}if(_0x53ffbb(-0x24a,-0x268,-0x29d,-0x28d)==='TJoib'){const _0x5f183a=_0x53df81[_0x53ffbb(-0x2e2,-0x2a8,-0x2bc,-0x2bd)]();if(isPublicRequest){delete _0x5f183a['password'],delete _0x5f183a[_0x412e46(0x3d1,0x414,0x462,0x3b6)],delete _0x5f183a[_0x412e46(0x408,0x420,0x420,0x460)],delete _0x5f183a['sort_order'],delete _0x5f183a[_0x412e46(0x41a,0x410,0x447,0x3e3)];if(_0x53df81[_0x412e46(0x467,0x41d,0x42a,0x3db)]&&_0x53df81[_0x53ffbb(-0x2a7,-0x288,-0x254,-0x24b)][_0x53ffbb(-0x2d4,-0x2a7,-0x2c2,-0x315)]()!==''){if(_0x53ffbb(-0x26e,-0x286,-0x21f,-0x2a9)==='cnZtL')return _0x468453['status'](-0x1*-0x332+-0xc05+-0x1*-0xa67)['json']({'success':![],'message':_0x53ffbb(-0x255,-0x24a,-0x209,-0x2b2)});else _0x5f183a[_0x412e46(0x445,0x444,0x491,0x494)]=!![],delete _0x5f183a[_0x412e46(0x3ec,0x3f2,0x3de,0x41c)],delete _0x5f183a[_0x412e46(0x449,0x42b,0x48f,0x43b)];}}else{}return _0x5f183a;}else return _0x41d6c6[_0x53ffbb(-0x25f,-0x28e,-0x20f,-0x2b4)](0x2b*-0x5b+-0x1*-0xf1+0xfec)['json']({'success':![],'message':_0x412e46(0x438,0x46f,0x40d,0x4c0)});});_0x178049['json']({'success':!![],'data':{'notes':_0x4d724e,'pagination':{'current_page':_0x48e25c,'total_pages':Math[_0x284748(0xcb,0x79,0xc6,0x35)](_0x28ddfe/_0x11cfb4),'total_count':_0x28ddfe,'per_page':_0x11cfb4}}});}else _0x3d8202[0x5*0xa6+0x123e*0x1+-0x157c][_0x284748(0x41,0x75,0x6c,0x7c)]={'id':_0x53f434},_0x2aaefc[-0x18ed+0x1c94+0x55*-0xb][_0x284748(-0x9,0x25,0x1a,-0x31)]=!![];}catch(_0x6d826e){_0x5a703c(_0x6d826e);}},exports['getNoteById']=async(_0x5d9bc9,_0x4dd170,_0x30d67d)=>{function _0xaa8277(_0x1e1a31,_0x2ea198,_0x4226fb,_0x488a4c){return _0x_0x37731b(_0x1e1a31-0x126,_0x1e1a31,_0x2ea198- -0x2d5,_0x488a4c-0x189);}function _0x52a068(_0x2542a2,_0x3d5750,_0x5a1b3c,_0x3fc4d7){return _0x_0x26c62a(_0x2542a2-0x4ec,_0x3d5750-0x5,_0x5a1b3c-0x13e,_0x3d5750);}try{const {id:_0x2f5f62}=_0x5d9bc9[_0xaa8277(0x1f,0x76,0x28,0x83)],_0x3d828e=_0x5d9bc9['body']&&_0x5d9bc9['body']['password']||_0x5d9bc9['query']&&_0x5d9bc9[_0x52a068(0x3c2,0x421,0x3c0,0x3c5)][_0xaa8277(-0x7,-0x5,0x5d,0x3e)],_0x596cc0=_0x5d9bc9[_0x52a068(0x45b,0x47a,0x481,0x4ae)][_0xaa8277(0x69,0x27,0xf,-0x1a)]&&_0x5d9bc9[_0xaa8277(0x4d,0x75,0x61,0x43)][_0x52a068(0x40d,0x3b5,0x3c8,0x410)][_0x52a068(0x466,0x498,0x4c9,0x4b1)](_0x52a068(0x40e,0x46b,0x3b5,0x445)),_0x4a03c0=await Note['findByPk'](_0x2f5f62,{'include':[{'model':Tag,'as':'tagList','attributes':_0x596cc0?undefined:[_0xaa8277(0x36,-0x21,0x15,-0x50),'color'],'through':{'attributes':[]}},{'model':Category,'as':_0x52a068(0x445,0x423,0x44d,0x449),'attributes':_0x596cc0?undefined:['name',_0xaa8277(0x66,0x57,0x18,0x40)]}]});if(!_0x4a03c0)return _0x4dd170[_0x52a068(0x429,0x40d,0x466,0x47d)](0x2a*-0x69+-0x2703+0x13*0x30b)['json']({'success':![],'message':_0x52a068(0x433,0x415,0x3d7,0x409)});if(!_0x596cc0&&!_0x4a03c0[_0x52a068(0x3e8,0x396,0x3c3,0x3ef)])return'JMJCw'===_0xaa8277(-0x16,0x39,0x65,0x48)?_0x4dd170[_0xaa8277(0x97,0x43,0x30,0x24)](0x22d9+-0x1*0x24eb+0x3a5)[_0x52a068(0x3dd,0x416,0x3e5,0x395)]({'success':![],'message':_0x52a068(0x3a1,0x3a6,0x3f6,0x391)}):(_0x464f7b[_0xaa8277(0x9f,0x7e,0x72,0x63)](_0x319a00,{'count':0x1,'firstAttempt':_0x3dd51c[_0xaa8277(0x3d,-0x7,-0x55,0x4e)]()}),{'remaining':_0x15b60e-(0x16b2+-0x13b5+0x2*-0x17e),'count':0x1});const _0x3615d9=_0x4a03c0[_0xaa8277(-0x1a,-0x5,0x4b,-0x42)],_0x2fbccf=_0x3615d9&&typeof _0x3615d9===_0x52a068(0x409,0x410,0x457,0x40e)&&_0x3615d9[_0xaa8277(-0x7b,-0x32,-0x66,-0x76)]()!=='';if(_0x2fbccf){if(!_0x3d828e)return _0x4dd170[_0xaa8277(-0x31,-0x9,0x26,0x47)]({'success':!![],'data':{'id':_0x4a03c0['id'],'title':_0x4a03c0[_0xaa8277(-0x84,-0x46,-0xa,-0x47)],'category':_0x4a03c0[_0xaa8277(0x51,0x41,0xa4,0x91)],'category_id':_0x4a03c0[_0x52a068(0x405,0x458,0x3f8,0x3ca)],'tags':_0x4a03c0[_0x52a068(0x3e6,0x3a3,0x408,0x442)],'tagList':_0x4a03c0[_0xaa8277(0xb4,0x55,0xab,-0x7)],'categoryInfo':_0x4a03c0[_0x52a068(0x445,0x457,0x449,0x42d)],'is_published':_0x4a03c0[_0x52a068(0x3e8,0x44a,0x406,0x430)],'is_pinned':_0x4a03c0[_0x52a068(0x3d9,0x40e,0x3dd,0x437)],'published_at':_0x4a03c0[_0xaa8277(-0xd,-0x31,-0xf,-0x3a)],'created_at':_0x4a03c0[_0x52a068(0x3d8,0x387,0x3b9,0x409)],'requiresPassword':!![],'content':null}});if(_0x3d828e!==_0x3615d9){if(_0xaa8277(-0x28,-0x19,-0x2,-0x61)!==_0xaa8277(0x79,0x24,0x44,0x64))return _0x4dd170['status'](-0x2*0x30d+0x3*-0x5bf+0x18e8)[_0x52a068(0x3dd,0x40a,0x3f2,0x3a6)]({'success':![],'message':_0x52a068(0x3be,0x391,0x3d1,0x3c3)});else{if(!_0x42748f[_0xaa8277(-0x1e,-0x8,-0x30,-0x43)]||_0x5b59da[_0x52a068(0x3de,0x3a8,0x3de,0x42d)]['length']===-0x4b*0x7f+0x195b+0x25*0x52)return _0x2c4956[_0xaa8277(0x18,0x43,0x8,0xa6)](-0x14b7*0x1+0x6c1*0x5+-0xb7e)[_0xaa8277(-0x2b,-0x9,-0x69,0x18)]({'success':![],'message':_0xaa8277(-0x2,0x4b,0x1e,0x10)});const _0x1c6671=_0x2bf37c[_0xaa8277(-0x3e,-0x8,-0xe,0x26)][_0xaa8277(-0x1,-0x38,-0x15,-0x65)](_0x334489=>_0x334489[_0xaa8277(0x6,-0x18,0x19,0x17)]||_0x4d21b9[_0xaa8277(-0xe,-0x3e,0x1c,0x1b)](_0x334489));_0x2444cf[_0x52a068(0x3dd,0x406,0x3d9,0x3a0)]({'success':!![],'message':_0xaa8277(0x49,0x6a,0x67,0xab),'data':{'urls':_0x1c6671}});}}}const _0x2ff17f=_0x4a03c0[_0x52a068(0x3a6,0x373,0x376,0x374)]();delete _0x2ff17f[_0x52a068(0x3e1,0x439,0x391,0x3c2)],!_0x596cc0&&(delete _0x2ff17f[_0xaa8277(-0x60,-0xe,0x2c,0x26)],delete _0x2ff17f[_0x52a068(0x3e4,0x414,0x413,0x3ff)],delete _0x2ff17f[_0xaa8277(0x48,-0xb,-0x29,-0x19)]),_0x4dd170['json']({'success':!![],'data':{..._0x2ff17f,'requiresPassword':![]}});}catch(_0x336587){_0x30d67d(_0x336587);}};function _0x_0x37731b(_0x42fdbf,_0x1a2f9b,_0x6db9ec,_0xe8cc8b){return _0x_0x269f(_0x6db9ec-0x1a4,_0x1a2f9b);}exports[_0x_0x26c62a(-0xe5,-0x116,-0xba,-0x109)]=async(_0x13b585,_0x5b4db1)=>{function _0x3c0ace(_0x5d4d72,_0x2dad07,_0x40b3b8,_0x5d20a1){return _0x_0x37731b(_0x5d4d72-0x1d3,_0x2dad07,_0x5d20a1- -0x17c,_0x5d20a1-0x118);}const _0x530503=getClientIP(_0x13b585);function _0x3ce217(_0x127d85,_0x3b65c2,_0x32aa02,_0x157b0d){return _0x_0x26c62a(_0x127d85-0x39e,_0x3b65c2-0xe,_0x32aa02-0xaf,_0x157b0d);}const _0x38b9b5=checkPasswordAttempts(_0x530503);_0x5b4db1[_0x3c0ace(0x176,0xfd,0x17f,0x150)]({'success':!![],'errorCount':_0x38b9b5[_0x3c0ace(0x149,0x1e3,0x1b6,0x198)],'remaining':_0x38b9b5[_0x3ce217(0x257,0x2ae,0x1f4,0x1fb)]});},exports[_0x_0x37731b(0x376,0x3b3,0x352,0x369)]=async(_0x3dafda,_0x111064,_0x634941)=>{function _0x3d5ca9(_0x20e249,_0x528272,_0x5bc424,_0x44cdb6){return _0x_0x37731b(_0x20e249-0x163,_0x44cdb6,_0x5bc424- -0x209,_0x44cdb6-0xc6);}function _0xd37869(_0x2ff723,_0x4dfa2e,_0x2d55db,_0x1ccd70){return _0x_0x26c62a(_0x2d55db-0x373,_0x4dfa2e-0x7f,_0x2d55db-0x1c3,_0x4dfa2e);}try{const {id:_0x271ae4}=_0x3dafda['params'],{password:_0x29a775}=_0x3dafda['body'],_0x5dacd7=getClientIP(_0x3dafda),_0x185ccf=checkPasswordAttempts(_0x5dacd7);if(!_0x185ccf[_0xd37869(0x2b0,0x2b9,0x277,0x28a)])return _0x111064[_0x3d5ca9(0xe6,0xb8,0x10f,0x14a)](-0x6ed+0x1241+-0x9a7)[_0x3d5ca9(0x75,0x10d,0xc3,0x85)]({'success':![],'message':_0xd37869(0x2ba,0x307,0x2d9,0x2f2),'errorCount':_0x185ccf[_0xd37869(0x29a,0x25f,0x2ac,0x287)],'remaining':0x0});const _0x4b79f0=await Note['findByPk'](_0x271ae4,{'include':[{'model':Tag,'as':'tagList','attributes':[_0xd37869(0x23e,0x281,0x24c,0x2a2),'color'],'through':{'attributes':[]}},{'model':Category,'as':_0xd37869(0x2de,0x275,0x2cc,0x280),'attributes':['name','icon']}]});if(!_0x4b79f0)return _0x111064[_0x3d5ca9(0xf7,0xe4,0x10f,0xe9)](-0x1be6+-0x1117+0x2e91*0x1)[_0xd37869(0x25f,0x275,0x264,0x277)]({'success':![],'message':_0xd37869(0x2e2,0x305,0x2ba,0x2b4)});if(!_0x4b79f0[_0xd37869(0x219,0x28b,0x26f,0x229)])return _0x111064[_0xd37869(0x2a5,0x268,0x2b0,0x281)](0x1fc0+-0x17a5*-0x1+-0x35d2)[_0x3d5ca9(0x7f,0x91,0xc3,0xe3)]({'success':![],'message':_0xd37869(0x288,0x1fe,0x228,0x1f9)});const _0x3120d8=_0x4b79f0[_0x3d5ca9(0x9a,0x127,0xc7,0x12a)],_0x5d35ba=_0x3120d8&&typeof _0x3120d8===_0xd37869(0x286,0x22d,0x290,0x2ea)&&_0x3120d8[_0x3d5ca9(0x62,0x94,0x9a,0x7f)]()!=='';if(!_0x5d35ba){const _0x31de57=_0x4b79f0['toJSON']();return delete _0x31de57[_0x3d5ca9(0x72,0x12a,0xc7,0x8d)],delete _0x31de57['created_at'],delete _0x31de57[_0xd37869(0x26a,0x256,0x26b,0x29d)],delete _0x31de57[_0xd37869(0x292,0x232,0x262,0x2a9)],_0x111064[_0x3d5ca9(0xe4,0x8b,0xc3,0xfe)]({'success':!![],'data':{..._0x31de57,'requiresPassword':![]}});}if(!_0x29a775||_0x29a775[_0x3d5ca9(0xc3,0xf0,0x9a,0x76)]()!==_0x3120d8[_0x3d5ca9(0x46,0xb1,0x9a,0xe0)]()){const _0x365343=recordFailedAttempt(_0x5dacd7);return _0x111064[_0x3d5ca9(0xff,0x127,0x10f,0x12c)](0x2470+0x209b+-0x437a)[_0x3d5ca9(0xfd,0x79,0xc3,0xc2)]({'success':![],'message':_0x365343[_0x3d5ca9(0xa4,0x48,0x8b,0xe3)]>0x2*-0x135b+0x19*0x7f+0x1a4f?_0x3d5ca9(0x46,0xf7,0xa4,0xac):_0x3d5ca9(0x179,0x151,0x138,0x17c),'errorCount':_0x365343[_0x3d5ca9(0xd5,0xdb,0x10b,0xd2)],'remaining':_0x365343[_0xd37869(0x238,0x210,0x22c,0x1f7)]});}clearAttempts(_0x5dacd7);const _0x2cc795=_0x4b79f0[_0xd37869(0x28f,0x211,0x22d,0x1ff)]();delete _0x2cc795[_0x3d5ca9(0x11f,0xb1,0xc7,0xfa)],delete _0x2cc795[_0x3d5ca9(0xec,0x120,0xbe,0x66)],delete _0x2cc795[_0x3d5ca9(0x6d,0xe1,0xca,0x11a)],delete _0x2cc795['sort_order'],_0x111064['json']({'success':!![],'data':{..._0x2cc795,'requiresPassword':![]}});}catch(_0x4f9322){_0x634941(_0x4f9322);}},exports[_0x_0x26c62a(-0x10c,-0x102,-0x140,-0x14a)]=async(_0x14d717,_0x43c880,_0x597296)=>{function _0x528c34(_0x4a1ea5,_0x21518e,_0x476017,_0x24dab1){return _0x_0x37731b(_0x4a1ea5-0x91,_0x476017,_0x4a1ea5- -0x94,_0x24dab1-0x1df);}function _0xd4d2f(_0x1d8980,_0x4c119e,_0x2a7c0a,_0xcc7c07){return _0x_0x37731b(_0x1d8980-0x4,_0x2a7c0a,_0x1d8980- -0x56b,_0xcc7c07-0x96);}try{const {title:_0x38aac7,content:_0x31bd02,summary:_0x114c03,category:_0x42abbc,category_id:_0x42ea33,tags:_0x45ed42,tag_ids:_0x4b7aac,is_published:_0x17e082,password:_0x232501,media_type:_0x348cc9,media_urls:_0x5c782c,external_link:_0x5e5ab1,published_at:_0x3d545f,sort_order:_0x580edb,is_pinned:_0x2ce5d6,show_in_list:_0x422703,cover_image:_0x52faee,source_type:_0x33cf2e,source_url:_0x1735dc,source_text:_0x4ab383,display_mode:_0x4c96b5}=_0x14d717[_0x528c34(0x251,0x20b,0x220,0x24d)];let _0x23e629=_0x114c03;!_0x23e629&&_0x31bd02&&(_0x23e629=_0x31bd02['length']>0x5*-0xe5+0x73*0x1b+-0x712?_0x31bd02[_0x528c34(0x281,0x27c,0x2ac,0x27c)](0x422+-0x1b4a+0x27*0x98,0x1084+-0x4*-0x2e3+-0x1b7a)+'...':_0x31bd02);const _0x3a2e12=await Note['create']({'title':_0x38aac7||'','content':_0x31bd02,'summary':_0x23e629,'category':_0x42abbc||null,'category_id':_0x42ea33||null,'tags':_0x45ed42||null,'is_published':_0x17e082||![],'password':_0x232501&&_0x232501[_0x528c34(0x20f,0x1ab,0x1bc,0x227)]()!==''?_0x232501:null,'media_type':_0x348cc9||_0x528c34(0x25b,0x2ab,0x24a,0x2b5),'media_urls':_0x5c782c||null,'external_link':_0x5e5ab1||null,'published_at':_0x3d545f||new Date(),'sort_order':_0x580edb||-0x17f*0x1+-0xa*-0x25c+0x1*-0x1619,'is_pinned':_0x2ce5d6||![],'show_in_list':_0x422703!==undefined?_0x422703:!![],'cover_image':_0x52faee||null,'source_type':_0x33cf2e||_0xd4d2f(-0x27c,-0x238,-0x2a5,-0x236),'source_url':_0x1735dc||null,'source_text':_0x4ab383||null,'display_mode':_0x4c96b5||_0x528c34(0x26d,0x2c6,0x212,0x2b0)});if(_0x4b7aac&&Array[_0x528c34(0x287,0x22d,0x284,0x268)](_0x4b7aac)&&_0x4b7aac[_0x528c34(0x2a2,0x2d1,0x2b1,0x269)]>-0x1bd8+0x958+0x1280){if('dHyZj'!==_0xd4d2f(-0x2bf,-0x309,-0x270,-0x2d4))await _0x3a2e12[_0x528c34(0x26c,0x278,0x2cc,0x2cd)](_0x4b7aac);else return _0xabe083[_0xd4d2f(-0x253,-0x262,-0x266,-0x210)](-0xd2a+0x1*0x1741+-0x883*0x1)[_0x528c34(0x238,0x255,0x271,0x28e)]({'success':![],'message':'笔记不存在'});}const _0x457c9e=await Note[_0x528c34(0x22a,0x257,0x1e9,0x266)](_0x3a2e12['id'],{'include':[{'model':Tag,'as':'tagList','through':{'attributes':[]}},{'model':Category,'as':_0xd4d2f(-0x237,-0x205,-0x1dc,-0x24a)}]});_0x43c880['status'](-0x25a4+0x2cf*-0x1+0x293c)[_0xd4d2f(-0x29f,-0x303,-0x291,-0x252)]({'success':!![],'message':_0xd4d2f(-0x244,-0x295,-0x249,-0x247),'data':_0x457c9e});}catch(_0x1c3ad9){_0x597296(_0x1c3ad9);}},exports['updateNote']=async(_0x534ef1,_0xb88e9b,_0x4ebc8b)=>{function _0x1a41d1(_0x46221f,_0x454426,_0x1a8576,_0x245d98){return _0x_0x26c62a(_0x454426-0x3e9,_0x454426-0x18c,_0x1a8576-0x11b,_0x245d98);}function _0xdb2c67(_0x39777b,_0x539271,_0x290187,_0x3faab7){return _0x_0x26c62a(_0x539271-0x54d,_0x539271-0x18d,_0x290187-0xf5,_0x3faab7);}try{const {id:_0xc18cac}=_0x534ef1[_0x1a41d1(0x3a4,0x359,0x344,0x37b)],{title:_0x13e377,content:_0x3a5d78,summary:_0x117072,category:_0x300461,category_id:_0x7534bc,tags:_0x3278ca,tag_ids:_0x2defbb,is_published:_0x205a96,password:_0x407b73,media_type:_0x909914,media_urls:_0x215a68,external_link:_0x113bdd,published_at:_0x4fa368,sort_order:_0x245b9f,is_pinned:_0x5f498d,show_in_list:_0xfa93c3,cover_image:_0x304ef0,source_type:_0x17912c,source_url:_0x19fa51,source_text:_0x5a6ab1,display_mode:_0x51eb81}=_0x534ef1[_0x1a41d1(0x2d6,0x2f3,0x32c,0x29c)],_0xcb94db=await Note[_0xdb2c67(0x400,0x430,0x44c,0x47f)](_0xc18cac);if(!_0xcb94db)return _0xb88e9b[_0x1a41d1(0x332,0x326,0x343,0x305)](-0x8e7+-0xc19*0x1+-0xa*-0x242)['json']({'success':![],'message':_0x1a41d1(0x32a,0x330,0x335,0x374)});let _0x46ed45=_0x117072;_0x117072===undefined&&_0x3a5d78!==undefined&&(_0x46ed45=_0x3a5d78[_0xdb2c67(0x46b,0x4a8,0x4cc,0x4d9)]>-0x22*0xb9+-0x1a6e+0x3396?_0x3a5d78['substring'](0x26ac+-0x1*-0xe3c+-0x34e8,0x13e5+0x1a45+-0x2d94)+_0x1a41d1(0x35e,0x313,0x35b,0x2c9):_0x3a5d78);await _0xcb94db[_0xdb2c67(0x3a4,0x404,0x44a,0x455)]({'title':_0x13e377!==undefined?_0x13e377:_0xcb94db['title'],'content':_0x3a5d78!==undefined?_0x3a5d78:_0xcb94db[_0xdb2c67(0x3d1,0x435,0x428,0x414)],'summary':_0x46ed45!==undefined?_0x46ed45:_0xcb94db[_0xdb2c67(0x48f,0x456,0x4b1,0x477)],'category':_0x300461!==undefined?_0x300461:_0xcb94db[_0xdb2c67(0x48c,0x488,0x4de,0x444)],'category_id':_0x7534bc!==undefined?_0x7534bc:_0xcb94db[_0xdb2c67(0x443,0x466,0x451,0x447)],'tags':_0x3278ca!==undefined?_0x3278ca:_0xcb94db[_0xdb2c67(0x48a,0x447,0x442,0x426)],'is_published':_0x205a96!==undefined?_0x205a96:_0xcb94db[_0x1a41d1(0x321,0x2e5,0x2c3,0x2e3)],'password':_0x407b73!==undefined?_0x407b73&&_0x407b73['trim']()!==''?_0x407b73:null:_0xcb94db[_0x1a41d1(0x2ab,0x2de,0x2be,0x2c3)],'media_type':_0x909914!==undefined?_0x909914:_0xcb94db[_0x1a41d1(0x384,0x351,0x35e,0x369)],'media_urls':_0x215a68!==undefined?_0x215a68:_0xcb94db[_0x1a41d1(0x2fd,0x2b3,0x307,0x280)],'external_link':_0x113bdd!==undefined?_0x113bdd:_0xcb94db['external_link'],'published_at':_0x4fa368!==undefined?_0x4fa368:_0xcb94db[_0x1a41d1(0x27f,0x2b2,0x259,0x2e5)],'sort_order':_0x245b9f!==undefined?_0x245b9f:_0xcb94db[_0x1a41d1(0x2b6,0x2d8,0x285,0x290)],'is_pinned':_0x5f498d!==undefined?_0x5f498d:_0xcb94db[_0x1a41d1(0x321,0x2d6,0x32c,0x2d7)],'show_in_list':_0xfa93c3!==undefined?_0xfa93c3:_0xcb94db[_0x1a41d1(0x347,0x2ff,0x29d,0x2de)],'cover_image':_0x304ef0!==undefined?_0x304ef0:_0xcb94db['cover_image'],'source_type':_0x17912c!==undefined?_0x17912c:_0xcb94db[_0x1a41d1(0x318,0x348,0x331,0x323)],'source_url':_0x19fa51!==undefined?_0x19fa51:_0xcb94db[_0xdb2c67(0x436,0x485,0x44d,0x47d)],'source_text':_0x5a6ab1!==undefined?_0x5a6ab1:_0xcb94db[_0xdb2c67(0x3ec,0x433,0x46b,0x478)]});if(_0x2defbb!==undefined){if('tSKpM'===_0x1a41d1(0x337,0x33f,0x38e,0x39b))return _0x5f1e9d['status'](-0x5db*0x2+-0x9*-0x118+0x36f*0x1)[_0x1a41d1(0x30e,0x2da,0x2c1,0x27a)]({'success':![],'message':_0xdb2c67(0x482,0x41f,0x412,0x437)});else{if(Array[_0xdb2c67(0x4b2,0x48d,0x4e8,0x454)](_0x2defbb))await _0xcb94db[_0x1a41d1(0x30a,0x30e,0x366,0x2e2)](_0x2defbb);else{if(_0xdb2c67(0x471,0x4aa,0x456,0x4e5)===_0xdb2c67(0x4ab,0x4b8,0x4ec,0x46e))return _0x1a07a5['status'](0x1f92+-0x746*0x4+0x17*-0xa)[_0xdb2c67(0x481,0x43e,0x45e,0x490)]({'success':![],'message':_0x1a41d1(0x339,0x330,0x358,0x32b)});else await _0xcb94db[_0x1a41d1(0x2b4,0x30e,0x34b,0x34c)]([]);}}}const _0x1050c3=await Note[_0x1a41d1(0x26f,0x2cc,0x2af,0x2a0)](_0xcb94db['id'],{'include':[{'model':Tag,'as':_0xdb2c67(0x49d,0x49c,0x4af,0x47a),'through':{'attributes':[]}},{'model':Category,'as':_0x1a41d1(0x331,0x342,0x318,0x35c)}]});_0xb88e9b[_0x1a41d1(0x32e,0x2da,0x2b6,0x2fa)]({'success':!![],'message':_0xdb2c67(0x422,0x419,0x42c,0x43e),'data':_0x1050c3});}catch(_0x2e6eae){_0x1a41d1(0x313,0x328,0x350,0x34e)!==_0xdb2c67(0x492,0x48c,0x46f,0x4b9)?_0x281e5a(_0x2fcdb9):_0x4ebc8b(_0x2e6eae);}},exports[_0x_0x26c62a(-0x116,-0xf3,-0xc4,-0x122)]=async(_0x6e1e31,_0x148aba,_0x1495a3)=>{function _0x1e778c(_0x55c205,_0x216a6f,_0x53f679,_0x58a680){return _0x_0x37731b(_0x55c205-0x186,_0x55c205,_0x58a680-0x13d,_0x58a680-0x186);}function _0x2d12fb(_0x164acf,_0x4c9e44,_0x4b86d8,_0x5e8b01){return _0x_0x37731b(_0x164acf-0x1bf,_0x164acf,_0x4c9e44-0x14a,_0x5e8b01-0x85);}try{if(_0x2d12fb(0x41a,0x45b,0x4b0,0x472)===_0x2d12fb(0x492,0x45b,0x401,0x43c)){const {id:_0x20fc8c}=_0x6e1e31[_0x1e778c(0x443,0x49f,0x430,0x488)],_0x32c8ca=await Note['findByPk'](_0x20fc8c);if(!_0x32c8ca){if('WRzHo'!==_0x2d12fb(0x471,0x483,0x4b6,0x48d))return _0x148aba[_0x2d12fb(0x4bb,0x462,0x413,0x49b)](-0x743*-0x1+0x120*0xd+-0x144f)[_0x2d12fb(0x3f5,0x416,0x3ef,0x42a)]({'success':![],'message':'笔记不存在'});else{const _0x3c3a6=_0x1afaed[_0x2d12fb(0x429,0x3df,0x3f7,0x3ac)]();if(isPublicRequest)delete _0x3c3a6[_0x2d12fb(0x3db,0x41a,0x46e,0x3c0)],delete _0x3c3a6[_0x2d12fb(0x415,0x411,0x446,0x3df)],delete _0x3c3a6['updated_at'],delete _0x3c3a6[_0x2d12fb(0x413,0x414,0x421,0x3e0)],delete _0x3c3a6['content'],_0x5a8a65['password']&&_0x34355f[_0x1e778c(0x3b6,0x418,0x44b,0x40d)]['trim']()!==''&&(_0x3c3a6[_0x2d12fb(0x3fe,0x441,0x41d,0x3fd)]=!![],delete _0x3c3a6[_0x2d12fb(0x3e7,0x3ef,0x3c6,0x415)],delete _0x3c3a6[_0x2d12fb(0x48c,0x428,0x44b,0x45b)]);else{}return _0x3c3a6;}}await _0x32c8ca[_0x1e778c(0x419,0x431,0x404,0x42a)](),_0x148aba[_0x2d12fb(0x3ed,0x416,0x41c,0x428)]({'success':!![],'message':'笔记删除成功'});}else _0x1ce54e[_0x1e778c(0x417,0x416,0x465,0x453)]={[_0x3a7590[_0x1e778c(0x410,0x3f2,0x404,0x408)]]:'%'+_0x1b4812+'%'};}catch(_0x39cfad){if(_0x2d12fb(0x476,0x497,0x48d,0x460)===_0x1e778c(0x47b,0x4e4,0x49f,0x48a))_0x1495a3(_0x39cfad);else return _0x1e8986[_0x1e778c(0x3c3,0x3ce,0x441,0x3f3)]()[_0x1e778c(0x414,0x400,0x406,0x3d5)](_0x2d12fb(0x3fe,0x3dd,0x3dd,0x417))[_0x1e778c(0x44f,0x3ec,0x3f4,0x3f3)]()['constructor'](_0x32c8c9)[_0x1e778c(0x3f1,0x3f1,0x3f9,0x3d5)](_0x1e778c(0x408,0x3e5,0x412,0x3d0));}},exports[_0x_0x26c62a(-0x12d,-0x143,-0x130,-0x164)]=async(_0x150a6e,_0x34a9c1,_0x23a2cc)=>{function _0x578b5b(_0xd891e1,_0x455c92,_0x2cc6e3,_0x5d13df){return _0x_0x37731b(_0xd891e1-0x15d,_0x2cc6e3,_0xd891e1- -0x524,_0x5d13df-0xf3);}function _0x3f59e4(_0x5bd4ef,_0x5411d0,_0x47b155,_0x491171){return _0x_0x37731b(_0x5bd4ef-0x138,_0x491171,_0x5411d0-0x127,_0x491171-0x9e);}try{if(!_0x150a6e[_0x578b5b(-0x257,-0x256,-0x21b,-0x1f7)]||_0x150a6e['files'][_0x578b5b(-0x1ee,-0x1e2,-0x1bf,-0x1c6)]===0x190*0xa+-0xf6b+-0x35)return _0x34a9c1[_0x3f59e4(0x466,0x43f,0x48a,0x403)](0x38b*-0xb+0xe85+0x1a04)[_0x3f59e4(0x3b3,0x3f3,0x3c4,0x3b4)]({'success':![],'message':'未上传文件'});const _0x3e2c53=_0x150a6e[_0x578b5b(-0x257,-0x281,-0x228,-0x20d)][_0x578b5b(-0x287,-0x246,-0x2c9,-0x260)](_0x3ca2b2=>_0x3ca2b2[_0x578b5b(-0x267,-0x25f,-0x20b,-0x253)]||config[_0x578b5b(-0x28d,-0x246,-0x282,-0x2e1)](_0x3ca2b2));_0x34a9c1[_0x578b5b(-0x258,-0x236,-0x272,-0x267)]({'success':!![],'message':_0x3f59e4(0x45f,0x466,0x463,0x42b),'data':{'urls':_0x3e2c53}});}catch(_0x1b50b7){_0x23a2cc(_0x1b50b7);}},exports[_0x_0x26c62a(-0xb8,-0x6b,-0xf9,-0x8f)]=async(_0x5125c1,_0x24aa46,_0x2e4249)=>{function _0xb34c94(_0x2aad69,_0x3acd42,_0x50a0c2,_0x5959b1){return _0x_0x37731b(_0x2aad69-0xa5,_0x5959b1,_0x3acd42-0x216,_0x5959b1-0x1dd);}function _0x23bc25(_0x4e4d9d,_0x27e484,_0x2961d6,_0x2af3e2){return _0x_0x26c62a(_0x2961d6-0x487,_0x27e484-0x12b,_0x2961d6-0x18b,_0x4e4d9d);}try{const _0x3b2556=await Category[_0xb34c94(0x477,0x4c0,0x49c,0x4b1)]({'where':{'type':_0xb34c94(0x46f,0x4b7,0x46e,0x4af)},'order':[['sort_order',_0x23bc25(0x3e1,0x367,0x3b4,0x3d7)],[_0x23bc25(0x356,0x301,0x360,0x3a0),_0x23bc25(0x378,0x3ab,0x3b4,0x3dc)]]});_0x24aa46[_0xb34c94(0x500,0x4e2,0x510,0x501)]({'success':!![],'data':_0x3b2556});}catch(_0x328c93){_0x2e4249(_0x328c93);}},exports['getNoteTagStats']=async(_0x5a93bc,_0xe7f6e6,_0x559ff6)=>{function _0x296652(_0x5badb8,_0x4e7cee,_0x3056aa,_0x9643ff){return _0x_0x26c62a(_0x5badb8-0x5a7,_0x4e7cee-0x12f,_0x3056aa-0x0,_0x9643ff);}function _0x460679(_0x242e4d,_0x575ce3,_0x41f40c,_0x599c95){return _0x_0x37731b(_0x242e4d-0xfa,_0x242e4d,_0x599c95- -0xc7,_0x599c95-0xa6);}try{const {sequelize:_0x136053}=require('../config/database'),_0x2b5e9d=_0x5a93bc[_0x460679(0x27c,0x23d,0x223,0x283)][_0x296652(0x4c8,0x4b0,0x519,0x4b5)]&&_0x5a93bc[_0x460679(0x2ae,0x2a3,0x2a2,0x283)]['authorization']['startsWith'](_0x296652(0x4c9,0x4cc,0x483,0x521)),_0x277b63=_0x2b5e9d?'t.id,\x20t.name,\x20t.color,\x20t.description,\x20t.category,\x20t.category_id,':_0x296652(0x4dc,0x4c9,0x49b,0x4b8),_0x466563=await _0x136053['query'](_0x460679(0x222,0x276,0x1ca,0x212)+_0x277b63+_0x296652(0x4db,0x52a,0x4fc,0x508),{'type':_0x136053['QueryTypes'][_0x460679(0x213,0x1d7,0x1ed,0x1ca)]});_0xe7f6e6['json']({'success':!![],'data':_0x466563});}catch(_0x9427b5){_0x559ff6(_0x9427b5);}},exports[_0x_0x26c62a(-0xbd,-0x7e,-0xd9,-0xd7)]=async(_0x27ff18,_0x134623,_0x168c6e)=>{function _0x249719(_0x19d97d,_0x3ef6ef,_0x19ade3,_0x16c70b){return _0x_0x26c62a(_0x19ade3-0x226,_0x3ef6ef-0x2,_0x19ade3-0xd8,_0x19d97d);}function _0x175fc3(_0x13cf78,_0x256dea,_0x5eb297,_0x23c1d1){return _0x_0x37731b(_0x13cf78-0x69,_0x5eb297,_0x13cf78- -0x2fc,_0x23c1d1-0x1);}try{const {id:_0x25cd88}=_0x27ff18['params'],{password:_0xedf4d1}=_0x27ff18[_0x175fc3(-0x4b,-0x52,-0x15,-0x15)],{sequelize:_0x49a1c2}=require('../config/database'),_0x3870c4=_0x27ff18[_0x175fc3(0x4e,0x13,0x66,0x28)][_0x175fc3(0x0,-0x3c,0x34,-0x3e)]&&_0x27ff18['headers'][_0x249719(0x175,0x16d,0x147,0x15d)]['startsWith']('Bearer\x20'),_0xec6b57=await Note[_0x175fc3(-0x3e,-0x4a,-0x7b,-0x70)](_0x25cd88);if(!_0xec6b57){if(_0x175fc3(-0x38,-0x52,0x9,0xc)===_0x175fc3(-0x38,0xb,-0x6a,-0x6c))return _0x134623[_0x175fc3(0x1c,-0x9,0x39,-0x16)](-0x1479+-0x1*0x1623+0x2c30)[_0x175fc3(-0x30,-0x7d,0x2a,-0x1d)]({'success':![],'message':'笔记不存在'});else _0x552549(_0x1a03fa);}if(!_0x3870c4&&!_0xec6b57['is_published']){if(_0x249719(0x10e,0xdf,0x131,0x181)===_0x175fc3(-0x12,-0x20,-0x5b,0x21))_0x7766c2[_0x1c41f9['or']]=[{'title':{[_0x9f137d[_0x249719(0xd6,0x12d,0x116,0x149)]]:'%'+_0x2679f4+'%'}},{'content':{[_0x3ea6e0[_0x249719(0xbf,0x105,0x116,0xf5)]]:'%'+_0xc7592e+'%'}},{'tags':{[_0x1206ea[_0x249719(0x158,0x159,0x116,0x134)]]:'%'+_0x4a9875+'%'}}];else return _0x134623['status'](-0x792*-0x2+0x100*-0x1a+0xc6f)[_0x175fc3(-0x30,-0x4,0x31,0x13)]({'success':![],'message':_0x249719(0x127,0x113,0xdb,0xd2)});}const _0x59993f=_0xec6b57['password'],_0x373e6d=_0x59993f&&typeof _0x59993f===_0x249719(0x18d,0xfe,0x143,0x175)&&_0x59993f[_0x175fc3(-0x59,-0xbc,-0x8c,-0x54)]()!=='';if(_0x373e6d&&!_0x3870c4){if(!_0xedf4d1){if(_0x249719(0x16a,0x133,0x128,0x102)!==_0x175fc3(-0x21,-0x18,-0x2c,0x1f))return _0x134623['status'](0x1846+-0xa65*-0x3+-0x35e4)[_0x249719(0xfb,0xce,0x117,0x14e)]({'success':![],'message':_0x249719(0x1a9,0x11b,0x16c,0x1be),'requiresPassword':!![]});else _0xa35ff4(_0x1d537a);}if(_0xedf4d1!==_0x59993f)return _0x134623[_0x175fc3(0x1c,-0x34,0x70,-0x17)](0xd12+-0x763*0x3+0x1*0xaa8)[_0x249719(0x15d,0xd8,0x117,0xc9)]({'success':![],'message':'密码错误'});}const _0x412338=await _0x49a1c2['query'](_0x175fc3(0x2d,-0x2c,-0x35,-0x2),{'replacements':[_0x25cd88],'type':_0x49a1c2['QueryTypes'][_0x249719(0xdc,0xe1,0xdc,0xb5)]});_0x134623[_0x175fc3(-0x30,0x20,-0x10,-0x7a)]({'success':!![],'data':_0x412338});}catch(_0x33218b){_0x168c6e(_0x33218b);}},exports[_0x_0x37731b(0x255,0x243,0x299,0x270)]=async(_0x17d057,_0x223ea8,_0x55e1ea)=>{function _0x3d3b31(_0x2c67cd,_0x265072,_0x53e450,_0x3e42ab){return _0x_0x26c62a(_0x2c67cd-0x30a,_0x265072-0x1ec,_0x53e450-0x106,_0x3e42ab);}function _0x2672ee(_0x22e9d1,_0x5950b9,_0x2e3dbb,_0x44af7c){return _0x_0x37731b(_0x22e9d1-0x6,_0x22e9d1,_0x44af7c- -0x332,_0x44af7c-0x1ab);}try{const {id:_0x1df819}=_0x17d057[_0x2672ee(0x46,-0x1f,0x2,0x19)],{disk_name:_0x4be1ab,title:_0x33933a,file_size:_0x3d3114,extract_code:_0xc69f1c,download_url:_0x3ee61c,sort_order:_0x1c7190}=_0x17d057[_0x3d3b31(0x214,0x26d,0x1d8,0x1c7)],{sequelize:_0x28d7c1}=require('../config/database'),_0x51b529=await Note[_0x2672ee(-0x66,-0x7b,-0xb6,-0x74)](_0x1df819);if(!_0x51b529)return _0x223ea8[_0x2672ee(0xf,-0x49,-0x16,-0x1a)](-0x1*0x1f84+0x12a9+0xe6f)[_0x3d3b31(0x1fb,0x258,0x256,0x223)]({'success':![],'message':_0x2672ee(0x40,0x14,-0x2,-0x10)});const [_0x17e26b]=await _0x28d7c1[_0x3d3b31(0x1e0,0x1ef,0x243,0x1f5)]('\x0a\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20note_disks\x20(note_id,\x20disk_name,\x20title,\x20file_size,\x20extract_code,\x20download_url,\x20sort_order)\x0a\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20\x20\x20',{'replacements':[_0x1df819,_0x4be1ab,_0x33933a,_0x3d3114||null,_0xc69f1c||null,_0x3ee61c||null,_0x1c7190||0xb6*0x35+-0x1*0x359+-0x2255]});_0x223ea8[_0x2672ee(-0x99,-0x17,-0x9f,-0x66)]({'success':!![],'message':_0x3d3b31(0x221,0x1d0,0x1c6,0x1f9),'data':{'id':_0x17e26b}});}catch(_0xb1781c){_0x3d3b31(0x222,0x285,0x21d,0x1e4)==='mBILq'?_0x5bbcdc(_0x4893ac):_0x55e1ea(_0xb1781c);}},exports[_0x_0x37731b(0x272,0x29c,0x2d2,0x331)]=async(_0x4419f7,_0xc98cee,_0x53c420)=>{function _0x39ab0c(_0x587435,_0x383f59,_0x2dc8a7,_0x2202da){return _0x_0x26c62a(_0x2202da-0x10d,_0x383f59-0x182,_0x2dc8a7-0x136,_0x383f59);}function _0x3d18b5(_0x148807,_0x658cde,_0x3c0284,_0x521bc0){return _0x_0x37731b(_0x148807-0x43,_0x148807,_0x521bc0- -0x2e5,_0x521bc0-0xbd);}try{const {id:_0x4886a1,diskId:_0x5971d7}=_0x4419f7[_0x39ab0c(0xa5,0x1c,0xaa,0x7d)],{disk_name:_0x5a2dc5,title:_0x121c0f,file_size:_0x1e6da8,extract_code:_0x1553cc,download_url:_0x5e5160}=_0x4419f7[_0x39ab0c(-0x1b,0x11,0xa,0x17)],{sequelize:_0x410e98}=require('../config/database');await _0x410e98[_0x3d18b5(-0x81,-0xe,-0x3b,-0x34)](_0x3d18b5(-0x27,-0x48,-0xa8,-0x4b),{'replacements':[_0x5a2dc5,_0x121c0f,_0x1e6da8||null,_0x1553cc||null,_0x5e5160||null,_0x5971d7,_0x4886a1]}),_0xc98cee[_0x39ab0c(-0x5b,-0x3,0x24,-0x2)]({'success':!![],'message':'网盘更新成功'});}catch(_0x52a969){if(_0x39ab0c(0x88,0x5f,-0xb,0x3d)==='zBUHx')return _0x3880ac[_0x3d18b5(0xb,0x7b,-0x12,0x33)](0x183*-0x13+-0xc21+0x1*0x2a6e)[_0x39ab0c(0x6,0x58,0x44,-0x2)]({'success':![],'message':_0x3d18b5(-0xa,0x29,0x95,0x3d)});else _0x53c420(_0x52a969);}},exports[_0x_0x37731b(0x3a7,0x31a,0x34f,0x3a7)]=async(_0x564527,_0x196cb4,_0x57df15)=>{function _0x4ecef3(_0x200ebc,_0x17cc57,_0x504ad1,_0x2fe542){return _0x_0x37731b(_0x200ebc-0xb7,_0x2fe542,_0x200ebc- -0x31,_0x2fe542-0xfa);}function _0x37c16e(_0x49f11d,_0x4da26a,_0x4470ea,_0x653d50){return _0x_0x26c62a(_0x4470ea-0x215,_0x4da26a-0x143,_0x4470ea-0x11e,_0x653d50);}try{const {id:_0x169966,diskId:_0x2a9bac}=_0x564527[_0x4ecef3(0x31a,0x34e,0x2bf,0x2dd)],{sequelize:_0x2439f1}=require('../config/database');await _0x2439f1['query'](_0x4ecef3(0x31d,0x312,0x2fe,0x2dc),{'replacements':[_0x2a9bac,_0x169966]}),_0x196cb4[_0x37c16e(0xf8,0xf3,0x106,0xae)]({'success':!![],'message':_0x37c16e(0x10b,0xcb,0x100,0x160)});}catch(_0x50c257){_0x57df15(_0x50c257);}};