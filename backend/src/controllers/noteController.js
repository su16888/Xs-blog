(function(_0x1cab6b,_0x4c657c){const _0x1c9f62=_0x1cab6b();function _0x1d48ad(_0x108564,_0x6da8ca,_0x559e6d,_0x19f4a2){return _0x_0x5938(_0x559e6d-0x278,_0x6da8ca);}function _0x356704(_0x18eb74,_0x37dec7,_0x5057be,_0x2ecf5f){return _0x_0x5938(_0x2ecf5f-0x353,_0x37dec7);}while(!![]){try{const _0x470505=-parseInt(_0x356704(0x4ff,0x4e1,0x56c,0x534))/(-0x157c+0x23b4+0xe37*-0x1)+parseInt(_0x356704(0x5a6,0x504,0x5ae,0x550))/(0x2303+-0x1e51*-0x1+0x20a9*-0x2)*(parseInt(_0x356704(0x576,0x52e,0x556,0x55d))/(0x2307*0x1+0x3*0x4dc+-0x3198))+-parseInt(_0x356704(0x546,0x585,0x545,0x541))/(-0xc67+0xb*-0x97+0x12e8)+parseInt(_0x1d48ad(0x474,0x4f5,0x4b0,0x471))/(0x392+-0x59e+0x211)*(-parseInt(_0x356704(0x55d,0x544,0x58c,0x563))/(-0x7cf*0x4+0x1*-0x1b32+0x3a74))+parseInt(_0x356704(0x4a5,0x501,0x4c2,0x4f4))/(0x1*-0x2383+-0x1d92+0x411c)*(parseInt(_0x356704(0x51e,0x4de,0x4fe,0x525))/(-0x2*0x1169+0x24d7+0x1*-0x1fd))+-parseInt(_0x356704(0x532,0x4ae,0x530,0x4d6))/(0x359+-0xe*-0x274+-0x25a8)*(-parseInt(_0x356704(0x563,0x4ea,0x58f,0x542))/(-0x45d*-0x1+-0x269b+0x2248))+parseInt(_0x1d48ad(0x3a7,0x3e9,0x406,0x3f2))/(0x1506+-0xaf6+0x5f*-0x1b);if(_0x470505===_0x4c657c)break;else _0x1c9f62['push'](_0x1c9f62['shift']());}catch(_0x53f562){_0x1c9f62['push'](_0x1c9f62['shift']());}}}(_0x_0x2d23,-0xc83e3+-0x9d0bf+0x1e52cd));function _0x_0x36d93b(_0x9870a4,_0x43d5d1,_0x341ca7,_0xe6bb53){return _0x_0x5938(_0x43d5d1- -0x397,_0xe6bb53);}const _0x_0x4f77c=(function(){let _0x2c9bb2=!![];return function(_0x16040d,_0xc5a3c8){function _0xeffb1f(_0x2afb5b,_0x4baf05,_0x37e5e1,_0x171430){return _0x_0x5938(_0x171430-0x2de,_0x2afb5b);}function _0x4b6f7c(_0x57a651,_0x2a9755,_0x3a5d71,_0x23763f){return _0x_0x5938(_0x23763f- -0xd3,_0x3a5d71);}if(_0xeffb1f(0x4f3,0x4dd,0x4e7,0x4bb)!==_0x4b6f7c(0x11f,0xf8,0x13b,0x10a))_0x36bbee[_0x1b4422['or']]=[{'title':{[_0x528855['like']]:'%'+_0x109859+'%'}},{'content':{[_0x526b8e[_0x4b6f7c(0xcb,0xcb,0xf7,0x110)]]:'%'+_0x16d4d1+'%'}},{'tags':{[_0x2d7835[_0xeffb1f(0x487,0x4e2,0x4fb,0x4c1)]]:'%'+_0x3f844d+'%'}}];else{const _0x409051=_0x2c9bb2?function(){function _0x362c5f(_0x45db91,_0x25523d,_0x246dbb,_0x39977b){return _0x4b6f7c(_0x45db91-0xd9,_0x25523d-0x198,_0x39977b,_0x45db91-0x4b4);}function _0x3c5613(_0x4afb7f,_0x5996e8,_0x4689a6,_0x263e6b){return _0x4b6f7c(_0x4afb7f-0x8,_0x5996e8-0x13e,_0x4689a6,_0x5996e8- -0x1e6);}if(_0xc5a3c8){if('ixEID'===_0x3c5613(-0xdc,-0x11e,-0xf6,-0x111))return _0x54cce1[_0x3c5613(-0xe5,-0x9d,-0x4e,-0xbe)](0x2209+0x1dcb+-0x6*0xa60)['json']({'success':![],'message':'笔记不存在'});else{const _0x502fff=_0xc5a3c8[_0x3c5613(-0x61,-0x86,-0x84,-0x3c)](_0x16040d,arguments);return _0xc5a3c8=null,_0x502fff;}}}:function(){};return _0x2c9bb2=![],_0x409051;}};}()),_0x_0x236360=_0x_0x4f77c(this,function(){function _0x5e1419(_0x4c1ce9,_0x4010b3,_0x2a3c49,_0x4c3003){return _0x_0x5938(_0x4c1ce9-0x3b5,_0x2a3c49);}function _0x383a06(_0x4c644d,_0x544a0c,_0x3875d2,_0xbc5f76){return _0x_0x5938(_0x3875d2-0x26b,_0xbc5f76);}return _0x_0x236360[_0x5e1419(0x581,0x525,0x5b7,0x5c4)]()[_0x383a06(0x44d,0x4ae,0x470,0x443)](_0x5e1419(0x548,0x555,0x5a2,0x551))[_0x383a06(0x427,0x41c,0x437,0x40b)]()['constructor'](_0x_0x236360)[_0x383a06(0x4ca,0x46c,0x470,0x41b)]('(((.+)+)+)+$');});_0x_0x236360();function _0x_0x5938(_0x36bbee,_0x1b4422){_0x36bbee=_0x36bbee-(-0x8*0xc0+0x1b47+-0x13cc);const _0x528855=_0x_0x2d23();let _0x109859=_0x528855[_0x36bbee];if(_0x_0x5938['kToyUl']===undefined){var _0x526b8e=function(_0x1fc759){const _0x4296b0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1f9e1d='',_0x140d4b='',_0x1553e5=_0x1f9e1d+_0x526b8e;for(let _0x7ddb74=0x119*0x1f+-0x1356+-0xeb1,_0x70074c,_0xfd9468,_0x3167bb=-0x26*0x47+0xe26+0x4*-0xe7;_0xfd9468=_0x1fc759['charAt'](_0x3167bb++);~_0xfd9468&&(_0x70074c=_0x7ddb74%(-0x38e+0x1640+0x957*-0x2)?_0x70074c*(-0x8*0x2b6+0xe2d+-0x7c3*-0x1)+_0xfd9468:_0xfd9468,_0x7ddb74++%(-0x7*-0x211+-0x21dc*0x1+0x1369*0x1))?_0x1f9e1d+=_0x1553e5['charCodeAt'](_0x3167bb+(0xce2+-0x34*-0x7d+-0x263c))-(-0x16a+0x1*-0x87b+0x1*0x9ef)!==-0x1b90+0x45c*-0x4+0x24*0x140?String['fromCharCode'](-0x1*0x97d+0x2*0xc07+-0xd92&_0x70074c>>(-(-0x1a16+0x142d+0x5eb)*_0x7ddb74&0x1ad6+-0x19d1*-0x1+0x3*-0x118b)):_0x7ddb74:-0x14e6+0x2424+-0xf3e*0x1){_0xfd9468=_0x4296b0['indexOf'](_0xfd9468);}for(let _0x58f6dd=-0x983+-0x2117+0x2a9a,_0x343ec4=_0x1f9e1d['length'];_0x58f6dd<_0x343ec4;_0x58f6dd++){_0x140d4b+='%'+('00'+_0x1f9e1d['charCodeAt'](_0x58f6dd)['toString'](-0x460+-0x173+0x1*0x5e3))['slice'](-(0x1131+-0x1*0x12fb+0x2*0xe6));}return decodeURIComponent(_0x140d4b);};_0x_0x5938['AuyJgF']=_0x526b8e,_0x_0x5938['NYgXlO']={},_0x_0x5938['kToyUl']=!![];}const _0x16d4d1=_0x528855[0x7b0+0x3*0x652+-0x1aa6],_0x2d7835=_0x36bbee+_0x16d4d1,_0x3f844d=_0x_0x5938['NYgXlO'][_0x2d7835];if(!_0x3f844d){const _0x454f41=function(_0xa849bd){this['WhToBu']=_0xa849bd,this['sTtPkY']=[0xb3f+-0xd82+0x244,-0x2e3*0xb+-0x1a66+0x3a27,0x255e+0x253*-0xb+-0xbcd],this['NwNNMO']=function(){return'newState';},this['Xddrmt']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['UbZLRz']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x454f41['prototype']['pNiemg']=function(){const _0x151d75=new RegExp(this['Xddrmt']+this['UbZLRz']),_0x292f7f=_0x151d75['test'](this['NwNNMO']['toString']())?--this['sTtPkY'][0x1*-0x94f+-0x176d*-0x1+-0xe1d]:--this['sTtPkY'][0x1673+0x219b+0x19a*-0x23];return this['ZjwiLp'](_0x292f7f);},_0x454f41['prototype']['ZjwiLp']=function(_0x247817){if(!Boolean(~_0x247817))return _0x247817;return this['ewHnLB'](this['WhToBu']);},_0x454f41['prototype']['ewHnLB']=function(_0x524c7e){for(let _0x24d85b=-0x12fa*-0x1+0xed5+-0x5*0x6c3,_0x1fa7c6=this['sTtPkY']['length'];_0x24d85b<_0x1fa7c6;_0x24d85b++){this['sTtPkY']['push'](Math['round'](Math['random']())),_0x1fa7c6=this['sTtPkY']['length'];}return _0x524c7e(this['sTtPkY'][0x1066+0xf1b+-0x1f81]);},new _0x454f41(_0x_0x5938)['pNiemg'](),_0x109859=_0x_0x5938['AuyJgF'](_0x109859),_0x_0x5938['NYgXlO'][_0x2d7835]=_0x109859;}else _0x109859=_0x3f844d;return _0x109859;}const {Note,Tag,Category,NoteTag}=require('../models/associations'),{Op}=require('sequelize'),config=require('../config/config'),passwordAttempts=new Map(),MAX_ATTEMPTS=-0x4c0*-0x8+0x842+0x2e3f*-0x1,LOCKOUT_DURATION=(-0x1*0xc43+-0x4*-0x7d3+0x12cd*-0x1)*(0x219*-0x4+0x11de+-0x93e)*(-0x38c+-0x6c5*-0x3+-0xcdb),getClientIP=_0x118d56=>_0x118d56[_0x_0x5b3069(0x5ac,0x577,0x530,0x553)][_0x_0x36d93b(-0x239,-0x1ff,-0x1e2,-0x1fb)]?.[_0x_0x36d93b(-0x1d9,-0x1b1,-0x17c,-0x154)](',')[-0x12ef*-0x2+0x97*0x8+0x17*-0x1da]?.['trim']()||_0x118d56['ip']||_0x_0x36d93b(-0x1ba,-0x177,-0x14e,-0x1d3),checkPasswordAttempts=_0x53c612=>{const _0x42201e=passwordAttempts[_0x13096a(-0x4d,-0xa0,-0x4,-0xa1)](_0x53c612);if(!_0x42201e||Date['now']()-_0x42201e[_0x13096a(-0x7d,-0x48,-0x2c,-0xc7)]>LOCKOUT_DURATION){if(_0x42201e)passwordAttempts[_0x265b44(0x52c,0x4db,0x49b,0x528)](_0x53c612);return{'allowed':!![],'remaining':MAX_ATTEMPTS,'count':0x0};}function _0x13096a(_0x54355f,_0x41bb3a,_0x149abb,_0x52113c){return _0x_0x36d93b(_0x54355f-0x114,_0x54355f-0x166,_0x149abb-0x44,_0x149abb);}const _0x2cdddf=MAX_ATTEMPTS-_0x42201e[_0x13096a(-0x77,-0xbb,-0x6c,-0xb9)];function _0x265b44(_0x1a7338,_0x4ec3b1,_0x168586,_0x1525f4){return _0x_0x5b3069(_0x1a7338-0x141,_0x4ec3b1-0x17b,_0x1525f4,_0x4ec3b1-0x12);}return{'allowed':_0x2cdddf>0x54b+0x8eb*0x3+-0x4*0x803,'remaining':Math[_0x265b44(0x596,0x539,0x561,0x4f6)](0x152b+-0x125f+-0x2cc,_0x2cdddf),'count':_0x42201e[_0x13096a(-0x77,-0xa8,-0x42,-0x6c)]};},recordFailedAttempt=_0x58b4f4=>{const _0xe3ef64=passwordAttempts[_0x389d76(0x21a,0x1ea,0x1d5,0x207)](_0x58b4f4);if(!_0xe3ef64||Date['now']()-_0xe3ef64[_0x336055(-0x41,0x4b,-0x14,-0x5)]>LOCKOUT_DURATION)return passwordAttempts[_0x389d76(0x209,0x208,0x1de,0x204)](_0x58b4f4,{'count':0x1,'firstAttempt':Date['now']()}),{'remaining':MAX_ATTEMPTS-(0x2710*0x1+0xce*0x18+-0x3a5f),'count':0x1};_0xe3ef64[_0x336055(0x37,0x25,0x45,0x1)]++;function _0x389d76(_0x337f03,_0x58ae56,_0x42d0c7,_0x105845){return _0x_0x36d93b(_0x337f03-0x1b1,_0x42d0c7-0x388,_0x42d0c7-0x164,_0x58ae56);}function _0x336055(_0x5be69e,_0x119a14,_0x510f49,_0x3642ba){return _0x_0x5b3069(_0x5be69e-0x150,_0x119a14-0x89,_0x119a14,_0x3642ba- -0x501);}return{'remaining':Math[_0x336055(0x6,-0x2c,0x59,0x26)](0x3a*-0x26+0x1499+-0xbfd,MAX_ATTEMPTS-_0xe3ef64['count']),'count':_0xe3ef64['count']};},clearAttempts=_0xff9450=>passwordAttempts['delete'](_0xff9450);exports['getPublicNotes']=async(_0x485251,_0x17d557,_0x32da81)=>{function _0x43d604(_0x29e055,_0x3f4e17,_0x39bbc0,_0x425a91){return _0x_0x36d93b(_0x29e055-0x181,_0x39bbc0-0x12a,_0x39bbc0-0xee,_0x29e055);}function _0xa900fc(_0x2c0e00,_0x242c4c,_0x3fdf4d,_0x6adc4b){return _0x_0x36d93b(_0x2c0e00-0x177,_0x2c0e00-0x72b,_0x3fdf4d-0x17a,_0x242c4c);}try{const _0x1f5636=parseInt(_0x485251[_0xa900fc(0x56f,0x55f,0x52a,0x55c)][_0x43d604(-0x78,-0xb9,-0x91,-0x74)])||0x3*0xb19+-0x3*-0x57f+0x31c7*-0x1,_0x402e16=parseInt(_0x485251[_0xa900fc(0x56f,0x59f,0x578,0x57c)][_0x43d604(-0x57,-0xf2,-0x93,-0x9d)])||-0x1e46+-0x45a*0x4+0x4*0xbee,_0x198d81=_0x485251[_0x43d604(-0x94,-0x51,-0x92,-0x9f)][_0xa900fc(0x563,0x546,0x53e,0x540)]||'desc',_0x28cbbf=(_0x1f5636-(-0x14e5+-0x2*0x2f8+0x1ad6))*_0x402e16,{category_id:_0x56dae7,tag_id:_0x33dd75,category:_0x371d69,tag:_0xd4c57d,search:_0x28156c}=_0x485251[_0xa900fc(0x56f,0x51f,0x592,0x544)],_0x1031df={'is_published':!![]},_0x475f0a=[{'model':Tag,'as':_0x43d604(-0x6e,-0x7a,-0xbc,-0xbe),'attributes':['name',_0xa900fc(0x51e,0x506,0x4ef,0x52a)],'through':{'attributes':[]},'required':![]},{'model':Category,'as':'categoryInfo','attributes':[_0xa900fc(0x59a,0x5f3,0x53b,0x552),_0xa900fc(0x572,0x54f,0x557,0x534)],'required':![]}];if(_0x56dae7)_0x1031df[_0x43d604(-0x1d,-0x9e,-0x6c,-0x7f)]=_0x56dae7;else{if(_0x371d69){if(_0xa900fc(0x5ae,0x550,0x5ba,0x584)===_0x43d604(-0xd6,-0xa8,-0xd4,-0x115))return _0xd16c0c[_0xa900fc(0x5b0,0x55c,0x605,0x606)](-0xa*0x193+-0x1c1*0xe+-0x5*-0x865)[_0x43d604(-0x122,-0xdb,-0xdd,-0x127)]({'success':![],'message':'密码错误次数过多，请1小时后重试！','errorCount':_0x5c203b[_0x43d604(-0xf7,-0x9c,-0xb3,-0x72)],'remaining':0x0});else _0x1031df[_0xa900fc(0x5ac,0x5f2,0x575,0x5bc)]={[Op[_0xa900fc(0x577,0x55e,0x561,0x5ac)]]:'%'+_0x371d69+'%'};}}if(_0x33dd75)_0x475f0a[-0x22*0xc5+0x1d81+-0x2d*0x13]['where']={'id':_0x33dd75},_0x475f0a[0x14a7+-0x18d3+0x216*0x2][_0x43d604(-0x127,-0x136,-0xd8,-0xd1)]=!![];else{if(_0xd4c57d){if(_0xa900fc(0x579,0x583,0x532,0x56d)===_0xa900fc(0x579,0x5d2,0x51f,0x594))_0x1031df['tags']={[Op[_0xa900fc(0x577,0x54d,0x5b4,0x528)]]:'%'+_0xd4c57d+'%'};else{const _0x3f983e=_0x10391c[_0xa900fc(0x5c1,0x5c9,0x57a,0x5c2)]();return delete _0x3f983e[_0xa900fc(0x521,0x560,0x4f8,0x54a)],delete _0x3f983e[_0x43d604(-0x7e,-0x92,-0x6e,-0x8e)],delete _0x3f983e[_0x43d604(-0xad,-0x6d,-0xba,-0xf5)],delete _0x3f983e[_0xa900fc(0x561,0x52d,0x5a3,0x59f)],_0x5eb93b[_0x43d604(-0xa3,-0xd8,-0xdd,-0x131)]({'success':!![],'data':{..._0x3f983e,'requiresPassword':![]}});}}}_0x28156c&&(_0xa900fc(0x538,0x4f7,0x509,0x539)==='HQGBx'?_0x1031df[Op['or']]=[{'title':{[Op[_0x43d604(-0xa7,-0xd2,-0x8a,-0x9f)]]:'%'+_0x28156c+'%'}},{'content':{[Op[_0x43d604(-0x54,-0x98,-0x8a,-0x53)]]:'%'+_0x28156c+'%'}},{'tags':{[Op[_0x43d604(-0x30,-0x4a,-0x8a,-0x2d)]]:'%'+_0x28156c+'%'}}]:_0x5e84e2(_0x32f4ae));const {count:_0x1aa934,rows:_0x1041bf}=await Note[_0xa900fc(0x5c0,0x589,0x5ce,0x57a)]({'where':_0x1031df,'include':_0x475f0a,'order':[[_0x43d604(-0x10e,-0x93,-0xd6,-0x81),_0xa900fc(0x557,0x527,0x592,0x54e)],[_0x43d604(-0xab,-0xd9,-0xa0,-0xc7),_0xa900fc(0x557,0x5aa,0x567,0x57b)],[_0x43d604(-0xc9,-0x73,-0xc2,-0xe6),_0x198d81[_0xa900fc(0x58f,0x59e,0x5de,0x564)]()]],'limit':_0x402e16,'offset':_0x28cbbf,'distinct':!![]}),_0x1ae4fa=_0x1041bf[_0xa900fc(0x554,0x52b,0x595,0x505)](_0x316eec=>{const _0x3a59f3=_0x316eec[_0x41c0f1(0x1a7,0x171,0x1bb,0x1ae)]();delete _0x3a59f3['password'],delete _0x3a59f3['created_at'],delete _0x3a59f3['updated_at'];function _0x8119e4(_0x561e60,_0x36cefc,_0x3afb95,_0xe72aba){return _0x43d604(_0x3afb95,_0x36cefc-0x122,_0x36cefc-0x5e8,_0xe72aba-0x94);}delete _0x3a59f3[_0x8119e4(0x539,0x548,0x4fc,0x4ed)],delete _0x3a59f3[_0x8119e4(0x500,0x549,0x4fe,0x4f5)];function _0x41c0f1(_0x24b34d,_0x47f3b4,_0x12b721,_0x1e84e8){return _0x43d604(_0x24b34d,_0x47f3b4-0x1dc,_0x1e84e8-0x1ee,_0x1e84e8-0xdc);}return _0x316eec[_0x8119e4(0x530,0x508,0x544,0x529)]&&_0x316eec[_0x41c0f1(0xc2,0x11c,0x150,0x10e)]['trim']()!==''&&(_0x3a59f3[_0x41c0f1(0x1d7,0x185,0x18f,0x188)]=!![],delete _0x3a59f3[_0x41c0f1(0x1f0,0x1bf,0x17d,0x1a4)],delete _0x3a59f3[_0x41c0f1(0x13a,0x160,0x132,0x103)]),_0x3a59f3;});_0x17d557[_0xa900fc(0x524,0x573,0x4cb,0x514)]({'success':!![],'data':{'notes':_0x1ae4fa,'pagination':{'current_page':_0x1f5636,'total_pages':Math['ceil'](_0x1aa934/_0x402e16),'total_count':_0x1aa934,'per_page':_0x402e16}}});}catch(_0x4f30f5){if(_0x43d604(-0x52,-0xb0,-0xb0,-0x101)!==_0xa900fc(0x558,0x5a2,0x562,0x575))_0x32da81(_0x4f30f5);else return _0x3d3423[_0xa900fc(0x5b0,0x58e,0x5cc,0x601)](-0x31c*0x8+-0xc55+0x26c9)[_0x43d604(-0xf0,-0xb0,-0xdd,-0x119)]({'success':![],'message':_0xa900fc(0x5bf,0x5b2,0x59e,0x5a0)});}},exports['getPublicNoteById']=async(_0x546af0,_0x151a66,_0x59ec8b)=>{function _0x154f15(_0xc40eaa,_0x4b4f47,_0x4a9bb0,_0x22c7ae){return _0x_0x36d93b(_0xc40eaa-0x6f,_0x4a9bb0-0x77c,_0x4a9bb0-0x1d3,_0x22c7ae);}function _0x28ef9d(_0x3280aa,_0x250ca5,_0x4765cb,_0x2590f4){return _0x_0x5b3069(_0x3280aa-0x15e,_0x250ca5-0xa5,_0x2590f4,_0x4765cb- -0x5e0);}try{console[_0x28ef9d(-0x9e,-0xb6,-0xeb,-0x95)]('[getPublicNoteById]\x20开始处理请求,\x20id:',_0x546af0['params']['id']);const {id:_0x2c9faa}=_0x546af0['params'];console[_0x154f15(0x5d9,0x5bf,0x592,0x5d8)](_0x28ef9d(-0x82,-0x8e,-0xd2,-0xb1)),console['log'](_0x28ef9d(-0xed,-0xfe,-0xac,-0xdd),_0x546af0['body']),console[_0x154f15(0x5d0,0x5a4,0x592,0x5d7)]('[getPublicNoteById]\x20req.query:',_0x546af0['query']);if(!_0x2c9faa||_0x2c9faa===_0x28ef9d(-0x9d,-0x74,-0x83,-0x2a)||_0x2c9faa===_0x154f15(0x605,0x5ea,0x5df,0x585))return _0x151a66[_0x154f15(0x651,0x621,0x601,0x631)](0x61c+-0x18ef+-0x133*-0x11)[_0x28ef9d(-0x15d,-0xab,-0x108,-0xec)]({'success':![],'message':'无效的笔记ID'});const _0x4711ed=_0x546af0[_0x28ef9d(-0x9d,-0x120,-0xf3,-0xf8)]&&_0x546af0[_0x154f15(0x52c,0x58e,0x58a,0x578)]['password']||_0x546af0['query']&&_0x546af0[_0x154f15(0x591,0x5e4,0x5c0,0x5c2)][_0x154f15(0x536,0x5a9,0x572,0x562)];let _0x2e59d1;try{console[_0x28ef9d(-0x119,-0x148,-0xeb,-0xdf)](_0x154f15(0x64a,0x5a4,0x5f3,0x59f)),_0x2e59d1=await Note[_0x154f15(0x641,0x658,0x617,0x624)](_0x2c9faa,{'include':[{'model':Tag,'as':_0x154f15(0x5b8,0x545,0x596,0x562),'attributes':[_0x28ef9d(-0x47,-0x57,-0x92,-0xa1),_0x28ef9d(-0x154,-0xec,-0x10e,-0xd6)],'through':{'attributes':[]}},{'model':Category,'as':_0x154f15(0x592,0x62f,0x5d0,0x5c0),'attributes':[_0x154f15(0x62c,0x598,0x5eb,0x5f8),'icon']}]}),console[_0x154f15(0x539,0x566,0x592,0x57a)](_0x154f15(0x55f,0x557,0x58e,0x598),_0x2e59d1?_0x28ef9d(-0xfe,-0x133,-0xf6,-0x9e):_0x154f15(0x573,0x563,0x56c,0x529));}catch(_0x38e959){if(_0x28ef9d(-0xe7,-0xbf,-0xcd,-0x124)==='IfSRn')console['error'](_0x154f15(0x62c,0x598,0x5dc,0x591),_0x3ba9c3),console[_0x28ef9d(-0x50,-0xb9,-0x67,-0x4c)]('[getPublicNoteById]\x20错误堆栈:',_0x40bebe[_0x154f15(0x59a,0x525,0x577,0x520)]),_0x5e4d45(_0x1d3924);else return console['error'](_0x154f15(0x594,0x63c,0x5dd,0x608),_0x38e959),_0x151a66[_0x154f15(0x658,0x5d8,0x601,0x5eb)](0x25ab+0x3b9*0x1+0x1*-0x2770)[_0x28ef9d(-0x149,-0x129,-0x108,-0x150)]({'success':![],'message':_0x28ef9d(-0xbe,-0xf1,-0xdf,-0x103)});}if(!_0x2e59d1)return console['log'](_0x28ef9d(-0xe8,-0x68,-0x8f,-0x46)),_0x151a66['status'](0x1*0x1f85+0xa*0x369+0xf*-0x445)['json']({'success':![],'message':'笔记不存在'});console['log'](_0x28ef9d(-0x94,-0x130,-0xd1,-0xe3),_0x2e59d1['is_published']);if(!_0x2e59d1[_0x154f15(0x5e8,0x5bb,0x5e7,0x5de)])return _0x151a66['status'](0x6ac*-0x2+0x1*-0x151+0x4*0x40f)[_0x28ef9d(-0x13d,-0xe7,-0x108,-0x119)]({'success':![],'message':_0x28ef9d(-0x46,-0x85,-0x72,-0x87)});console[_0x28ef9d(-0x146,-0x10d,-0xeb,-0x9e)]('[getPublicNoteById]\x20步骤6:\x20检查密码字段');const _0x1cf3e5=_0x2e59d1[_0x154f15(0x52b,0x571,0x572,0x524)];console[_0x28ef9d(-0xb8,-0xc0,-0xeb,-0x134)](_0x154f15(0x5b7,0x5f7,0x5a7,0x5dd),typeof _0x1cf3e5);const _0x5b139c=_0x1cf3e5&&typeof _0x1cf3e5===_0x154f15(0x60d,0x623,0x5d9,0x5c7)&&_0x1cf3e5[_0x28ef9d(-0x10c,-0xf8,-0x11d,-0xd6)]()!=='';console[_0x154f15(0x555,0x59c,0x592,0x54e)](_0x28ef9d(-0xf9,-0xcb,-0xc5,-0x7d),_0x5b139c);if(_0x5b139c){if(_0x28ef9d(-0xdf,-0x7c,-0xd0,-0xce)===_0x154f15(0x5e0,0x5d1,0x5ad,0x602)){if(!_0x4711ed)return console[_0x28ef9d(-0xf8,-0xe8,-0xeb,-0xa4)]('[getPublicNoteById]\x20步骤9a:\x20需要密码但未提供'),_0x151a66['json']({'success':!![],'data':{'id':_0x2e59d1['id'],'title':_0x2e59d1['title'],'category':_0x2e59d1[_0x28ef9d(-0xc0,-0x39,-0x80,-0xdd)],'category_id':_0x2e59d1['category_id'],'tags':_0x2e59d1[_0x154f15(0x5d0,0x5dc,0x5bb,0x60a)],'tagList':_0x2e59d1['tagList'],'categoryInfo':_0x2e59d1[_0x28ef9d(-0xe9,-0xe9,-0xad,-0x79)],'is_published':_0x2e59d1[_0x154f15(0x5bc,0x5c0,0x5e7,0x633)],'is_pinned':_0x2e59d1[_0x28ef9d(-0xe3,-0x14e,-0x101,-0x110)],'published_at':_0x2e59d1[_0x154f15(0x541,0x5e8,0x590,0x5d6)],'requiresPassword':!![],'content':null}});if(_0x4711ed!==_0x1cf3e5)return console['log'](_0x28ef9d(-0x150,-0x16b,-0x10c,-0xe3)),_0x151a66[_0x28ef9d(-0x8c,-0x33,-0x7c,-0x44)](-0x1*0xec3+0xf7*0x13+-0x201)[_0x28ef9d(-0x14d,-0xdc,-0x108,-0x125)]({'success':![],'message':_0x28ef9d(-0x37,-0x67,-0x69,-0xab)});}else _0x2249e0=_0x35d343[_0x154f15(0x5f9,0x659,0x606,0x5ac)]>0x8e6+-0xb5d*0x2+-0x171*-0xa?_0x41b0e4[_0x154f15(0x5fe,0x58a,0x5da,0x5a2)](-0x2f2*-0x1+0x1876+0xdb4*-0x2,0x21c+-0x62a+-0x2c*-0x1b)+_0x28ef9d(-0xfa,-0x8b,-0xe3,-0xe4):_0x220fee;}console[_0x154f15(0x5ab,0x543,0x592,0x55c)](_0x154f15(0x62f,0x60b,0x60d,0x636));const _0xd1be5c=_0x2e59d1[_0x154f15(0x5dd,0x641,0x612,0x5f7)]();console[_0x154f15(0x57b,0x5d3,0x592,0x59d)]('[getPublicNoteById]\x20步骤10:\x20toJSON完成'),delete _0xd1be5c[_0x28ef9d(-0xb4,-0xea,-0x10b,-0xfc)],delete _0xd1be5c['created_at'],delete _0xd1be5c[_0x154f15(0x5c6,0x564,0x598,0x5eb)],delete _0xd1be5c[_0x154f15(0x58a,0x575,0x5b2,0x5dc)],console['log'](_0x154f15(0x630,0x5a1,0x5d5,0x5d3)),console['log'](_0x154f15(0x581,0x5cb,0x595,0x5aa)),_0x151a66['json']({'success':!![],'data':{..._0xd1be5c,'requiresPassword':![]}}),console[_0x154f15(0x5ee,0x589,0x592,0x5b7)](_0x154f15(0x616,0x5d6,0x5f9,0x5cb));}catch(_0x45845a){console[_0x28ef9d(-0x4b,-0xa4,-0x67,-0xbd)](_0x28ef9d(-0xff,-0x9e,-0xa1,-0x99),_0x45845a),console[_0x28ef9d(-0xbc,-0xbf,-0x67,-0x92)](_0x28ef9d(-0xfe,-0xfa,-0x11b,-0x115),_0x45845a[_0x154f15(0x5cb,0x547,0x577,0x543)]),_0x59ec8b(_0x45845a);}},exports[_0x_0x5b3069(0x541,0x548,0x4d4,0x503)]=async(_0x487a8a,_0x9bc3ef,_0x295357)=>{function _0x3b0c0b(_0x262c81,_0x5243ee,_0x37a46f,_0x16251e){return _0x_0x5b3069(_0x262c81-0xce,_0x5243ee-0x13c,_0x262c81,_0x16251e- -0x4df);}function _0x46dcee(_0x3dcff6,_0x36fb0b,_0x221cd0,_0xc00e05){return _0x_0x5b3069(_0x3dcff6-0x1d2,_0x36fb0b-0x94,_0xc00e05,_0x221cd0- -0x65a);}try{if('hOCfr'===_0x3b0c0b(0x92,0x42,0x3c,0x69))_0x289bcc(_0x13d217);else{const {sequelize:_0x398610}=require('../config/database'),_0x909a82=await _0x398610[_0x3b0c0b(0x7b,0x2d,0x52,0x44)](_0x3b0c0b(0x41,0x3e,0x13,0x40),{'type':_0x398610['QueryTypes'][_0x3b0c0b(0x7f,0x9a,0x36,0x62)]});_0x9bc3ef['json']({'success':!![],'data':_0x909a82});}}catch(_0x3276bb){_0x295357(_0x3276bb);}},exports['getPublicNoteDisks']=async(_0x228539,_0x3175a2,_0x43ad82)=>{function _0x23d9fa(_0x22d065,_0x3fff85,_0x1f7793,_0x59b708){return _0x_0x5b3069(_0x22d065-0xb2,_0x3fff85-0x13e,_0x3fff85,_0x1f7793-0x6e);}function _0x3c831e(_0x517726,_0xba85ab,_0x903c9a,_0x3e2d4d){return _0x_0x36d93b(_0x517726-0x122,_0xba85ab-0x262,_0x903c9a-0x27,_0x3e2d4d);}try{const {id:_0x4bc9a1}=_0x228539[_0x23d9fa(0x5b6,0x5fe,0x5be,0x5d3)],{password:_0x4ad12f}=_0x228539['query'],{sequelize:_0x62797b}=require('../config/database');if(!_0x4bc9a1||_0x4bc9a1===_0x3c831e(0x8b,0xe0,0xdc,0x10d)||_0x4bc9a1==='null')return _0x3175a2[_0x3c831e(0x108,0xe7,0x111,0xe6)](0x1a03*0x1+-0xb*0x1f7+0x16*-0x21)[_0x3c831e(0x59,0x5b,0x6c,0x1)]({'success':![],'message':'无效的笔记ID'});const _0xb992e9=await Note[_0x3c831e(0xc2,0xfd,0xf1,0x148)](_0x4bc9a1);if(!_0xb992e9){if('ZFWlh'==='hZlpg')_0x354751(_0x441e86);else return _0x3175a2['status'](0xb*0x127+0x210e+-0x2c27)[_0x23d9fa(0x4f4,0x513,0x546,0x574)]({'success':![],'message':_0x3c831e(0xe6,0xf6,0xce,0x149)});}if(!_0xb992e9[_0x23d9fa(0x596,0x56e,0x5b8,0x560)])return _0x3175a2[_0x23d9fa(0x61e,0x5b6,0x5d2,0x5ed)](-0xc16+0x1d34+-0xf8b)[_0x3c831e(0x6a,0x5b,0x5a,0x97)]({'success':![],'message':'无权访问此笔记'});const _0x949517=_0xb992e9['password'],_0x2affcd=_0x949517&&typeof _0x949517==='string'&&_0x949517[_0x23d9fa(0x4f0,0x559,0x531,0x556)]()!=='';if(_0x2affcd){if(!_0x4ad12f)return _0x3175a2[_0x3c831e(0x12f,0xe7,0xce,0xd6)](0x1b12+-0x1fec+0x66b)['json']({'success':![],'message':_0x23d9fa(0x53f,0x52c,0x547,0x54e),'requiresPassword':!![]});if(_0x4ad12f!==_0x949517){if(_0x3c831e(0x53,0x71,0xce,0xbe)!=='CtoMO')return _0x3175a2['status'](-0x13f*0x16+-0x629*-0x1+0x16d2)[_0x3c831e(0x13,0x5b,0x47,0x7c)]({'success':![],'message':_0x23d9fa(0x628,0x59a,0x5e5,0x605)});else _0x54e529(_0xd18a95);}}const _0x1c4869=await _0x62797b[_0x3c831e(0x7e,0xa6,0x9c,0x103)](_0x3c831e(0x134,0xff,0x103,0x107),{'replacements':[_0x4bc9a1],'type':_0x62797b['QueryTypes'][_0x23d9fa(0x552,0x557,0x5af,0x586)]});_0x3175a2[_0x23d9fa(0x59b,0x582,0x546,0x512)]({'success':!![],'data':_0x1c4869});}catch(_0x40832d){_0x43ad82(_0x40832d);}},exports[_0x_0x36d93b(-0x174,-0x1a1,-0x1d2,-0x14a)]=async(_0x45f19e,_0x209a3f,_0x111a62)=>{function _0x516381(_0xafd8b6,_0x3fea21,_0x86d0d,_0x1fb39b){return _0x_0x36d93b(_0xafd8b6-0xd4,_0x3fea21-0x355,_0x86d0d-0x151,_0xafd8b6);}function _0x4c2405(_0x63a4f5,_0x220c94,_0x57c712,_0x53c5e7){return _0x_0x36d93b(_0x63a4f5-0x55,_0x53c5e7-0x611,_0x57c712-0x1bb,_0x63a4f5);}try{if(_0x4c2405(0x421,0x456,0x40e,0x3fa)===_0x4c2405(0x3d4,0x3e5,0x42a,0x3fa)){const _0x153314=parseInt(_0x45f19e[_0x4c2405(0x45a,0x45c,0x4b4,0x455)]['page'])||-0x3cc+0xb4+-0x319*-0x1,_0x3f0e07=parseInt(_0x45f19e[_0x516381(0x18c,0x199,0x17a,0x1b5)][_0x4c2405(0x454,0x3fa,0x4a6,0x454)])||0xdb3+0x18*0x171+-0x3041,_0x3b4cae=_0x45f19e[_0x516381(0x1a6,0x199,0x1eb,0x140)][_0x516381(0x193,0x18d,0x141,0x1a2)]||_0x516381(0x19f,0x149,0x15b,0x11c),_0x678703=(_0x153314-(0x7bb*0x4+-0x285*-0xf+-0x44b6))*_0x3f0e07,{category_id:_0x48a5ce,tag_id:_0x423eb1,category:_0x2a22f4,tag:_0x15a19,search:_0x226e4f}=_0x45f19e[_0x4c2405(0x41e,0x4a6,0x48a,0x455)],_0x2bcd93={},_0x27c493=[{'model':Tag,'as':_0x4c2405(0x3d9,0x438,0x426,0x42b),'through':{'attributes':[]},'required':![]},{'model':Category,'as':_0x4c2405(0x49d,0x48f,0x463,0x465),'required':![]}];if(_0x48a5ce)_0x2bcd93[_0x4c2405(0x4a0,0x42a,0x43d,0x47b)]=_0x48a5ce;else _0x2a22f4&&(_0x2bcd93[_0x4c2405(0x4a4,0x4ae,0x45f,0x492)]={[Op['like']]:'%'+_0x2a22f4+'%'});if(_0x423eb1)_0x27c493[0x2083+0xe5*0x2a+-0x1*0x4615]['where']={'id':_0x423eb1},_0x27c493[-0x5*0x79d+-0x17b3+0x10c*0x3b][_0x4c2405(0x430,0x3d7,0x412,0x40f)]=!![];else _0x15a19&&(_0x2bcd93['tags']={[Op[_0x4c2405(0x479,0x4b9,0x487,0x45d)]]:'%'+_0x15a19+'%'});_0x226e4f&&(_0x2bcd93[Op['or']]=[{'title':{[Op[_0x4c2405(0x497,0x409,0x490,0x45d)]]:'%'+_0x226e4f+'%'}},{'content':{[Op[_0x516381(0x1e2,0x1a1,0x1b2,0x15a)]]:'%'+_0x226e4f+'%'}},{'tags':{[Op[_0x4c2405(0x42b,0x404,0x44b,0x45d)]]:'%'+_0x226e4f+'%'}}]);const {count:_0x50060a,rows:_0x5ccf17}=await Note[_0x516381(0x20b,0x1ea,0x1d9,0x1ce)]({'where':_0x2bcd93,'include':_0x27c493,'order':[['is_pinned',_0x516381(0x161,0x181,0x14d,0x1a3)],['sort_order',_0x516381(0x153,0x181,0x169,0x12f)],[_0x4c2405(0x414,0x43e,0x40b,0x425),_0x3b4cae[_0x516381(0x206,0x1b9,0x1c3,0x1fd)]()]],'limit':_0x3f0e07,'offset':_0x678703,'distinct':!![]});_0x209a3f['json']({'success':!![],'data':{'notes':_0x5ccf17,'pagination':{'current_page':_0x153314,'total_pages':Math[_0x516381(0x1cc,0x1b1,0x155,0x1e8)](_0x50060a/_0x3f0e07),'total_count':_0x50060a,'per_page':_0x3f0e07}}});}else _0x3fa9f2['category_id']=_0x55c299;}catch(_0x5d2539){_0x111a62(_0x5d2539);}},exports[_0x_0x36d93b(-0x1d2,-0x180,-0x1b9,-0x184)]=async(_0x2e56b1,_0x19e0c7,_0x3a7055)=>{function _0xd8cc53(_0xf7c38d,_0x2fc628,_0x8c971f,_0x147d5f){return _0x_0x36d93b(_0xf7c38d-0x122,_0x8c971f-0x225,_0x8c971f-0x1a9,_0xf7c38d);}function _0x3cf108(_0x1cc46a,_0x4232b7,_0x516db7,_0x51c804){return _0x_0x5b3069(_0x1cc46a-0xb6,_0x4232b7-0x6,_0x516db7,_0x1cc46a- -0x20c);}try{if(_0x3cf108(0x326,0x327,0x368,0x2f5)!=='KJOca'){const {id:_0x54eb8d}=_0x2e56b1[_0x3cf108(0x344,0x2ff,0x384,0x373)],_0x121b99=await Note[_0x3cf108(0x36e,0x35f,0x38f,0x31f)](_0x54eb8d,{'include':[{'model':Tag,'as':_0xd8cc53(0x81,0x95,0x3f,0x8c),'through':{'attributes':[]}},{'model':Category,'as':'categoryInfo'}]});if(!_0x121b99)return _0x19e0c7['status'](0x13d1+0x1a0+0x2d*-0x71)['json']({'success':![],'message':_0x3cf108(0x367,0x3a2,0x34c,0x316)});_0x19e0c7['json']({'success':!![],'data':_0x121b99});}else{const _0x2c74f1=_0x1cd7ea[_0x3cf108(0x320,0x330,0x345,0x37d)](_0x4bf6bf);if(!_0x2c74f1||_0x2df9e2[_0x3cf108(0x32d,0x322,0x330,0x2f1)]()-_0x2c74f1[_0xd8cc53(0x35,0x27,0x42,0x24)]>_0x4b5cba)return _0x123497[_0xd8cc53(0xc1,0xc9,0x7b,0x36)](_0x3d6a98,{'count':0x1,'firstAttempt':_0x1f338a['now']()}),{'remaining':_0x194cdf-(0x2317+0xb*-0xff+-0xd5*0x1d),'count':0x1};return _0x2c74f1[_0x3cf108(0x2f6,0x316,0x2b2,0x318)]++,{'remaining':_0x507c3c['max'](-0x5*-0x277+-0x1b06+-0x47*-0x35,_0x410589-_0x2c74f1[_0xd8cc53(0xa5,0x6e,0x48,-0x17)]),'count':_0x2c74f1[_0xd8cc53(0x46,-0x15,0x48,0x70)]};}}catch(_0x3259a6){_0x3a7055(_0x3259a6);}},exports[_0x_0x36d93b(-0x15e,-0x16e,-0x1a9,-0x115)]=async(_0x1db559,_0x49f55e,_0x493e6e)=>{function _0x45ca05(_0x281d7e,_0x46a037,_0x9f3154,_0x442c4c){return _0x_0x5b3069(_0x281d7e-0x3b,_0x46a037-0x18d,_0x281d7e,_0x9f3154- -0x716);}function _0x1bdbec(_0x482be7,_0x2ceedf,_0x12bbd8,_0x101419){return _0x_0x5b3069(_0x482be7-0x1d0,_0x2ceedf-0x85,_0x482be7,_0x101419- -0x3f7);}try{const {sequelize:_0xcfefbb}=require('../config/database'),_0x3a9b9d=await _0xcfefbb[_0x1bdbec(0xff,0x128,0x138,0x12c)]('\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20t.id,\x20t.name,\x20t.color,\x20t.description,\x20t.category,\x20t.category_id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20COUNT(nt.note_id)\x20as\x20usage_count\x0a\x20\x20\x20\x20\x20\x20FROM\x20tags\x20t\x0a\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20note_tags\x20nt\x20ON\x20t.id\x20=\x20nt.tag_id\x0a\x20\x20\x20\x20\x20\x20GROUP\x20BY\x20t.id\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20usage_count\x20DESC,\x20t.name\x20ASC\x0a\x20\x20\x20\x20',{'type':_0xcfefbb[_0x1bdbec(0x116,0x91,0xf5,0xe7)][_0x1bdbec(0x114,0x13d,0x18b,0x14a)]});_0x49f55e['json']({'success':!![],'data':_0x3a9b9d});}catch(_0x2ea6a1){if(_0x45ca05(-0x1ae,-0x206,-0x1b1,-0x17b)===_0x45ca05(-0x1c7,-0x1d8,-0x1b1,-0x1ec))_0x493e6e(_0x2ea6a1);else return console[_0x45ca05(-0x1f5,-0x1f4,-0x221,-0x1d0)]('[getPublicNoteById]\x20步骤4:\x20笔记不存在'),_0x242aae['status'](0xe85+-0x9*0x1af+-0x2*-0x11b)[_0x45ca05(-0x21d,-0x24a,-0x23e,-0x269)]({'success':![],'message':'笔记不存在'});}},exports[_0x_0x36d93b(-0x1c4,-0x1c3,-0x1e1,-0x203)]=async(_0x325235,_0x502e74,_0x3d6f1a)=>{function _0x2f7ecd(_0x1865b6,_0x27bd62,_0x799fa8,_0x5146cc){return _0x_0x36d93b(_0x1865b6-0xbb,_0x1865b6-0x6e9,_0x799fa8-0x98,_0x5146cc);}function _0x3e2f7e(_0x233f14,_0xeb65ee,_0x3b8fec,_0x479b53){return _0x_0x36d93b(_0x233f14-0x83,_0x233f14-0x450,_0x3b8fec-0x13b,_0x479b53);}try{const {id:_0x4cfa52}=_0x325235[_0x3e2f7e(0x2c1,0x314,0x2fd,0x283)],{sequelize:_0x136642}=require('../config/database'),_0x32b8dc=await Note['findByPk'](_0x4cfa52);if(!_0x32b8dc)return _0x3e2f7e(0x283,0x2a8,0x250,0x28f)===_0x2f7ecd(0x51c,0x4c9,0x4ec,0x525)?_0x502e74[_0x3e2f7e(0x2d5,0x2d2,0x319,0x2f6)](0xe3c+0xccb+-0x1973)[_0x3e2f7e(0x249,0x284,0x28c,0x221)]({'success':![],'message':_0x3e2f7e(0x2e4,0x2b4,0x340,0x2ef)}):_0x36da55[_0x3e2f7e(0x2d5,0x330,0x2a1,0x2c0)](0x1*-0x76d+0x29b+0x662)[_0x3e2f7e(0x249,0x2a8,0x297,0x1f1)]({'success':![],'message':_0x3e2f7e(0x28a,0x23d,0x24e,0x2dd)});const _0x1a9232=await _0x136642[_0x2f7ecd(0x52d,0x55e,0x560,0x54d)](_0x2f7ecd(0x586,0x532,0x5b4,0x530),{'replacements':[_0x4cfa52],'type':_0x136642['QueryTypes']['SELECT']});_0x502e74[_0x2f7ecd(0x4e2,0x4ab,0x4ba,0x505)]({'success':!![],'data':_0x1a9232});}catch(_0x353857){_0x3d6f1a(_0x353857);}},exports[_0x_0x36d93b(-0x194,-0x18a,-0x1e9,-0x1a4)]=async(_0x2225ea,_0x2a60a1,_0x33c52d)=>{function _0x1f056a(_0x17dcf1,_0x5fa504,_0x33a55f,_0x1617cf){return _0x_0x36d93b(_0x17dcf1-0x131,_0x1617cf-0x2cf,_0x33a55f-0x55,_0x17dcf1);}function _0x5132b1(_0x5920b5,_0x1240a2,_0x2f48a4,_0x3b30a2){return _0x_0x36d93b(_0x5920b5-0x23,_0x3b30a2-0x1bb,_0x2f48a4-0x180,_0x5920b5);}try{const _0x1c90d3=parseInt(_0x2225ea[_0x1f056a(0xb4,0x134,0xc9,0x113)]['page'])||-0x2*0x1327+-0x1b3c+0x418b,_0x8b010=parseInt(_0x2225ea['query'][_0x5132b1(0x7,-0x4e,0x1d,-0x2)])||-0x1fb1+0x102b*0x2+-0x9b,_0x262312=_0x2225ea['query'][_0x5132b1(-0x52,-0x69,-0x3,-0xd)]||_0x5132b1(-0x42,0xa,-0x3d,-0x51),_0x15515a=(_0x1c90d3-(0xff1+0x1632+-0x2622))*_0x8b010,{category_id:_0x535e7c,tag_id:_0x15e37b,category:_0x2b368a,tag:_0x217845,search:_0x33f7cb}=_0x2225ea[_0x5132b1(-0x31,0x12,0x3,-0x1)],_0x2e0612={},_0x4db049=_0x2225ea['headers'][_0x5132b1(0x13,0x33,-0x20,0x37)]&&_0x2225ea[_0x1f056a(0x154,0x152,0x140,0x143)][_0x1f056a(0x136,0x168,0xef,0x14b)][_0x5132b1(-0x24,-0x2f,0x19,-0x26)](_0x5132b1(0x11,0x32,-0x49,-0x4)),isPublicRequest=!_0x2225ea[_0x5132b1(-0x36,-0x73,-0x8c,-0x42)][_0x5132b1(0x36,0x8a,0x31,0x33)]('/admin'),_0xc9d704=[{'model':Tag,'as':_0x1f056a(0x136,0x93,0x12f,0xe9),'attributes':_0x4db049&&!isPublicRequest?undefined:[_0x1f056a(0x17c,0x172,0x15b,0x13e),_0x5132b1(-0x45,-0x83,-0x30,-0x52)],'through':{'attributes':[]},'required':![]},{'model':Category,'as':_0x1f056a(0x148,0x149,0x115,0x123),'attributes':_0x4db049&&!isPublicRequest?undefined:[_0x5132b1(-0x20,-0x1b,-0x20,0x2a),_0x5132b1(0x4e,-0x2b,0x4a,0x2)],'required':![]}];isPublicRequest&&(_0x2e0612[_0x5132b1(0x64,0x2b,0x52,0x26)]=!![],_0x2e0612[_0x1f056a(0xa9,0x12d,0x11e,0x101)]=!![]);if(_0x535e7c)_0x2e0612[_0x1f056a(0xda,0xdf,0x179,0x139)]=_0x535e7c;else _0x2b368a&&(_0x2e0612[_0x1f056a(0x11d,0x19f,0x122,0x150)]={[Op[_0x1f056a(0x105,0xdf,0x15e,0x11b)]]:'%'+_0x2b368a+'%'});if(_0x15e37b)_0x5132b1(-0xc,-0x31,0x1a,-0x30)==='XzHiE'?(_0xc9d704[-0x34c*-0x8+0x450+0x7ac*-0x4]['where']={'id':_0x15e37b},_0xc9d704[0x6d*-0x1+0xa0*0x34+-0xa1*0x33][_0x1f056a(0xd3,0x7a,0xcd,0xcd)]=!![]):_0x4ca4af(_0xf99680);else _0x217845&&(_0x2e0612[_0x1f056a(0x14b,0x153,0xce,0x10e)]={[Op[_0x1f056a(0x138,0xe5,0x161,0x11b)]]:'%'+_0x217845+'%'});_0x33f7cb&&(_0x2e0612[Op['or']]=[{'title':{[Op['like']]:'%'+_0x33f7cb+'%'}},{'content':{[Op[_0x1f056a(0x12a,0xe0,0x14b,0x11b)]]:'%'+_0x33f7cb+'%'}},{'tags':{[Op[_0x1f056a(0x155,0x163,0xf5,0x11b)]]:'%'+_0x33f7cb+'%'}}]);const {count:_0x15e899,rows:_0x5dbe3c}=await Note[_0x5132b1(0x7d,0x32,0x62,0x50)]({'where':_0x2e0612,'include':_0xc9d704,'order':[['is_pinned',_0x5132b1(0x10,-0x18,0xe,-0x19)],[_0x1f056a(0x15a,0x136,0x132,0x105),'DESC'],['published_at',_0x262312[_0x5132b1(0x48,0x59,0x2d,0x1f)]()]],'limit':_0x8b010,'offset':_0x15515a,'distinct':!![]}),_0x56f5f8=_0x5dbe3c[_0x1f056a(0x9f,0xec,0x127,0xf8)](_0x2cdac7=>{function _0x591c90(_0x1af79c,_0x9d1383,_0xb675f5,_0x3e4649){return _0x5132b1(_0x9d1383,_0x9d1383-0x1bd,_0xb675f5-0x190,_0xb675f5-0x3e5);}function _0x1bb633(_0x277146,_0x283cf2,_0x161b23,_0x53b7a4){return _0x1f056a(_0x53b7a4,_0x283cf2-0x1ce,_0x161b23-0xbc,_0x277146-0x3f5);}if(_0x591c90(0x3fc,0x425,0x437,0x41b)==='pPRpL'){const _0x2e4a50=_0x2cdac7[_0x1bb633(0x55a,0x55a,0x5ad,0x54e)]();if(isPublicRequest)delete _0x2e4a50[_0x591c90(0x33c,0x3c4,0x396,0x345)],delete _0x2e4a50[_0x591c90(0x423,0x3d7,0x408,0x45b)],delete _0x2e4a50['updated_at'],delete _0x2e4a50['sort_order'],delete _0x2e4a50[_0x591c90(0x41e,0x401,0x3d7,0x383)],_0x2cdac7[_0x591c90(0x337,0x38d,0x396,0x34b)]&&_0x2cdac7[_0x1bb633(0x4ba,0x4bd,0x503,0x4d5)][_0x1bb633(0x4a8,0x469,0x46f,0x4fc)]()!==''&&(_0x2e4a50[_0x1bb633(0x534,0x576,0x50c,0x510)]=!![],delete _0x2e4a50[_0x1bb633(0x550,0x597,0x513,0x539)],delete _0x2e4a50['external_link']);else{}return _0x2e4a50;}else return _0x1e6807['status'](0x14c6+0x147b+-0x27ad)['json']({'success':![],'message':_0x591c90(0x40e,0x445,0x434,0x423)});});_0x2a60a1['json']({'success':!![],'data':{'notes':_0x56f5f8,'pagination':{'current_page':_0x1c90d3,'total_pages':Math['ceil'](_0x15e899/_0x8b010),'total_count':_0x15e899,'per_page':_0x8b010}}});}catch(_0x42f9db){_0x33c52d(_0x42f9db);}},exports[_0x_0x5b3069(0x488,0x4bf,0x47e,0x4cd)]=async(_0x4c31de,_0xb16dc8,_0x26db5a)=>{function _0x12357d(_0x4e813b,_0xf66dd1,_0xecb543,_0x4d28f6){return _0x_0x36d93b(_0x4e813b-0xa5,_0xecb543-0x10d,_0xecb543-0xb9,_0x4e813b);}function _0x56aeca(_0x380ae5,_0x55be2e,_0x2b7832,_0x577819){return _0x_0x36d93b(_0x380ae5-0x182,_0x577819-0x39c,_0x2b7832-0xe9,_0x55be2e);}try{const {id:_0x45bd28}=_0x4c31de[_0x56aeca(0x260,0x1c2,0x1f3,0x20d)],_0x147a0d=_0x4c31de['body']&&_0x4c31de[_0x56aeca(0x157,0x1d0,0x17f,0x1aa)][_0x56aeca(0x1d8,0x1b8,0x15a,0x192)]||_0x4c31de[_0x12357d(-0x53,-0xfe,-0xaf,-0x107)]&&_0x4c31de[_0x12357d(-0x60,-0x7b,-0xaf,-0x65)][_0x56aeca(0x159,0x182,0x154,0x192)],_0x3069c0=_0x4c31de['headers']['authorization']&&_0x4c31de[_0x12357d(-0x25,-0xc1,-0x7f,-0x21)]['authorization'][_0x12357d(-0xff,-0xb2,-0xd4,-0xb1)](_0x12357d(-0x7f,-0x8d,-0xb2,-0xad)),_0x1b30ec=await Note[_0x56aeca(0x1f8,0x26f,0x225,0x237)](_0x45bd28,{'include':[{'model':Tag,'as':_0x56aeca(0x20a,0x1e0,0x213,0x1b6),'attributes':_0x3069c0?undefined:['name',_0x56aeca(0x18a,0x19d,0x19b,0x18f)],'through':{'attributes':[]}},{'model':Category,'as':_0x12357d(-0xd6,-0xb1,-0x9f,-0xb1),'attributes':_0x3069c0?undefined:[_0x56aeca(0x1cc,0x204,0x232,0x20b),'icon']}]});if(!_0x1b30ec)return _0xb16dc8[_0x56aeca(0x270,0x20b,0x218,0x221)](0x1dd1+-0x20bf*0x1+-0x482*-0x1)['json']({'success':![],'message':_0x56aeca(0x20e,0x1eb,0x23e,0x230)});if(!_0x3069c0&&!_0x1b30ec['is_published']){if(_0x56aeca(0x1b2,0x183,0x16f,0x1b3)!==_0x56aeca(0x20b,0x20f,0x203,0x1b3))_0x4500a5(_0x394644);else return _0xb16dc8[_0x12357d(-0x39,-0x9f,-0x6e,-0x92)](-0x6d3+0xeed*-0x2+0x990*0x4)[_0x12357d(-0xf2,-0xbb,-0xfa,-0x102)]({'success':![],'message':_0x56aeca(0x234,0x28a,0x241,0x22b)});}const _0x355069=_0x1b30ec[_0x56aeca(0x1c3,0x143,0x1c0,0x192)],_0x337279=_0x355069&&typeof _0x355069==='string'&&_0x355069[_0x12357d(-0x158,-0x132,-0x10f,-0x15e)]()!=='';if(_0x337279){if(!_0x147a0d)return _0xb16dc8[_0x56aeca(0x1a3,0x1a1,0x157,0x195)]({'success':!![],'data':{'id':_0x1b30ec['id'],'title':_0x1b30ec[_0x12357d(-0x91,-0x9c,-0x86,-0x61)],'category':_0x1b30ec[_0x12357d(-0x19,-0xa9,-0x72,-0x49)],'category_id':_0x1b30ec[_0x12357d(-0x9a,-0x67,-0x89,-0x69)],'tags':_0x1b30ec['tags'],'tagList':_0x1b30ec[_0x56aeca(0x20c,0x175,0x178,0x1b6)],'categoryInfo':_0x1b30ec[_0x12357d(-0x89,-0xfb,-0x9f,-0xe3)],'is_published':_0x1b30ec['is_published'],'is_pinned':_0x1b30ec[_0x56aeca(0x17e,0x19c,0x170,0x19c)],'published_at':_0x1b30ec[_0x56aeca(0x18a,0x1ba,0x1d3,0x1b0)],'created_at':_0x1b30ec['created_at'],'requiresPassword':!![],'content':null}});if(_0x147a0d!==_0x355069)return _0xb16dc8[_0x12357d(-0x8d,-0xa2,-0x6e,-0xbf)](-0x26b*0x1+0x1a04+-0x1608)['json']({'success':![],'message':'密码错误'});}const _0x232920=_0x1b30ec[_0x12357d(-0xa2,-0x6d,-0x5d,-0x91)]();delete _0x232920[_0x12357d(-0x102,-0xe1,-0xfd,-0xcb)],!_0x3069c0&&(delete _0x232920[_0x56aeca(0x211,0x224,0x1e3,0x204)],delete _0x232920[_0x56aeca(0x1c7,0x1bc,0x203,0x1b8)],delete _0x232920[_0x12357d(-0x102,-0xd2,-0xbd,-0x11a)]),_0xb16dc8[_0x12357d(-0xf2,-0x10e,-0xfa,-0xde)]({'success':!![],'data':{..._0x232920,'requiresPassword':![]}});}catch(_0x19623f){if(_0x12357d(-0xc7,-0x67,-0xa2,-0x83)===_0x56aeca(0x19e,0x1c1,0x1d4,0x199)){const _0x590945=_0x56de0c[_0x56aeca(0x255,0x235,0x267,0x238)](_0x31155c,arguments);return _0x5bf784=null,_0x590945;}else _0x26db5a(_0x19623f);}},exports[_0x_0x5b3069(0x557,0x576,0x57d,0x561)]=async(_0x284012,_0x56120c)=>{const _0x1f6bd5=getClientIP(_0x284012),_0x50434a=checkPasswordAttempts(_0x1f6bd5);function _0x1c127a(_0xf5db95,_0x4b471b,_0x359458,_0x214fbb){return _0x_0x36d93b(_0xf5db95-0x15d,_0x4b471b-0x3bb,_0x359458-0x1af,_0x359458);}_0x56120c[_0x1c127a(0x1a2,0x1b4,0x204,0x175)]({'success':!![],'errorCount':_0x50434a['count'],'remaining':_0x50434a['remaining']});},exports['verifyNotePassword']=async(_0x585ce1,_0x239f70,_0x3d717d)=>{function _0x18e141(_0x19731b,_0x1b6cdc,_0xca4fc4,_0x4e9df4){return _0x_0x5b3069(_0x19731b-0x40,_0x1b6cdc-0x189,_0x1b6cdc,_0x19731b- -0x360);}function _0xfc4854(_0x44ca08,_0x304ed8,_0x377e8a,_0x5e12c4){return _0x_0x5b3069(_0x44ca08-0x17e,_0x304ed8-0x3,_0x304ed8,_0x377e8a- -0xcd);}try{const {id:_0x4196ed}=_0x585ce1[_0x18e141(0x1f0,0x1eb,0x249,0x208)],{password:_0x30a22d}=_0x585ce1[_0xfc4854(0x3f4,0x431,0x420,0x3ca)],_0x5316b6=getClientIP(_0x585ce1),_0x3c35bd=checkPasswordAttempts(_0x5316b6);if(!_0x3c35bd[_0x18e141(0x185,0x16d,0x1d6,0x132)]){if('ksDmb'!==_0xfc4854(0x3f5,0x3a1,0x3f7,0x451)){const _0x2dd4ec=_0x4fe610(_0x224dff);return _0x17f98a[_0x18e141(0x204,0x22f,0x1b0,0x1fe)](0x1789+0x1369*0x1+-0x21*0x141)[_0xfc4854(0x446,0x3df,0x40b,0x3df)]({'success':![],'message':_0x2dd4ec[_0xfc4854(0x46f,0x44f,0x42d,0x44e)]>-0x26cd+0x43f*-0x2+0x2f4b?_0x18e141(0x217,0x204,0x1bd,0x1f8):_0x18e141(0x1e6,0x19f,0x1f2,0x231),'errorCount':_0x2dd4ec[_0x18e141(0x1a2,0x193,0x1b5,0x1a2)],'remaining':_0x2dd4ec[_0xfc4854(0x453,0x442,0x42d,0x48c)]});}else return _0x239f70['status'](-0x328*0xa+0x1957*0x1+0x7e6)[_0x18e141(0x178,0x13a,0x11b,0x13b)]({'success':![],'message':_0xfc4854(0x4d1,0x47e,0x479,0x47d),'errorCount':_0x3c35bd[_0xfc4854(0x414,0x490,0x435,0x47f)],'remaining':0x0});}const _0x3841e9=await Note[_0xfc4854(0x4ba,0x4cf,0x4ad,0x50b)](_0x4196ed,{'include':[{'model':Tag,'as':_0x18e141(0x199,0x16b,0x1d6,0x1a0),'attributes':[_0xfc4854(0x4d1,0x47a,0x481,0x48d),'color'],'through':{'attributes':[]}},{'model':Category,'as':_0xfc4854(0x409,0x4a4,0x466,0x4b2),'attributes':[_0x18e141(0x1ee,0x207,0x1ea,0x231),_0xfc4854(0x4a6,0x466,0x459,0x488)]}]});if(!_0x3841e9)return _0x239f70[_0xfc4854(0x442,0x464,0x497,0x4ce)](-0x12d1+-0xd1a+0x217f)['json']({'success':![],'message':_0x18e141(0x213,0x222,0x1bc,0x219)});if(!_0x3841e9[_0xfc4854(0x49b,0x42f,0x47d,0x4ae)]){if(_0xfc4854(0x482,0x4ee,0x4b1,0x494)===_0x18e141(0x21e,0x229,0x204,0x27a))return _0x239f70[_0x18e141(0x204,0x201,0x1c6,0x1fd)](0x1ba4+-0x116+0x1*-0x18fb)[_0xfc4854(0x403,0x427,0x40b,0x410)]({'success':![],'message':_0xfc4854(0x4e3,0x4b9,0x4a1,0x44d)});else{if(!_0x2e72a4)return _0x406364['status'](-0x26a0+0x7fd*0x1+0x2*0x101a)[_0xfc4854(0x412,0x40e,0x40b,0x3c8)]({'success':![],'message':_0x18e141(0x179,0x14e,0x183,0x165),'requiresPassword':!![]});if(_0x5e1826!==_0x4c327d)return _0x47cb50[_0xfc4854(0x464,0x44a,0x497,0x4b6)](-0x5*0x7af+0x2080*0x1+-0x4*-0x1df)['json']({'success':![],'message':'密码错误'});}}const _0x5518c4=_0x3841e9[_0x18e141(0x175,0x143,0x1c4,0x1a2)],_0x2269fa=_0x5518c4&&typeof _0x5518c4==='string'&&_0x5518c4[_0xfc4854(0x44e,0x3ea,0x3f6,0x3fc)]()!=='';if(!_0x2269fa){const _0x160379=_0x3841e9[_0x18e141(0x215,0x1fd,0x232,0x203)]();return delete _0x160379[_0xfc4854(0x41b,0x45e,0x408,0x405)],delete _0x160379[_0x18e141(0x1e7,0x20d,0x1b6,0x208)],delete _0x160379[_0x18e141(0x19b,0x15d,0x181,0x1d6)],delete _0x160379['sort_order'],_0x239f70[_0xfc4854(0x426,0x3f1,0x40b,0x3bf)]({'success':!![],'data':{..._0x160379,'requiresPassword':![]}});}if(!_0x30a22d||_0x30a22d[_0x18e141(0x163,0x10c,0x15e,0x137)]()!==_0x5518c4[_0x18e141(0x163,0x177,0x115,0x14d)]()){const _0x4fa749=recordFailedAttempt(_0x5316b6);return _0x239f70[_0xfc4854(0x48a,0x4a0,0x497,0x439)](0x28*0xc0+-0xb3*0x27+-0x12a*0x1)[_0xfc4854(0x3fd,0x437,0x40b,0x436)]({'success':![],'message':_0x4fa749[_0x18e141(0x19a,0x175,0x1dd,0x156)]>-0x18d1+0x2570+0x1*-0xc9f?_0xfc4854(0x4a9,0x4e8,0x4aa,0x4ed):_0x18e141(0x1e6,0x190,0x191,0x1c1),'errorCount':_0x4fa749[_0xfc4854(0x464,0x3e9,0x435,0x479)],'remaining':_0x4fa749['remaining']});}clearAttempts(_0x5316b6);const _0x2e3674=_0x3841e9[_0x18e141(0x215,0x24f,0x20d,0x218)]();delete _0x2e3674['password'],delete _0x2e3674[_0xfc4854(0x41e,0x480,0x47a,0x4ca)],delete _0x2e3674[_0x18e141(0x19b,0x1d1,0x199,0x170)],delete _0x2e3674[_0x18e141(0x1b5,0x188,0x1a3,0x1da)],_0x239f70[_0x18e141(0x178,0x188,0x155,0x11f)]({'success':!![],'data':{..._0x2e3674,'requiresPassword':![]}});}catch(_0x3411ce){_0x3d717d(_0x3411ce);}},exports[_0x_0x5b3069(0x533,0x521,0x5c1,0x563)]=async(_0xbb3c50,_0x3e3da2,_0x1e689a)=>{function _0x43ca04(_0x1ed76d,_0x368f3b,_0xbc06e8,_0x3bf3df){return _0x_0x36d93b(_0x1ed76d-0x9b,_0x368f3b-0x467,_0xbc06e8-0x15,_0x1ed76d);}function _0x57177c(_0x4c189b,_0x27515c,_0xea0d1c,_0x47c12e){return _0x_0x36d93b(_0x4c189b-0x56,_0x47c12e-0x123,_0xea0d1c-0x1a4,_0x27515c);}try{if(_0x57177c(-0xca,-0x11b,-0xa5,-0xd4)!==_0x57177c(-0x9a,-0xa2,-0x4b,-0x4a)){const {title:_0x35dc48,content:_0x5c436c,summary:_0x534f5d,category:_0x29a851,category_id:_0x1bc0e1,tags:_0x43783e,tag_ids:_0x3651fd,is_published:_0x16c29f,password:_0x5b8672,media_type:_0x26fc4d,media_urls:_0x34d5ee,external_link:_0x59f520,published_at:_0x1e0558,sort_order:_0x322ebd,is_pinned:_0x21655d,show_in_list:_0x14e001,cover_image:_0xaabf1f,source_type:_0x261714,source_url:_0x1a493d,source_text:_0x572b7a,display_mode:_0x4b8120}=_0xbb3c50[_0x43ca04(0x278,0x275,0x27e,0x2c1)];let _0x1b3662=_0x534f5d;!_0x1b3662&&_0x5c436c&&(_0x1b3662=_0x5c436c['length']>-0x1394+0x1*0xa91+0x999?_0x5c436c[_0x43ca04(0x274,0x2c5,0x31d,0x2a5)](0x2285+-0x205*0x9+-0x1058,0x3*-0x692+0xa*0x202+-0x2*-0x1c)+_0x43ca04(0x2a2,0x285,0x2e3,0x262):_0x5c436c);const _0xf3d26=await Note[_0x43ca04(0x2d9,0x2a5,0x2cc,0x2ec)]({'title':_0x35dc48||'','content':_0x5c436c,'summary':_0x1b3662,'category':_0x29a851||null,'category_id':_0x1bc0e1||null,'tags':_0x43783e||null,'is_published':_0x16c29f||![],'password':_0x5b8672&&_0x5b8672['trim']()!==''?_0x5b8672:null,'media_type':_0x26fc4d||_0x43ca04(0x2bc,0x2cc,0x31b,0x324),'media_urls':_0x34d5ee||null,'external_link':_0x59f520||null,'published_at':_0x1e0558||new Date(),'sort_order':_0x322ebd||0x107e+-0x1afe+0xa80*0x1,'is_pinned':_0x21655d||![],'show_in_list':_0x14e001!==undefined?_0x14e001:!![],'cover_image':_0xaabf1f||null,'source_type':_0x261714||_0x57177c(-0x49,-0x3e,-0xa7,-0x78),'source_url':_0x1a493d||null,'source_text':_0x572b7a||null,'display_mode':_0x4b8120||_0x57177c(-0xb6,-0x14a,-0x135,-0xf5)});_0x3651fd&&Array['isArray'](_0x3651fd)&&_0x3651fd['length']>0x1aa3*-0x1+0x7d8*0x4+0x1*-0x4bd&&await _0xf3d26[_0x57177c(-0x136,-0x8d,-0x86,-0xe5)](_0x3651fd);const _0x1e52bd=await Note[_0x57177c(-0x40,-0x67,-0x7c,-0x42)](_0xf3d26['id'],{'include':[{'model':Tag,'as':_0x57177c(-0xa7,-0xfb,-0xa0,-0xc3),'through':{'attributes':[]}},{'model':Category,'as':_0x43ca04(0x2af,0x2bb,0x27b,0x2bc)}]});_0x3e3da2[_0x57177c(-0x23,-0x10,-0x7d,-0x58)](-0x2*0x6a0+-0x1cb9+0x2ac2)[_0x43ca04(0x275,0x260,0x264,0x23d)]({'success':!![],'message':_0x57177c(-0x19,-0x93,-0x4b,-0x44),'data':_0x1e52bd});}else _0x343ec4[_0x57177c(-0xa4,-0x29,-0x86,-0x6d)]=!![],delete _0x454f41[_0x43ca04(0x2dc,0x2f3,0x2b6,0x326)],delete _0xa849bd['external_link'];}catch(_0xd0d090){_0x1e689a(_0xd0d090);}},exports[_0x_0x36d93b(-0x23b,-0x1e0,-0x21e,-0x1d7)]=async(_0x4e1c7b,_0x300062,_0x3eb03d)=>{function _0x18af5a(_0x49c05e,_0x2d7b7c,_0xda13b1,_0xb7b4df){return _0x_0x5b3069(_0x49c05e-0x12c,_0x2d7b7c-0x66,_0xda13b1,_0x49c05e-0x63);}function _0x1239ed(_0x506ec4,_0x2f08b4,_0x144d22,_0x1dd177){return _0x_0x36d93b(_0x506ec4-0x79,_0x506ec4-0x713,_0x144d22-0x9a,_0x2f08b4);}try{if('ZgvuD'===_0x1239ed(0x5a0,0x561,0x59b,0x5cf)){const {id:_0x549342}=_0x4e1c7b['params'],{title:_0x3429e3,content:_0x544fec,summary:_0x16e6b8,category:_0xadbe50,category_id:_0x22496e,tags:_0x4e35cf,tag_ids:_0x56f800,is_published:_0x5befe9,password:_0x506a6e,media_type:_0x471c1b,media_urls:_0x24054a,external_link:_0x528c5d,published_at:_0x8f50d6,sort_order:_0x2b337e,is_pinned:_0x19ffcf,show_in_list:_0x5cf1dc,cover_image:_0x11a74b,source_type:_0x4d8ec4,source_url:_0x4d7716,source_text:_0x525a4b,display_mode:_0x40408d}=_0x4e1c7b['body'],_0x1733ae=await Note[_0x1239ed(0x5ae,0x5a1,0x5e1,0x5e4)](_0x549342);if(!_0x1733ae)return _0x300062[_0x18af5a(0x5c7,0x571,0x61c,0x5b6)](0x440+0x766+-0xa12*0x1)['json']({'success':![],'message':_0x18af5a(0x5d6,0x599,0x5db,0x57b)});let _0x47dbb7=_0x16e6b8;_0x16e6b8===undefined&&_0x544fec!==undefined&&(_0x47dbb7=_0x544fec[_0x1239ed(0x59d,0x5ee,0x545,0x5bd)]>0xed*0x13+-0x1070+0x1d*-0x5?_0x544fec[_0x18af5a(0x5a0,0x552,0x5ab,0x5fc)](0x1*0xa47+0x1276*0x1+-0x1cbd,-0x16f*0x16+-0x5e9*-0x1+-0x3*-0x8bd)+_0x18af5a(0x560,0x598,0x59f,0x52d):_0x544fec);await _0x1733ae[_0x18af5a(0x54a,0x589,0x59f,0x564)]({'title':_0x3429e3!==undefined?_0x3429e3:_0x1733ae[_0x18af5a(0x5af,0x600,0x588,0x579)],'content':_0x544fec!==undefined?_0x544fec:_0x1733ae['content'],'summary':_0x47dbb7!==undefined?_0x47dbb7:_0x1733ae['summary'],'category':_0xadbe50!==undefined?_0xadbe50:_0x1733ae[_0x18af5a(0x5c3,0x5e8,0x5b5,0x608)],'category_id':_0x22496e!==undefined?_0x22496e:_0x1733ae[_0x1239ed(0x57d,0x567,0x539,0x531)],'tags':_0x4e35cf!==undefined?_0x4e35cf:_0x1733ae[_0x18af5a(0x581,0x592,0x5c3,0x52b)],'is_published':_0x5befe9!==undefined?_0x5befe9:_0x1733ae[_0x18af5a(0x5ad,0x5f6,0x5e1,0x55e)],'password':_0x506a6e!==undefined?_0x506a6e&&_0x506a6e[_0x1239ed(0x4f7,0x530,0x4e7,0x4ae)]()!==''?_0x506a6e:null:_0x1733ae[_0x1239ed(0x509,0x4d2,0x52a,0x4ef)],'media_type':_0x471c1b!==undefined?_0x471c1b:_0x1733ae[_0x18af5a(0x584,0x5e3,0x537,0x595)],'media_urls':_0x24054a!==undefined?_0x24054a:_0x1733ae[_0x1239ed(0x59f,0x57a,0x5d4,0x5ed)],'external_link':_0x528c5d!==undefined?_0x528c5d:_0x1733ae['external_link'],'published_at':_0x8f50d6!==undefined?_0x8f50d6:_0x1733ae[_0x1239ed(0x527,0x518,0x570,0x4d8)],'sort_order':_0x2b337e!==undefined?_0x2b337e:_0x1733ae[_0x1239ed(0x549,0x511,0x58d,0x50e)],'is_pinned':_0x19ffcf!==undefined?_0x19ffcf:_0x1733ae['is_pinned'],'show_in_list':_0x5cf1dc!==undefined?_0x5cf1dc:_0x1733ae[_0x1239ed(0x545,0x540,0x57d,0x59b)],'cover_image':_0x11a74b!==undefined?_0x11a74b:_0x1733ae[_0x18af5a(0x555,0x5a4,0x5a7,0x566)],'source_type':_0x4d8ec4!==undefined?_0x4d8ec4:_0x1733ae['source_type'],'source_url':_0x4d7716!==undefined?_0x4d7716:_0x1733ae[_0x1239ed(0x54c,0x587,0x570,0x4ef)],'source_text':_0x525a4b!==undefined?_0x525a4b:_0x1733ae[_0x1239ed(0x55e,0x597,0x50e,0x535)]});_0x56f800!==undefined&&(Array[_0x18af5a(0x56a,0x57f,0x52b,0x575)](_0x56f800)?await _0x1733ae[_0x1239ed(0x50b,0x4e1,0x4ba,0x54e)](_0x56f800):'wClqR'===_0x1239ed(0x51f,0x52e,0x504,0x533)?(_0xa4d049[_0x1239ed(0x583,0x55c,0x5b9,0x59f)]=!![],delete _0x111178['media_urls'],delete _0x208750[_0x1239ed(0x4fe,0x4cc,0x4fd,0x4d0)]):await _0x1733ae[_0x1239ed(0x50b,0x516,0x4d0,0x4f2)]([]));const _0x2d4836=await Note[_0x1239ed(0x5ae,0x5e9,0x55c,0x55f)](_0x1733ae['id'],{'include':[{'model':Tag,'as':'tagList','through':{'attributes':[]}},{'model':Category,'as':_0x1239ed(0x567,0x5ba,0x550,0x51d)}]});_0x300062[_0x1239ed(0x50c,0x51d,0x502,0x544)]({'success':!![],'message':_0x1239ed(0x59a,0x5d6,0x55c,0x5cc),'data':_0x2d4836});}else return _0xbe825f['status'](0x2f1*0xa+0xe2+-0x1cb9)[_0x1239ed(0x50c,0x4af,0x51a,0x4f2)]({'success':![],'message':_0x18af5a(0x5d1,0x58a,0x616,0x58d)});}catch(_0x5172a6){_0x3eb03d(_0x5172a6);}},exports[_0x_0x36d93b(-0x17d,-0x18b,-0x17c,-0x196)]=async(_0x5724ab,_0x406c40,_0xdbb4d3)=>{function _0x183d80(_0x5cf31d,_0x2b5451,_0x29cab8,_0x441e42){return _0x_0x5b3069(_0x5cf31d-0x1f1,_0x2b5451-0xf3,_0x2b5451,_0x5cf31d- -0x508);}function _0x5a7080(_0x4ec128,_0x16abf8,_0x5f3a21,_0x327541){return _0x_0x36d93b(_0x4ec128-0x145,_0x327541-0x6ce,_0x5f3a21-0x192,_0x5f3a21);}try{const {id:_0x12139b}=_0x5724ab[_0x5a7080(0x500,0x4e2,0x516,0x53f)],_0x3419e2=await Note[_0x5a7080(0x52b,0x519,0x59b,0x569)](_0x12139b);if(!_0x3419e2)return _0x406c40[_0x183d80(0x5c,0x1d,0x3f,0xb)](-0x9f*0x1+-0x48c+-0x1*-0x6bf)['json']({'success':![],'message':_0x5a7080(0x584,0x53c,0x590,0x562)});await _0x3419e2[_0x5a7080(0x515,0x57c,0x50e,0x559)](),_0x406c40[_0x183d80(-0x30,-0xa,-0x88,-0x7d)]({'success':!![],'message':'笔记删除成功'});}catch(_0x2ebdc8){_0xdbb4d3(_0x2ebdc8);}},exports['uploadMedia']=async(_0x58b30e,_0x42f0f7,_0xc1a529)=>{function _0xa94c60(_0x40009d,_0x53839b,_0x93f113,_0x5ab07f){return _0x_0x5b3069(_0x40009d-0x86,_0x53839b-0x69,_0x93f113,_0x53839b- -0xbc);}function _0x2d98b7(_0x175d7c,_0x6b285a,_0x3aec3a,_0x146ec2){return _0x_0x5b3069(_0x175d7c-0x182,_0x6b285a-0xe9,_0x3aec3a,_0x6b285a- -0x6f);}try{if(!_0x58b30e[_0x2d98b7(0x498,0x4cb,0x50f,0x4f0)]||_0x58b30e[_0x2d98b7(0x4b3,0x4cb,0x4eb,0x475)][_0xa94c60(0x4f6,0x4ad,0x4cc,0x4c0)]===-0x8c6+0x425*0x1+-0x3*-0x18b)return _0x42f0f7['status'](-0xa*-0x27+0x1203+-0x2b*0x6b)[_0x2d98b7(0x483,0x469,0x429,0x496)]({'success':![],'message':_0x2d98b7(0x452,0x4aa,0x485,0x47c)});const _0x4ca7b6=_0x58b30e[_0xa94c60(0x4b3,0x47e,0x422,0x4bd)][_0x2d98b7(0x45b,0x499,0x4d2,0x43c)](_0x45f9cd=>_0x45f9cd['s3Url']||config[_0xa94c60(0x49f,0x475,0x440,0x420)](_0x45f9cd[_0xa94c60(0x4bf,0x473,0x488,0x460)],_0x58b30e));_0x42f0f7[_0x2d98b7(0x45a,0x469,0x40e,0x45d)]({'success':!![],'message':'文件上传成功','data':{'urls':_0x4ca7b6}});}catch(_0x91585b){_0xc1a529(_0x91585b);}},exports[_0x_0x36d93b(-0x1f6,-0x211,-0x25d,-0x26c)]=async(_0x456dca,_0x3a25f6,_0x17a8a4)=>{function _0x10a830(_0x44099d,_0x3b07a1,_0x12d40b,_0x301931){return _0x_0x36d93b(_0x44099d-0x3b,_0x12d40b-0x66,_0x12d40b-0x1b,_0x3b07a1);}function _0x13ccab(_0x27cb44,_0x182a5a,_0x22e4cb,_0x4be34b){return _0x_0x36d93b(_0x27cb44-0x50,_0x22e4cb-0x489,_0x22e4cb-0x1ca,_0x182a5a);}try{if('MrvJM'!==_0x13ccab(0x2b7,0x2df,0x2f5,0x2e0)){const _0x42b484=await Category['findAll']({'where':{'type':_0x10a830(-0x157,-0x14a,-0xfc,-0xcd)},'order':[[_0x13ccab(0x2a1,0x282,0x2bf,0x28e),_0x10a830(-0x151,-0x162,-0x18a,-0x1d9)],[_0x13ccab(0x2a5,0x2bf,0x2f8,0x2c9),'ASC']]});_0x3a25f6[_0x13ccab(0x284,0x2bf,0x282,0x2c7)]({'success':!![],'data':_0x42b484});}else return _0x440ed4[_0x10a830(-0xbd,-0xc7,-0x115,-0x110)](0x7*0x4c9+0x2071+-0x405c)[_0x13ccab(0x2e0,0x267,0x282,0x23b)]({'success':![],'message':'笔记不存在'});}catch(_0x3301e8){_0x10a830(-0x1aa,-0x14b,-0x151,-0x11d)===_0x10a830(-0x1dc,-0x1e1,-0x195,-0x163)?_0x1dec71(_0x425207):_0x17a8a4(_0x3301e8);}},exports[_0x_0x5b3069(0x4f5,0x4c5,0x4b1,0x506)]=async(_0x4701b6,_0x342f41,_0x468e56)=>{function _0x4c3b2a(_0x5ad39d,_0x37b113,_0x59f568,_0x44ac31){return _0x_0x36d93b(_0x5ad39d-0xc6,_0x5ad39d-0x324,_0x59f568-0x7c,_0x59f568);}function _0x5c3236(_0x30d14a,_0x1fce30,_0x371430,_0x208277){return _0x_0x36d93b(_0x30d14a-0x116,_0x1fce30-0x5f0,_0x371430-0x129,_0x208277);}try{const {sequelize:_0x4e1f28}=require('../config/database'),_0x2dc9b4=_0x4701b6[_0x4c3b2a(0x198,0x1a9,0x146,0x175)]['authorization']&&_0x4701b6[_0x4c3b2a(0x198,0x1bf,0x167,0x142)][_0x5c3236(0x4bd,0x46c,0x42e,0x49c)][_0x4c3b2a(0x143,0x154,0x10f,0x14a)](_0x5c3236(0x468,0x431,0x46e,0x3d3)),_0x5b3f4c=_0x2dc9b4?_0x5c3236(0x3c5,0x3dd,0x3f1,0x3bf):_0x5c3236(0x454,0x480,0x47f,0x438),_0x17377c=await _0x4e1f28[_0x4c3b2a(0x168,0x19a,0x129,0x192)]('\x0a\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5b3f4c+_0x4c3b2a(0x135,0x18a,0xf5,0x151),{'type':_0x4e1f28[_0x5c3236(0x3e5,0x3ef,0x445,0x42c)][_0x4c3b2a(0x186,0x1e3,0x183,0x16e)]});_0x342f41[_0x5c3236(0x419,0x3e9,0x434,0x3a4)]({'success':!![],'data':_0x17377c});}catch(_0x324d24){if(_0x4c3b2a(0x145,0x106,0x120,0x199)!==_0x4c3b2a(0x115,0xbc,0x10f,0x10f))_0x468e56(_0x324d24);else{const _0x107066=_0x2b5969?function(){if(_0x15383d){const _0x44a7b7=_0x2208e6['apply'](_0x4e5615,arguments);return _0x1237e9=null,_0x44a7b7;}}:function(){};return _0x5517cb=![],_0x107066;}}},exports[_0x_0x36d93b(-0x1c2,-0x185,-0x1e2,-0x1c8)]=async(_0x55e496,_0x5f2bd9,_0x2c8e38)=>{function _0x241e2f(_0x50c5ad,_0x2126d3,_0x2e0320,_0x4d4de7){return _0x_0x5b3069(_0x50c5ad-0x7,_0x2126d3-0x101,_0x4d4de7,_0x50c5ad- -0x4bb);}function _0x328125(_0x37d26f,_0x23e962,_0x4018fc,_0x35c3d9){return _0x_0x5b3069(_0x37d26f-0x16e,_0x23e962-0xf1,_0x23e962,_0x35c3d9- -0x41);}try{const {id:_0xa05853}=_0x55e496[_0x241e2f(0x95,0x6a,0x67,0x54)],{password:_0x2f1b63}=_0x55e496[_0x241e2f(0x68,0x2f,0x5e,0x84)],{sequelize:_0x4698dd}=require('../config/database'),_0x378e6c=_0x55e496[_0x328125(0x52e,0x4fd,0x568,0x512)][_0x241e2f(0xa0,0xa0,0x9c,0x9b)]&&_0x55e496[_0x328125(0x4e5,0x502,0x4f7,0x512)][_0x241e2f(0xa0,0x6b,0x6b,0x65)][_0x241e2f(0x43,-0x2,0x5a,-0x11)]('Bearer\x20'),_0xd091c6=await Note['findByPk'](_0xa05853);if(!_0xd091c6)return _0x241e2f(0xb,-0xd,-0x7,-0x30)==='AaLdI'?_0x46da3f[_0x241e2f(0xa9,0x7d,0x8a,0x69)](-0xe7+-0x1d80+-0xaa9*-0x3)['json']({'success':![],'message':'笔记不存在'}):_0x5f2bd9['status'](-0x121*-0x13+-0x10d9+-0x306)[_0x241e2f(0x1d,-0x39,0x15,-0x37)]({'success':![],'message':_0x328125(0x505,0x533,0x54c,0x532)});if(!_0x378e6c&&!_0xd091c6[_0x241e2f(0x8f,0x83,0x32,0xab)])return _0x5f2bd9[_0x241e2f(0xa9,0xee,0xf9,0x61)](-0x3c5+-0x1d*0x64+0x2*0x856)['json']({'success':![],'message':_0x328125(0x53b,0x538,0x51d,0x52d)});const _0x3da738=_0xd091c6[_0x241e2f(0x1a,-0x3b,0xe,0xe)],_0x3dd7bc=_0x3da738&&typeof _0x3da738===_0x328125(0x555,0x4e2,0x516,0x4fb)&&_0x3da738['trim']()!=='';if(_0x3dd7bc&&!_0x378e6c){if(!_0x2f1b63)return _0x5f2bd9[_0x241e2f(0xa9,0x58,0x85,0x5a)](0xaba+0x1*0x2403+-0x7*0x674)[_0x328125(0x4c4,0x49d,0x4c7,0x497)]({'success':![],'message':_0x241e2f(0x1e,0x32,0x33,-0x31),'requiresPassword':!![]});if(_0x2f1b63!==_0x3da738)return _0x5f2bd9['status'](-0x10*-0x1d3+0x22*0x45+-0x1*0x24c9)[_0x241e2f(0x1d,0x33,0x64,0x12)]({'success':![],'message':_0x241e2f(0xbc,0xd9,0x110,0x71)});}const _0x1c5f6b=await _0x4698dd[_0x241e2f(0x68,0x59,0xab,0xac)](_0x328125(0x515,0x54b,0x529,0x53b),{'replacements':[_0xa05853],'type':_0x4698dd[_0x241e2f(0x23,0x55,-0x1a,0x6b)]['SELECT']});_0x5f2bd9[_0x328125(0x4c7,0x441,0x4d4,0x497)]({'success':!![],'data':_0x1c5f6b});}catch(_0x2be4b3){_0x2c8e38(_0x2be4b3);}};function _0x_0x5b3069(_0x61ad1a,_0x428424,_0x14252a,_0x5700db){return _0x_0x5938(_0x5700db-0x348,_0x14252a);}function _0x_0x2d23(){const _0x3257c5=['y29SB3i','zgvZyW','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq5yJOG5A+g56cb6zsz6k+V','CgfZC3DVCMq','otuZotK3r0jpD2fX','C2v0vgfNtgLZDa','ANnVBG','5Q2K56Yu6k6W6zYa6kAb5A+g56cb','C3rHy2S','kcGOlISPkYKRksSK','BLrOtLq','CMvXDwLYzwq','uxvLCNLuExbLCW','AxnFCgLUBMvK','Ec1MB3j3yxjKzwqTzM9Y','zuHvquO','Cgf0Aa','uK5VEw4','EMrSCve','ywXSB3DLza','572r55Uy5yIG6zMK5OIq5yQF','DxbKyxrL','t3LPv1G','mteYnJe2vg5iv3z2','zM91BMq','uxf0wNO','sffhqNG','yM9KEq','Duvov0i','qvnd','cIaGicaGicaGq09vtLqOBNqUBM90zv9PzcKGyxmGDxnHz2vFy291BNqkicaGicaGrLjptsb0ywDZihqkicaGicaGtevgvcbkt0Loig5VDgvFDgfNCYbUDcbptIb0lMLKid0GBNqUDgfNx2LKcIaGicaGieDst1vqiejzihqUAwqkicaGicaGt1jerviGqLKGDxnHz2vFy291BNqGrevtqYWGDc5Uyw1LieftqWOGicaG','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqZoIdMLBdMJA7LUPpMN6xOR6lLROZMIjaSig5VDgu6','y292zxjFAw1Hz2u','ChvIBgLZAgvKx2f0','whPiAuu','Bg9N','B2DhyvO','572r55Uy5PU05PAW5OIq5yQF','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqXmJOG5yEg5Ash5y+r6ycb5zon5BQu','DgfNtgLZDa','CMvTywLUAw5N','DxbKyxrLzf9HDa','zMLYC3rbDhrLBxb0','lI4U','C3rHCNrZv2L0Aa','DxbKyxrLtM90zq','BgHlBfO','5PwW5O2U5BQt5P+L6k+I5AsX6lsL','y291BNq','z2v0uhvIBgLJtM90zvrHz1n0yxrZ','ywrKtM90zurPC2S','BwPdCKu','z2v0tM90zvrHz1n0yxrZ','AxnbCNjHEq','BwfW','cIaGicaGieLou0vsvcbjtLrpig5VDgvFzgLZA3mGkg5VDgvFAwqSigrPC2TFBMfTzsWGDgL0BguSigzPBgvFC2L6zsWGzxH0CMfJDf9JB2rLlcbKB3DUBg9Hzf91CMWSihnVCNrFB3jKzxiPcIaGicaGifzbtfvfuYaOpYWGpYWGpYWGpYWGpYWGpYWGpYKkicaGia','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq3oIbUB3rLugfZC3DVCMtNSBVLNOS6','revtqW','sKLQuMO','AM1yBe8','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqXoIdOJRFLJ5zjroAiKowkNW','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq1oIdMO4dMN6xLJ5hLUipNIRBMGieSigLZx3b1yMXPC2HLzdO','rvbsqNu','C2HVD19PBL9SAxn0','y1PKuLe','A0Dwv1G','Dg9tDhjPBMC','C29YDf9VCMrLCG','y29UDgvUDa','C29YDa','C291CMnLx3vYBa','5PYQ5lIk5lYG5PAh5lU2','mJa4EvfdBgHW','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq4oIbOyxnqyxnZD29YzdO','z2v0qwrTAw5oB3rLrgLZA3m','y3jLyxrL','DgfNCW','cIaGicaGifnftevdvaOGicaGicaGihqUBMfTzsWGDc5JB2XVCIWkicaGicaGicbdt1vovcHUDc5UB3rLx2LKksbHCYb1C2fNzv9JB3vUDaOGicaGicbguK9nihrHz3mGDaOGicaGicbmruzuiePpsu4GBM90zv90ywDZig50ie9oihqUAwqGpsbUDc50ywDFAwqkicaGicaGr1jpvvaGqLKGDc5PzaOGicaGicbpuKrfuIbcwsb1C2fNzv9JB3vUDcbervndlcb0lM5HBwuGqvndcIaGica','qMvHCMvYia','BwvKAwfFDhLWzq','BgLTAxq','CxvLCNK','CgfNzq','DMXvBLi','AwnVBG','Bwf4','uKvYww4','mJmWnZaYvfbKv1zZ','C291CMnLx3rLEhq','BgLRzq','z2v0','yNbfqLe','C3bSAxq','zMLSzw5HBwu','vwfsCKO','z2v0rMLSzvvYBa','Du1Tswe','y2f0zwDVCNLjBMzV','w2DLDfb1yMXPy05VDgvcEuLKxsbYzxeUyM9KEtO','C2v0','nZKXmJa4zhPiEg5Z','mtyZoduWA0D5Be5R','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqXmtOG5yIG6zMK5Pwp5OsF5A2x5Q615A6m5OIq','BM93','zMLSzxm','y2vPBa','C3rYAw5N','C3vIC3rYAw5N','z2v0qwrTAw5oB3rLCW','w2DLDfb1yMXPy05VDgvcEuLKxsdMJzxOJRFLIldPLjNOR686','w2DLDfb1yMXPy05VDgvcEuLKxsdMLBdMJA7LUPpMN6xOR6lPLjNOR686','u0vmrunu','BNvSBa','Dg9vChbLCKnHC2u','BM9Uzq','mKnVz2rhDq','5A+g56cb6zsz6k+V5QYH5PwW6l+h5AsA77Ym6k+3mEwWJ+AxTUwqJUMhJEIVLE+8Gq','y3jLyxrLzf9HDa','DMfSwKy','y2f0zwDVCNLFAwq','AxnFChvIBgLZAgvK','rgntuvq','DgL0Bgu','C2vHCMnO','BMfTzq','CMvXDwLYzxnqyxnZD29Yza','CgfYyw1Z','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq0oIdNRjtORRdKUi3LRzJLNkG','odi0ndG0s0HzsK5T','AgvHzgvYCW','zgvSzxrLtM90zq','z2v0tM90zxm','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqYoIdLVidLP4VMN6xOR6lMLBdMJA7LUPm','Aw5JBhvKzxm','ndiZmgTkAgDqyq','zgvSzxrLtM90zurPC2S','z2v0tM90zurPC2TZ','yxv0Ag9YAxPHDgLVBG','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQqXmZOG5zon5BQu5y+r6ycb5A6m5OIq','Dw5KzwzPBMvK','572r55Uy5RE75yQG5OIq5yQF','z2v0qwrTAw5oB3rLqNLjza','y2f0zwDVCNK','z2v0ugfZC3DVCMrbDhrLBxb0u3rHDhvZ','EKPuqNi','y3jLyxrLtM90zq','C3rHDhvZ','CLPArMq','56Yu6k6W5PU05PAW5OIq5yQF','zvfUvMK','Dw5RBM93BG','BgvUz3rO','zgvZDhjVEq','BwvKAwfFDxjSCW','wMD2Duq','rxjqywq','5PEG5P2d6k6/6zEU5Q2K56Yu6k6W','Dc5Uyw1Llcb0lMnVBg9Yla','w2DLDfb1yMXPy05VDgvcEuLKxsdMRAxPQQq5oIdLH4BLPiFOV5tLM57MLBdMJA4','z2v0qwrTAw5oB3rLvgfNu3rHDhm','wMz6rxK','56Yu6k6W5lIn5A2y5zYO','zMLUzefUzenVDw50qwXS','Dg9ku09o','CfbsCeW','5A+g56cb6zsz6k+V','56Yu6k6W5yIB5BU65OIq5yQF','zxjYB3i','zMLUzej5ugS','yxbWBhK','cIaGicaGifnftevdvcaQiezst00GBM90zv9KAxnRCWOGicaGicbxsevsrsbUB3rLx2LKid0GpWOGicaGicbpuKrfuIbcwsbZB3j0x29YzgvYieftqYWGy3jLyxrLzf9HDcbbu0mkicaGia','BM90zq','te1ltha','cIaGicaGierftevursbguK9nig5VDgvFzgLZA3mkicaGicaGv0HfuKuGAwqGpsa/ieforcbUB3rLx2LKid0GpWOGicaG','ntvLzgPlChy','DhjPBq','A3neBwi','w2DLDfb1yMXPy05VDgvcEuLKxsdPLjNOR6/LOiBMOiG6','wMniwe0','Bw9KywW','zKX1zMW','zgvSzxrL','zxH0zxjUywXFBgLUAW','otLkwLPfuxm','Dc5PzcWGDc5Uyw1Llcb0lMnVBg9Ylcb0lMrLC2nYAxb0Aw9Ulcb0lMnHDgvNB3j5lcb0lMnHDgvNB3j5x2LKla','z2v0tM90zuj5swq','z2v0tM90zunHDgvNB3jPzxm','BM90igzVDw5K','D1PvrgW','DxbKyxrLtM90zurPC2S'];_0x_0x2d23=function(){return _0x3257c5;};return _0x_0x2d23();}exports[_0x_0x36d93b(-0x192,-0x1db,-0x1ed,-0x1cb)]=async(_0x44a99d,_0x4fa30d,_0x31f8d7)=>{function _0x454f8a(_0x100f11,_0x5b8be2,_0x4d2d04,_0x49809a){return _0x_0x5b3069(_0x100f11-0x173,_0x5b8be2-0xf1,_0x49809a,_0x100f11- -0x4b1);}function _0x152590(_0x4ddd14,_0x257ab9,_0x564446,_0x15e45b){return _0x_0x5b3069(_0x4ddd14-0x37,_0x257ab9-0x42,_0x564446,_0x15e45b- -0x373);}try{if(_0x152590(0x1b8,0x1f6,0x1f1,0x19a)!==_0x152590(0x175,0x1cf,0x189,0x19a))return _0x18a73e[_0x454f8a(0xb3,0xf4,0xc5,0x7f)](0x12f+-0x417*0x1+0x479)['json']({'success':![],'message':'密码错误'});else{const {id:_0x418be2}=_0x44a99d[_0x152590(0x1a2,0x227,0x232,0x1dd)],{disk_name:_0x42ea41,title:_0x5c9d61,file_size:_0x15089e,extract_code:_0x146fdf,download_url:_0x4a59c0,sort_order:_0x279508}=_0x44a99d[_0x152590(0x195,0x153,0x172,0x17a)],{sequelize:_0x5cbfdb}=require('../config/database'),_0x5dcc93=await Note[_0x152590(0x238,0x23b,0x1ca,0x207)](_0x418be2);if(!_0x5dcc93){if(_0x152590(0x1e3,0x249,0x19f,0x1fa)!=='RWDbS')return _0x4fa30d[_0x454f8a(0xb3,0x95,0xd2,0xa0)](-0x666+0x7a*0xd+0x6*0x4c)[_0x454f8a(0x27,0x84,0x5c,-0x1f)]({'success':![],'message':'笔记不存在'});else{if(!_0x3299bb)return _0x1dd03d[_0x152590(0x152,0x142,0x18a,0x165)]({'success':!![],'data':{'id':_0x47e3bc['id'],'title':_0x486aa9['title'],'category':_0xbd2e99[_0x454f8a(0xaf,0x6d,0x66,0xaa)],'category_id':_0x168682['category_id'],'tags':_0x4bf1fc['tags'],'tagList':_0x29088c['tagList'],'categoryInfo':_0x28fd1a['categoryInfo'],'is_published':_0x49a6f6[_0x152590(0x1ea,0x234,0x21a,0x1d7)],'is_pinned':_0xfaa85f[_0x454f8a(0x2e,0x55,-0x14,0x3c)],'published_at':_0x1ce7ea[_0x152590(0x185,0x190,0x157,0x180)],'created_at':_0x47af81['created_at'],'requiresPassword':!![],'content':null}});if(_0x3cf521!==_0x4977ee)return _0x550887['status'](-0x60a*-0x2+-0x1417+0x994)[_0x152590(0x187,0x1b0,0x167,0x165)]({'success':![],'message':_0x152590(0x1a6,0x25f,0x255,0x204)});}}const [_0x297ee7]=await _0x5cbfdb[_0x454f8a(0x72,0x30,0x8c,0x44)](_0x152590(0x1a9,0x184,0x197,0x196),{'replacements':[_0x418be2,_0x42ea41,_0x5c9d61,_0x15089e||null,_0x146fdf||null,_0x4a59c0||null,_0x279508||-0x1a92+-0x11dc+0x2c6e]});_0x4fa30d[_0x152590(0x148,0x197,0x198,0x165)]({'success':!![],'message':_0x152590(0x1d9,0x223,0x1b5,0x1eb),'data':{'id':_0x297ee7}});}}catch(_0x34544c){_0x31f8d7(_0x34544c);}},exports[_0x_0x36d93b(-0x1b4,-0x20e,-0x20d,-0x250)]=async(_0x3d1676,_0x435b2c,_0x3b5361)=>{function _0x55d6a9(_0x4ab078,_0x36ef17,_0xf1056f,_0x4aec24){return _0x_0x5b3069(_0x4ab078-0x1f,_0x36ef17-0xa2,_0x4ab078,_0xf1056f- -0x86);}function _0x5060f9(_0x1b817f,_0xe48aab,_0x191a1a,_0x2bfe61){return _0x_0x36d93b(_0x1b817f-0x93,_0xe48aab- -0x4c,_0x191a1a-0x182,_0x2bfe61);}try{if(_0x5060f9(-0x20a,-0x1c4,-0x1cd,-0x17c)==='VRolT'){const _0x164860=_0x140d4b[_0x55d6a9(0x493,0x4f8,0x4ef,0x53a)]();return delete _0x164860[_0x5060f9(-0x2aa,-0x256,-0x21a,-0x283)],delete _0x164860[_0x5060f9(-0x1d5,-0x1e4,-0x239,-0x196)],delete _0x164860[_0x55d6a9(0x434,0x4c4,0x475,0x46a)],delete _0x164860[_0x5060f9(-0x233,-0x216,-0x227,-0x1f0)],delete _0x164860[_0x55d6a9(0x4dc,0x4a1,0x490,0x46b)],_0x1553e5[_0x5060f9(-0x1fd,-0x256,-0x239,-0x27d)]&&_0x7ddb74['password'][_0x55d6a9(0x485,0x469,0x43d,0x437)]()!==''&&(_0x164860[_0x55d6a9(0x4b3,0x4fc,0x4c9,0x4d9)]=!![],delete _0x164860[_0x5060f9(-0x1e0,-0x1c0,-0x1b6,-0x21f)],delete _0x164860[_0x55d6a9(0x45d,0x3e7,0x444,0x44f)]),_0x164860;}else{const {id:_0x8a12b9,diskId:_0x1e1059}=_0x3d1676[_0x5060f9(-0x1bc,-0x1db,-0x1e0,-0x1f1)],{disk_name:_0x40b3dc,title:_0x480e9e,file_size:_0x4bbb48,extract_code:_0x28d554,download_url:_0x219d0f}=_0x3d1676['body'],{sequelize:_0x3b8d3a}=require('../config/database');await _0x3b8d3a[_0x5060f9(-0x1e8,-0x208,-0x21d,-0x1c5)]('\x0a\x20\x20\x20\x20\x20\x20UPDATE\x20note_disks\x0a\x20\x20\x20\x20\x20\x20SET\x20disk_name\x20=\x20?,\x20title\x20=\x20?,\x20file_size\x20=\x20?,\x20extract_code\x20=\x20?,\x20download_url\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20WHERE\x20id\x20=\x20?\x20AND\x20note_id\x20=\x20?\x0a\x20\x20\x20\x20',{'replacements':[_0x40b3dc,_0x480e9e,_0x4bbb48||null,_0x28d554||null,_0x219d0f||null,_0x1e1059,_0x8a12b9]}),_0x435b2c[_0x55d6a9(0x45d,0x414,0x452,0x411)]({'success':!![],'message':_0x55d6a9(0x425,0x4a8,0x471,0x45f)});}}catch(_0x18b0cd){_0x3b5361(_0x18b0cd);}},exports[_0x_0x36d93b(-0x138,-0x186,-0x1c5,-0x1d9)]=async(_0x1d09a6,_0x2bb5f0,_0x2154e6)=>{function _0x32a277(_0x358859,_0x399e97,_0x48f9e4,_0x3a1ca6){return _0x_0x5b3069(_0x358859-0xfb,_0x399e97-0x1d7,_0x3a1ca6,_0x358859- -0x26c);}function _0x3a5765(_0x45c0a7,_0x2d95a6,_0x4985e1,_0x568f0b){return _0x_0x5b3069(_0x45c0a7-0x1da,_0x2d95a6-0xd9,_0x568f0b,_0x45c0a7- -0x365);}try{if('cqTeb'!=='cqTeb')return console[_0x32a277(0x30d,0x2d0,0x2d6,0x2d5)]('[getPublicNoteById]\x20数据库查询错误:',_0x39527d),_0x51d685[_0x32a277(0x2f8,0x344,0x2b4,0x2cf)](-0x73e*-0x3+-0xc2*0x14+-0x49e*0x1)[_0x3a5765(0x173,0x138,0x152,0x161)]({'success':![],'message':_0x32a277(0x295,0x26c,0x29a,0x2df)});else{const {id:_0xa606ab,diskId:_0x16d8de}=_0x1d09a6[_0x3a5765(0x1eb,0x210,0x243,0x20e)],{sequelize:_0x4af337}=require('../config/database');await _0x4af337[_0x3a5765(0x1be,0x17b,0x1fb,0x1c4)](_0x32a277(0x313,0x372,0x2e5,0x34a),{'replacements':[_0x16d8de,_0xa606ab]}),_0x2bb5f0[_0x32a277(0x26c,0x219,0x22f,0x242)]({'success':!![],'message':_0x3a5765(0x181,0x16c,0x1b3,0x133)});}}catch(_0x2f2492){_0x2154e6(_0x2f2492);}};