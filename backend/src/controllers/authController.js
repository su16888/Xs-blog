(function(_0x9e5ccd,_0x208cbf){const _0x3ee68f=_0x9e5ccd();function _0x5ec376(_0x4a06b1,_0x5fad0d,_0x10d75c,_0x568046){return _0x_0x45fe(_0x5fad0d- -0x24e,_0x10d75c);}function _0x402bbc(_0x53c37d,_0x10e05f,_0x27b35f,_0x40e9e2){return _0x_0x45fe(_0x40e9e2-0x238,_0x53c37d);}while(!![]){try{const _0x3c4a22=-parseInt(_0x402bbc(0x399,0x3b4,0x39d,0x39e))/(-0x7*-0x17d+0xca*0x2e+-0x2eb6)*(parseInt(_0x402bbc(0x3c5,0x3a7,0x3ae,0x3ac))/(0x10e8+-0x1*-0x1a60+-0x2b46))+parseInt(_0x5ec376(-0x101,-0xfc,-0x102,-0xe4))/(0x7c2*0x3+0x14a1*0x1+0x2be4*-0x1)*(parseInt(_0x5ec376(-0xfd,-0xfd,-0x101,-0x104))/(-0xd*-0x178+-0x27a*-0x5+-0x1f76))+-parseInt(_0x402bbc(0x3b4,0x390,0x3a5,0x3a9))/(-0x11*-0x9a+-0x233c+0x1907)*(-parseInt(_0x402bbc(0x39f,0x388,0x381,0x3a1))/(-0x1539*0x1+0x1*-0x254f+0xa*0x5db))+-parseInt(_0x402bbc(0x39f,0x388,0x368,0x388))/(-0x7*0x2ef+0x1a3*-0x4+0x1b1c)*(parseInt(_0x5ec376(-0xd4,-0xd1,-0xe8,-0xbe))/(-0xcbb*-0x3+0x2*0xfc4+0x45b1*-0x1))+-parseInt(_0x402bbc(0x3a4,0x39b,0x382,0x39f))/(-0x1*-0x1515+-0x1886+0x5*0xb2)+-parseInt(_0x5ec376(-0xc5,-0xcb,-0xe7,-0xaf))/(0x9c1+-0x154f+-0x2e6*-0x4)+parseInt(_0x5ec376(-0xf9,-0xea,-0xcf,-0xd6))/(0x1b*0x5d+-0x1538+0xb74);if(_0x3c4a22===_0x208cbf)break;else _0x3ee68f['push'](_0x3ee68f['shift']());}catch(_0x88f818){_0x3ee68f['push'](_0x3ee68f['shift']());}}}(_0x_0xbcc7,-0x52dc1+-0x65*0xf59+0x557*0x311));const _0x_0x1f5879=(function(){let _0x5641a8=!![];return function(_0x25f984,_0x40be17){const _0xa37689=_0x5641a8?function(){function _0x533233(_0x4233c4,_0x958e9a,_0x2fc0a0,_0xbd1aba){return _0x_0x45fe(_0x2fc0a0-0x31e,_0xbd1aba);}if(_0x40be17){const _0xb22800=_0x40be17[_0x533233(0x486,0x4a2,0x481,0x4a0)](_0x25f984,arguments);return _0x40be17=null,_0xb22800;}}:function(){};return _0x5641a8=![],_0xa37689;};}()),_0x_0x1e6371=_0x_0x1f5879(this,function(){function _0x20d8d8(_0x531513,_0x53f078,_0x3619b8,_0x4c7d59){return _0x_0x45fe(_0x4c7d59-0x88,_0x531513);}function _0x59f311(_0x3df596,_0x541a56,_0x302563,_0x1b389c){return _0x_0x45fe(_0x1b389c-0x3df,_0x302563);}return _0x_0x1e6371[_0x20d8d8(0x21d,0x215,0x208,0x216)]()[_0x20d8d8(0x1ea,0x1e6,0x1ee,0x1f0)](_0x59f311(0x544,0x536,0x551,0x536))[_0x20d8d8(0x234,0x205,0x20e,0x216)]()['constructor'](_0x_0x1e6371)[_0x20d8d8(0x1d2,0x20d,0x20d,0x1f0)](_0x20d8d8(0x1f6,0x200,0x1df,0x1df));});function _0x_0x5502e5(_0x10caff,_0x544dc9,_0x4db91a,_0x2c46ae){return _0x_0x45fe(_0x2c46ae- -0x257,_0x544dc9);}_0x_0x1e6371();function _0x_0x45fe(_0x2dfdaa,_0x2dd34c){_0x2dfdaa=_0x2dfdaa-(-0x13*0x153+-0x653+0x20cb);const _0x2d4c76=_0x_0xbcc7();let _0x251fb8=_0x2d4c76[_0x2dfdaa];if(_0x_0x45fe['atOFgJ']===undefined){var _0x1facd3=function(_0x538560){const _0x406ccd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x148ecd='',_0x13f94a='',_0x487519=_0x148ecd+_0x1facd3;for(let _0x5c15e0=-0x1*-0x1246+0x18d6+-0x2b1c,_0x45bfe6,_0x1b2a97,_0x1aa165=-0xe7e+-0x1a6+0x1024;_0x1b2a97=_0x538560['charAt'](_0x1aa165++);~_0x1b2a97&&(_0x45bfe6=_0x5c15e0%(-0x10*0x1f2+0x14de+-0x523*-0x2)?_0x45bfe6*(-0x117a*-0x2+-0x24f0+0x8f*0x4)+_0x1b2a97:_0x1b2a97,_0x5c15e0++%(0x400+-0x10*0x38+-0x7c))?_0x148ecd+=_0x487519['charCodeAt'](_0x1aa165+(-0x3*0x6f3+0xc*0x308+0x1*-0xf7d))-(-0x55b*0x3+0x3*0x764+-0x1*0x611)!==-0x40*0x15+0x10fd*0x1+-0xbbd?String['fromCharCode'](-0x1e85+-0x3df+0x1*0x2363&_0x45bfe6>>(-(0x138b*0x1+0xb*-0x43+-0x2*0x854)*_0x5c15e0&-0x105*-0xb+-0x252b+0x19fa)):_0x5c15e0:0x1bd*-0x13+-0xb4e*0x1+0x2c55){_0x1b2a97=_0x406ccd['indexOf'](_0x1b2a97);}for(let _0x5555ae=-0x17a9+-0x1*0x10fa+0x28a3,_0x487083=_0x148ecd['length'];_0x5555ae<_0x487083;_0x5555ae++){_0x13f94a+='%'+('00'+_0x148ecd['charCodeAt'](_0x5555ae)['toString'](-0x954+0x1*0x277+0x1*0x6ed))['slice'](-(-0x20be+0x1*-0xd27+0x2de7));}return decodeURIComponent(_0x13f94a);};_0x_0x45fe['BBdHxX']=_0x1facd3,_0x_0x45fe['PCLUgC']={},_0x_0x45fe['atOFgJ']=!![];}const _0x404b78=_0x2d4c76[0x1a27+0x210a+-0x3b31],_0x2b4450=_0x2dfdaa+_0x404b78,_0x4950ce=_0x_0x45fe['PCLUgC'][_0x2b4450];if(!_0x4950ce){const _0x185c1c=function(_0x17af25){this['toGukN']=_0x17af25,this['jCbmsf']=[-0x34+0xad8*-0x2+0x15e5,0x1*0x8e4+-0x2*-0xe37+0x2*-0x12a9,0x49*0x27+0x121+-0x2*0x620],this['roODWF']=function(){return'newState';},this['ZzarHX']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['aIsina']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x185c1c['prototype']['NwwiyY']=function(){const _0x15cac8=new RegExp(this['ZzarHX']+this['aIsina']),_0x30bc1d=_0x15cac8['test'](this['roODWF']['toString']())?--this['jCbmsf'][0x1575*-0x1+0xd*-0x275+0x3567]:--this['jCbmsf'][-0x20cf*0x1+-0x95+-0x859*-0x4];return this['cIFVPc'](_0x30bc1d);},_0x185c1c['prototype']['cIFVPc']=function(_0x3b9654){if(!Boolean(~_0x3b9654))return _0x3b9654;return this['QACOWs'](this['toGukN']);},_0x185c1c['prototype']['QACOWs']=function(_0x403ba5){for(let _0x54277e=0x2d8*0xa+-0x545+-0x172b,_0x2240c4=this['jCbmsf']['length'];_0x54277e<_0x2240c4;_0x54277e++){this['jCbmsf']['push'](Math['round'](Math['random']())),_0x2240c4=this['jCbmsf']['length'];}return _0x403ba5(this['jCbmsf'][-0x326*0x1+-0x1*0xd3+0x3f9]);},new _0x185c1c(_0x_0x45fe)['NwwiyY'](),_0x251fb8=_0x_0x45fe['BBdHxX'](_0x251fb8),_0x_0x45fe['PCLUgC'][_0x2b4450]=_0x251fb8;}else _0x251fb8=_0x4950ce;return _0x251fb8;}const bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),User=require('../models/User'),config=require('../config/config');function _0x_0xbcc7(){const _0x46f639=['Bg9N','C2vJDxjL','Bg9NB3v0','5B2t5yMn5A+g56cb5zkm5PAW5A+g56cb5lIn6io95lI656M6','nJqZmtyYmg1hwhrrBa','y2HHBMDLugfZC3DVCMq','5A+g56cb6zw/5BQMoIa','zxHWAxjLC0LU','Ahr0Chm','Ec1MB3j3yxjKzwqTChjVDg8','EuXotue','AgfZAa','CM9Szq','y2HHBMDLvxnLCM5HBwu','yM9KEq','Dg9tDhjPBMC','z2v0q3vYCMvUDfvZzxi','DxnLCM5HBwu','jdjHja','mtmZmhj0s2Hdra','nhvPAMjTAW','mta1mJaZmxzpzNfcAq','C3rHDhvZ','C2vJCMv0','ChjVzhvJDgLVBG','CgfZC3DVCMq','kcGOlISPkYKRksSK','EK5gu0e','Dwv6twy','ywn0AxzL','55M75B2v6k+35Rgc6lcd6k+v5l+H5OgVoG','55sO5OI35zcn5OIw5A+g56cb6zsz6k+V','zMLUze9Uzq','BM1SquC','AND0','5B2t5yMn5A+g56cb5zkm5PAW55sO5OI35zcn5lIn6io95lI656M6','5A+g56cb5PIV5zcM5lULjdjHjow8GowKTdOG','sNHoy0O','yxbWBhK','mtq2mta0odzXrwvoq3i','wxzlEuu','mtzAC2DsELi','ndi3nZe2CuTbBvzJ','C2vHCMnO','mta4nZjRt2PMrMi','C2LNBG','zMLUzej5ugS','CMvNAxn0zxi','D0vwCwi','5RoO5yAm5OIq5yQF','y29TCgfYzq','DxnLCG','odG1ExbUs25H','ANnVBG','tw9Vvu4','nJu4odzuCunUuxi','5Ps25yIW55Qe5A+g56cboIa','DxbKyxrL','zw52','55sO5OI35zcn5zkm5A+g56cb5lIn6io95lI656M6','tK9erv9ftLy','55sO5OI35lIn5A2y5zYO','55sO5OI35zcn5BEY5A2y5zYO','5B2t5yMn5A+g56cb6zsz6k+V','mtG3mZzYy0L4Dha','AgvHzgvYCW'];_0x_0xbcc7=function(){return _0x46f639;};return _0x_0xbcc7();}exports[_0x_0x1018f5(0xaf,0xa4,0xa2,0x97)]=async(_0x386cc5,_0x12fa1c,_0x2c8c82)=>{function _0x1facce(_0x303380,_0x378361,_0x5f50d2,_0x321f33){return _0x_0x1018f5(_0x303380,_0x378361-0xdd,_0x5f50d2-0x1ab,_0x321f33- -0x2da);}function _0x51248a(_0x223109,_0x168989,_0x40d9b8,_0x32ce3a){return _0x_0x1018f5(_0x168989,_0x168989-0xd,_0x40d9b8-0x1b0,_0x223109-0x38c);}try{const {username:_0x46df58,password:_0x34635d,email:_0x50132c}=_0x386cc5[_0x51248a(0x444,0x44f,0x428,0x455)];if(!_0x46df58||!_0x34635d)return _0x12fa1c[_0x1facce(-0x270,-0x258,-0x250,-0x25c)](-0x23f3+0x5f3*-0x1+-0x15bb*-0x2)[_0x51248a(0x429,0x435,0x42a,0x438)]({'success':![],'message':_0x1facce(-0x241,-0x22a,-0x24f,-0x237)});const _0x15c31b=await User[_0x51248a(0x414,0x42c,0x40f,0x42c)]({'where':{'username':_0x46df58}});if(_0x15c31b)return _0x12fa1c[_0x1facce(-0x240,-0x24e,-0x267,-0x25c)](-0x13*-0x1b8+0x11d5+-0x30ed)[_0x1facce(-0x238,-0x232,-0x25d,-0x23d)]({'success':![],'message':'用户名已存在'});const _0x1e08da=await bcrypt['hash'](_0x34635d,0x1*-0xddf+0x18fa+0x1*-0xb11),_0x2f6cc2=await User['create']({'username':_0x46df58,'password':_0x1e08da,'email':_0x50132c,'role':_0x51248a(0x427,0x40b,0x435,0x434),'status':_0x51248a(0x411,0x42c,0x42d,0x3f6)}),_0x4bd31e=jwt[_0x1facce(-0x241,-0x252,-0x232,-0x245)]({'id':_0x2f6cc2['id'],'username':_0x2f6cc2['username']},config[_0x51248a(0x416,0x400,0x416,0x416)][_0x1facce(-0x259,-0x23f,-0x270,-0x25b)],{'expiresIn':config[_0x51248a(0x416,0x41e,0x429,0x431)][_0x51248a(0x43d,0x44d,0x42b,0x44b)]});_0x12fa1c[_0x51248a(0x40a,0x418,0x415,0x3ea)](-0x3*0xbff+0x1*-0x25e9+0x4aaf)[_0x1facce(-0x22b,-0x22d,-0x22a,-0x23d)]({'success':!![],'message':_0x51248a(0x425,0x446,0x412,0x444),'data':{'token':_0x4bd31e,'user':{'id':_0x2f6cc2['id'],'username':_0x2f6cc2['username'],'role':_0x2f6cc2['role'],'status':_0x2f6cc2['status']}}});}catch(_0x34cc93){_0x2c8c82(_0x34cc93);}},exports['login']=async(_0x2a0965,_0x29ab05,_0x5e570a)=>{function _0x42eb4a(_0x2c1b62,_0x122788,_0x531b0f,_0x4c4064){return _0x_0x1018f5(_0x2c1b62,_0x122788-0xc6,_0x531b0f-0x149,_0x122788- -0x4d);}function _0x31aff6(_0x56ab6d,_0x3af78d,_0x108b3d,_0x55290e){return _0x_0x1018f5(_0x3af78d,_0x3af78d-0x1ab,_0x108b3d-0xe3,_0x56ab6d-0x27b);}try{const {username:_0x54da5f,password:_0x5b2220}=_0x2a0965[_0x42eb4a(0x82,0x6b,0x57,0x81)];console['log'](_0x31aff6(0x301,0x308,0x315,0x2e3)),console['log']('用户名:\x20'+_0x54da5f),console['log'](_0x42eb4a(0x53,0x53,0x70,0x47)+_0x5b2220),console[_0x31aff6(0x325,0x329,0x319,0x327)](_0x31aff6(0x32b,0x32c,0x324,0x30b)+(_0x5b2220?_0x5b2220['length']:0x2*0x219+0x20a6+0x24d8*-0x1)),console[_0x31aff6(0x325,0x305,0x344,0x309)](_0x42eb4a(0x4f,0x3f,0x44,0x60)+(_0x5b2220?_0x5b2220['startsWith'](_0x31aff6(0x2f5,0x2f3,0x2d9,0x302)):![]));const _0x100e8e=_0x2a0965[_0x31aff6(0x326,0x305,0x33a,0x309)]||_0x2a0965[_0x42eb4a(0x78,0x5c,0x7a,0x72)][_0x31aff6(0x32e,0x334,0x323,0x344)]===_0x31aff6(0x32d,0x31d,0x344,0x334),_0x59248a=process[_0x31aff6(0x31d,0x33e,0x31c,0x315)][_0x31aff6(0x31f,0x30d,0x33d,0x325)]===_0x31aff6(0x2fb,0x2e4,0x2f1,0x2f3);if(!_0x54da5f||!_0x5b2220)return _0x29ab05[_0x31aff6(0x2f9,0x30c,0x315,0x2e2)](-0x13ec+0xd*0x133+0x5e5)['json']({'success':![],'message':'用户名和密码不能为空'});const _0x56c907=await User[_0x42eb4a(0x1a,0x3b,0x4e,0x34)]({'where':{'username':_0x54da5f}});if(!_0x56c907){if('eEYFE'!==_0x31aff6(0x2ff,0x31a,0x312,0x2ed))return _0x29ab05[_0x31aff6(0x2f9,0x317,0x309,0x301)](0x1*-0x99a+-0x217*-0x1+0x914)[_0x31aff6(0x318,0x315,0x314,0x2fb)]({'success':![],'message':'用户名或密码错误'});else _0xab4f21(_0x41e830);}const _0x42ae51=await bcrypt['compare'](_0x5b2220,_0x56c907[_0x31aff6(0x2fc,0x2f5,0x315,0x2de)]);if(!_0x42ae51){if(_0x31aff6(0x313,0x30f,0x319,0x32d)!==_0x31aff6(0x313,0x322,0x317,0x326))_0x1fa257(_0x2a9c32);else return _0x29ab05['status'](0x10b+0x1*-0x11a+-0x4*-0x68)[_0x31aff6(0x318,0x31f,0x2f7,0x303)]({'success':![],'message':'用户名或密码错误'});}const _0x2801c1=jwt['sign']({'id':_0x56c907['id'],'username':_0x56c907[_0x42eb4a(0x5c,0x6e,0x8d,0x6b)]},config[_0x42eb4a(0x47,0x3d,0x3f,0x5d)][_0x31aff6(0x2fa,0x2f1,0x2de,0x317)],{'expiresIn':config[_0x31aff6(0x305,0x30d,0x31a,0x319)]['expiresIn']});_0x29ab05[_0x42eb4a(0x65,0x50,0x65,0x51)]({'success':!![],'message':'登录成功','data':{'token':_0x2801c1,'user':{'id':_0x56c907['id'],'username':_0x56c907[_0x42eb4a(0x71,0x6e,0x62,0x87)],'role':_0x56c907[_0x42eb4a(0x5d,0x69,0x69,0x70)],'status':_0x56c907[_0x42eb4a(0x15,0x31,0x2a,0x13)]}}});}catch(_0x362f92){_0x5e570a(_0x362f92);}},exports[_0x_0x5502e5(-0xb7,-0xe7,-0xce,-0xc8)]=async(_0x30833f,_0x2f49ee,_0x12c023)=>{function _0x1a6037(_0x354b28,_0x4474f7,_0x35847a,_0xebdd92){return _0x_0x5502e5(_0x354b28-0x169,_0xebdd92,_0x35847a-0xc6,_0x4474f7-0x14f);}function _0x3a536b(_0x4fc120,_0x36f153,_0x3b3cc5,_0x3567d2){return _0x_0x5502e5(_0x4fc120-0xb9,_0x4fc120,_0x3b3cc5-0x52,_0x3b3cc5-0x33f);}try{if(_0x1a6037(0x7f,0x6b,0x69,0x81)===_0x1a6037(0x4f,0x56,0x62,0x73))return _0x5693bc[_0x1a6037(0x57,0x4b,0x4f,0x57)](-0x2388+-0x3f7+-0x17*-0x1c9)[_0x3a536b(0x25c,0x263,0x25a,0x245)]({'success':![],'message':_0x3a536b(0x274,0x276,0x260,0x265)});else{const _0x1fed46=await User['findByPk'](_0x30833f[_0x1a6037(0x54,0x68,0x74,0x47)]['id'],{'attributes':{'exclude':[_0x3a536b(0x259,0x230,0x23e,0x22f)]}});if(!_0x1fed46)return'zyyur'!==_0x1a6037(0x5e,0x5a,0x58,0x4a)?_0x2f49ee[_0x3a536b(0x234,0x22f,0x23b,0x242)](-0xc48+0x1cb8+-0xedc)[_0x1a6037(0x72,0x6a,0x58,0x61)]({'success':![],'message':_0x3a536b(0x262,0x244,0x262,0x24b)}):_0x549f66[_0x3a536b(0x248,0x231,0x23b,0x22e)](0x9cd+-0x12a*0xa+0x36b)['json']({'success':![],'message':_0x3a536b(0x243,0x242,0x262,0x274)});_0x2f49ee[_0x3a536b(0x25c,0x23d,0x25a,0x255)]({'success':!![],'data':{'id':_0x1fed46['id'],'username':_0x1fed46[_0x3a536b(0x270,0x27f,0x278,0x290)],'role':_0x1fed46[_0x1a6037(0x96,0x83,0x8c,0x65)],'status':_0x1fed46[_0x3a536b(0x24d,0x249,0x23b,0x244)],'createdAt':_0x1fed46['createdAt'],'updatedAt':_0x1fed46['updatedAt']}});}}catch(_0x4179a1){_0x12c023(_0x4179a1);}},exports[_0x_0x1018f5(0xb3,0x9c,0xc8,0xaf)]=async(_0x22393e,_0x8a438a,_0x28360e)=>{function _0x20b797(_0x32ad86,_0x3441b6,_0x5aa393,_0x3d3c77){return _0x_0x1018f5(_0x3d3c77,_0x3441b6-0x133,_0x5aa393-0x74,_0x3441b6-0x377);}function _0x18c854(_0x520b05,_0x4553c8,_0x413a19,_0x1235e0){return _0x_0x5502e5(_0x520b05-0x55,_0x1235e0,_0x413a19-0x11c,_0x413a19-0x500);}try{const {currentPassword:_0x1a2ecd,newPassword:_0x476a29}=_0x22393e['body'];if(!_0x1a2ecd||!_0x476a29)return _0x8a438a[_0x18c854(0x3e6,0x3e7,0x3fc,0x3e4)](-0x1b10+-0x164f+0xdd*0x3b)[_0x18c854(0x41c,0x409,0x41b,0x405)]({'success':![],'message':_0x20b797(0x408,0x424,0x436,0x426)});const _0x5f3edf=await User[_0x18c854(0x40c,0x40e,0x414,0x41f)](_0x22393e[_0x20b797(0x430,0x412,0x40f,0x42e)]['id']);if(!_0x5f3edf)return _0x20b797(0x3e9,0x407,0x416,0x41a)===_0x20b797(0x3f4,0x407,0x3f4,0x426)?_0x8a438a[_0x20b797(0x3e4,0x3f5,0x3eb,0x403)](-0x5c1+0x121*-0x21+0x2c96)['json']({'success':![],'message':_0x20b797(0x40e,0x41c,0x41e,0x417)}):_0x3c6f9c['status'](-0x387+-0x1e45*0x1+0x337*0xb)[_0x18c854(0x417,0x40c,0x41b,0x426)]({'success':![],'message':_0x18c854(0x40d,0x401,0x405,0x401)});const _0x411a08=await bcrypt[_0x18c854(0x420,0x41d,0x418,0x3f7)](_0x1a2ecd,_0x5f3edf[_0x20b797(0x3f0,0x3f8,0x400,0x3ee)]);if(!_0x411a08)return _0x8a438a[_0x20b797(0x3fa,0x3f5,0x3e1,0x3e4)](0x1*0xb3f+0x2*0xc00+0x1*-0x21ae)['json']({'success':![],'message':_0x18c854(0x414,0x41b,0x425,0x41c)});const _0x27187a=await bcrypt[_0x18c854(0x430,0x420,0x433,0x420)](_0x476a29,-0x1*0x22e5+-0x1001*-0x1+-0x12ee*-0x1);await _0x5f3edf[_0x20b797(0x423,0x418,0x403,0x401)]({'password':_0x27187a}),_0x8a438a['json']({'success':!![],'message':'密码修改成功'});}catch(_0x2e5902){_0x28360e(_0x2e5902);}};function _0x_0x1018f5(_0x53dd85,_0x56cb50,_0x45bec8,_0x78007c){return _0x_0x45fe(_0x78007c- -0xd5,_0x53dd85);}exports[_0x_0x1018f5(0xd3,0xa3,0xa3,0xb7)]=async(_0xcb78fd,_0x29dd85,_0x51fc74)=>{function _0x50b027(_0x206b57,_0x2a0dd9,_0x102f36,_0x2bd66c){return _0x_0x5502e5(_0x206b57-0x23,_0x206b57,_0x102f36-0x9f,_0x2bd66c-0x533);}function _0x2fb63c(_0x148e73,_0x29de03,_0x32091b,_0x2da943){return _0x_0x5502e5(_0x148e73-0x153,_0x148e73,_0x32091b-0x1e5,_0x29de03- -0x158);}try{if('yLNMA'!==_0x2fb63c(-0x220,-0x226,-0x247,-0x212))return _0x3c427a[_0x50b027(0x436,0x432,0x44b,0x42f)](-0x27a+-0xb4c+0xf56)['json']({'success':![],'message':'当前密码和新密码不能为空'});else{const {currentPassword:_0x38628b,newUsername:_0x3f67f8}=_0xcb78fd[_0x2fb63c(-0x218,-0x222,-0x231,-0x22b)];if(!_0x38628b||!_0x3f67f8)return _0x29dd85[_0x50b027(0x425,0x42c,0x442,0x42f)](-0x1cff+-0x257f+0x440e)[_0x50b027(0x434,0x432,0x44e,0x44e)]({'success':![],'message':_0x2fb63c(-0x230,-0x24f,-0x262,-0x23e)});const _0x2832da=await User[_0x50b027(0x443,0x42c,0x43c,0x447)](_0xcb78fd['user']['id']);if(!_0x2832da)return _0x50b027(0x434,0x42f,0x449,0x434)===_0x2fb63c(-0x258,-0x257,-0x260,-0x277)?_0x29dd85[_0x50b027(0x426,0x41d,0x44a,0x42f)](-0x161a+-0x8ad*0x1+0x205b)[_0x50b027(0x464,0x43b,0x44a,0x44e)]({'success':![],'message':_0x50b027(0x473,0x45f,0x468,0x456)}):_0x32b2ac[_0x50b027(0x41e,0x40f,0x43c,0x42f)](-0x1*0x501+-0x1861+0x1ef6)[_0x2fb63c(-0x224,-0x23d,-0x25e,-0x232)]({'success':![],'message':_0x50b027(0x473,0x453,0x44b,0x456)});const _0x199ee7=await bcrypt[_0x50b027(0x465,0x446,0x44d,0x44b)](_0x38628b,_0x2832da[_0x50b027(0x439,0x440,0x42c,0x432)]);if(!_0x199ee7)return _0x29dd85[_0x50b027(0x414,0x443,0x40e,0x42f)](0x1ea+-0xc14+0xbbb)['json']({'success':![],'message':_0x2fb63c(-0x233,-0x233,-0x24b,-0x219)});const _0x497ce9=await User[_0x50b027(0x455,0x448,0x443,0x439)]({'where':{'username':_0x3f67f8}});if(_0x497ce9&&_0x497ce9['id']!==_0x2832da['id'])return _0x29dd85['status'](-0x1333*-0x1+-0x121c+0x79*0x1)[_0x50b027(0x42f,0x42e,0x44d,0x44e)]({'success':![],'message':_0x50b027(0x446,0x46e,0x476,0x457)});await _0x2832da[_0x2fb63c(-0x218,-0x239,-0x21c,-0x223)]({'username':_0x3f67f8}),_0x29dd85['json']({'success':!![],'message':'用户名修改成功'});}}catch(_0x4cb46e){_0x51fc74(_0x4cb46e);}},exports[_0x_0x5502e5(-0xeb,-0xd9,-0xbc,-0xd6)]=async(_0x15745d,_0x4055fa,_0x2b2cc3)=>{function _0x250917(_0x4c72d2,_0xcdda4,_0x221040,_0x337068){return _0x_0x5502e5(_0x4c72d2-0xcc,_0x221040,_0x221040-0x178,_0x337068-0x385);}try{_0x4055fa[_0x250917(0x2b7,0x2aa,0x2a1,0x2a0)]({'success':!![],'message':'退出登录成功'});}catch(_0x4edf20){_0x2b2cc3(_0x4edf20);}};