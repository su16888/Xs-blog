# å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç‰ˆæœ¬ä¿¡æ¯

**å½“å‰ç‰ˆæœ¬**: V3.3.0æ­£å¼ç‰ˆ (2025-12-17)

---

## ğŸ¯ é‡è¦è¯´æ˜

### ä»£ç çŠ¶æ€
- âœ… **æºç å·²å‡†å¤‡**ï¼šå¯ç›´æ¥éƒ¨ç½²ä½¿ç”¨
- âœ… **é…ç½®çµæ´»å¯ä¿®æ”¹**ï¼šé€šè¿‡ .env æ–‡ä»¶å¯ä¿®æ”¹ç«¯å£ã€æ•°æ®åº“ã€API åœ°å€ç­‰é…ç½®

### éƒ¨ç½²é™åˆ¶
- âœ… **æ”¯æŒç”Ÿäº§æ¨¡å¼**ï¼šä½¿ç”¨ `npm start` å¯åŠ¨
- âœ… **é…ç½®ä¿®æ”¹åé‡å¯ç”Ÿæ•ˆ**ï¼šä¿®æ”¹ .env æ–‡ä»¶ååªéœ€é‡å¯æœåŠ¡

## ğŸ”§ é…ç½®æ–¹å¼

### åç«¯é…ç½® `backend/.env`

**å¿…é¡»ä¿®æ”¹çš„é…ç½®**ï¼š
```bash
# æ•°æ®åº“å¯†ç ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰
DB_PASSWORD=ä½ çš„MySQLå¯†ç 

# JWT å¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ï¼Œç”Ÿæˆéšæœº32ä½ï¼‰
JWT_SECRET=è¯·è¿è¡Œå‘½ä»¤ç”Ÿæˆéšæœºå¯†é’¥

# åç«¯ç«¯å£ï¼ˆå¯é€‰ä¿®æ”¹ï¼‰
PORT=3001

# æˆæƒç ï¼ˆå¿…å¡«ï¼Œè”ç³»ä½œè€…è·å–ï¼‰
AUTH_CODE=å‘ä½œè€…å…è´¹ç´¢è¦æˆæƒç 
```

**ç”Ÿæˆéšæœºå¯†é’¥**ï¼š
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

### å‰ç«¯é…ç½® `frontend/.env.production`

```bash
# ç«¯å£é…ç½®
PORT=3000
```

**API åœ°å€é…ç½®ï¼ˆé‡è¦ï¼‰**
ä¿®æ”¹æ–‡ä»¶ï¼š`frontend/public/config.js`

æ ¹æ®æ‚¨çš„éƒ¨ç½²æ–¹å¼é€‰æ‹©é…ç½®ï¼š

**ã€æ–¹å¼ä¸€ã€‘Nginx åå‘ä»£ç†æ¨¡å¼ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰**
```javascript
API_URL: '/api',
```

**ã€æ–¹å¼äºŒã€‘å‰åç«¯åˆ†ç¦»æ¨¡å¼ï¼ˆè·¨åŸŸ/è·¨æœåŠ¡å™¨ï¼‰**
```javascript
API_URL: 'http://192.168.1.100:3001/api',
// æˆ–
API_URL: 'https://api.yourdomain.com/api',
```

**ã€æ–¹å¼ä¸‰ã€‘åŒæœåŠ¡å™¨ç›´è¿æ¨¡å¼**
```javascript
API_URL: 'http://localhost:3001/api',
```

**ã€æ–¹å¼å››ã€‘è‡ªåŠ¨æ£€æµ‹æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰**
```javascript
API_URL: '',
BACKEND_PORT: '3001',
```

> âš ï¸ **æ³¨æ„**ï¼šä¿®æ”¹ config.js åä¸éœ€è¦é‡æ–°æ„å»ºï¼Œåˆ·æ–°æµè§ˆå™¨å³å¯ç”Ÿæ•ˆï¼

## ğŸš€ å¯åŠ¨æ–¹å¼


### ç”Ÿäº§ç¯å¢ƒå¯åŠ¨
```bash
# å¯åŠ¨åç«¯
cd backend
npm install --production
npm start

# å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install --production
npm start
```

### PM2 å¯åŠ¨ï¼ˆæ¨èï¼‰
```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨åç«¯
cd backend
mkdir -p logs
pm2 start ecosystem.config.js

# å¯åŠ¨å‰ç«¯
cd ../frontend
mkdir -p logs
pm2 start ecosystem.config.js

# ä¿å­˜é…ç½®ï¼ˆå¼€æœºè‡ªå¯ï¼‰
pm2 save
pm2 startup
```

## âš ï¸ é‡è¦é™åˆ¶è¯´æ˜

### æ³¨æ„äº‹é¡¹

- âŒ ä½¿ç”¨ä¸å…¼å®¹çš„ Node.js ç‰ˆæœ¬

### å¯ä»¥æ‰§è¡Œçš„æ“ä½œ
- âœ… ä¿®æ”¹ .env é…ç½®æ–‡ä»¶
- âœ… é‡å¯æœåŠ¡åº”ç”¨æ–°é…ç½®
- âœ… ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹
- âœ… ä¿®æ”¹ç«¯å£ã€æ•°æ®åº“ç­‰é…ç½®


## ğŸ”’ å®‰å…¨è¯´æ˜

- âœ… **é…ç½®çµæ´»**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡ä¿æŒéƒ¨ç½²é€‚åº”æ€§
- âœ… **ç”Ÿäº§å°±ç»ª**ï¼šä¸“é—¨ä¸ºæ­£å¼ç¯å¢ƒä¼˜åŒ–
- âœ… **é›¶åœæœºæ›´æ–°**ï¼šä¿®æ”¹é…ç½®åªéœ€é‡å¯

## ğŸ“‹ ä¿®æ”¹é…ç½®åçš„æ“ä½œ

### ä¿®æ”¹åç«¯é…ç½®å
```bash
pm2 restart xs-blog-backend
```

### ä¿®æ”¹å‰ç«¯é…ç½®å
```bash
pm2 restart xs-blog-frontend
```

## ğŸ“š è¯¦ç»†è¯´æ˜

æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ä»¥ä¸‹æ–‡æ¡£ï¼š
- **éƒ¨ç½²æŒ‡å—.md** - å®Œæ•´éƒ¨ç½²æŒ‡å—
- **ç¯å¢ƒå˜é‡é…ç½®æŒ‡å—.md** - è¯¦ç»†é…ç½®è¯´æ˜
- **å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ.md** - é—®é¢˜æ’æŸ¥å’Œè§£å†³æ–¹æ¡ˆ

---

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

### ç¬¬1æ­¥ï¼šè·å–æºç 
```bash
git clone https://github.com/su16888/Xs-blog.git
cd Xs-blog
```

### ç¬¬2æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“
```bash
# MySQLï¼ˆæ¨èï¼‰
mysql -u root -p -e "CREATE DATABASE xsblog888 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
mysql -u root -p xsblog888 < database/install.sql

# æˆ– SQLite
mkdir -p backend/database
sqlite3 backend/database/xsblog.db < database/install-sqlite.sql

# æˆ– PostgreSQL
psql -U postgres -c "CREATE DATABASE xsblog WITH ENCODING 'UTF8';"
psql -U postgres -c "CREATE USER xsblog_user WITH PASSWORD 'your_password';"
psql -U postgres -c "GRANT ALL PRIVILEGES ON DATABASE xsblog TO xsblog_user;"
psql -U xsblog_user -d xsblog -f database/install.sql
```

### ç¬¬3æ­¥ï¼šé…ç½®åç«¯
```bash
cd backend
npm install
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“å¯†ç å’ŒJWTå¯†é’¥
```

### ç¬¬4æ­¥ï¼šé…ç½®å‰ç«¯
```bash
cd ../frontend
npm install
# ç¼–è¾‘ .env.production æ–‡ä»¶ï¼Œé…ç½®APIåœ°å€
```
 **icoå›¾æ ‡æ›¿æ¢** `frontend/public/favicon.ico`
### ç¬¬5æ­¥ï¼šå¯åŠ¨æœåŠ¡
```bash
# ä½¿ç”¨ PM2
npm install -g pm2
cd backend && pm2 start ecosystem.config.js
cd ../frontend && pm2 start ecosystem.config.js
pm2 save && pm2 startup
```

### ç¬¬6æ­¥ï¼šè®¿é—®ç³»ç»Ÿ
- å‰å°ï¼šhttp://localhost:3000
- åå°ï¼šhttp://localhost:3000/admins
- é»˜è®¤è´¦å·ï¼šadmin / admin123

---

**ç‰ˆæœ¬**: V3.3.0æ­£å¼ç‰ˆ
**æ›´æ–°æ—¥æœŸ**: 2025-12-17