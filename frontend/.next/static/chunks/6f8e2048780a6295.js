(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64740,e=>{"use strict";var t=e.i(71645),s=e.i(90499);let a=null;function r(e,l=!1){let[i,n]=(0,t.useState)(a||""),d=(0,s.useOptionalPageTitleContext)();(0,t.useEffect)(()=>{l&&d&&d.setTitle(e)},[e,l,d]),(0,t.useEffect)(()=>{a?n(a):(async()=>{try{let e=await fetch("/api/settings");if(e.ok){let t=await e.json();if(t.success&&t.data){let e={};t.data.forEach(t=>{e[t.key]=t.value});let s=e.siteTitle||"";a=s,n(s)}}}catch(e){console.error("Failed to fetch site title:",e)}})()},[]),(0,t.useEffect)(()=>{let t=document.title;return l?"仪表盘"===e?document.title=`${i} - 后台管理系统`:document.title=`${e} - ${i}后台管理系统`:document.title=`${e} - ${i}`,()=>{document.title=t}},[e,i,l])}e.s(["usePageTitle",()=>r])},44739,e=>{"use strict";var t=e.i(18050),s=e.i(71645);let a="QXJjaGl0ZWN0dXJhbCBkcml2ZXIgaXMgYmFzZWQgb24g",r="WHMtYmxvZy4=",l=e=>{try{return atob(e)}catch{return""}};function i(){let[e,i]=(0,s.useState)(""),[n,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[x,m]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{let e=setTimeout(()=>{let e,t;e=l(a),t=l(r),e.length>0&&t.includes("Xs-blog")&&(i(l(a)),d(l(r)),c(l("aHR0cHM6Ly9naXRodWIuY29tL3N1MTY4ODgvWHMtYmxvZw==")),m(!0))},100);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{let e=setInterval(()=>{!document.querySelector("[data-copyright]")&&x&&console.warn("Copyright notice must not be removed.")},5e3);return()=>clearInterval(e)},[x]),x&&e)?(0,t.jsxs)("div",{"data-copyright":"true",className:"text-[10px] md:text-xs text-gray-500 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},onContextMenu:e=>e.preventDefault(),children:[e,(0,t.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:text-primary-600 transition-colors",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},children:n})]}):null}e.s(["default",()=>i])},78917,e=>{"use strict";let t=(0,e.i(75254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},10980,e=>{"use strict";let t=(0,e.i(75254).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>t],10980)},35845,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(18566),r=e.i(9165),l=e.i(75157),i=e.i(75254);let n=(0,i.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var d=e.i(48256),o=e.i(78583),c=e.i(99353),x=e.i(56272),m=e.i(86311),h=e.i(73708),u=e.i(50965);let g=(0,i.default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),p=(0,i.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),f=(0,i.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),y=(0,i.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),b=(0,i.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var j=e.i(10980),v=e.i(78917);let w=(0,i.default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var N=e.i(64740),k=e.i(57951);function S({onClose:e}){let[a,l]=(0,s.useState)([]),[i,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await (0,r.getPendingReminders)();if(e.success){let t=Array.isArray(e.data)?e.data:[];l(t)}}catch(e){l([])}finally{n(!1)}},o=async(t,s)=>{try{await (0,r.dismissReminder)(t,s),l(e=>e.filter(e=>e.id!==t)),1===a.length&&e()}catch(e){}},c=e=>new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return i?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderBottomColor:"var(--primary-600)"}}),(0,t.jsx)("p",{className:"text-gray-600",children:"加载提醒中..."})]})})}):0===a.length?null:(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"待办事项提醒"}),(0,t.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsxs)("div",{className:"border border-orange-200 bg-orange-50 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-gray-700 mb-3",children:e.description}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[e.due_date&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"截止时间: ",c(e.due_date)]}),e.reminder_time&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"提醒时间: ",c(e.reminder_time)]})]})]})}),(0,t.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,t.jsx)("button",{onClick:()=>o(e.id,"ignore"),className:"flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"本次忽略"}),(0,t.jsx)("button",{onClick:()=>o(e.id,"disable"),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"不再提醒"})]})]},e.id))}),(0,t.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",children:(0,t.jsxs)("p",{children:["您有 ",a.length," 个待办事项需要处理"]})})]})})}var M=e.i(37727);function C(){let[e,a]=(0,s.useState)(null),[l,i]=(0,s.useState)(!1),[n,d]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null);(0,s.useEffect)(()=>{x()},[]);let x=async()=>{if(!n){d(!0),c(null);try{let e=null;try{e=localStorage.getItem("token")}catch(e){}if(!e)return void d(!1);let t=await (0,r.checkVersionUpdate)();t.success&&t.data?(a(t.data),t.data.hasUpdate&&(0,r.getDismissedVersion)()!==t.data.currentVersion&&i(!0)):c(t.data?.message||"版本检测失败")}catch(e){console.error("版本检测失败:",e),c("版本检测失败，请稍后重试")}finally{d(!1)}}},m=async()=>{try{e?.currentVersion&&await (0,r.dismissVersionUpdate)(e.currentVersion)}catch(e){console.error("保存忽略版本失败:",e)}finally{i(!1)}};return l&&e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm animate-fadeIn",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden animate-slideUp",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center animate-pulse",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-white font-bold text-lg",children:"发现新版本"}),(0,t.jsx)("p",{className:"text-white/80 text-sm",children:"建议尽快更新"})]})]}),(0,t.jsx)("button",{onClick:()=>{i(!1)},className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-1.5 transition-colors","aria-label":"关闭",children:(0,t.jsx)(M.X,{className:"w-5 h-5"})})]})}),(0,t.jsx)("div",{className:"px-6 py-5",children:(0,t.jsx)("div",{className:"text-center py-2",children:(0,t.jsx)("p",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400 leading-relaxed",children:e.message})})}),(0,t.jsx)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-center",children:(0,t.jsx)("button",{onClick:m,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all shadow-md hover:shadow-lg",children:"我知道了"})})]})}):null}var L=e.i(44739);let T=[{value:"day",label:"日"},{value:"week",label:"周"},{value:"month",label:"月"}],_=[{value:5,label:"TOP 5"},{value:10,label:"TOP 10"},{value:15,label:"TOP 15"},{value:20,label:"TOP 20"}];function I(){(0,N.usePageTitle)("仪表盘",!0),(0,a.useRouter)();let{user:e,isAuthenticated:i}=(0,k.useAuth)(),[M,I]=(0,s.useState)(!0),[U,$]=(0,s.useState)("获取中..."),[V,P]=(0,s.useState)("获取中..."),[q,z]=(0,s.useState)(!1),[E,B]=(0,s.useState)(!1),[W,A]=(0,s.useState)(!1),[O,H]=(0,s.useState)(null),[D,R]=(0,s.useState)("1.0.0"),[X,F]=(0,s.useState)([]),[Y,Z]=(0,s.useState)(null),[J,G]=(0,s.useState)([]),[K,Q]=(0,s.useState)([]),[ee,et]=(0,s.useState)(null),[es,ea]=(0,s.useState)([]),[er,el]=(0,s.useState)("day"),[ei,en]=(0,s.useState)(5),[ed,eo]=(0,s.useState)(null);(0,s.useEffect)(()=>{ec();let e=setTimeout(()=>{ex()},100);return"requestIdleCallback"in window?window.requestIdleCallback(()=>{ey(),ej()},{timeout:2e3}):setTimeout(()=>{ey(),ej()},500),()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{er&&eh()},[er]),(0,s.useEffect)(()=>{ei&&eg()},[ei]);let ec=async()=>{I(!0);try{await Promise.all([em(),ep()])}catch(e){console.error("加载关键数据失败:",e)}finally{I(!1)}},ex=async()=>{try{await Promise.all([eh(),eu(),eg(),ef()])}catch(e){console.error("加载次要数据失败:",e)}},em=async()=>{try{let e=await (0,r.getCurrentVersion)();e.success&&e.data&&R(e.data.version)}catch(e){}},eh=async()=>{try{let e=await (0,r.getVisitTrends)({period:er});e.success&&e.data&&F(e.data.trends||[])}catch(e){console.error("加载趋势数据失败:",e)}},eu=async()=>{try{let e=await (0,r.getModuleStats)();e.success&&e.data&&Z(e.data)}catch(e){console.error("加载模块统计失败:",e)}},eg=async()=>{try{let e=await (0,r.getIPRanking)({limit:ei,days:7});e.success&&e.data&&(G(e.data.ranking||[]),Q(e.data.daily||[]))}catch(e){console.error("加载IP排行失败:",e)}},ep=async()=>{try{let e=await (0,r.getDashboardOverview)();e.success&&e.data&&et(e.data)}catch(e){console.error("加载概览数据失败:",e)}},ef=async()=>{try{let e=await (0,r.getAdminSites)();if(e.success&&e.data){let t=e.data.filter(e=>"backend"===e.display_type||!e.display_type&&!1===e.is_frontend_visible);ea(t)}}catch(e){console.error("加载后台导航失败:",e)}},ey=async()=>{let e="xs_ip_location_cache",t="xs_ip_location_expire";try{let s=sessionStorage.getItem(e),a=sessionStorage.getItem(t);if(s&&a&&Date.now()<parseInt(a)){let{ip:e,location:t}=JSON.parse(s);$(e),P(t);return}}catch(e){}let s=async()=>{try{let s=new AbortController,a=setTimeout(()=>s.abort(),5e3),r=await (0,l.safeFetch)("/api/client-ip",{signal:s.signal});if(clearTimeout(a),r.ok){let s=await r.json();if(s.success&&s.data){let a=s.data.ip;"::1"===a&&(a="127.0.0.1"),$(a);let r=s.data.isPrivate||"127.0.0.1"===a||"localhost"===a?"本地环境":s.data.location||"暂无法获取";P(r);try{sessionStorage.setItem(e,JSON.stringify({ip:a,location:r})),sessionStorage.setItem(t,String(Date.now()+18e5))}catch(e){}}}else $("127.0.0.1"),P("本地环境")}catch(e){$("127.0.0.1"),P("本地环境")}};"requestIdleCallback"in window?window.requestIdleCallback(()=>s(),{timeout:2e3}):setTimeout(s,100)},eb=async()=>{A(!0),B(!0);try{let e=await (0,r.checkVersionUpdate)();e.success&&e.data?H(e.data):H({currentVersion:D||"未知",latestVersion:null,hasUpdate:!1,message:e.data?.message||"版本检测失败",updateUrl:null,releaseNotes:null})}catch(e){H({currentVersion:D||"未知",latestVersion:null,hasUpdate:!1,message:"版本检测失败，请检查网络连接或稍后重试",updateUrl:null,releaseNotes:null})}finally{A(!1)}},ej=async()=>{try{let e=await (0,r.getAdminPendingReminders)();e.success&&e.data&&e.data.length>0&&z(!0)}catch(e){}},ev=(0,s.useMemo)(()=>X.length?Math.max(Math.max(...X.map(e=>e.visit_count)),Math.max(...X.map(e=>e.unique_ips)),10):100,[X]),ew=(e,t)=>{let s;return"day"===er&&void 0!==e.hour?`${e.hour}:00`:(s=new Date(e.date),`${s.getMonth()+1}/${s.getDate()}`)};return(0,t.jsx)("div",{className:"min-h-full",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,t.jsx)("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-blue-400 rounded-2xl p-6 md:p-8 text-white shadow-lg",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 md:gap-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-2 md:mb-3",children:"Xs-Blog仪表盘"}),(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:eb,className:"px-3 py-1 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors border border-white/30",children:"检测更新"}),(0,t.jsxs)("span",{className:"text-blue-50/80 text-sm",children:["（当前版本：V ",D,"）"]})]})})]}),(0,t.jsx)("div",{className:"bg-white/15 backdrop-blur-md rounded-xl p-4 md:p-6 border border-white/30 shadow-lg min-w-0 md:min-w-[280px]",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,t.jsx)("div",{className:"w-14 h-14 md:w-20 md:h-20 rounded-2xl border-2 border-white/30 bg-white/10"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden rounded-2xl",children:(0,t.jsx)("img",{src:"/admin.png",alt:"网站图标",className:"w-[85%] h-[85%] opacity-30 object-cover"})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-lg md:text-xl font-bold mb-1 md:mb-2",children:"Hi , Admin !"}),(0,t.jsxs)("div",{className:"space-y-1 md:space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n,{className:"w-3 h-3 md:w-4 md:h-4 opacity-70 flex-shrink-0"}),(0,t.jsxs)("span",{className:"text-xs md:text-sm font-medium opacity-90 truncate",children:["IP: ",U||"加载中..."]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Globe,{className:"w-3 h-3 md:w-4 md:h-4 opacity-70 flex-shrink-0"}),(0,t.jsxs)("span",{className:"text-xs md:text-sm font-medium opacity-90 truncate",children:["位置: ",V||"加载中..."]})]})]})]})]})})]})}),(0,t.jsxs)("div",{className:"mb-6 bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 md:mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f,{className:"w-5 h-5 text-blue-600"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"访问趋势"})]}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:(0,t.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:T.map(e=>(0,t.jsx)("button",{onClick:()=>el(e.value),className:`px-2 md:px-3 py-1 text-xs md:text-sm rounded-md transition-colors ${er===e.value?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.label},e.value))})})]}),(0,t.jsx)("div",{className:"relative h-48 md:h-64",children:M?(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):0===X.length?(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:"暂无数据"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 800 200",preserveAspectRatio:"none",children:[[0,1,2,3,4].map(e=>(0,t.jsx)("line",{x1:"50",y1:40+35*e,x2:"780",y2:40+35*e,stroke:"#e5e7eb",strokeWidth:"1"},e)),[0,1,2,3,4].map(e=>(0,t.jsx)("text",{x:"45",y:44+35*e,textAnchor:"end",className:"text-[10px] fill-gray-400",children:Math.round(ev*(4-e)/4)},e)),(0,t.jsx)("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"2",points:X.map((e,t)=>{let s=50+730*t/Math.max(X.length-1,1),a=180-e.visit_count/ev*140;return`${s},${a}`}).join(" ")}),(0,t.jsx)("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"2",strokeDasharray:"5,5",points:X.map((e,t)=>{let s=50+730*t/Math.max(X.length-1,1),a=180-e.unique_ips/ev*140;return`${s},${a}`}).join(" ")}),X.map((e,s)=>{let a=50+730*s/Math.max(X.length-1,1),r=180-e.visit_count/ev*140,l=180-e.unique_ips/ev*140;return(0,t.jsxs)("g",{children:[(0,t.jsx)("rect",{x:a-20,y:20,width:40,height:170,fill:"transparent",className:"cursor-pointer",onMouseEnter:()=>eo({index:s,x:a,y:Math.min(r,l)}),onMouseLeave:()=>eo(null)}),(0,t.jsx)("circle",{cx:a,cy:r,r:ed?.index===s?6:4,fill:"#3b82f6",className:"transition-all"}),(0,t.jsx)("circle",{cx:a,cy:l,r:ed?.index===s?6:4,fill:"#10b981",className:"transition-all"}),(0,t.jsx)("text",{x:a,y:"195",textAnchor:"middle",className:"text-[9px] fill-gray-500",children:ew(e,s)})]},s)})]}),null!==ed&&X[ed.index]&&(0,t.jsxs)("div",{className:"absolute bg-gray-800 text-white text-xs rounded-lg px-3 py-2 shadow-lg pointer-events-none z-10",style:{left:`${ed.x/800*100}%`,top:`${ed.y/200*100-15}%`,transform:"translate(-50%, -100%)"},children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:ew(X[ed.index],ed.index)}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsxs)("span",{children:["访问: ",X[ed.index].visit_count," 次"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),(0,t.jsxs)("span",{children:["独立IP: ",X[ed.index].unique_ips," 个"]})]})]})]})}),(0,t.jsxs)("div",{className:"flex justify-center gap-6 mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-0.5 bg-blue-500"}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"访问次数"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-0.5 bg-emerald-500",style:{borderStyle:"dashed"}}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"独立IP"})]})]})]}),(0,t.jsxs)("div",{className:"mb-6 bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 md:mb-6",children:[(0,t.jsx)(b,{className:"w-5 h-5 text-purple-600"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"内容统计"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4",children:Y&&Object.entries(Y).map(([e,s])=>{let a={socialFeed:p,notes:o.FileText,stickyNotes:c.StickyNote,navigation:g,galleries:h.Image,services:u.ShoppingBag,todos:x.CheckSquare,messages:m.MessageSquare,docs:j.BookOpen}[e]||b,r={socialFeed:"bg-emerald-500",notes:"bg-green-500",stickyNotes:"bg-yellow-500",navigation:"bg-indigo-500",galleries:"bg-pink-500",services:"bg-purple-500",todos:"bg-orange-500",messages:"bg-cyan-500",docs:"bg-blue-500"}[e]||"bg-gray-500";return(0,t.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-3 md:p-4 border border-gray-200 hover:shadow-md transition-all hover:-translate-y-0.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 md:mb-3",children:[(0,t.jsx)("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-lg ${r} flex items-center justify-center flex-shrink-0`,children:(0,t.jsx)(a,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),(0,t.jsx)("span",{className:"text-xs md:text-sm font-medium text-gray-700 truncate",children:s.label})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-xl md:text-2xl font-bold text-gray-900",children:s.count}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"条"})]}),"messages"===e&&"number"==typeof s.unread&&s.unread>0&&(0,t.jsxs)("div",{className:"inline-flex items-center px-2 py-0.5 bg-red-100 text-red-600 rounded-full text-xs",children:[s.unread," 条未读"]})]})]},e)})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 md:mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y,{className:"w-5 h-5 text-orange-600"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"IP访问排行"})]}),(0,t.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:_.map(e=>(0,t.jsx)("button",{onClick:()=>en(e.value),className:`px-2 md:px-3 py-1 text-xs md:text-sm rounded-md transition-colors ${ei===e.value?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.label},e.value))})]}),(0,t.jsx)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200",children:M?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-orange-200 border-t-orange-600 rounded-full animate-spin"})}):0===J.length?(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:"暂无数据"}):(0,t.jsx)("div",{className:"space-y-3",children:J.map((e,s)=>{let a=Math.max(...J.map(e=>e.visits),1),r=e.visits/a*100;return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${0===s?"bg-yellow-400 text-yellow-900":1===s?"bg-gray-300 text-gray-700":2===s?"bg-orange-400 text-orange-900":"bg-gray-200 text-gray-600"}`,children:s+1}),(0,t.jsx)("div",{className:"w-28 md:w-36 text-xs md:text-sm font-medium text-gray-700 truncate flex-shrink-0",children:e.ip}),(0,t.jsxs)("div",{className:"flex-1 h-7 bg-white/50 rounded-lg overflow-hidden relative",children:[(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-orange-400 to-orange-500 rounded-lg transition-all duration-500",style:{width:`${Math.max(r,5)}%`}}),(0,t.jsxs)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs font-semibold text-orange-700 whitespace-nowrap",children:[e.visits," 次"]})]})]},s)})})})]}),es.length>0&&(0,t.jsxs)("div",{className:"mt-6 bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 md:mb-6",children:[(0,t.jsx)(w,{className:"w-5 h-5 text-indigo-600"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"常用导航"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3",children:es.map(e=>(0,t.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col items-center p-3 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200 hover:border-indigo-300 hover:shadow-md transition-all hover:-translate-y-0.5",children:[(0,t.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-xl bg-white border border-gray-200 flex items-center justify-center mb-2 group-hover:border-indigo-300 transition-colors overflow-hidden",children:e.icon?(0,t.jsx)("img",{src:e.icon,alt:e.name,className:"w-6 h-6 md:w-8 md:h-8 object-contain",onError:e=>{e.target.style.display="none";let t=e.target.parentElement;t&&(t.innerHTML='<svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>')}}):(0,t.jsx)(v.ExternalLink,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-500 transition-colors"})}),(0,t.jsx)("span",{className:"text-xs md:text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors text-center truncate w-full",children:e.name}),e.description&&(0,t.jsx)("span",{className:"text-[10px] text-gray-400 truncate w-full text-center mt-0.5 hidden md:block",children:e.description})]},e.id))})]}),q&&(0,t.jsx)(S,{onClose:()=>z(!1)}),(0,t.jsx)(C,{}),E&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4 animate-fadeIn",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full shadow-2xl animate-slideUp overflow-hidden",children:[(0,t.jsx)("div",{className:`px-6 py-4 ${W?"bg-gradient-to-r from-blue-500 to-blue-600":O?.hasUpdate?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-green-500 to-emerald-500"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[W?(0,t.jsx)("div",{className:"w-10 h-10 border-3 border-white/30 border-t-white rounded-full animate-spin"}):O?.hasUpdate?(0,t.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}):(0,t.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-white",children:W?"版本检测中":O?.hasUpdate?"发现新版本":"版本检测"}),(0,t.jsx)("p",{className:"text-white/80 text-sm",children:W?"请稍候...":O?.hasUpdate?"建议尽快更新":"当前已是最新版本"})]})]})}),(0,t.jsxs)("div",{className:"p-6",children:[W?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center py-4",children:(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"正在检测版本..."})}):O?(0,t.jsx)("div",{className:"text-center py-2",children:(0,t.jsx)("p",{className:`text-lg font-semibold leading-relaxed ${O.hasUpdate?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:O.message})}):null,(0,t.jsx)("div",{className:"mt-6 flex justify-center",children:(0,t.jsx)("button",{onClick:()=>{B(!1),H(null)},className:`px-6 py-2 text-white rounded-lg transition-all shadow-md hover:shadow-lg ${O?.hasUpdate?"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600"}`,children:"我知道了"})})]})]})}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(L.default,{})})]})})}e.s(["default",()=>I],35845)}]);