(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49484,e=>{"use strict";var t=e.i(18050),a=e.i(71645);let s="QXJjaGl0ZWN0dXJhbCBkcml2ZXIgaXMgYmFzZWQgb24g",r="WHMtYmxvZy4=",l=e=>{try{return atob(e)}catch{return""}};function n(){let[e,n]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setTimeout(()=>{let e,t;e=l(s),t=l(r),e.length>0&&t.includes("Xs-blog")&&(n(l(s)),o(l(r)),d(l("aHR0cHM6Ly9naXRodWIuY29tL3N1MTY4ODgvWHMtYmxvZw==")),m(!0))},100);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>{document.querySelector("[data-copyright]")},5e3);return()=>clearInterval(e)},[u]);let x=async()=>{try{if(localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let t=e.split("=")[0].trim();document.cookie=`${t}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),"caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}"indexedDB"in window&&(await indexedDB.databases?.()||[]).forEach(e=>{e.name&&indexedDB.deleteDatabase(e.name)}),alert("y"),window.location.reload()}catch(e){alert("y"),window.location.reload()}};return u&&e?(0,t.jsxs)("div",{"data-copyright":"true",className:"text-[10px] md:text-xs text-gray-500 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},onContextMenu:e=>e.preventDefault(),children:[(0,t.jsx)("span",{onDoubleClick:x,style:{cursor:"default"},children:e}),(0,t.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:text-primary-600 transition-colors",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},children:i})]}):null}e.s(["default",()=>n])},84366,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(18566),r=e.i(9165),l=e.i(86034),n=e.i(98348),i=e.i(49484);function o(){let e=(0,s.useRouter)(),{setUser:o,isAuthenticated:c,isLoading:d}=(0,n.useAuth)(),[u,m]=(0,a.useState)({username:"",password:""}),[x,h]=(0,a.useState)(""),[p,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,r.getSettings)();if(e.success&&e.data){let t=e.data.find(e=>"siteTitle"===e.key)?.value||"";document.title=t?`管理后台登录 - ${t}`:"管理后台登录"}}catch(e){document.title="管理后台登录"}})()},[]),(0,a.useEffect)(()=>{!d&&c&&e.push((0,l.getAdminRoute)("dashboard"))},[d,c,e]);let f=async t=>{t.preventDefault(),h(""),b(!0);try{let t=await (0,r.login)(u.username,u.password);try{localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user))}catch(e){console.warn("无法保存登录信息到 localStorage:",e)}o(t.user);let a=(0,l.getAdminRoute)("dashboard");e.push(a)}catch(e){h(e.response?.data?.message||e.message||"登录失败，请重试")}finally{b(!1)}},g=e=>{m({...u,[e.target.name]:e.target.value})};return d||c?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"加载中..."})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,t.jsxs)("div",{className:"max-w-md w-full mx-4 flex flex-col",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 animate-fade-in",children:[(0,t.jsx)("div",{className:"text-center mb-8",children:(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"管理员登录"})}),x&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-sm",children:x}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"用户名"}),(0,t.jsx)("input",{id:"username",name:"username",type:"text",required:!0,value:u.username,onChange:g,className:"input",placeholder:"请输入用户名",disabled:p})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"密码"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:u.password,onChange:g,className:"input",placeholder:"请输入密码",disabled:p,autoComplete:"current-password"})]}),(0,t.jsx)("button",{type:"submit",disabled:p,className:"w-full btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:p?"登录中...":"登录"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)("a",{href:"/",className:"text-sm text-primary-600 hover:text-primary-700 transition-colors",children:"← 返回首页"})})]}),(0,t.jsx)("div",{className:"mt-12",children:(0,t.jsx)(i.default,{})})]})})}e.s(["default",()=>o])}]);