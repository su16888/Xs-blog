(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53588,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(18566),a=e.i(98348),l=e.i(9165),i=e.i(18789),n=e.i(42531),o=e.i(30562),c=e.i(64740),d=e.i(40803),x=e.i(1513);function m(){(0,c.usePageTitle)("ç¬”è®°ç®¡ç†",!0),(0,r.useRouter)();let{user:e}=(0,a.useAuth)(),[m,p]=(0,s.useState)([]),[h,u]=(0,s.useState)([]),[g,b]=(0,s.useState)(!0),[y,j]=(0,s.useState)("notes"),[f,N]=(0,s.useState)(null),[w,v]=(0,s.useState)(!1),[k,_]=(0,s.useState)({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),[C,$]=(0,s.useState)(null),[S,A]=(0,s.useState)(!1),[F,M]=(0,s.useState)({name:"",description:"",icon:"",sort_order:0}),[L,B]=(0,s.useState)({show:!1,type:"success",message:""}),[R,T]=(0,s.useState)(!1),[E,I]=(0,s.useState)(!1),[U,q]=(0,s.useState)(!1),[z,D]=(0,s.useState)({text:"",url:""}),[H,P]=(0,s.useState)({alt:"",url:"",blur:!1,align:"center",scale:100}),[W,O]=(0,s.useState)(!1),[V,K]=(0,s.useState)(null),[G,J]=(0,s.useState)(""),[Q,X]=(0,s.useState)("all"),[Y,Z]=(0,s.useState)("all"),ee=(0,s.useRef)(null),[et,es]=(0,s.useState)(!1),[er,ea]=(0,s.useState)(null),[el,ei]=(0,s.useState)(!1);(0,s.useEffect)(()=>{en()},[]);let en=async()=>{try{await Promise.all([eo(),ec()])}catch(e){console.error("åŠ è½½ç¬”è®°æ•°æ®å¤±è´¥:",e)}finally{b(!1)}},eo=async()=>{try{let e=await (0,l.getAdminNotes)();if(e.success){let t=Array.isArray(e.data.notes)?e.data.notes:[];p(t)}}catch(e){B({show:!0,type:"error",message:"åŠ è½½ç¬”è®°å¤±è´¥"}),p([])}},ec=async()=>{try{let e=await (0,l.getAdminNoteCategories)();if(e.success){let t=Array.isArray(e.data)?e.data:[];u(t)}}catch(e){console.error("åŠ è½½ç¬”è®°åˆ†ç±»å¤±è´¥:",e),u([])}},ed=e=>{let{name:t,type:s}=e.target,r=e.target.value;"checkbox"===s?r=e.target.checked:"sort_order"===t&&(r=parseInt(r)||0),_({...k,[t]:r})},ex=async e=>{e.preventDefault();try{let e={...k};f?.id?(await (0,l.updateAdminNote)(f.id,e)).success&&(B({show:!0,type:"success",message:"ç¬”è®°æ›´æ–°æˆåŠŸ"}),await eo(),eg()):(await (0,l.createAdminNote)({...e,is_published:!0})).success&&(B({show:!0,type:"success",message:"ç¬”è®°åˆ›å»ºæˆåŠŸ"}),await eo(),eg())}catch(e){B({show:!0,type:"error",message:e.response?.data?.message||"æ“ä½œå¤±è´¥"})}},em=async()=>{try{let e={...k,is_published:!1};f?.id?(await (0,l.updateAdminNote)(f.id,e)).success&&(B({show:!0,type:"success",message:"è‰ç¨¿ä¿å­˜æˆåŠŸ"}),await eo()):(await (0,l.createAdminNote)(e)).success&&(B({show:!0,type:"success",message:"è‰ç¨¿ä¿å­˜æˆåŠŸ"}),await eo())}catch(e){B({show:!0,type:"error",message:e.response?.data?.message||"è‰ç¨¿ä¿å­˜å¤±è´¥"})}},ep=async e=>{try{let t=m.find(t=>t.id===e);if(!t)return void B({show:!0,type:"error",message:"ç¬”è®°ä¸å­˜åœ¨"});let s={...t,is_published:!0};(await (0,l.updateAdminNote)(e,s)).success&&(B({show:!0,type:"success",message:"ç¬”è®°å‘å¸ƒæˆåŠŸ"}),await eo())}catch(e){B({show:!0,type:"error",message:e.response?.data?.message||"å‘å¸ƒå¤±è´¥"})}},eh=e=>{N(e),_({title:e.title,content:e.content,summary:e.summary||"",category:e.category||"",tags:e.tags||"",password:e.password||"",sort_order:e.sort_order||0,is_pinned:e.is_pinned||!1,show_in_list:void 0===e.show_in_list||e.show_in_list,cover_image:e.cover_image||"",source_type:e.source_type||"none",source_url:e.source_url||"",source_text:e.source_text||""}),v(!0),j("editNote")},eu=async e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ç¯‡ç¬”è®°å—ï¼Ÿ"))try{(await (0,l.deleteAdminNote)(e)).success&&(B({show:!0,type:"success",message:"ç¬”è®°åˆ é™¤æˆåŠŸ"}),await eo())}catch(e){B({show:!0,type:"error",message:e.response?.data?.message||"åˆ é™¤å¤±è´¥"})}},eg=()=>{_({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),N(null),v(!1),T(!1),I(!1),q(!1),D({text:"",url:""}),P({alt:"",url:"",blur:!1,align:"center",scale:100}),j("notes"),ei(!1)},eb=e=>{let{name:t,value:s}=e.target,r=s;"sort_order"===t&&(r=parseInt(s)||0),M({...F,[t]:r})},ey=async e=>{if(e.preventDefault(),!F.name.trim())return void B({show:!0,type:"error",message:"åˆ†ç±»åç§°ä¸èƒ½ä¸ºç©º"});try{C?.id?(await (0,l.updateAdminCategory)(C.id,F)).success&&(B({show:!0,type:"success",message:"åˆ†ç±»æ›´æ–°æˆåŠŸ"}),await ec(),ef()):(await (0,l.createAdminCategory)(F)).success&&(B({show:!0,type:"success",message:"åˆ†ç±»æ·»åŠ æˆåŠŸ"}),await ec(),ef())}catch(e){B({show:!0,type:"error",message:e.response?.data?.message||"æ“ä½œå¤±è´¥"})}},ej=async e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåˆ†ç±»å—ï¼Ÿå¦‚æœæœ‰ç¬”è®°ä½¿ç”¨æ­¤åˆ†ç±»ï¼Œå°†æ— æ³•åˆ é™¤ã€‚"))try{(await (0,l.deleteAdminCategory)(e)).success&&(B({show:!0,type:"success",message:"åˆ†ç±»åˆ é™¤æˆåŠŸ"}),await ec())}catch(e){B({show:!0,type:"error",message:e.response?.data?.message||"åˆ é™¤å¤±è´¥"})}},ef=()=>{M({name:"",description:"",icon:"",sort_order:0}),$(null),A(!1)},eN=e=>{let t=ee.current;if(!t)return;let s=t.selectionStart,r=t.selectionEnd,a=t.scrollTop,l=k.content.substring(0,s)+e+k.content.substring(r);_({...k,content:l}),setTimeout(()=>{t.focus(),t.setSelectionRange(s+e.length,s+e.length),t.scrollTop=a},0)},ew=(e,t,s,r,a)=>{let l=100!==a?`width: ${a}%;`:"",i=["left"===r?"img-align-left":"right"===r?"img-align-right":"img-align-center",s?"blur-image":""].filter(Boolean).join(" ");return`<img src="${e}" alt="${t}" class="${i}" style="${l}" ${s?'data-blur="true"':""} />`},ev=e=>{let{prefix:t,suffix:s,placeholder:r}={bold:{prefix:"**",suffix:"**",placeholder:"ç²—ä½“æ–‡æœ¬"},italic:{prefix:"*",suffix:"*",placeholder:"æ–œä½“æ–‡æœ¬"},code:{prefix:"`",suffix:"`",placeholder:"ä»£ç "},quote:{prefix:"> ",suffix:"",placeholder:"å¼•ç”¨æ–‡æœ¬"},list:{prefix:"- ",suffix:"",placeholder:"åˆ—è¡¨é¡¹"},numberedList:{prefix:"1. ",suffix:"",placeholder:"åˆ—è¡¨é¡¹"},h1:{prefix:"# ",suffix:"",placeholder:"ä¸€çº§æ ‡é¢˜"},h2:{prefix:"## ",suffix:"",placeholder:"äºŒçº§æ ‡é¢˜"},h3:{prefix:"### ",suffix:"",placeholder:"ä¸‰çº§æ ‡é¢˜"},strikethrough:{prefix:"~~",suffix:"~~",placeholder:"åˆ é™¤çº¿æ–‡æœ¬"},hr:{prefix:"\n---\n",suffix:"",placeholder:""},codeblock:{prefix:"```javascript\n",suffix:"\n```",placeholder:'console.log("Hello World");'},table:{prefix:"| åˆ—1 | åˆ—2 | åˆ—3 |\n| --- | --- | --- |\n| ",suffix:" | å†…å®¹ | å†…å®¹ |",placeholder:"å†…å®¹"},tasklist:{prefix:"- [ ] ",suffix:"",placeholder:"å¾…åŠäº‹é¡¹"},collapse:{prefix:"<details>\n<summary>ç‚¹å‡»å±•å¼€/æ”¶èµ·</summary>\n\n",suffix:"\n\n</details>",placeholder:"è¿™é‡Œæ˜¯å¯æŠ˜å çš„å†…å®¹"},blur:{prefix:'<span class="blur-content">',suffix:"</span>",placeholder:"æ¨¡ç³Šå†…å®¹ï¼ˆé¼ æ ‡æ‚¬åœæ˜¾ç¤ºï¼‰"},mermaid:{prefix:"```mermaid\n",suffix:"\n```",placeholder:"graph TD\n    A[å¼€å§‹] --> B{åˆ¤æ–­}\n    B -->|æ˜¯| C[æ‰§è¡ŒA]\n    B -->|å¦| D[æ‰§è¡ŒB]\n    C --> E[ç»“æŸ]\n    D --> E"}}[e];eN(`${t}${r}${s}`)},ek=async()=>{if(V&&0!==V.length){O(!0);try{let e=await (0,l.uploadAdminNoteMedia)(V);if(e.success){let t=e.data.urls[0],s=ew(t,H.alt,H.blur,H.align,H.scale);eN(s),B({show:!0,type:"success",message:"å›¾ç‰‡ä¸Šä¼ æˆåŠŸ"}),q(!1),K(null),P({alt:"",url:"",blur:!1,align:"center",scale:100})}}catch(e){B({show:!0,type:"error",message:e.response?.data?.message||"å›¾ç‰‡ä¸Šä¼ å¤±è´¥"})}finally{O(!1)}}},e_=(0,s.useMemo)(()=>Array.from(new Set(m.map(e=>e.category).filter(Boolean))),[m]),eC=(0,s.useMemo)(()=>Array.from(new Set(m.flatMap(e=>e.tags?e.tags.split(",").map(e=>e.trim()).filter(Boolean):[]))),[m]),e$=(0,s.useMemo)(()=>m.filter(e=>{let t=""===G||e.title.toLowerCase().includes(G.toLowerCase())||e.content.toLowerCase().includes(G.toLowerCase())||e.tags&&e.tags.toLowerCase().includes(G.toLowerCase()),s="all"===Q||"uncategorized"===Q&&!e.category||e.category===Q,r="all"===Y||e.tags&&e.tags.split(",").map(e=>e.trim()).includes(Y);return t&&s&&r}),[m,G,Q,Y]),eS=(0,s.useMemo)(()=>m.filter(e=>!e.is_published),[m]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.default,{show:L.show,message:L.message,type:L.type,onClose:()=>B({...L,show:!1})}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,t.jsx)("button",{onClick:()=>j("notes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"notes"===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"ç¬”è®°ç®¡ç†"}),(0,t.jsx)("button",{onClick:()=>j("categories"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"categories"===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"åˆ†ç±»ç®¡ç†"}),(0,t.jsx)("button",{onClick:()=>j("drafts"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"drafts"===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"è‰ç¨¿ç®±"}),(0,t.jsx)("button",{onClick:()=>{w||(_({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),N(null),T(!1),v(!0)),j("editNote")},className:`py-4 px-1 border-b-2 font-medium text-sm ${"editNote"===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:f?"ç¼–è¾‘ç¬”è®°":"æ–°å»ºç¬”è®°"})]})}),"notes"===y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"card mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"æœç´¢å’Œç­›é€‰"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å…³é”®è¯æœç´¢"}),(0,t.jsx)("input",{type:"text",placeholder:"æœç´¢æ ‡é¢˜ã€å†…å®¹æˆ–æ ‡ç­¾...",value:G,onChange:e=>J(e.target.value),className:"input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»ç­›é€‰"}),(0,t.jsxs)("select",{value:Q,onChange:e=>X(e.target.value),className:"input",children:[(0,t.jsx)("option",{value:"all",children:"æ‰€æœ‰åˆ†ç±»"}),(0,t.jsx)("option",{value:"uncategorized",children:"æœªåˆ†ç±»"}),e_.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ ‡ç­¾ç­›é€‰"}),(0,t.jsxs)("select",{value:Y,onChange:e=>Z(e.target.value),className:"input",children:[(0,t.jsx)("option",{value:"all",children:"æ‰€æœ‰æ ‡ç­¾"}),eC.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["æ‰¾åˆ° ",e$.length," ç¯‡ç¬”è®°"]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"æˆ‘çš„ç¬”è®°"}),0===e$.length?(0,t.jsx)("p",{className:"text-gray-500 text-center py-8",children:"è¿˜æ²¡æœ‰åˆ›å»ºä»»ä½•ç¬”è®°"}):(0,t.jsx)("div",{className:"space-y-4",children:e$.map(e=>(0,t.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 break-words",children:e.title||"(æ— æ ‡é¢˜)"}),e.is_pinned&&(0,t.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded flex-shrink-0",children:"ç½®é¡¶"}),e.category&&(0,t.jsxs)("span",{onClick:()=>X(e.category),className:"inline-flex text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded cursor-pointer hover:bg-green-200 transition-colors flex-shrink-0",title:`ç­›é€‰"${e.category}"åˆ†ç±»`,children:["åˆ†ç±»: ",e.category]}),e.tags&&e.tags.split(",").map((e,s)=>(0,t.jsx)("span",{onClick:()=>Z(e.trim()),className:"inline-flex text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded cursor-pointer hover:bg-purple-200 transition-colors flex-shrink-0",title:`ç­›é€‰"${e.trim()}"æ ‡ç­¾`,children:e.trim()},s)),void 0!==e.sort_order&&e.sort_order>0&&(0,t.jsxs)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded flex-shrink-0",children:["æ’åº: ",e.sort_order]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 break-words",children:e.summary||(e.content?e.content.substring(0,150)+"...":"æš‚æ— å†…å®¹")})]}),(0,t.jsxs)("div",{className:"flex sm:flex-col gap-2 sm:ml-4 flex-shrink-0",children:[(0,t.jsx)("button",{onClick:()=>eh(e),className:"flex-1 sm:flex-initial px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50",children:"ç¼–è¾‘"}),(0,t.jsx)("button",{onClick:()=>e.id&&eu(e.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded",children:"åˆ é™¤"})]})]})},e.id))})]})]}),"editNote"===y&&w&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"card mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:f?"ç¼–è¾‘ç¬”è®°":"æ–°å»ºç¬”è®°"}),f&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"|"}),(0,t.jsxs)("a",{href:k.password&&""!==k.password.trim()?`${window.location.origin}/note/${f.id}?password=${encodeURIComponent(k.password)}`:`${window.location.origin}/note/${f.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 underline flex items-center gap-1 max-w-md truncate",title:k.password&&""!==k.password.trim()?"ç‚¹å‡»è®¿é—®å¸¦å¯†ç çš„ç¬”è®°é“¾æ¥":"ç‚¹å‡»è®¿é—®ç¬”è®°é“¾æ¥",children:[(0,t.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),k.password&&""!==k.password.trim()?`${window.location.origin}/note/${f.id}?password=${encodeURIComponent(k.password)}`:`${window.location.origin}/note/${f.id}`]}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e=k.password&&""!==k.password.trim()?`${window.location.origin}/note/${f.id}?password=${encodeURIComponent(k.password)}`:`${window.location.origin}/note/${f.id}`;navigator.clipboard.writeText(e),B({show:!0,type:"success",message:"é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"})},className:"text-gray-500 hover:text-gray-700 flex-shrink-0",title:"å¤åˆ¶é“¾æ¥",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),(0,t.jsx)("div",{className:"flex space-x-2",children:(0,t.jsx)("button",{type:"button",onClick:()=>T(!R),className:`btn btn-secondary text-sm ${R?"bg-primary-600 text-white":""}`,children:R?"ç¼–è¾‘æ¨¡å¼":"é¢„è§ˆæ¨¡å¼"})})]}),(0,t.jsxs)("form",{onSubmit:ex,className:"space-y-4",children:[!el&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["æ ‡é¢˜ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:k.title,onChange:ed,className:"input",placeholder:"ç¬”è®°æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"å†…å®¹"}),R?(0,t.jsx)("div",{className:"min-h-[300px] border border-gray-300 rounded-lg p-4 bg-white overflow-auto",children:k.content?(0,t.jsx)("div",{className:"note-content",children:(0,t.jsx)(i.default,{remarkPlugins:[n.default],rehypePlugins:[o.default],components:{img:({src:e,alt:r,className:a,style:i,...n})=>{let o=e;"string"==typeof e&&e.startsWith("/uploads/")&&(o=(0,l.getImageUrl)(e));let c=a?.includes("blur-image")||"true"===n["data-blur"],[d,x]=s.default.useState(!1),m=a?.includes("img-align-"),p={};return"string"==typeof i?i.split(";").forEach(e=>{let[t,s]=e.split(":").map(e=>e.trim());t&&s&&(p[t]=s)}):i&&(p=i),(0,t.jsx)("div",{className:`my-4 ${a?.includes("img-align-right")?"text-right":a?.includes("img-align-left")?"text-left":"text-center"} ${c?"blur-image-container":""} ${d?"revealed":""}`,children:(0,t.jsx)("img",{src:o,alt:r||"",className:`max-w-full h-auto rounded-lg shadow-sm cursor-pointer hover:shadow-md transition-shadow ${a||""} ${m?"":"img-align-center"} ${c&&!d?"blur-image":""} ${d?"revealed":""}`,style:{maxHeight:"360px",objectFit:"contain",...p},loading:"lazy",onClick:()=>{c&&!d&&x(!0)},onError:e=>{e.target.style.display="none"},...n})})},iframe:({node:e,...s})=>(0,t.jsx)("div",{className:"iframe-container my-4",children:(0,t.jsx)("iframe",{...s})}),pre:({node:e,children:r,...a})=>{let l=e=>"string"==typeof e?e:Array.isArray(e)?e.map(l).join(""):s.default.isValidElement(e)?l(e.props.children||""):"",i=(e=>{if(s.default.isValidElement(e)){let t=e.props,s=/language-(\w+)/.exec(t.className||"");return s?s[1]:""}return""})(r);return(0,t.jsxs)("div",{className:"code-block-wrapper relative group my-4",children:[i&&(0,t.jsx)("div",{className:"code-language-tag absolute top-0 left-4 px-2 py-0.5 text-xs rounded-b bg-gray-200 text-gray-600",children:i}),(0,t.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 pt-8 rounded-lg overflow-x-auto",...a,children:r})]})},code:({node:e,inline:s,className:r,children:a,...l})=>s?(0,t.jsx)("code",{className:"bg-gray-100 text-pink-600 px-1.5 py-0.5 rounded text-sm font-mono",...l,children:a}):(0,t.jsx)("code",{className:`text-sm font-mono ${r||""}`,...l,children:a}),blockquote:({node:e,children:s,...r})=>(0,t.jsx)("blockquote",{className:"border-l-4 border-blue-500 pl-4 my-4 italic text-gray-600 bg-blue-50 py-2 rounded-r",...r,children:s}),table:({node:e,children:s,...r})=>(0,t.jsx)("div",{className:"overflow-x-auto my-4",children:(0,t.jsx)("table",{className:"min-w-full border-collapse",...r,children:s})}),th:({node:e,children:s,...r})=>(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-100 font-semibold text-left",...r,children:s}),td:({node:e,children:s,...r})=>(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",...r,children:s})},children:k.content})}):(0,t.jsxs)("div",{className:"text-center text-gray-500 py-16",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"ğŸ“"}),(0,t.jsx)("p",{children:"è¾“å…¥å†…å®¹åé¢„è§ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º"})]})}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 p-2 bg-gray-50 rounded-lg border border-gray-200 overflow-x-auto",children:(0,t.jsxs)("div",{className:"flex flex-nowrap gap-2 min-w-max",children:[(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ev("h1"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"ä¸€çº§æ ‡é¢˜",children:"H1"}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("h2"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"äºŒçº§æ ‡é¢˜",children:"H2"}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("h3"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"ä¸‰çº§æ ‡é¢˜",children:"H3"})]}),(0,t.jsx)("div",{className:"border-l border-gray-300"}),(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ev("bold"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"ç²—ä½“",children:(0,t.jsx)("strong",{children:"B"})}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("italic"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"æ–œä½“",children:(0,t.jsx)("em",{children:"I"})}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("strikethrough"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"åˆ é™¤çº¿",children:(0,t.jsx)("s",{children:"S"})}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("code"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"è¡Œå†…ä»£ç ",children:"</>"}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("codeblock"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"ä»£ç å—",children:"{}"})]}),(0,t.jsx)("div",{className:"border-l border-gray-300"}),(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ev("quote"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"å¼•ç”¨",children:'""'}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("list"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"æ— åºåˆ—è¡¨",children:"â€¢"}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("numberedList"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"æœ‰åºåˆ—è¡¨",children:"1."}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("tasklist"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"ä»»åŠ¡åˆ—è¡¨",children:"â˜‘"})]}),(0,t.jsx)("div",{className:"border-l border-gray-300"}),(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsx)("button",{type:"button",onClick:()=>I(!0),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"æ’å…¥é“¾æ¥",children:"é“¾æ¥"}),(0,t.jsx)("button",{type:"button",onClick:()=>q(!0),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"æ’å…¥å›¾ç‰‡",children:"å›¾ç‰‡"}),(0,t.jsxs)("label",{className:"cursor-pointer",children:[(0,t.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.gif,.webp,.svg",onChange:e=>{let t=e.target.files;if(!t||0===t.length)return;let s=Array.from(t),r=new DataTransfer;s.forEach(e=>r.items.add(e)),K(r.files),P({alt:"",url:"",blur:!1,align:"center",scale:100}),q(!0),e.target.value=""},disabled:W,className:"hidden",multiple:!0}),(0,t.jsx)("div",{className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 whitespace-nowrap",children:"ä¸Šä¼ å›¾ç‰‡"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("table"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"æ’å…¥è¡¨æ ¼",children:"è¡¨æ ¼"}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("hr"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"åˆ†éš”çº¿",children:"â€•"}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("collapse"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"å±•å¼€/æ”¶èµ·å†…å®¹å—",children:"æŠ˜å "}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("blur"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"å†…å®¹æ¨¡ç³Šï¼ˆé¼ æ ‡æ‚¬åœæ˜¾ç¤ºï¼‰",children:"æ¨¡ç³Š"}),(0,t.jsx)("button",{type:"button",onClick:()=>ev("mermaid"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"æ’å…¥Mermaidå›¾è¡¨",children:"å›¾è¡¨"})]}),(0,t.jsx)("div",{className:"border-l border-gray-300"}),(0,t.jsx)("button",{type:"button",onClick:()=>{f?.id?(ea(f.id),es(!0)):alert("è¯·å…ˆä¿å­˜ç¬”è®°åå†ç®¡ç†ç½‘ç›˜")},className:"px-2.5 py-1.5 text-xs bg-blue-50 border border-blue-300 rounded hover:bg-blue-100 text-blue-700 whitespace-nowrap",title:"ç®¡ç†ç½‘ç›˜èµ„æº",children:"ğŸ“ ç½‘ç›˜"}),(0,t.jsx)("div",{className:"border-l border-gray-300"}),(0,t.jsx)("button",{type:"button",onClick:()=>ei(!el),className:`px-2.5 py-1.5 text-xs border rounded whitespace-nowrap ${el?"bg-orange-50 border-orange-300 text-orange-700 hover:bg-orange-100":"bg-white border-gray-300 text-gray-700 hover:bg-gray-100"}`,title:el?"é€€å‡ºç¼–è¾‘æ¨¡å¼":"ç¼–è¾‘æ¨¡å¼",children:el?"ğŸ“± æ­£å¸¸æ¨¡å¼":"ğŸ“± ç¼–è¾‘æ¨¡å¼"})]})}),(0,t.jsx)("textarea",{ref:ee,id:"content",name:"content",rows:el?20:12,required:!0,value:k.content,onChange:ed,className:`input font-mono text-sm w-full ${el?"min-h-[500px] text-base":"min-h-[300px]"}`,placeholder:"# æ ‡é¢˜\\n\\nè¿™é‡Œæ˜¯ä½ çš„ç¬”è®°å†…å®¹...\\n\\n- æ”¯æŒåˆ—è¡¨\\n- æ”¯æŒ**ç²—ä½“**\\n- æ”¯æŒ*æ–œä½“*\\n- æ”¯æŒä»£ç å—\\n\\n```javascript\\nconsole.log('Hello World!');\\n```"})]})]}),!el&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»"}),(0,t.jsxs)("select",{id:"category",name:"category",value:k.category,onChange:ed,className:"input",children:[(0,t.jsx)("option",{value:"",children:"è¯·é€‰æ‹©åˆ†ç±»ï¼ˆå¯é€‰ï¼‰"}),h.map(e=>(0,t.jsxs)("option",{value:e.name,children:[e.icon?`${e.icon} `:"",e.name]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"æ ‡ç­¾"}),(0,t.jsx)("input",{id:"tags",name:"tags",type:"text",value:k.tags,onChange:ed,className:"input",placeholder:"å¤šä¸ªæ ‡ç­¾ç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼ˆå¯é€‰ï¼‰"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"summary",className:"block text-sm font-medium text-gray-700 mb-2",children:"ç¬”è®°æ‘˜è¦"}),(0,t.jsx)("textarea",{id:"summary",name:"summary",rows:3,value:k.summary||"",onChange:ed,className:"input",placeholder:"è¾“å…¥ç¬”è®°æ‘˜è¦ï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™è‡ªåŠ¨æˆªå–æ­£æ–‡å‰150å­—ï¼‰"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"ğŸ’¡ æ‘˜è¦ä¼šæ˜¾ç¤ºåœ¨ç¬”è®°åˆ—è¡¨ä¸­ï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿäº†è§£å†…å®¹"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"è®¿é—®å¯†ç "}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{id:"password",name:"password",type:"text",value:k.password||"",onChange:ed,className:"input w-48",placeholder:"è®¾ç½®è®¿é—®å¯†ç ï¼ˆå¯é€‰ï¼‰"}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e="abcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(3*Math.random())+4,s="";for(let r=0;r<t;r++)s+=e.charAt(Math.floor(Math.random()*e.length));_({...k,password:s})},className:"px-3 py-2 text-sm bg-blue-50 border border-blue-300 rounded-lg hover:bg-blue-100 text-blue-700 whitespace-nowrap",children:"ğŸ² éšæœºç”Ÿæˆ"}),k.password&&(0,t.jsx)("button",{type:"button",onClick:()=>_({...k,password:""}),className:"px-3 py-2 text-sm bg-red-50 border border-red-300 rounded-lg hover:bg-red-100 text-red-700 whitespace-nowrap",children:"æ¸…é™¤"})]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"ğŸ’¡ è®¾ç½®å¯†ç åï¼Œè®¿å®¢éœ€è¦è¾“å…¥æ­£ç¡®å¯†ç æ‰èƒ½æŸ¥çœ‹ç¬”è®°å†…å®¹"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"source_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"æ¥æºç±»å‹"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",name:"source_type",value:"none",checked:"none"===k.source_type,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"ä¸å±•ç¤º"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",name:"source_type",value:"original",checked:"original"===k.source_type,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"åŸåˆ›"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",name:"source_type",value:"reprint",checked:"reprint"===k.source_type,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"è½¬è½½"})]})]}),"reprint"===k.source_type&&(0,t.jsxs)("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)("label",{htmlFor:"source_text",className:"block text-sm font-medium text-gray-700 mb-2",children:"æ–‡ç« æ¥æº"}),(0,t.jsx)("textarea",{id:"source_text",name:"source_text",rows:3,value:k.source_text||"",onChange:ed,className:"input w-full",placeholder:"è¯·è¾“å…¥æ–‡ç« æ¥æºä¿¡æ¯ï¼Œå¯ä»¥æ˜¯ç½‘å€ã€ä½œè€…åã€å¹³å°åç§°ç­‰..."}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"ğŸ’¡ è½¬è½½æ—¶è¯·åŠ¡å¿…æ³¨æ˜æ¥æºï¼Œæ”¯æŒè¾“å…¥ç½‘å€ã€ä½œè€…åã€å¹³å°åç§°ç­‰ä»»æ„æ–‡æœ¬"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"cover_image",className:"block text-sm font-bold text-gray-700 mb-2",children:"å°é¢å›¾"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[k.cover_image&&(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-32 h-32 rounded-lg overflow-hidden bg-gray-100 border-2 border-gray-200",children:(0,t.jsx)("img",{src:(0,l.getImageUrl)(k.cover_image),alt:"å°é¢é¢„è§ˆ",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})})}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("input",{id:"cover_image",name:"cover_image",type:"text",value:k.cover_image||"",onChange:ed,className:"input",placeholder:"è¾“å…¥å°é¢å›¾URLï¼ˆå¯é€‰ï¼‰"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{id:"cover-upload",type:"file",accept:"image/*",onChange:async e=>{let t=e.target.files?.[0];if(t){if(t.size>5242880)return void B({show:!0,type:"error",message:"å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB"});O(!0);try{let t=e.target.files,s=await (0,l.uploadAdminNoteMedia)(t);s.success&&s.data&&s.data.urls&&s.data.urls.length>0&&(_({...k,cover_image:s.data.urls[0]}),B({show:!0,type:"success",message:"å°é¢å›¾ä¸Šä¼ æˆåŠŸ"}))}catch(e){B({show:!0,type:"error",message:e.response?.data?.message||e.message||"å°é¢å›¾ä¸Šä¼ å¤±è´¥"})}finally{O(!1),e.target.value=""}}},className:"hidden"}),(0,t.jsx)("label",{htmlFor:"cover-upload",className:`px-3 py-2 text-sm bg-blue-50 border border-blue-300 rounded-lg hover:bg-blue-100 text-blue-700 cursor-pointer ${W?"opacity-50 cursor-not-allowed":""}`,children:W?"ä¸Šä¼ ä¸­...":"ğŸ“ é€‰æ‹©å›¾ç‰‡"}),k.cover_image&&(0,t.jsx)("button",{type:"button",onClick:()=>_({...k,cover_image:""}),className:"px-3 py-2 text-sm bg-red-50 border border-red-300 rounded-lg hover:bg-red-100 text-red-700",children:"ğŸ—‘ï¸ åˆ é™¤"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"ğŸ’¡ å°é¢å›¾å°†åœ¨ç¬”è®°åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼ˆæ”¯æŒjpgã€pngã€gifã€webpï¼Œå»ºè®®å°ºå¯¸1:1ï¼Œæœ€å¤§5MBï¼‰"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"is_pinned",name:"is_pinned",type:"checkbox",checked:k.is_pinned,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500 focus:ring-2"}),(0,t.jsx)("label",{htmlFor:"is_pinned",className:"ml-2 text-sm font-medium text-gray-700",children:"ç½®é¡¶ç¬”è®°"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"show_in_list",name:"show_in_list",type:"checkbox",checked:k.show_in_list,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500 focus:ring-2"}),(0,t.jsx)("label",{htmlFor:"show_in_list",className:"ml-2 text-sm font-medium text-gray-700",children:"åœ¨åˆ—è¡¨ä¸­å±•ç¤º"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"sort_order",className:"block text-sm font-medium text-gray-700 mb-2",children:"æ’åºæƒé‡"}),(0,t.jsx)("input",{id:"sort_order",name:"sort_order",type:"number",value:k.sort_order,onChange:ed,className:"input",placeholder:"æ•°å­—è¶Šå¤§è¶Šé å‰"})]})}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",children:f?"æ›´æ–°å¹¶å‘å¸ƒ":"åˆ›å»º"}),(0,t.jsx)("button",{type:"button",onClick:async e=>{e.preventDefault(),await em()},className:"btn btn-secondary",children:"ä¿å­˜è‰ç¨¿"}),(0,t.jsx)("button",{type:"button",onClick:eg,className:"btn btn-secondary",children:"å–æ¶ˆ"})]})]})]})]}),E&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"æ’å…¥é“¾æ¥"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"é“¾æ¥æ–‡æœ¬"}),(0,t.jsx)("input",{type:"text",value:z.text,onChange:e=>D({...z,text:e.target.value}),className:"input",placeholder:"é“¾æ¥æ˜¾ç¤ºæ–‡æœ¬"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"é“¾æ¥åœ°å€"}),(0,t.jsx)("input",{type:"url",value:z.url,onChange:e=>D({...z,url:e.target.value}),className:"input",placeholder:"https://example.com"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,t.jsx)("button",{onClick:()=>{z.text&&z.url?(eN(`[${z.text}](${z.url})`),I(!1),D({text:"",url:""})):alert("è¯·å¡«å†™é“¾æ¥æ–‡æœ¬å’ŒURL")},className:"btn btn-primary flex-1",children:"æ’å…¥"}),(0,t.jsx)("button",{onClick:()=>I(!1),className:"btn btn-secondary",children:"å–æ¶ˆ"})]})]})}),U&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:V?"ä¸Šä¼ å›¾ç‰‡è®¾ç½®":"æ’å…¥å›¾ç‰‡"}),(0,t.jsxs)("div",{className:"space-y-4",children:[V&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:["å·²é€‰æ‹©æ–‡ä»¶ï¼š",V[0]?.name]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å›¾ç‰‡æè¿°ï¼ˆå¯é€‰ï¼‰"}),(0,t.jsx)("input",{type:"text",value:H.alt,onChange:e=>P({...H,alt:e.target.value}),className:"input",placeholder:"å›¾ç‰‡æè¿°"})]}),!V&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å›¾ç‰‡åœ°å€"}),(0,t.jsx)("input",{type:"url",value:H.url,onChange:e=>P({...H,url:e.target.value}),className:"input",placeholder:"https://example.com/image.jpg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å¯¹é½æ–¹å¼"}),(0,t.jsx)("div",{className:"flex gap-4",children:["left","center","right"].map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"imageAlign",checked:H.align===e,onChange:()=>P({...H,align:e}),className:"w-4 h-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"left"===e?"å±…å·¦":"center"===e?"å±…ä¸­":"å±…å³"})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ç¼©æ”¾æ¯”ä¾‹ï¼š",H.scale,"%"]}),(0,t.jsx)("input",{type:"range",min:"10",max:"100",step:"10",value:H.scale,onChange:e=>P({...H,scale:parseInt(e.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,t.jsx)("span",{children:"10%"}),(0,t.jsx)("span",{children:"50%"}),(0,t.jsx)("span",{children:"100%"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:H.blur,onChange:e=>P({...H,blur:e.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"å›¾ç‰‡æ¨¡ç³Š"})]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"å¼€å¯åå›¾ç‰‡å°†é«˜åº¦æ¨¡ç³Šæ˜¾ç¤ºï¼Œç‚¹å‡»å›¾ç‰‡æ‰ä¼šæ˜¾ç¤ºå…·ä½“ç”»é¢"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,t.jsx)("button",{onClick:V?ek:()=>{H.url?(eN(ew(H.url,H.alt||"",H.blur,H.align,H.scale)),q(!1),P({alt:"",url:"",blur:!1,align:"center",scale:100})):alert("è¯·å¡«å†™å›¾ç‰‡URL")},disabled:W,className:"btn btn-primary flex-1 disabled:opacity-50",children:W?"ä¸Šä¼ ä¸­...":V?"ä¸Šä¼ ":"æ’å…¥"}),(0,t.jsx)("button",{onClick:()=>{q(!1),K(null),P({alt:"",url:"",blur:!1,align:"center",scale:100})},className:"btn btn-secondary",children:"å–æ¶ˆ"})]})]})})]}),"editNote"===y&&!w&&(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"text-6xl mb-4 text-gray-300",children:"ğŸ“"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:f?"æ­£åœ¨ç¼–è¾‘ç¬”è®°":"å‡†å¤‡åˆ›å»ºæ–°ç¬”è®°"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:f?'æ‚¨æ­£åœ¨ç¼–è¾‘ä¸€ç¯‡ç¬”è®°ã€‚å¦‚éœ€è¿”å›ç¬”è®°åˆ—è¡¨ï¼Œè¯·ç‚¹å‡»å·¦ä¾§çš„"ç¬”è®°ç®¡ç†"é€‰é¡¹å¡ã€‚':'ç‚¹å‡»"æ–°å»ºç¬”è®°"é€‰é¡¹å¡å¼€å§‹åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ç¯‡ç¬”è®°ï¼Œæˆ–ä»"ç¬”è®°ç®¡ç†"é€‰é¡¹å¡ä¸­é€‰æ‹©ä¸€ç¯‡ç¬”è®°è¿›è¡Œç¼–è¾‘ã€‚'}),!f&&(0,t.jsx)("button",{onClick:()=>{_({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),N(null),T(!1),v(!0)},className:"btn btn-primary",children:"å¼€å§‹åˆ›å»ºç¬”è®°"})]})}),"drafts"===y&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"è‰ç¨¿ç®±"}),0===eS.length?(0,t.jsx)("p",{className:"text-gray-500 text-center py-8",children:"è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•è‰ç¨¿"}):(0,t.jsx)("div",{className:"space-y-4",children:eS.map(e=>(0,t.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 break-words",children:e.title||"(æ— æ ‡é¢˜)"}),(0,t.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded flex-shrink-0",children:"è‰ç¨¿"}),e.category&&(0,t.jsxs)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded flex-shrink-0",children:["åˆ†ç±»: ",e.category]}),e.tags&&e.tags.split(",").map((e,s)=>(0,t.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded flex-shrink-0",children:e.trim()},s))]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 break-words",children:e.summary||(e.content?e.content.substring(0,150)+"...":"æš‚æ— å†…å®¹")})]}),(0,t.jsxs)("div",{className:"flex sm:flex-col gap-2 sm:ml-4 flex-shrink-0",children:[(0,t.jsx)("button",{onClick:()=>eh(e),className:"flex-1 sm:flex-initial px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50",children:"ç¼–è¾‘"}),(0,t.jsx)("button",{onClick:()=>e.id&&ep(e.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",children:"å‘å¸ƒ"}),(0,t.jsx)("button",{onClick:()=>e.id&&eu(e.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded",children:"åˆ é™¤"})]})]})},e.id))})]})}),"categories"===y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("button",{onClick:()=>A(!S),className:"btn btn-primary",children:S?"å–æ¶ˆ":"+ æ·»åŠ åˆ†ç±»"})}),S&&(0,t.jsxs)("div",{className:"card mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:C?"ç¼–è¾‘åˆ†ç±»":"æ·»åŠ åˆ†ç±»"}),(0,t.jsxs)("form",{onSubmit:ey,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["åˆ†ç±»åç§° ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"name",value:F.name,onChange:eb,className:"input",placeholder:"ä¾‹å¦‚ï¼šæŠ€æœ¯ç¬”è®°",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»æè¿°"}),(0,t.jsx)("textarea",{name:"description",value:F.description,onChange:eb,rows:3,className:"input",placeholder:"åˆ†ç±»çš„è¯¦ç»†æè¿°"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»å›¾æ ‡"}),(0,t.jsx)("input",{type:"text",name:"icon",value:F.icon,onChange:eb,className:"input",placeholder:"ä¾‹å¦‚ï¼šğŸ“ æˆ– emoji è¡¨æƒ…"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"å¯ä»¥ä½¿ç”¨ emoji è¡¨æƒ…ä½œä¸ºå›¾æ ‡"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ’åºé¡ºåº"}),(0,t.jsx)("input",{type:"number",name:"sort_order",value:F.sort_order,onChange:eb,className:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",children:C?"æ›´æ–°":"æ·»åŠ "}),(0,t.jsx)("button",{type:"button",onClick:ef,className:"btn btn-secondary",children:"å–æ¶ˆ"})]})]})]}),(0,t.jsxs)("div",{className:"card overflow-hidden",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4 px-6 pt-6",children:"åˆ†ç±»åˆ—è¡¨"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"å›¾æ ‡"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"åç§°"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æè¿°"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ’åº"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ“ä½œ"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===h.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"æš‚æ— åˆ†ç±»æ•°æ®"})}):h.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-2xl",children:e.icon||"ğŸ“"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.description||"-"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.sort_order}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>{$(e),M({name:e.name,description:e.description||"",icon:e.icon||"",sort_order:e.sort_order||0}),A(!0)},className:"text-primary-600 hover:text-primary-900 mr-4",children:"ç¼–è¾‘"}),(0,t.jsx)("button",{onClick:()=>e.id&&ej(e.id),className:"text-red-600 hover:text-red-900",children:"åˆ é™¤"})]})]},e.id))})]})})]})]})]}),er&&(0,t.jsx)(x.default,{isOpen:et,onClose:()=>es(!1),noteId:er,isAdmin:!0})]})}e.s(["default",()=>m])}]);