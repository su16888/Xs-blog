(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{1918:function(e,t,s){Promise.resolve().then(s.bind(s,33267))},33267:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(57437),a=s(2265),o=s(99376),n=s(71837),l=s(20441),i=s(99950),d=s(37295);let c=e=>new Promise((t,s)=>{let r=new Image;r.addEventListener("load",()=>t(r)),r.addEventListener("error",e=>s(e)),r.src=e});async function m(e,t){let s=await c(e),r=document.createElement("canvas"),a=r.getContext("2d");if(!a)throw Error("无法获取canvas上下文");return r.width=t.width,r.height=t.height,a.drawImage(s,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise((e,t)=>{r.toBlob(s=>{s?e(s):t(Error("Canvas为空"))},"image/jpeg",.95)})}function u(e){let{image:t,onComplete:s,onCancel:o,aspectRatio:n=1}=e,[l,i]=(0,a.useState)({x:0,y:0}),[c,u]=(0,a.useState)(1),[h,x]=(0,a.useState)(null),[g,p]=(0,a.useState)(!1),b=(0,a.useCallback)((e,t)=>{x(t)},[]),f=(0,a.useCallback)(async()=>{if(h)try{p(!0);let e=await m(t,h);s(e)}catch(e){console.error("裁剪失败:",e)}finally{p(!1)}},[t,h,s]);return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 w-full max-w-2xl mx-4",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"裁剪图片"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"拖动图片调整位置，滚动鼠标缩放"})]}),(0,r.jsx)("div",{className:"relative w-full h-96 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:(0,r.jsx)(d.ZP,{image:t,crop:l,zoom:c,aspect:n,onCropChange:i,onZoomChange:u,onCropComplete:b,cropShape:1===n?"round":"rect"})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"缩放"}),(0,r.jsx)("input",{type:"range",min:1,max:3,step:.1,value:c,onChange:e=>u(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,r.jsx)("button",{onClick:o,className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",disabled:g,children:"取消"}),(0,r.jsx)("button",{onClick:f,disabled:g,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:g?"处理中...":"完成裁剪"})]})]})})}var h=s(69853),x=s(33182);function g(){(0,l.T)("个人资料");let e=(0,o.useRouter)(),[t,s]=(0,a.useState)(null),[d,c]=(0,a.useState)({name:"",title:"",bio:"",location:"",avatar:"",website:"",website_title:""}),[m,g]=(0,a.useState)(!0),[p,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),[L,_]=(0,a.useState)({show:!1,type:"success",message:""}),[M,S]=(0,a.useState)([]),[F,B]=(0,a.useState)(null),[W,z]=(0,a.useState)(!1),[q,I]=(0,a.useState)({platform:"",account:"",link:"",icon:"",qrcode:"",show_in_profile:!1,is_visible:!0}),[V,R]=(0,a.useState)(!1),[A,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{U()},[]);let U=async()=>{try{if(!localStorage.getItem("token")){e.push((0,h.V9)("login"));return}let t=await (0,n.tse)();s(t);try{let e=await (0,n.Taq)();c({name:(null==e?void 0:e.name)||"",title:(null==e?void 0:e.title)||"",bio:(null==e?void 0:e.bio)||"",location:(null==e?void 0:e.location)||"",avatar:(null==e?void 0:e.avatar)||"",website:(null==e?void 0:e.website)||"",website_title:(null==e?void 0:e.website_title)||""})}catch(e){}await O()}catch(t){localStorage.removeItem("token"),localStorage.removeItem("user"),e.push((0,h.V9)("login"))}finally{g(!1)}},H=e=>{c({...d,[e.target.name]:e.target.value})},P=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;if(!s.type.startsWith("image/")){_({show:!0,type:"error",message:"请选择图片文件"});return}let r=new FileReader;r.onload=()=>{C(r.result),N(!0)},r.readAsDataURL(s),e.target.value=""},T=async e=>{N(!1),v(!0);try{let t=new File([e],"avatar.jpg",{type:"image/jpeg"}),s=await (0,n.M7V)(t);s.success&&(c({...d,avatar:s.data.avatar}),_({show:!0,type:"success",message:"头像上传成功"}))}catch(e){var t,s;_({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"头像上传失败"})}finally{v(!1),C(null)}},J=async()=>{j(!0);try{(await (0,n.U_d)()).success&&(c({...d,avatar:""}),_({show:!0,type:"success",message:"头像删除成功"}))}catch(s){var e,t;_({show:!0,type:"error",message:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"头像删除失败"})}finally{j(!1)}},D=async e=>{e.preventDefault(),b(!0);try{await (0,n.m1G)(d),_({show:!0,type:"success",message:"个人资料更新成功"})}catch(e){var t,s;_({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"更新失败"})}finally{b(!1)}},O=async()=>{try{let e=await (0,n.ldR)();if(e.success){let t=Array.isArray(e.data)?e.data:[];S(t)}}catch(e){console.error("Failed to load social links:",e),S([])}},Z=e=>{I({...q,[e.target.name]:e.target.value})},$=async e=>{e.preventDefault();try{(null==F?void 0:F.id)?(await (0,n.zlg)(F.id,q)).success&&(_({show:!0,type:"success",message:"社交链接更新成功"}),await O(),K()):(await (0,n.H6F)(q)).success&&(_({show:!0,type:"success",message:"社交链接添加成功"}),await O(),K())}catch(e){var t,s;_({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"操作失败"})}},G=e=>{B(e),I({platform:e.platform,account:e.account,link:e.link||"",icon:e.icon||"",qrcode:e.qrcode||"",show_in_profile:e.show_in_profile||!1,is_visible:void 0===e.is_visible||e.is_visible}),z(!0)},X=async e=>{if(confirm("确定要删除这个社交链接吗？"))try{(await (0,n.ZhF)(e)).success&&(_({show:!0,type:"success",message:"社交链接删除成功"}),await O())}catch(e){var t,s;_({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"删除失败"})}},K=()=>{I({platform:"",account:"",link:"",icon:"",qrcode:"",show_in_profile:!1,is_visible:!0}),B(null),z(!1)},Q=async e=>{var t,s,r;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){R(!0);try{let t=await (0,n.TXj)(a);t.success&&(I({...q,icon:t.data.url}),_({show:!0,type:"success",message:"图标上传成功"}),e.target.value="")}catch(e){_({show:!0,type:"error",message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"图标上传失败"})}finally{R(!1)}}},Y=async e=>{var t,s,r;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){E(!0);try{let t=await (0,n.PP9)(a);t.success&&(I({...q,qrcode:t.data.url}),_({show:!0,type:"success",message:"二维码上传成功"}),e.target.value="")}catch(e){_({show:!0,type:"error",message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"二维码上传失败"})}finally{E(!1)}}};return m?null:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("nav",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-5xl mx-auto px-4",children:(0,r.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>e.push((0,h.V9)("dashboard")),className:"text-gray-600 hover:text-gray-900",children:"← 返回"}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"个人资料管理"})]})})})}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[L.show&&(0,r.jsx)(i.Z,{message:L.message,type:L.type,onClose:()=>_({...L,show:!1})}),(0,r.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"头像设置"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"设置您的个人头像"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[d.avatar&&(0,r.jsx)("div",{className:"flex justify-center py-4",children:(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gradient-to-br from-blue-50 to-indigo-50 border-4 border-white shadow-lg ring-2 ring-blue-100",children:(0,r.jsx)("img",{src:(0,n.Jn$)(d.avatar),alt:"Avatar",className:"w-full h-full object-cover"})}),(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[!d.avatar&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"file",id:"avatarInput",accept:"image/*",onChange:P,disabled:f,className:"hidden"}),(0,r.jsxs)("label",{htmlFor:"avatarInput",className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-lg text-sm cursor-pointer whitespace-nowrap flex items-center gap-2 ".concat(f?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),f?"上传中...":"选择文件"]})]}),(0,r.jsx)("input",{type:"text",name:"avatar",value:d.avatar,onChange:H,placeholder:"或输入图片URL地址",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400"}),d.avatar&&(0,r.jsxs)("button",{type:"button",onClick:J,disabled:y,className:"flex-shrink-0 px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg font-medium transition-all duration-300 hover:from-red-600 hover:to-red-700 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm whitespace-nowrap flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),y?"删除中...":"删除"]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1.5",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"支持 jpg、png、gif、webp 格式，或输入自定义URL"]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"基本信息"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"设置您的个人基本信息"})]})]}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"姓名"]}),(0,r.jsx)("input",{id:"name",name:"name",type:"text",value:d.name,onChange:H,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"你的名字"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"职位/头衔"]}),(0,r.jsx)("input",{id:"title",name:"title",type:"text",value:d.title,onChange:H,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"例如：全栈开发工程师"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),"个人简介"]}),(0,r.jsx)("textarea",{id:"bio",name:"bio",rows:4,value:d.bio,onChange:H,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none",placeholder:"介绍一下自己..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,r.jsxs)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"所在地"]}),(0,r.jsx)("input",{id:"location",name:"location",type:"text",value:d.location,onChange:H,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"例如：北京"})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"社交信息"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"设置您的个人网站信息"})]})]}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"个人网站链接"]}),(0,r.jsx)("input",{id:"website",name:"website",type:"url",value:d.website,onChange:H,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"https://example.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"website_title",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"网站显示标题"]}),(0,r.jsx)("input",{id:"website_title",name:"website_title",type:"text",value:d.website_title,onChange:H,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"例如：我的博客"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1.5",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"如果不填写，将显示网站链接本身"]})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("button",{type:"submit",disabled:p,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),p?"保存中...":"保存更改"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>e.push((0,h.V9)("dashboard")),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium transition-all duration-300 hover:bg-gray-200 flex items-center justify-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"取消"]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"社交链接管理"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"添加和管理您的社交媒体链接"})]})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("button",{type:"button",onClick:()=>z(!W),className:"px-4 py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium transition-all duration-300 hover:from-orange-600 hover:to-orange-700 hover:shadow-lg flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),W?"取消":"添加社交链接"]})}),W&&(0,r.jsxs)("div",{className:"mb-6 p-5 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-base font-semibold mb-4 text-gray-900",children:F?"编辑社交链接":"添加社交链接"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700 mb-2",children:"平台名称"}),(0,r.jsx)("input",{id:"platform",name:"platform",type:"text",required:!0,value:q.platform,onChange:Z,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200",placeholder:"例如：GitHub, Twitter, LinkedIn"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"account",className:"block text-sm font-medium text-gray-700 mb-2",children:"账号/用户名"}),(0,r.jsx)("input",{id:"account",name:"account",type:"text",required:!0,value:q.account,onChange:Z,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200",placeholder:"例如：yourusername"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"link",className:"block text-sm font-medium text-gray-700 mb-2",children:"链接地址 (可选)"}),(0,r.jsx)("input",{id:"link",name:"link",type:"url",value:q.link,onChange:Z,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200",placeholder:"https://..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"icon",className:"block text-sm font-medium text-gray-700 mb-2",children:"图标 (可选)"}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[q.icon&&(0,r.jsx)("div",{className:"flex-shrink-0 w-16 h-16 flex items-center justify-center bg-white rounded border border-gray-200",children:(0,r.jsx)("img",{src:(0,n.Jn$)(q.icon),alt:"图标",className:"max-w-full max-h-full object-contain"})}),(0,r.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[!q.icon&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"file",id:"iconInput",accept:".jpg,.jpeg,.png,.gif,.webp,.svg",onChange:Q,disabled:V,className:"hidden"}),(0,r.jsx)("label",{htmlFor:"iconInput",className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-orange-600 hover:shadow-md text-xs cursor-pointer whitespace-nowrap ".concat(V?"opacity-50 cursor-not-allowed":""),children:V?"上传中...":"选择文件"})]}),(0,r.jsx)("input",{id:"icon",name:"icon",type:"text",value:q.icon,onChange:Z,placeholder:"图标 URL",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 bg-white placeholder-gray-400"})]}),q.icon&&(0,r.jsx)("button",{type:"button",onClick:()=>{I({...q,icon:""}),_({show:!0,type:"success",message:"图标删除成功"})},className:"flex-shrink-0 px-3 py-2 bg-red-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-red-600 hover:shadow-md text-xs whitespace-nowrap",children:"删除"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"支持 jpg、png、gif、webp、svg 格式"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"qrcode",className:"block text-sm font-medium text-gray-700 mb-2",children:"二维码图片 (可选)"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"上传二维码后，前台点击社交链接将显示二维码弹窗，不会跳转URL"}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[q.qrcode&&(0,r.jsx)("div",{className:"flex-shrink-0 w-20 h-20 flex items-center justify-center bg-white rounded border border-gray-200",children:(0,r.jsx)("img",{src:(0,n.Jn$)(q.qrcode),alt:"二维码",className:"w-full h-full object-contain"})}),(0,r.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[!q.qrcode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"file",id:"qrcodeInput",accept:".jpg,.jpeg,.png,.gif,.webp,.svg",onChange:Y,disabled:A,className:"hidden"}),(0,r.jsx)("label",{htmlFor:"qrcodeInput",className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-orange-600 hover:shadow-md text-xs cursor-pointer whitespace-nowrap ".concat(A?"opacity-50 cursor-not-allowed":""),children:A?"上传中...":"选择文件"})]}),(0,r.jsx)("input",{id:"qrcode",name:"qrcode",type:"text",value:q.qrcode,onChange:Z,placeholder:"二维码图片 URL",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 bg-white placeholder-gray-400"})]}),q.qrcode&&(0,r.jsx)("button",{type:"button",onClick:()=>{I({...q,qrcode:""}),_({show:!0,type:"success",message:"二维码删除成功"})},className:"flex-shrink-0 px-3 py-2 bg-red-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-red-600 hover:shadow-md text-xs whitespace-nowrap",children:"删除"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"支持 jpg、png、gif、webp、svg 格式"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",id:"show_in_profile",name:"show_in_profile",checked:q.show_in_profile||!1,onChange:e=>I({...q,show_in_profile:e.target.checked}),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"在个人资料卡片中显示（最多显示6个），博客模式下建议只选择4个！"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"勾选后，此社交链接将显示在博客主题的个人资料卡片下方，图标会根据数量自动调整大小和间距"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_visible",name:"is_visible",checked:void 0===q.is_visible||q.is_visible,onChange:e=>I({...q,is_visible:e.target.checked}),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"前台可见"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"取消勾选后，此社交链接将不会在前台显示，仅在后台管理中可见"})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),$(e)},className:"px-6 py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium transition-all duration-300 hover:from-orange-600 hover:to-orange-700 hover:shadow-lg",children:F?"更新":"添加"}),(0,r.jsx)("button",{type:"button",onClick:K,className:"px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg font-medium transition-all duration-300 hover:bg-gray-200",children:"取消"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-base font-semibold mb-4 text-gray-900",children:"已添加的社交链接"}),0===M.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-8 bg-gray-50 rounded-lg",children:"还没有添加任何社交链接"}):(0,r.jsx)("div",{className:"space-y-3",children:M.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:border-orange-300 transition-all",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 mr-3",children:[(0,r.jsx)("button",{type:"button",onClick:async()=>{if(0===t)return;let e=[...M],s=e[t];e[t]=e[t-1],e[t-1]=s,S(e);try{let t=e.map((e,t)=>({id:e.id,sort_order:t}));await (0,x.wz)("/api/admin/social-links/sort/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({sortData:t})})}catch(e){console.error("Failed to update sort order:",e)}},disabled:0===t,className:"p-1 text-gray-600 hover:text-orange-600 hover:bg-orange-50 rounded disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"上移",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),(0,r.jsx)("button",{type:"button",onClick:async()=>{if(t===M.length-1)return;let e=[...M],s=e[t];e[t]=e[t+1],e[t+1]=s,S(e);try{let t=e.map((e,t)=>({id:e.id,sort_order:t}));await (0,x.wz)("/api/admin/social-links/sort/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({sortData:t})})}catch(e){console.error("Failed to update sort order:",e)}},disabled:t===M.length-1,className:"p-1 text-gray-600 hover:text-orange-600 hover:bg-orange-50 rounded disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"下移",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.platform}),e.show_in_profile&&(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded-full",children:"显示在资料卡"}),!1===e.is_visible&&(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded-full",children:"前台隐藏"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["账号：",e.account]}),e.link&&(0,r.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-orange-600 hover:underline",children:e.link})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>G(e),className:"px-3 py-1.5 bg-white text-gray-700 border border-gray-300 rounded-lg text-sm font-medium transition-all duration-300 hover:bg-gray-50 hover:border-gray-400",children:"编辑"}),(0,r.jsx)("button",{type:"button",onClick:()=>e.id&&X(e.id),className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-all duration-300",children:"删除"})]})]},e.id))})]})]})]})]})}),w&&k&&(0,r.jsx)(u,{image:k,onComplete:T,onCancel:()=>{N(!1),C(null)},aspectRatio:1})]})}}},function(e){e.O(0,[660,278,833,543,811,614,351,173,744],function(){return e(e.s=1918)}),_N_E=e.O()}]);