(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{55869:function(e,t,s){Promise.resolve().then(s.bind(s,50673))},50673:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(57437),a=s(2265),l=s(99376),n=s(71837),i=s(59604),o=s(29377),c=s(87310),d=s(20441),x=s(99950),m=s(69853),p=s(16093);function u(){(0,d.T)("笔记管理");let e=(0,l.useRouter)(),[t,s]=(0,a.useState)(null),[u,h]=(0,a.useState)([]),[g,b]=(0,a.useState)([]),[y,j]=(0,a.useState)(!0),[v,f]=(0,a.useState)("notes"),[N,w]=(0,a.useState)(null),[k,_]=(0,a.useState)(!1),[C,D]=(0,a.useState)({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),[S,F]=(0,a.useState)(null),[L,A]=(0,a.useState)(!1),[R,M]=(0,a.useState)({name:"",description:"",icon:"",sort_order:0}),[I,B]=(0,a.useState)({show:!1,type:"success",message:""}),[E,z]=(0,a.useState)(!1),[H,U]=(0,a.useState)(!1),[W,q]=(0,a.useState)(!1),[P,T]=(0,a.useState)({text:"",url:""}),[Z,O]=(0,a.useState)({alt:"",url:""}),[V,G]=(0,a.useState)(!1),[J,$]=(0,a.useState)(""),[X,Y]=(0,a.useState)("all"),[K,Q]=(0,a.useState)("all"),ee=(0,a.useRef)(null),[et,es]=(0,a.useState)(!1),[er,ea]=(0,a.useState)(null),[el,en]=(0,a.useState)(!1);(0,a.useEffect)(()=>{ei()},[]);let ei=async()=>{try{if(!localStorage.getItem("token")){e.push((0,m.V9)("login"));return}let t=await (0,n.tse)();s(t),await Promise.all([eo(),ec()])}catch(t){localStorage.removeItem("token"),localStorage.removeItem("user"),e.push((0,m.V9)("login"))}finally{j(!1)}},eo=async()=>{try{let e=await (0,n.rYZ)();if(e.success){let t=Array.isArray(e.data.notes)?e.data.notes:[];h(t)}}catch(e){B({show:!0,type:"error",message:"加载笔记失败"}),h([])}},ec=async()=>{try{let e=await (0,n._O5)();if(e.success){let t=Array.isArray(e.data)?e.data:[];b(t)}}catch(e){console.error("加载笔记分类失败:",e),b([])}},ed=e=>{let{name:t,type:s}=e.target,r=e.target.value;"checkbox"===s?r=e.target.checked:"sort_order"===t&&(r=parseInt(r)||0),D({...C,[t]:r})},ex=async e=>{e.preventDefault();try{let e={...C};(null==N?void 0:N.id)?(await (0,n.DRm)(N.id,e)).success&&(B({show:!0,type:"success",message:"笔记更新成功"}),await eo(),eg()):(await (0,n.TyW)({...e,is_published:!0})).success&&(B({show:!0,type:"success",message:"笔记创建成功"}),await eo(),eg())}catch(e){var t,s;B({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"操作失败"})}},em=async()=>{try{let e={...C,is_published:!1};(null==N?void 0:N.id)?(await (0,n.DRm)(N.id,e)).success&&(B({show:!0,type:"success",message:"草稿保存成功"}),await eo()):(await (0,n.TyW)(e)).success&&(B({show:!0,type:"success",message:"草稿保存成功"}),await eo())}catch(s){var e,t;B({show:!0,type:"error",message:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"草稿保存失败"})}},ep=async e=>{try{let t=u.find(t=>t.id===e);if(!t){B({show:!0,type:"error",message:"笔记不存在"});return}let s={...t,is_published:!0};(await (0,n.DRm)(e,s)).success&&(B({show:!0,type:"success",message:"笔记发布成功"}),await eo())}catch(e){var t,s;B({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"发布失败"})}},eu=e=>{w(e),D({title:e.title,content:e.content,summary:e.summary||"",category:e.category||"",tags:e.tags||"",password:e.password||"",sort_order:e.sort_order||0,is_pinned:e.is_pinned||!1,show_in_list:void 0===e.show_in_list||e.show_in_list,cover_image:e.cover_image||"",source_type:e.source_type||"none",source_url:e.source_url||"",source_text:e.source_text||""}),_(!0),f("editNote")},eh=async e=>{if(confirm("确定要删除这篇笔记吗？"))try{(await (0,n.ruA)(e)).success&&(B({show:!0,type:"success",message:"笔记删除成功"}),await eo())}catch(e){var t,s;B({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"删除失败"})}},eg=()=>{D({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),w(null),_(!1),z(!1),U(!1),q(!1),T({text:"",url:""}),O({alt:"",url:""}),f("notes"),en(!1)},eb=e=>{let{name:t,value:s}=e.target,r=s;"sort_order"===t&&(r=parseInt(s)||0),M({...R,[t]:r})},ey=async e=>{if(e.preventDefault(),!R.name.trim()){B({show:!0,type:"error",message:"分类名称不能为空"});return}try{(null==S?void 0:S.id)?(await (0,n.CCF)(S.id,R)).success&&(B({show:!0,type:"success",message:"分类更新成功"}),await ec(),ef()):(await (0,n.JPE)(R)).success&&(B({show:!0,type:"success",message:"分类添加成功"}),await ec(),ef())}catch(e){var t,s;B({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"操作失败"})}},ej=e=>{F(e),M({name:e.name,description:e.description||"",icon:e.icon||"",sort_order:e.sort_order||0}),A(!0)},ev=async e=>{if(confirm("确定要删除这个分类吗？如果有笔记使用此分类，将无法删除。"))try{(await (0,n.kX4)(e)).success&&(B({show:!0,type:"success",message:"分类删除成功"}),await ec())}catch(e){var t,s;B({show:!0,type:"error",message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"删除失败"})}},ef=()=>{M({name:"",description:"",icon:"",sort_order:0}),F(null),A(!1)},eN=e=>{let t=ee.current;if(!t)return;let s=t.selectionStart,r=t.selectionEnd;C.content.substring(s,r);let a=C.content.substring(0,s)+e+C.content.substring(r);D({...C,content:a}),setTimeout(()=>{t.focus(),t.setSelectionRange(s+e.length,s+e.length)},0)},ew=e=>{let{prefix:t,suffix:s,placeholder:r}={bold:{prefix:"**",suffix:"**",placeholder:"粗体文本"},italic:{prefix:"*",suffix:"*",placeholder:"斜体文本"},code:{prefix:"`",suffix:"`",placeholder:"代码"},quote:{prefix:"> ",suffix:"",placeholder:"引用文本"},list:{prefix:"- ",suffix:"",placeholder:"列表项"},numberedList:{prefix:"1. ",suffix:"",placeholder:"列表项"},h1:{prefix:"# ",suffix:"",placeholder:"一级标题"},h2:{prefix:"## ",suffix:"",placeholder:"二级标题"},h3:{prefix:"### ",suffix:"",placeholder:"三级标题"},strikethrough:{prefix:"~~",suffix:"~~",placeholder:"删除线文本"},hr:{prefix:"\n---\n",suffix:"",placeholder:""},codeblock:{prefix:"```javascript\n",suffix:"\n```",placeholder:'console.log("Hello World");'},table:{prefix:"| 列1 | 列2 | 列3 |\n| --- | --- | --- |\n| ",suffix:" | 内容 | 内容 |",placeholder:"内容"},tasklist:{prefix:"- [ ] ",suffix:"",placeholder:"待办事项"}}[e];eN("".concat(t).concat(r).concat(s))},ek=async e=>{let t=e.target.files;if(t&&0!==t.length){G(!0);try{let s=await (0,n.DGM)(t);if(s.success){let t=s.data.urls[0],r="![".concat("","](").concat(t,")");eN(r),B({show:!0,type:"success",message:"图片上传成功"}),e.target.value=""}}catch(e){var s,r;B({show:!0,type:"error",message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"图片上传失败"})}finally{G(!1)}}},e_=Array.from(new Set(u.map(e=>e.category).filter(Boolean))),eC=Array.from(new Set(u.flatMap(e=>e.tags?e.tags.split(",").map(e=>e.trim()).filter(Boolean):[]))),eD=u.filter(e=>{let t=""===J||e.title.toLowerCase().includes(J.toLowerCase())||e.content.toLowerCase().includes(J.toLowerCase())||e.tags&&e.tags.toLowerCase().includes(J.toLowerCase()),s="all"===X||"uncategorized"===X&&!e.category||e.category===X,r="all"===K||e.tags&&e.tags.split(",").map(e=>e.trim()).includes(K);return t&&s&&r}),eS=u.filter(e=>!e.is_published);return y?null:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[I.show&&(0,r.jsx)(x.Z,{message:I.message,type:I.type,onClose:()=>B({...I,show:!1})}),(0,r.jsx)("nav",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:(0,r.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>e.push((0,m.V9)("dashboard")),className:"text-gray-600 hover:text-gray-900",children:"← 返回"}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"笔记管理"})]})})})}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[(0,r.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,r.jsx)("button",{onClick:()=>f("notes"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("notes"===v?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"笔记管理"}),(0,r.jsx)("button",{onClick:()=>f("categories"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("categories"===v?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"分类管理"}),(0,r.jsx)("button",{onClick:()=>f("drafts"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("drafts"===v?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"草稿箱"}),(0,r.jsx)("button",{onClick:()=>{k||(D({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),w(null),z(!1),_(!0)),f("editNote")},className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("editNote"===v?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:N?"编辑笔记":"新建笔记"})]})}),"notes"===v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"card mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"搜索和筛选"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"关键词搜索"}),(0,r.jsx)("input",{type:"text",placeholder:"搜索标题、内容或标签...",value:J,onChange:e=>$(e.target.value),className:"input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"分类筛选"}),(0,r.jsxs)("select",{value:X,onChange:e=>Y(e.target.value),className:"input",children:[(0,r.jsx)("option",{value:"all",children:"所有分类"}),(0,r.jsx)("option",{value:"uncategorized",children:"未分类"}),e_.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"标签筛选"}),(0,r.jsxs)("select",{value:K,onChange:e=>Q(e.target.value),className:"input",children:[(0,r.jsx)("option",{value:"all",children:"所有标签"}),eC.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["找到 ",eD.length," 篇笔记"]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"我的笔记"}),0===eD.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"还没有创建任何笔记"}):(0,r.jsx)("div",{className:"space-y-4",children:eD.map(e=>(0,r.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 break-words",children:e.title||"(无标题)"}),e.is_pinned&&(0,r.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded flex-shrink-0",children:"置顶"}),e.category&&(0,r.jsxs)("span",{onClick:()=>Y(e.category),className:"inline-flex text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded cursor-pointer hover:bg-green-200 transition-colors flex-shrink-0",title:'筛选"'.concat(e.category,'"分类'),children:["分类: ",e.category]}),e.tags&&e.tags.split(",").map((e,t)=>(0,r.jsx)("span",{onClick:()=>Q(e.trim()),className:"inline-flex text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded cursor-pointer hover:bg-purple-200 transition-colors flex-shrink-0",title:'筛选"'.concat(e.trim(),'"标签'),children:e.trim()},t)),void 0!==e.sort_order&&e.sort_order>0&&(0,r.jsxs)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded flex-shrink-0",children:["排序: ",e.sort_order]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 break-words",children:e.summary||(e.content?e.content.substring(0,150)+"...":"暂无内容")})]}),(0,r.jsxs)("div",{className:"flex sm:flex-col gap-2 sm:ml-4 flex-shrink-0",children:[(0,r.jsx)("button",{onClick:()=>eu(e),className:"flex-1 sm:flex-initial px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50",children:"编辑"}),(0,r.jsx)("button",{onClick:()=>e.id&&eh(e.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded",children:"删除"})]})]})},e.id))})]})]}),"editNote"===v&&k&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"card mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:N?"编辑笔记":"新建笔记"}),N&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"|"}),(0,r.jsxs)("a",{href:C.password&&""!==C.password.trim()?"".concat(window.location.origin,"/note/").concat(N.id,"?password=").concat(encodeURIComponent(C.password)):"".concat(window.location.origin,"/note/").concat(N.id),target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 underline flex items-center gap-1 max-w-md truncate",title:C.password&&""!==C.password.trim()?"点击访问带密码的笔记链接":"点击访问笔记链接",children:[(0,r.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),C.password&&""!==C.password.trim()?"".concat(window.location.origin,"/note/").concat(N.id,"?password=").concat(encodeURIComponent(C.password)):"".concat(window.location.origin,"/note/").concat(N.id)]}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=C.password&&""!==C.password.trim()?"".concat(window.location.origin,"/note/").concat(N.id,"?password=").concat(encodeURIComponent(C.password)):"".concat(window.location.origin,"/note/").concat(N.id);navigator.clipboard.writeText(e),B({show:!0,type:"success",message:"链接已复制到剪贴板"})},className:"text-gray-500 hover:text-gray-700 flex-shrink-0",title:"复制链接",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsx)("button",{type:"button",onClick:()=>z(!E),className:"btn btn-secondary text-sm ".concat(E?"bg-primary-600 text-white":""),children:E?"编辑模式":"预览模式"})})]}),(0,r.jsxs)("form",{onSubmit:ex,className:"space-y-4",children:[!el&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["标题 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:C.title,onChange:ed,className:"input",placeholder:"笔记标题（必填）"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"内容"}),E?(0,r.jsx)("div",{className:"min-h-[300px] border border-gray-300 rounded-lg p-4 bg-white overflow-auto",children:C.content?(0,r.jsx)("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:(0,r.jsx)(i.UG,{remarkPlugins:[o.Z],rehypePlugins:[c.Z],components:{img:e=>{let{src:t,alt:s,...a}=e,l=t;return t&&t.startsWith("/uploads/")&&(l=(0,n.Jn$)(t)),(0,r.jsx)("img",{src:l,alt:s||"",className:"max-w-full h-auto rounded-lg shadow-md",style:{maxHeight:"400px",objectFit:"contain"},onError:e=>{e.target.style.display="none"},...a})},iframe:e=>{let{node:t,...s}=e;return(0,r.jsx)("div",{className:"iframe-container",children:(0,r.jsx)("iframe",{...s})})},pre:e=>{let{node:t,children:s,...a}=e;return(0,r.jsx)("pre",{className:"bg-code-block-bg text-code-block-text p-4 rounded-lg overflow-x-auto my-4",...a,children:s})},code:e=>{let{node:t,inline:s,className:a,children:l,...n}=e;return s?(0,r.jsx)("code",{className:"bg-code-bg text-code-text px-1.5 py-0.5 rounded text-sm font-mono",...n,children:l}):(0,r.jsx)("code",{className:"text-sm font-mono ".concat(a||""),...n,children:l})}},children:C.content})}):(0,r.jsxs)("div",{className:"text-center text-gray-500 py-16",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),(0,r.jsx)("p",{children:"输入内容后预览将在这里显示"})]})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 p-2 bg-gray-50 rounded-lg border border-gray-200 overflow-x-auto",children:(0,r.jsxs)("div",{className:"flex flex-nowrap gap-2 min-w-max",children:[(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)("button",{type:"button",onClick:()=>ew("h1"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"一级标题",children:"H1"}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("h2"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"二级标题",children:"H2"}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("h3"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"三级标题",children:"H3"})]}),(0,r.jsx)("div",{className:"border-l border-gray-300"}),(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)("button",{type:"button",onClick:()=>ew("bold"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"粗体",children:(0,r.jsx)("strong",{children:"B"})}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("italic"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"斜体",children:(0,r.jsx)("em",{children:"I"})}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("strikethrough"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"删除线",children:(0,r.jsx)("s",{children:"S"})}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("code"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"行内代码",children:"</>"}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("codeblock"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"代码块",children:"{}"})]}),(0,r.jsx)("div",{className:"border-l border-gray-300"}),(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)("button",{type:"button",onClick:()=>ew("quote"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"引用",children:'""'}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("list"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"无序列表",children:"•"}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("numberedList"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"有序列表",children:"1."}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("tasklist"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"任务列表",children:"☑"})]}),(0,r.jsx)("div",{className:"border-l border-gray-300"}),(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)("button",{type:"button",onClick:()=>U(!0),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"插入链接",children:"链接"}),(0,r.jsx)("button",{type:"button",onClick:()=>q(!0),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"插入图片",children:"图片"}),(0,r.jsxs)("label",{className:"cursor-pointer",children:[(0,r.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.gif,.webp,.svg",onChange:ek,disabled:V,className:"hidden",multiple:!0}),(0,r.jsx)("div",{className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 whitespace-nowrap",children:V?"上传中...":"上传图片"})]}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("table"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"插入表格",children:"表格"}),(0,r.jsx)("button",{type:"button",onClick:()=>ew("hr"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"分隔线",children:"―"})]}),(0,r.jsx)("div",{className:"border-l border-gray-300"}),(0,r.jsx)("button",{type:"button",onClick:()=>{(null==N?void 0:N.id)?(ea(N.id),es(!0)):alert("请先保存笔记后再管理网盘")},className:"px-2.5 py-1.5 text-xs bg-blue-50 border border-blue-300 rounded hover:bg-blue-100 text-blue-700 whitespace-nowrap",title:"管理网盘资源",children:"\uD83D\uDCC1 网盘"}),(0,r.jsx)("div",{className:"border-l border-gray-300"}),(0,r.jsx)("button",{type:"button",onClick:()=>en(!el),className:"px-2.5 py-1.5 text-xs border rounded whitespace-nowrap ".concat(el?"bg-orange-50 border-orange-300 text-orange-700 hover:bg-orange-100":"bg-white border-gray-300 text-gray-700 hover:bg-gray-100"),title:el?"退出全屏编辑":"全屏编辑",children:el?"\uD83D\uDCF1 退出全屏":"\uD83D\uDCF1 全屏编辑"})]})}),(0,r.jsx)("textarea",{ref:ee,id:"content",name:"content",rows:el?20:12,required:!0,value:C.content,onChange:ed,className:"input font-mono text-sm w-full ".concat(el?"min-h-[500px] text-base":"min-h-[300px]"),placeholder:"# 标题\\n\\n这里是你的笔记内容...\\n\\n- 支持列表\\n- 支持**粗体**\\n- 支持*斜体*\\n- 支持代码块\\n\\n```javascript\\nconsole.log('Hello World!');\\n```"})]})]}),!el&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"分类"}),(0,r.jsxs)("select",{id:"category",name:"category",value:C.category,onChange:ed,className:"input",children:[(0,r.jsx)("option",{value:"",children:"请选择分类（可选）"}),g.map(e=>(0,r.jsxs)("option",{value:e.name,children:[e.icon?"".concat(e.icon," "):"",e.name]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"标签"}),(0,r.jsx)("input",{id:"tags",name:"tags",type:"text",value:C.tags,onChange:ed,className:"input",placeholder:"多个标签用英文逗号分隔（可选）"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"summary",className:"block text-sm font-medium text-gray-700 mb-2",children:"笔记摘要"}),(0,r.jsx)("textarea",{id:"summary",name:"summary",rows:3,value:C.summary||"",onChange:ed,className:"input",placeholder:"输入笔记摘要（可选，留空则自动截取正文前150字）"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"\uD83D\uDCA1 摘要会显示在笔记列表中，帮助读者快速了解内容"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"访问密码"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{id:"password",name:"password",type:"text",value:C.password||"",onChange:ed,className:"input w-48",placeholder:"设置访问密码（可选）"}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e="abcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(3*Math.random())+4,s="";for(let r=0;r<t;r++)s+=e.charAt(Math.floor(Math.random()*e.length));D({...C,password:s})},className:"px-3 py-2 text-sm bg-blue-50 border border-blue-300 rounded-lg hover:bg-blue-100 text-blue-700 whitespace-nowrap",children:"\uD83C\uDFB2 随机生成"}),C.password&&(0,r.jsx)("button",{type:"button",onClick:()=>D({...C,password:""}),className:"px-3 py-2 text-sm bg-red-50 border border-red-300 rounded-lg hover:bg-red-100 text-red-700 whitespace-nowrap",children:"清除"})]}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"\uD83D\uDCA1 设置密码后，访客需要输入正确密码才能查看笔记内容"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"source_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"来源类型"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"source_type",value:"none",checked:"none"===C.source_type,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"不展示"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"source_type",value:"original",checked:"original"===C.source_type,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"原创"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"source_type",value:"reprint",checked:"reprint"===C.source_type,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"转载"})]})]}),"reprint"===C.source_type&&(0,r.jsxs)("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,r.jsx)("label",{htmlFor:"source_text",className:"block text-sm font-medium text-gray-700 mb-2",children:"文章来源"}),(0,r.jsx)("textarea",{id:"source_text",name:"source_text",rows:3,value:C.source_text||"",onChange:ed,className:"input w-full",placeholder:"请输入文章来源信息，可以是网址、作者名、平台名称等..."}),(0,r.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"\uD83D\uDCA1 转载时请务必注明来源，支持输入网址、作者名、平台名称等任意文本"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"cover_image",className:"block text-sm font-bold text-gray-700 mb-2",children:"封面图"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[C.cover_image&&(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-32 h-32 rounded-lg overflow-hidden bg-gray-100 border-2 border-gray-200",children:(0,r.jsx)("img",{src:(0,n.Jn$)(C.cover_image),alt:"封面预览",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})})}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("input",{id:"cover_image",name:"cover_image",type:"text",value:C.cover_image||"",onChange:ed,className:"input",placeholder:"输入封面图URL（可选）"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{id:"cover-upload",type:"file",accept:"image/*",onChange:async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(s.size>5242880){B({show:!0,type:"error",message:"图片大小不能超过5MB"});return}G(!0);try{let t=e.target.files,s=await (0,n.DGM)(t);s.success&&s.data&&s.data.urls&&s.data.urls.length>0&&(D({...C,cover_image:s.data.urls[0]}),B({show:!0,type:"success",message:"封面图上传成功"}))}catch(e){B({show:!0,type:"error",message:"封面图上传失败"})}finally{G(!1),e.target.value=""}}},className:"hidden"}),(0,r.jsx)("label",{htmlFor:"cover-upload",className:"px-3 py-2 text-sm bg-blue-50 border border-blue-300 rounded-lg hover:bg-blue-100 text-blue-700 cursor-pointer ".concat(V?"opacity-50 cursor-not-allowed":""),children:V?"上传中...":"\uD83D\uDCC1 选择图片"}),C.cover_image&&(0,r.jsx)("button",{type:"button",onClick:()=>D({...C,cover_image:""}),className:"px-3 py-2 text-sm bg-red-50 border border-red-300 rounded-lg hover:bg-red-100 text-red-700",children:"\uD83D\uDDD1️ 删除"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 封面图将在笔记列表中显示（支持jpg、png、gif、webp，建议尺寸1:1，最大5MB）"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"is_pinned",name:"is_pinned",type:"checkbox",checked:C.is_pinned,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500 focus:ring-2"}),(0,r.jsx)("label",{htmlFor:"is_pinned",className:"ml-2 text-sm font-medium text-gray-700",children:"置顶笔记"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"show_in_list",name:"show_in_list",type:"checkbox",checked:C.show_in_list,onChange:ed,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500 focus:ring-2"}),(0,r.jsx)("label",{htmlFor:"show_in_list",className:"ml-2 text-sm font-medium text-gray-700",children:"在列表中展示"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"sort_order",className:"block text-sm font-medium text-gray-700 mb-2",children:"排序权重"}),(0,r.jsx)("input",{id:"sort_order",name:"sort_order",type:"number",value:C.sort_order,onChange:ed,className:"input",placeholder:"数字越大越靠前"})]})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:N?"更新并发布":"创建"}),(0,r.jsx)("button",{type:"button",onClick:async e=>{e.preventDefault(),await em()},className:"btn btn-secondary",children:"保存草稿"}),(0,r.jsx)("button",{type:"button",onClick:eg,className:"btn btn-secondary",children:"取消"})]})]})]})]}),H&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"插入链接"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"链接文本"}),(0,r.jsx)("input",{type:"text",value:P.text,onChange:e=>T({...P,text:e.target.value}),className:"input",placeholder:"链接显示文本"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"链接地址"}),(0,r.jsx)("input",{type:"url",value:P.url,onChange:e=>T({...P,url:e.target.value}),className:"input",placeholder:"https://example.com"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,r.jsx)("button",{onClick:()=>{if(!P.text||!P.url){alert("请填写链接文本和URL");return}eN("[".concat(P.text,"](").concat(P.url,")")),U(!1),T({text:"",url:""})},className:"btn btn-primary flex-1",children:"插入"}),(0,r.jsx)("button",{onClick:()=>U(!1),className:"btn btn-secondary",children:"取消"})]})]})}),W&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"插入图片"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"图片描述（可选）"}),(0,r.jsx)("input",{type:"text",value:Z.alt,onChange:e=>O({...Z,alt:e.target.value}),className:"input",placeholder:"图片描述"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"图片地址"}),(0,r.jsx)("input",{type:"url",value:Z.url,onChange:e=>O({...Z,url:e.target.value}),className:"input",placeholder:"https://example.com/image.jpg"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,r.jsx)("button",{onClick:()=>{if(!Z.url){alert("请填写图片URL");return}let e=Z.alt||"";eN("![".concat(e,"](").concat(Z.url,")")),q(!1),O({alt:"",url:""})},className:"btn btn-primary flex-1",children:"插入"}),(0,r.jsx)("button",{onClick:()=>q(!1),className:"btn btn-secondary",children:"取消"})]})]})})]}),"editNote"===v&&!k&&(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"text-6xl mb-4 text-gray-300",children:"\uD83D\uDCDD"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:N?"正在编辑笔记":"准备创建新笔记"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:N?'您正在编辑一篇笔记。如需返回笔记列表，请点击左侧的"笔记管理"选项卡。':'点击"新建笔记"选项卡开始创建您的第一篇笔记，或从"笔记管理"选项卡中选择一篇笔记进行编辑。'}),!N&&(0,r.jsx)("button",{onClick:()=>{D({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),w(null),z(!1),_(!0)},className:"btn btn-primary",children:"开始创建笔记"})]})}),"drafts"===v&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"草稿箱"}),0===eS.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"还没有保存任何草稿"}):(0,r.jsx)("div",{className:"space-y-4",children:eS.map(e=>(0,r.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 break-words",children:e.title||"(无标题)"}),(0,r.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded flex-shrink-0",children:"草稿"}),e.category&&(0,r.jsxs)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded flex-shrink-0",children:["分类: ",e.category]}),e.tags&&e.tags.split(",").map((e,t)=>(0,r.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded flex-shrink-0",children:e.trim()},t))]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 break-words",children:e.summary||(e.content?e.content.substring(0,150)+"...":"暂无内容")})]}),(0,r.jsxs)("div",{className:"flex sm:flex-col gap-2 sm:ml-4 flex-shrink-0",children:[(0,r.jsx)("button",{onClick:()=>eu(e),className:"flex-1 sm:flex-initial px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50",children:"编辑"}),(0,r.jsx)("button",{onClick:()=>e.id&&ep(e.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",children:"发布"}),(0,r.jsx)("button",{onClick:()=>e.id&&eh(e.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded",children:"删除"})]})]})},e.id))})]})}),"categories"===v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("button",{onClick:()=>A(!L),className:"btn btn-primary",children:L?"取消":"+ 添加分类"})}),L&&(0,r.jsxs)("div",{className:"card mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:S?"编辑分类":"添加分类"}),(0,r.jsxs)("form",{onSubmit:ey,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["分类名称 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"name",value:R.name,onChange:eb,className:"input",placeholder:"例如：技术笔记",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"分类描述"}),(0,r.jsx)("textarea",{name:"description",value:R.description,onChange:eb,rows:3,className:"input",placeholder:"分类的详细描述"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"分类图标"}),(0,r.jsx)("input",{type:"text",name:"icon",value:R.icon,onChange:eb,className:"input",placeholder:"例如：\uD83D\uDCDD 或 emoji 表情"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"可以使用 emoji 表情作为图标"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"排序顺序"}),(0,r.jsx)("input",{type:"number",name:"sort_order",value:R.sort_order,onChange:eb,className:"input",placeholder:"数字越小越靠前"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:S?"更新":"添加"}),(0,r.jsx)("button",{type:"button",onClick:ef,className:"btn btn-secondary",children:"取消"})]})]})]}),(0,r.jsxs)("div",{className:"card overflow-hidden",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 px-6 pt-6",children:"分类列表"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"图标"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"名称"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"描述"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"排序"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===g.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"暂无分类数据"})}):g.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-2xl",children:e.icon||"\uD83D\uDCC1"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.description||"-"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.sort_order}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>ej(e),className:"text-primary-600 hover:text-primary-900 mr-4",children:"编辑"}),(0,r.jsx)("button",{onClick:()=>e.id&&ev(e.id),className:"text-red-600 hover:text-red-900",children:"删除"})]})]},e.id))})]})})]})]})]}),er&&(0,r.jsx)(p.Z,{isOpen:et,onClose:()=>es(!1),noteId:er,isAdmin:!0})]})}}},function(e){e.O(0,[660,278,833,543,811,14,715,701,284,268,513,822,557,787,548,174,362,153,351,744],function(){return e(e.s=55869)}),_N_E=e.O()}]);