(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(247167);var t=e.i(843476),r=e.i(271645),s=e.i(231178),l=e.i(947414),a=e.i(674008),i=e.i(821476),n=e.i(772846),o=r,c=e.i(737806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,n.isHTMLElement)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:s,anchorX:l,root:a}){let i=(0,o.useId)(),n=(0,o.useRef)(null),m=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,o.useContext)(c.MotionConfigContext),x=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=d(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():d(e[t],null)}}}}(...e),e)}(n,e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:o,right:c}=m.current;if(s||!n.current||!e||!t)return;let d="left"===l?`left: ${o}`:`right: ${c}`;n.current.dataset.motionPopId=i;let u=document.createElement("style");h&&(u.nonce=h);let x=a??document.head;return x.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            top: ${r}px !important;
          }
        `),()=>{x.contains(u)&&x.removeChild(u)}},[s]),(0,t.jsx)(u,{isPresent:s,childRef:n,sizeRef:m,children:o.cloneElement(e,{ref:x})})}let h=({children:e,initial:s,isPresent:a,onExitComplete:n,custom:o,presenceAffectsLayout:c,mode:d,anchorX:u,root:h})=>{let p=(0,l.useConstant)(x),b=(0,r.useId)(),f=!0,g=(0,r.useMemo)(()=>(f=!1,{id:b,initial:s,isPresent:a,custom:o,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;n&&n()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[a,p,n]);return c&&f&&(g={...g}),(0,r.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[a]),r.useEffect(()=>{a||p.size||!n||n()},[a]),"popLayout"===d&&(e=(0,t.jsx)(m,{isPresent:a,anchorX:u,root:h,children:e})),(0,t.jsx)(i.PresenceContext.Provider,{value:g,children:e})};function x(){return new Map}var p=e.i(464978);let b=e=>e.key||"";function f(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:i,initial:n=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:m="left",root:x})=>{let[g,y]=(0,p.usePresence)(u),w=(0,r.useMemo)(()=>f(e),[e]),v=u&&!g?[]:w.map(b),j=(0,r.useRef)(!0),N=(0,r.useRef)(w),C=(0,l.useConstant)(()=>new Map),[k,S]=(0,r.useState)(w),[E,O]=(0,r.useState)(w);(0,a.useIsomorphicLayoutEffect)(()=>{j.current=!1,N.current=w;for(let e=0;e<E.length;e++){let t=b(E[e]);v.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[E,v.length,v.join("-")]);let M=[];if(w!==k){let e=[...w];for(let t=0;t<E.length;t++){let r=E[t],s=b(r);v.includes(s)||(e.splice(t,0,r),M.push(r))}return"wait"===d&&M.length&&(e=M),O(f(e)),S(w),null}let{forceRender:T}=(0,r.useContext)(s.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:E.map(e=>{let r=b(e),s=(!u||!!g)&&(w===E||v.includes(r));return(0,t.jsx)(h,{isPresent:s,initial:(!j.current||!!n)&&void 0,custom:i,presenceAffectsLayout:c,mode:d,root:x,onExitComplete:s?void 0:()=>{if(!C.has(r))return;C.set(r,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(T?.(),O(N.current),u&&y?.(),o&&o())},anchorX:m,children:e},r)})})};e.s(["AnimatePresence",()=>g],88653)},996433,e=>{"use strict";var t=e.i(843476),r=e.i(95987),s=e.i(975157);function l({className:e=""}){let{settings:l}=(0,r.useSettings)(),a=l.backgroundImage||"",i=l.backgroundOpacity||"0.5";if(!a)return null;let n=(0,s.getApiBaseUrl)(),o=a.startsWith("http")?a:`${n}${a}`;return(0,t.jsx)("div",{className:`absolute inset-0 z-0 pointer-events-none ${e}`,style:{backgroundImage:`url(${o})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:parseFloat(i)}})}e.s(["default",()=>l])},157164,e=>{"use strict";var t=e.i(843476),r=e.i(271645);let s="QXJjaGl0ZWN0dXJhbCBkcml2ZXIgaXMgYmFzZWQgb24g",l="WHMtYmxvZy4=",a=e=>{try{return atob(e)}catch{return""}};function i(){let[e,i]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=setTimeout(()=>{let e,t;e=a(s),t=a(l),e.length>0&&t.includes("Xs-blog")&&(i(a(s)),o(a(l)),d(a("aHR0cHM6Ly9naXRodWIuY29tL3N1MTY4ODgvWHMtYmxvZw==")),m(!0))},100);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{document.querySelector("[data-copyright]")},5e3);return()=>clearInterval(e)},[u]);let h=async()=>{try{if(localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let t=e.split("=")[0].trim();document.cookie=`${t}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),"caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}"indexedDB"in window&&(await indexedDB.databases?.()||[]).forEach(e=>{e.name&&indexedDB.deleteDatabase(e.name)}),alert("清理成功全部数据！"),window.location.reload()}catch(e){alert("清理成功全部数据！"),window.location.reload()}};return u&&e?(0,t.jsxs)("div",{"data-copyright":"true",className:"text-[10px] md:text-xs text-gray-500 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},onContextMenu:e=>e.preventDefault(),children:[(0,t.jsx)("span",{onDoubleClick:h,style:{cursor:"default"},children:e}),(0,t.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:text-primary-600 transition-colors",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},children:n})]}):null}e.s(["default",()=>i])},426261,e=>{"use strict";var t=e.i(271645),r=e.i(95987);function s({forceNoIndex:e=!1,customTitle:s}){let{settings:l}=(0,r.useSettings)(),a="true"===l.allowSEO;return(0,t.useEffect)(()=>{if(s)document.title=s;else{let e=l.siteTitle||"",t=l.siteSubtitle||"";e&&(document.title=t?`${e} - ${t}`:e)}},[l.siteTitle,l.siteSubtitle,s]),(0,t.useEffect)(()=>{if(e||!a){let e=document.querySelector('meta[name="robots"]');e||((e=document.createElement("meta")).name="robots",document.head.appendChild(e)),e.content="noindex, nofollow, noarchive, nosnippet, noimageindex";let t=document.querySelector('meta[name="googlebot"]');t||((t=document.createElement("meta")).name="googlebot",document.head.appendChild(t)),t.content="noindex, nofollow";let r=document.querySelector('meta[http-equiv="X-Robots-Tag"]');r||((r=document.createElement("meta")).httpEquiv="X-Robots-Tag",document.head.appendChild(r)),r.content="noindex, nofollow"}else{let e=document.querySelector('meta[name="robots"]'),t=document.querySelector('meta[name="googlebot"]'),r=document.querySelector('meta[http-equiv="X-Robots-Tag"]');e&&e.remove(),t&&t.remove(),r&&r.remove()}},[e,a]),null}e.s(["default",()=>s])},75505,e=>{"use strict";let t=(0,e.i(475254).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);e.s(["FolderOpen",()=>t],75505)},809934,e=>{"use strict";var t=e.i(271645);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var s,l,a;s=e,l=t,a=r[t],l in s?Object.defineProperty(s,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[l]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class a extends t.default.Component{constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})):this.reCalculateColumnCount()}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let r=1/0,s=t.default||2;for(let l in t){let a=parseInt(l);a>0&&e<=a&&a<r&&(r=a,s=t[l])}s=Math.max(1,parseInt(s)||1),this.state.columnCount!==s&&this.setState({columnCount:s})}itemsInColumns(){let e=this.state.columnCount,r=Array(e),s=t.default.Children.toArray(this.props.children);for(let t=0;t<s.length;t++){let l=t%e;r[l]||(r[l]=[]),r[l].push(s[t])}return r}renderColumns(){let{column:e,columnAttrs:s={},columnClassName:a}=this.props,i=this.itemsInColumns(),n=`${100/i.length}%`,o=a;o&&"string"!=typeof o&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===o&&(o="my-masonry-grid_column"));let c=l(l(l({},e),s),{},{style:l(l({},s.style),{},{width:n}),className:o});return i.map((e,s)=>t.default.createElement("div",r({},c,{key:s}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:s,breakpointCols:l,columnClassName:a,columnAttrs:i,column:n,className:o}=e,c=function(e,t){if(null==e)return{};var r,s,l=function(e,t){if(null==e)return{};var r,s,l={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),d=o;return"string"!=typeof o&&(this.logDeprecated('The property "className" requires a string'),void 0===o&&(d="my-masonry-grid")),t.default.createElement("div",r({},c,{className:d}),this.renderColumns())}}a.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},e.s(["default",0,a])},664659,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],664659)},463059,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],463059)},373375,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],373375)},554212,520354,e=>{"use strict";var t=e.i(475254);let r=(0,t.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);e.s(["ZoomIn",()=>r],554212);let s=(0,t.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);e.s(["ZoomOut",()=>s],520354)},440160,e=>{"use strict";let t=(0,e.i(475254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],440160)},473708,e=>{"use strict";let t=(0,e.i(475254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],473708)},270756,e=>{"use strict";let t=(0,e.i(475254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],270756)},286536,77705,e=>{"use strict";var t=e.i(475254);let r=(0,t.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>r],286536);let s=(0,t.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>s],77705)},946848,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(174080),l=e.i(846932),a=e.i(88653),i=e.i(37727),n=e.i(373375),o=e.i(463059),c=e.i(554212),d=e.i(520354),u=e.i(440160),m=e.i(270756),h=e.i(286536),x=e.i(77705),p=e.i(209165),b=e.i(975157);function f({galleryId:e,isOpen:f,onClose:g}){let[y,w]=(0,r.useState)(null),[v,j]=(0,r.useState)(0),[N,C]=(0,r.useState)(!0),[k,S]=(0,r.useState)(null),[E,O]=(0,r.useState)(1),[M,T]=(0,r.useState)(!1),[P,D]=(0,r.useState)(""),[F,$]=(0,r.useState)(""),[A,L]=(0,r.useState)(!1),[R,z]=(0,r.useState)(!1),[I,W]=(0,r.useState)(!1),[X,q]=(0,r.useState)({x:0,y:0}),[U,B]=(0,r.useState)(!1),Y=(0,r.useRef)({x:0,y:0});(0,r.useRef)({x:0,y:0});let[H,Z]=(0,r.useState)(null),[_,G]=(0,r.useState)(1),[V,J]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null),[ee,et]=(0,r.useState)(!1),er=(0,r.useRef)(null),es=(0,r.useRef)([]);(0,r.useEffect)(()=>{let e=()=>{W(window.innerWidth<768||"ontouchstart"in window)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{f&&e&&ec()},[f,e]),(0,r.useEffect)(()=>(f?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[f]),(0,r.useEffect)(()=>{if(er.current&&es.current[v]){let e=er.current,t=es.current[v];if(t){let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),l=s.left-r.left+e.scrollLeft,a=l+s.width,i=r.width;if(l<e.scrollLeft||a>e.scrollLeft+i){let t=l-i/2+s.width/2;e.scrollTo({left:Math.max(0,t),behavior:"smooth"})}}}},[v]),(0,r.useEffect)(()=>{if(!f)return;let e=e=>{"Escape"===e.key?g():"ArrowLeft"===e.key?em():"ArrowRight"===e.key?eu():"+"===e.key||"="===e.key?ex():"-"===e.key&&ep()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,v,E,y]);let el=(0,r.useCallback)(e=>{if(I)return;e.preventDefault();let t=e.deltaY>0?-.1:.1;O(e=>{let r=Math.min(Math.max(e+t,.5),3);return r<=1&&q({x:0,y:0}),r})},[I]),ea=(0,r.useCallback)(e=>{I||E<=1||(e.preventDefault(),B(!0),Y.current={x:e.clientX-X.x,y:e.clientY-X.y})},[I,E,X]),ei=(0,r.useCallback)(e=>{!U||I||q({x:e.clientX-Y.current.x,y:e.clientY-Y.current.y})},[U,I]),en=(0,r.useCallback)(()=>{B(!1)},[]),eo=e=>{if(e.length<2)return 0;let t=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+r*r)},ec=async t=>{C(!0),S(null);try{let r=await (0,p.getGallery)(e,t);r.success?(w(r.data),T(!1),$("")):r.requirePassword?T(!0):S(r.message||"加载图册失败")}catch(e){e.response?.status===401?e.response?.data?.requirePassword?T(!0):(T(!0),$("密码错误")):S("加载图册失败")}finally{C(!1)}},ed=async e=>{if(e.preventDefault(),!P.trim())return void $("请输入密码");z(!0),$("");try{await ec(P)}catch(e){}finally{z(!1)}},eu=()=>{y&&0!==y.images.length&&(j(e=>(e+1)%y.images.length),eh())},em=()=>{y&&0!==y.images.length&&(j(e=>(e-1+y.images.length)%y.images.length),eh())},eh=()=>{O(1),q({x:0,y:0})},ex=()=>{O(e=>Math.min(e+.25,3))},ep=()=>{O(e=>{let t=Math.max(e-.25,.5);return t<=1&&q({x:0,y:0}),t})},eb=()=>{if(!y||0===y.images.length)return;let e=y.images[v],t=(0,b.getFileUrl)(e.path),r=document.createElement("a");r.href=t,r.download=e.filename,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)},ef=()=>{O(1),q({x:0,y:0}),j(0),w(null),T(!1),D(""),$(""),g()};if(!f)return null;y&&y.images.length;let eg=(0,t.jsx)(a.AnimatePresence,{children:(0,t.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] bg-black",style:{touchAction:"none",overscrollBehavior:"none",height:"100dvh"},onClick:ef,children:(0,t.jsx)("div",{className:"gallery-viewer-container relative w-full overflow-hidden flex flex-col",style:{touchAction:"none",overscrollBehavior:"none",height:"100dvh"},onClick:e=>e.stopPropagation(),children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-shrink-0 z-20 bg-black/80 px-2 flex items-center justify-end",style:{height:"44px"},children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!N&&!M&&y&&y.images.length>0&&(0,t.jsx)("button",{onClick:eb,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"下载当前图片",children:(0,t.jsx)(u.Download,{className:"w-5 h-5 text-white"})}),!M&&(0,t.jsx)("button",{onClick:ef,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"关闭",children:(0,t.jsx)(i.X,{className:"w-5 h-5 text-white"})})]})}),(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center overflow-hidden",style:{touchAction:"none",overscrollBehavior:"none",minHeight:0},children:[N&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent mb-4"}),(0,t.jsx)("p",{className:"text-white",children:"加载中..."})]}),k&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-red-400 text-lg mb-4",children:k}),(0,t.jsx)("button",{onClick:ef,className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:"关闭"})]}),M&&(0,t.jsxs)(l.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},className:"w-full max-w-sm bg-bg-secondary rounded-xl p-5 shadow-xl border border-border-primary relative mx-4",children:[(0,t.jsx)("button",{onClick:ef,className:"absolute top-4 right-4 p-1.5 text-text-tertiary hover:text-text-primary hover:bg-bg-tertiary rounded-lg transition-colors",title:"关闭",disabled:R,children:(0,t.jsx)(i.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center mb-5",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)(m.Lock,{className:"w-6 h-6 text-primary-600"})}),(0,t.jsx)("h3",{className:"text-base font-bold text-text-primary mb-1",children:"需要密码访问"}),(0,t.jsx)("p",{className:"text-xs text-text-tertiary",children:"请输入密码查看图册内容"})]}),(0,t.jsxs)("form",{onSubmit:ed,className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:A?"text":"password",name:"gallery-access-password",value:P,onChange:e=>{D(e.target.value),$("")},placeholder:"请输入密码",className:`w-full px-3 py-2.5 pr-10 text-sm border ${F?"border-red-500":"border-border-primary"} rounded-lg bg-bg-tertiary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent`,autoFocus:!0,autoComplete:"off",disabled:R}),(0,t.jsx)("button",{type:"button",onClick:()=>L(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors",children:A?(0,t.jsx)(x.EyeOff,{className:"w-4 h-4"}):(0,t.jsx)(h.Eye,{className:"w-4 h-4"})})]}),F&&(0,t.jsx)("p",{className:"mt-1.5 text-xs text-red-500",children:F})]}),(0,t.jsx)("button",{type:"submit",className:"w-full px-3 py-2 text-sm bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors disabled:opacity-50",disabled:R||!P,children:R?"验证中...":"确认"})]})]}),!N&&!k&&!M&&y&&y.images.length>0&&(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",style:{cursor:E>1?U?"grabbing":"grab":"default",touchAction:"none",overscrollBehavior:"none"},onTouchStart:e=>{if(2===e.touches.length)Z(eo(e.touches)),G(E),et(!1);else if(1===e.touches.length){let t=e.touches[0];E>1?(B(!0),Y.current={x:t.clientX-X.x,y:t.clientY-X.y}):(J({x:t.clientX,y:t.clientY}),Q(null),et(!0))}},onTouchMove:e=>{if(2===e.touches.length&&H){let t=Math.min(Math.max(_*(eo(e.touches)/H),.5),3);O(t),t<=1&&q({x:0,y:0})}else if(1===e.touches.length){let t=e.touches[0];U&&E>1?q({x:t.clientX-Y.current.x,y:t.clientY-Y.current.y}):ee&&E<=1&&Q({x:t.clientX,y:t.clientY})}},onTouchEnd:()=>{if(Z(null),B(!1),ee&&V&&K&&E<=1){let e=V.x-K.x;Math.abs(e)>Math.abs(V.y-K.y)&&Math.abs(e)>50&&(e>0?eu():em())}et(!1),J(null),Q(null)},children:[(0,t.jsx)(l.motion.img,{src:(0,b.getFileUrl)(y.images[v].path),alt:y.images[v].filename,className:"select-none",draggable:!1,style:{transform:`scale(${E}) translate(${X.x/E}px, ${X.y/E}px)`,transition:U?"none":"transform 0.2s ease-out",maxHeight:"100%",maxWidth:"100%",width:"100%",objectFit:"contain",touchAction:"none"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},v),y.images.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:em,className:"absolute top-1/2 -translate-y-1/2 left-1 p-2 bg-black/40 hover:bg-black/60 rounded-full transition-colors backdrop-blur-sm z-10",title:"上一张",children:(0,t.jsx)(n.ChevronLeft,{className:"w-5 h-5 text-white/80"})}),(0,t.jsx)("button",{onClick:eu,className:"absolute top-1/2 -translate-y-1/2 right-1 p-2 bg-black/40 hover:bg-black/60 rounded-full transition-colors backdrop-blur-sm z-10",title:"下一张",children:(0,t.jsx)(o.ChevronRight,{className:"w-5 h-5 text-white/80"})})]})]}),!N&&!k&&!M&&y&&0===y.images.length&&(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)("p",{className:"text-lg mb-4",children:"该图册暂无图片"}),(0,t.jsx)("button",{onClick:ef,className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"关闭"})]})]}),!N&&!k&&!M&&y&&y.images.length>1&&(0,t.jsxs)("div",{className:"flex-shrink-0 z-20 bg-black/80 px-2 py-2",children:[(0,t.jsx)("div",{className:"flex justify-center mb-2",children:(0,t.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-full px-3 py-1",children:(0,t.jsxs)("span",{className:"text-white text-sm font-medium",children:[v+1," / ",y.images.length]})})}),(0,t.jsx)("div",{className:"flex justify-center items-center",children:(0,t.jsx)("div",{ref:er,className:"flex gap-2 overflow-x-auto hide-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:y.images.map((e,r)=>(0,t.jsx)("button",{ref:e=>{es.current[r]=e},onClick:()=>{j(r),eh()},className:`flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all ${r===v?"border-primary-500 opacity-100":"border-white/20 opacity-50 hover:opacity-75"}`,style:{width:"56px",height:"56px"},children:(0,t.jsx)("img",{src:(0,b.getFileUrl)(e.path),alt:e.filename,className:"w-full h-full object-cover",draggable:!1})},e.id))})})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-shrink-0 z-20 bg-black/80 px-2 flex items-center",style:{height:"56px"},children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"w-10"}),(0,t.jsx)("div",{className:"flex-1 flex justify-center",children:!N&&!M&&y&&y.images.length>1&&(0,t.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-full px-3 py-1",children:(0,t.jsxs)("span",{className:"text-white text-sm font-medium",children:[v+1," / ",y.images.length]})})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!N&&!M&&y&&y.images.length>0&&(0,t.jsx)("button",{onClick:eb,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"下载当前图片",children:(0,t.jsx)(u.Download,{className:"w-5 h-5 text-white"})}),!M&&(0,t.jsx)("button",{onClick:ef,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"关闭",children:(0,t.jsx)(i.X,{className:"w-5 h-5 text-white"})})]})]})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center overflow-hidden",style:{touchAction:"none",overscrollBehavior:"none"},children:[N&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent mb-4"}),(0,t.jsx)("p",{className:"text-white",children:"加载中..."})]}),k&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-red-400 text-lg mb-4",children:k}),(0,t.jsx)("button",{onClick:ef,className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:"关闭"})]}),M&&(0,t.jsxs)(l.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},className:"w-full max-w-sm bg-bg-secondary rounded-xl p-5 shadow-xl border border-border-primary relative mx-4",children:[(0,t.jsx)("button",{onClick:ef,className:"absolute top-4 right-4 p-1.5 text-text-tertiary hover:text-text-primary hover:bg-bg-tertiary rounded-lg transition-colors",title:"关闭",disabled:R,children:(0,t.jsx)(i.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center mb-5",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)(m.Lock,{className:"w-6 h-6 text-primary-600"})}),(0,t.jsx)("h3",{className:"text-base font-bold text-text-primary mb-1",children:"需要密码访问"}),(0,t.jsx)("p",{className:"text-xs text-text-tertiary",children:"请输入密码查看图册内容"})]}),(0,t.jsxs)("form",{onSubmit:ed,className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:A?"text":"password",name:"gallery-access-password",value:P,onChange:e=>{D(e.target.value),$("")},placeholder:"请输入密码",className:`w-full px-3 py-2.5 pr-10 text-sm border ${F?"border-red-500":"border-border-primary"} rounded-lg bg-bg-tertiary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent`,autoFocus:!0,autoComplete:"off",disabled:R}),(0,t.jsx)("button",{type:"button",onClick:()=>L(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors",children:A?(0,t.jsx)(x.EyeOff,{className:"w-4 h-4"}):(0,t.jsx)(h.Eye,{className:"w-4 h-4"})})]}),F&&(0,t.jsx)("p",{className:"mt-1.5 text-xs text-red-500",children:F})]}),(0,t.jsx)("button",{type:"submit",className:"w-full px-3 py-2 text-sm bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors disabled:opacity-50",disabled:R||!P,children:R?"验证中...":"确认"})]})]}),!N&&!k&&!M&&y&&y.images.length>0&&(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",style:{cursor:E>1?U?"grabbing":"grab":"default",touchAction:"none",overscrollBehavior:"none",padding:"20px 80px"},onWheel:el,onMouseDown:ea,onMouseMove:ei,onMouseUp:en,onMouseLeave:en,children:[(0,t.jsx)(l.motion.img,{src:(0,b.getFileUrl)(y.images[v].path),alt:y.images[v].filename,className:"select-none",draggable:!1,style:{transform:`scale(${E}) translate(${X.x/E}px, ${X.y/E}px)`,transition:U?"none":"transform 0.2s ease-out",maxHeight:"100%",maxWidth:"100%",objectFit:"contain",touchAction:"none"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},v),y.images.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:em,className:"absolute top-1/2 -translate-y-1/2 p-3 bg-black/40 hover:bg-black/60 rounded-full transition-colors backdrop-blur-sm z-10 left-4 lg:left-8",title:"上一张 (←)",children:(0,t.jsx)(n.ChevronLeft,{className:"w-6 h-6 text-white/80"})}),(0,t.jsx)("button",{onClick:eu,className:"absolute top-1/2 -translate-y-1/2 p-3 bg-black/40 hover:bg-black/60 rounded-full transition-colors backdrop-blur-sm z-10 right-4 lg:right-8",title:"下一张 (→)",children:(0,t.jsx)(o.ChevronRight,{className:"w-6 h-6 text-white/80"})})]})]}),!N&&!k&&!M&&y&&0===y.images.length&&(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)("p",{className:"text-lg mb-4",children:"该图册暂无图片"}),(0,t.jsx)("button",{onClick:ef,className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"关闭"})]})]}),!N&&!k&&!M&&y&&y.images.length>0&&(0,t.jsxs)("div",{className:"flex-shrink-0 z-20 bg-black/80",children:[(0,t.jsx)("div",{className:"flex justify-center py-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 bg-white/10 backdrop-blur-sm rounded-full px-3 py-1.5",children:[(0,t.jsx)("button",{onClick:ep,className:"p-1 hover:bg-white/10 rounded-full transition-colors",title:"缩小",children:(0,t.jsx)(d.ZoomOut,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("span",{className:"text-white text-xs min-w-[50px] text-center font-medium",children:[Math.round(100*E),"%"]}),(0,t.jsx)("button",{onClick:ex,className:"p-1 hover:bg-white/10 rounded-full transition-colors",title:"放大",children:(0,t.jsx)(c.ZoomIn,{className:"w-4 h-4 text-white"})})]})}),y.images.length>1&&(0,t.jsx)("div",{className:"px-2 pb-2 pt-1",children:(0,t.jsx)("div",{className:"flex justify-center max-w-7xl mx-auto h-full items-center",children:(0,t.jsx)("div",{ref:er,className:"flex gap-2 overflow-x-auto hide-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:y.images.map((e,r)=>(0,t.jsx)("button",{ref:e=>{es.current[r]=e},onClick:()=>{j(r),eh()},className:`flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all ${r===v?"border-primary-500 opacity-100":"border-white/20 opacity-50 hover:opacity-75"}`,style:{width:"64px",height:"64px"},children:(0,t.jsx)("img",{src:(0,b.getFileUrl)(e.path),alt:e.filename,className:"w-full h-full object-cover",draggable:!1})},e.id))})})})]})]})})})});return(0,s.createPortal)(eg,document.body)}e.s(["default",()=>f])},99956,e=>{"use strict";var t=e.i(843476),r=e.i(846932),s=e.i(555436),l=e.i(37727),a=e.i(270756),i=e.i(473708),n=e.i(75505),o=e.i(664659),c=e.i(271645),d=e.i(975157),u=e.i(946848),m=e.i(157164),h=e.i(209165),x=e.i(809934),p=e.i(426261),b=e.i(996433);function f(){let[e,f]=(0,c.useState)([]),[g,y]=(0,c.useState)([]),[w,v]=(0,c.useState)(!0),[j,N]=(0,c.useState)(""),[C,k]=(0,c.useState)(!1),[S,E]=(0,c.useState)(null),[O,M]=(0,c.useState)(!1),[T,P]=(0,c.useState)(!1),[D,F]=(0,c.useState)(null),[$,A]=(0,c.useState)(1),[L]=(0,c.useState)(20),[R,z]=(0,c.useState)(!0),[I,W]=(0,c.useState)(!1),[X,q]=(0,c.useState)([]),U={themeType:"default",footerCopyright:`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:"true",showWapSidebar:"true"},[B,Y]=(0,c.useState)(U),[H,Z]=(0,c.useState)({title:"",description:"",browserTitle:"",browserSubtitle:""}),[_,G]=(0,c.useState)(!1);(0,c.useEffect)(()=>{V()},[]),(0,c.useEffect)(()=>{if(!H.browserTitle)return;let e=H.browserTitle;H.browserSubtitle&&(e=`${e} - ${H.browserSubtitle}`),document.title=e},[H.browserTitle,H.browserSubtitle]);let V=async()=>{A(1);try{await Promise.all([J(),K(1,!0),ee()])}catch(e){console.error("Failed to load data:",e)}finally{v(!1)}},J=async()=>{try{let[e,t]=await Promise.all([(0,h.getSettings)(),(0,h.getPageText)("galleries")]);if(e.success&&e.data){let t={};e.data.forEach(e=>{t[e.key]=e.value}),Y({themeType:t.themeType||"default",footerCopyright:t.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:t.showTopNavbar||"true",showWapSidebar:t.showWapSidebar||"true"})}t.success&&t.data&&(Z({title:t.data.title||"图库列表",description:t.data.description||"探索精彩的图片合集",browserTitle:t.data.browserTitle||"图库列表",browserSubtitle:t.data.browserSubtitle||""}),G(!0))}catch(e){console.error("Failed to load settings:",e),G(!0)}},K=async(e=$,t=!1,r)=>{try{let s=await (0,h.getGalleries)(r);if(s.success&&s.data){let r=s.data;t&&q(r);let l=(e-1)*L,a=l+L,i=r.slice(l,a);t?f(i):f(e=>[...e,...i]),z(a<r.length)}}catch(e){console.error("Failed to fetch galleries:",e),f([])}},Q=async()=>{if(I||!R)return;W(!0);let e=$+1;A(e);try{let t=(e-1)*L,r=t+L,s=X.slice(t,r);f(e=>[...e,...s]),z(r<X.length)}catch(e){console.error("Failed to load more galleries:",e)}finally{W(!1)}},ee=async()=>{try{let e=await (0,h.getGalleryCategories)();e.success&&e.data&&y(e.data)}catch(e){console.error("Failed to fetch categories:",e),y([])}},et=e.filter(e=>{if(!j.trim())return!0;let t=j.toLowerCase(),r=e.title?.toLowerCase().includes(t),s=e.description?.toLowerCase().includes(t);return r||s}),er=j.trim()&&et.length>0,es=j.trim()&&0===et.length,el=e=>{E(e),A(1),K(1,!0,{search:j||void 0,category_id:e||void 0})};return B?.themeType,B?.showTopNavbar,B?.showWapSidebar,(0,t.jsxs)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col hide-scrollbar",children:[(0,t.jsx)(p.default,{}),(0,t.jsx)(b.default,{}),(0,t.jsxs)("div",{className:"relative z-0 flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"h-16"}),(0,t.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:H.title}),(0,t.jsx)("p",{className:"text-text-secondary",children:H.description})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[g.length>0&&(0,t.jsxs)("div",{className:"relative md:w-48 flex-shrink-0",children:[(0,t.jsxs)("button",{onClick:()=>M(!O),className:"w-full flex items-center justify-between px-4 py-3 bg-bg-secondary rounded-lg border border-border-primary hover:bg-bg-tertiary transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.FolderOpen,{className:"w-4 h-4 text-text-secondary"}),(0,t.jsx)("span",{className:"text-sm font-medium text-text-primary truncate",children:null===S?"全部分类":g.find(e=>e.id===S)?.name||"全部分类"})]}),(0,t.jsx)(o.ChevronDown,{className:`w-4 h-4 text-text-tertiary transition-transform flex-shrink-0 ${O?"rotate-180":""}`})]}),O&&(0,t.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 p-3 bg-bg-secondary rounded-lg border border-border-primary shadow-lg z-20",children:(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsx)("button",{onClick:()=>{el(null),M(!1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${null===S?"bg-primary-500 text-white shadow-md":"bg-bg-tertiary text-text-secondary hover:bg-bg-primary border border-border-primary"}`,children:"全部"}),g.map(e=>(0,t.jsxs)("button",{onClick:()=>{el(e.id),M(!1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${S===e.id?"bg-primary-500 text-white shadow-md":"bg-bg-tertiary text-text-secondary hover:bg-bg-primary border border-border-primary"}`,children:[e.icon&&(0,t.jsx)("span",{className:"mr-1.5",children:e.icon}),e.name]},e.id))]})})]}),(0,t.jsx)("div",{className:"hidden md:flex items-center",children:C?(0,t.jsx)("div",{className:"w-64",children:(0,t.jsxs)("div",{className:"relative flex items-center",children:[(0,t.jsx)(s.Search,{className:"absolute left-3 top-0 bottom-0 my-auto w-4 h-4 text-text-tertiary pointer-events-none"}),(0,t.jsx)("input",{type:"text",placeholder:"搜索图册...",value:j,onChange:e=>N(e.target.value),className:"w-full h-[46px] pl-9 pr-9 bg-bg-secondary border border-border-primary rounded-lg text-sm text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off",autoFocus:!0}),(0,t.jsx)("button",{type:"button",onClick:()=>{N(""),k(!1)},className:"absolute right-3 top-0 bottom-0 my-auto w-5 h-5 flex items-center justify-center text-text-tertiary hover:text-text-primary transition-colors","aria-label":"关闭搜索",children:(0,t.jsx)(l.X,{className:"w-4 h-4"})})]})}):(0,t.jsx)("button",{type:"button",onClick:()=>k(!0),className:"flex items-center justify-center w-[46px] h-[46px] bg-bg-secondary border border-border-primary rounded-lg text-text-secondary hover:bg-bg-tertiary hover:text-text-primary transition-all","aria-label":"搜索",children:(0,t.jsx)(s.Search,{className:"w-5 h-5"})})})]}),er&&(0,t.jsx)("div",{className:"mt-3 p-4 rounded-xl border",style:{backgroundColor:"var(--info-bg)",borderColor:"var(--info-border)"},children:(0,t.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,t.jsxs)("span",{className:"text-sm",style:{color:"var(--info-text)"},children:["搜索结果: 找到 ",et.length," 个相关图册",(0,t.jsxs)("span",{className:"font-medium ml-1",children:['"',j,'"']})]})})}),es&&(0,t.jsx)("div",{className:"mt-3 p-4 bg-bg-tertiary rounded-xl border border-border-primary text-center",children:(0,t.jsxs)("span",{className:"text-sm text-text-tertiary",children:['没有找到包含 "',j,'" 的图册']})})]}),w?(0,t.jsx)(x.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-4 w-auto",columnClassName:"pl-4 bg-clip-padding",children:[...Array(10)].map((e,r)=>(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-sm border border-border-primary overflow-hidden animate-pulse",children:[(0,t.jsx)("div",{className:"w-full pt-[100%] bg-bg-tertiary"}),(0,t.jsxs)("div",{className:"p-3",children:[(0,t.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-full"})]})]})},r))}):0!==et.length||j.trim()?et.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-4 w-auto",columnClassName:"pl-4 bg-clip-padding",children:et.map((e,s)=>{let l;return(0,t.jsx)("div",{className:"mb-4",children:(l=e.hasPassword,(0,t.jsxs)(r.motion.button,{onClick:()=>{F(e.id),P(!0)},className:"group block bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer overflow-hidden w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.03*s},children:[(0,t.jsxs)("div",{className:"relative w-full pt-[100%] bg-gradient-to-br from-primary-100 to-primary-200 overflow-hidden",children:[e.cover_image?(0,t.jsx)("img",{src:(0,d.getFileUrl)(e.cover_image),alt:e.title,className:`absolute inset-0 w-full h-full object-cover transition-transform duration-300 ${l?"blur-xl scale-110":"group-hover:scale-105"}`,draggable:!1,onContextMenu:e=>e.preventDefault(),loading:"lazy"}):(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)(i.Image,{className:"w-12 h-12 text-primary-400"})}),l&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-black/60 backdrop-blur-sm rounded-full p-3",children:(0,t.jsx)(a.Lock,{className:"w-6 h-6 text-white"})})}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-white font-medium",children:[e.image_count," 张"]})]}),(0,t.jsxs)("div",{className:"p-3 text-left",children:[(0,t.jsx)("h3",{className:"font-medium text-sm text-text-primary group-hover:text-primary-500 transition-colors line-clamp-1 mb-1",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-xs text-text-tertiary line-clamp-2 leading-relaxed",children:e.description})]})]},`gallery-${e.id}`))},e.id)})}),R&&!j.trim()&&(0,t.jsx)("div",{className:"text-center mt-8",children:(0,t.jsx)("button",{onClick:Q,disabled:I,className:"px-8 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:I?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"加载中..."]}):"加载更多"})})]}):null:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(i.Image,{className:"w-16 h-16 text-text-tertiary mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-text-tertiary",children:"暂无图册"})]})]}),(0,t.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,t.jsx)("p",{children:B.footerCopyright}),(0,t.jsx)(m.default,{})]})]}),D&&(0,t.jsx)(u.default,{galleryId:D,isOpen:T,onClose:()=>{P(!1),setTimeout(()=>{F(null)},300)}})]})}e.s(["default",()=>f])}]);