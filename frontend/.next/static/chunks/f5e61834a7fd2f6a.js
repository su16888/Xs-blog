(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,473708,e=>{"use strict";let t=(0,e.i(475254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],473708)},150965,e=>{"use strict";let t=(0,e.i(475254).default)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);e.s(["ShoppingBag",()=>t],150965)},870273,808464,e=>{"use strict";let t=(0,e.i(475254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],870273);var s=e.i(843476),a=e.i(846932),l=e.i(88653),r=e.i(37727),i=e.i(778917),n=e.i(871689),o=e.i(271645);function c({isOpen:e,onClose:t,site:c,logoUrl:d}){return((0,o.useEffect)(()=>{let s=e=>{"Escape"===e.key&&t()};return e&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[e,t]),c)?(0,s.jsx)(l.AnimatePresence,{children:e&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)(a.motion.div,{initial:{scale:.95,opacity:0,y:15},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:15},transition:{type:"spring",damping:30,stiffness:400},onClick:e=>e.stopPropagation(),className:"bg-bg-primary rounded-2xl shadow-2xl max-w-md w-full overflow-hidden relative",children:[(0,s.jsx)("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 rounded-lg bg-bg-secondary hover:bg-bg-tertiary transition-colors z-10","aria-label":"关闭",children:(0,s.jsx)(r.X,{className:"w-4 h-4 text-text-secondary"})}),(0,s.jsxs)("div",{className:"p-6 text-center",children:[(0,s.jsx)("div",{className:"mb-5 flex justify-center",children:d?(0,s.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden shadow-md",children:(0,s.jsx)("img",{src:d,alt:c.name,className:"w-full h-full object-cover"})}):(0,s.jsx)("div",{className:"w-20 h-20 rounded-xl flex items-center justify-center text-primary-500 font-bold text-3xl",children:c.name[0]})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-text-primary mb-2.5",children:c.name}),c.description&&(0,s.jsx)("p",{className:"text-text-secondary text-sm mb-6 leading-relaxed",children:c.description}),(0,s.jsxs)("div",{className:"flex gap-2.5",children:[(0,s.jsxs)("button",{onClick:t,className:"flex-1 px-4 py-2.5 rounded-lg bg-bg-secondary text-text-primary hover:bg-bg-tertiary transition-all duration-200 font-medium text-sm flex items-center justify-center gap-2",children:[(0,s.jsx)(n.ArrowLeft,{className:"w-3.5 h-3.5"}),"返回"]}),(0,s.jsxs)("button",{onClick:()=>{window.open(c.link,"_blank","noopener,noreferrer"),t()},className:"flex-1 px-4 py-2.5 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-all duration-200 font-medium text-sm flex items-center justify-center gap-2",children:["进入网站",(0,s.jsx)(i.ExternalLink,{className:"w-3.5 h-3.5"})]})]})]})]})})})}):null}e.s(["default",()=>c],808464)},960862,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(846932),l=e.i(88653),r=e.i(37727),i=e.i(150965),n=e.i(463059);let o=(0,e.i(475254).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var c=e.i(918789),d=e.i(209165);function m({service:e,isOpen:m,onClose:h}){let[x,u]=(0,s.useState)(!1);if(!e)return null;let p=e.show_order_button&&e.order_button_url;return(0,t.jsx)(l.AnimatePresence,{children:m&&(0,t.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-3",onClick:h,children:(0,t.jsxs)(a.motion.div,{initial:{opacity:0,scale:.9,y:30},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:30},transition:{type:"spring",duration:.4,bounce:.2},className:"bg-white dark:bg-gray-900 w-full max-w-[380px] rounded-2xl overflow-hidden shadow-2xl relative flex flex-col",style:{aspectRatio:"9/16",maxHeight:"calc(100vh - 24px)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:h,className:"absolute top-3 right-3 z-30 w-8 h-8 flex items-center justify-center bg-black/30 hover:bg-black/50 backdrop-blur-sm rounded-full transition-all duration-200","aria-label":"关闭",children:(0,t.jsx)(r.X,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("div",{className:`flex-1 overflow-y-auto overscroll-contain hide-scrollbar ${p?"pb-20":"pb-4"}`,children:[(0,t.jsxs)("div",{className:"relative w-full aspect-square bg-gray-100 dark:bg-gray-800",children:[e.cover_image&&!x?(0,t.jsx)("img",{src:(0,d.getImageUrl)(e.cover_image),alt:e.name,className:"w-full h-full object-cover",onError:()=>u(!0)}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20",children:(0,t.jsx)(i.ShoppingBag,{className:"w-20 h-20 text-gray-300 dark:text-gray-600"})}),e.is_recommended&&(0,t.jsxs)("div",{className:"absolute top-3 left-3 flex items-center gap-1 bg-gradient-to-r from-orange-500 to-rose-500 text-white px-2.5 py-1 rounded-full text-[11px] font-medium shadow-lg",children:[(0,t.jsx)(o,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"精选推荐"})]}),e.Category&&(0,t.jsxs)("div",{className:"absolute top-3 right-12 flex items-center gap-1 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm px-2.5 py-1 rounded-full text-[11px] text-gray-600 dark:text-gray-300 shadow-sm",children:[e.Category.icon&&(0,t.jsx)("span",{children:e.Category.icon}),(0,t.jsx)("span",{children:e.Category.name})]})]}),(0,t.jsxs)("div",{className:"px-4 py-4",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white leading-snug mb-2",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm leading-relaxed mb-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-baseline gap-0.5",children:[(0,t.jsx)("span",{className:"text-rose-500 text-sm font-bold",children:"¥"}),(0,t.jsx)("span",{className:"text-rose-500 text-2xl font-bold tracking-tight",children:e.price})]})]}),e.specifications&&e.specifications.length>0&&(0,t.jsxs)("div",{className:"px-4 mb-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-1 h-4 bg-gradient-to-b from-violet-500 to-fuchsia-500 rounded-full"}),e.spec_title||"服务规格"]})}),(0,t.jsx)("div",{className:"space-y-2",children:e.specifications.sort((e,t)=>e.sort_order-t.sort_order).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between py-2.5 px-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e.spec_name}),(0,t.jsx)("span",{className:"text-gray-900 dark:text-white text-sm font-medium",children:e.spec_value})]},e.id))})]}),e.content&&(0,t.jsxs)("div",{className:"px-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-1 h-4 bg-gradient-to-b from-violet-500 to-fuchsia-500 rounded-full"}),"服务详情"]})}),(0,t.jsx)("div",{className:"prose prose-sm max-w-none text-gray-600 dark:text-gray-300 prose-headings:text-gray-900 dark:prose-headings:text-white prose-strong:text-gray-900 dark:prose-strong:text-white prose-a:text-violet-600 dark:prose-a:text-violet-400",children:(0,t.jsx)(c.default,{components:{h1:({node:e,...s})=>(0,t.jsx)("h1",{className:"text-base font-bold mt-4 mb-2 text-gray-900 dark:text-white",...s}),h2:({node:e,...s})=>(0,t.jsx)("h2",{className:"text-sm font-bold mt-3 mb-2 text-gray-900 dark:text-white",...s}),h3:({node:e,...s})=>(0,t.jsx)("h3",{className:"text-sm font-semibold mt-3 mb-1.5 text-gray-800 dark:text-gray-100",...s}),p:({node:e,...s})=>(0,t.jsx)("p",{className:"mb-3 leading-relaxed text-sm text-gray-600 dark:text-gray-300",...s}),ul:({node:e,...s})=>(0,t.jsx)("ul",{className:"list-disc list-outside ml-4 mb-3 space-y-1.5 text-sm text-gray-600 dark:text-gray-300",...s}),ol:({node:e,...s})=>(0,t.jsx)("ol",{className:"list-decimal list-outside ml-4 mb-3 space-y-1.5 text-sm text-gray-600 dark:text-gray-300",...s}),li:({node:e,...s})=>(0,t.jsx)("li",{className:"text-sm leading-relaxed",...s}),blockquote:({node:e,...s})=>(0,t.jsx)("blockquote",{className:"border-l-3 border-violet-500 pl-3 py-2 my-3 bg-violet-50 dark:bg-violet-900/20 rounded-r-lg text-sm italic",...s}),code:({node:e,inline:s,...a})=>s?(0,t.jsx)("code",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-xs font-mono text-violet-600 dark:text-violet-400",...a}):(0,t.jsx)("code",{className:"block p-3 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-x-auto text-xs font-mono",...a}),img:({node:e,...s})=>(0,t.jsx)("img",{className:"rounded-xl shadow-md my-3 max-w-full",loading:"lazy",...s}),a:({node:e,...s})=>(0,t.jsx)("a",{className:"text-violet-600 dark:text-violet-400 hover:underline font-medium",target:"_blank",rel:"noopener noreferrer",...s})},children:e.content})})]})]}),p&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-white via-white dark:from-gray-900 dark:via-gray-900 to-transparent pt-8",children:(0,t.jsxs)("a",{href:e.order_button_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white py-3.5 rounded-xl font-semibold shadow-lg shadow-violet-500/30 hover:shadow-xl hover:shadow-violet-500/40 transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-200",children:[(0,t.jsx)("span",{className:"text-[15px]",children:e.order_button_text||"立即下单"}),(0,t.jsx)(n.ChevronRight,{className:"w-4 h-4"})]})})]})})})}e.s(["default",()=>m],960862)},809934,e=>{"use strict";var t=e.i(271645);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach(function(t){var a,l,r;a=e,l=t,r=s[t],l in a?Object.defineProperty(a,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[l]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}class r extends t.default.Component{constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})):this.reCalculateColumnCount()}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let s=1/0,a=t.default||2;for(let l in t){let r=parseInt(l);r>0&&e<=r&&r<s&&(s=r,a=t[l])}a=Math.max(1,parseInt(a)||1),this.state.columnCount!==a&&this.setState({columnCount:a})}itemsInColumns(){let e=this.state.columnCount,s=Array(e),a=t.default.Children.toArray(this.props.children);for(let t=0;t<a.length;t++){let l=t%e;s[l]||(s[l]=[]),s[l].push(a[t])}return s}renderColumns(){let{column:e,columnAttrs:a={},columnClassName:r}=this.props,i=this.itemsInColumns(),n=`${100/i.length}%`,o=r;o&&"string"!=typeof o&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===o&&(o="my-masonry-grid_column"));let c=l(l(l({},e),a),{},{style:l(l({},a.style),{},{width:n}),className:o});return i.map((e,a)=>t.default.createElement("div",s({},c,{key:a}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:a,breakpointCols:l,columnClassName:r,columnAttrs:i,column:n,className:o}=e,c=function(e,t){if(null==e)return{};var s,a,l=function(e,t){if(null==e)return{};var s,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(l[s]=e[s]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),d=o;return"string"!=typeof o&&(this.logDeprecated('The property "className" requires a string'),void 0===o&&(d="my-masonry-grid")),t.default.createElement("div",s({},c,{className:d}),this.renderColumns())}}r.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},e.s(["default",0,r])},270756,e=>{"use strict";let t=(0,e.i(475254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],270756)},286536,77705,e=>{"use strict";var t=e.i(475254);let s=(0,t.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],286536);let a=(0,t.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>a],77705)},946848,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(174080),l=e.i(846932),r=e.i(88653),i=e.i(37727),n=e.i(373375),o=e.i(463059),c=e.i(554212),d=e.i(520354),m=e.i(440160),h=e.i(270756),x=e.i(286536),u=e.i(77705),p=e.i(209165),g=e.i(975157);function y({galleryId:e,isOpen:y,onClose:b}){let[f,w]=(0,s.useState)(null),[v,j]=(0,s.useState)(0),[k,N]=(0,s.useState)(!0),[C,M]=(0,s.useState)(null),[O,S]=(0,s.useState)(1),[E,A]=(0,s.useState)(!1),[z,L]=(0,s.useState)(""),[P,_]=(0,s.useState)(""),[D,F]=(0,s.useState)(!1),[R,q]=(0,s.useState)(!1),[X,B]=(0,s.useState)(!1),[$,I]=(0,s.useState)({x:0,y:0}),[U,T]=(0,s.useState)(!1),W=(0,s.useRef)({x:0,y:0});(0,s.useRef)({x:0,y:0});let[H,Y]=(0,s.useState)(null),[V,Z]=(0,s.useState)(1),[K,G]=(0,s.useState)(null),[J,Q]=(0,s.useState)(null),[ee,et]=(0,s.useState)(!1),es=(0,s.useRef)(null),ea=(0,s.useRef)([]);(0,s.useEffect)(()=>{let e=()=>{B(window.innerWidth<768||"ontouchstart"in window)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{y&&e&&ec()},[y,e]),(0,s.useEffect)(()=>(y?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[y]),(0,s.useEffect)(()=>{if(es.current&&ea.current[v]){let e=es.current,t=ea.current[v];if(t){let s=e.getBoundingClientRect(),a=t.getBoundingClientRect(),l=a.left-s.left+e.scrollLeft,r=l+a.width,i=s.width;if(l<e.scrollLeft||r>e.scrollLeft+i){let t=l-i/2+a.width/2;e.scrollTo({left:Math.max(0,t),behavior:"smooth"})}}}},[v]),(0,s.useEffect)(()=>{if(!y)return;let e=e=>{"Escape"===e.key?b():"ArrowLeft"===e.key?eh():"ArrowRight"===e.key?em():"+"===e.key||"="===e.key?eu():"-"===e.key&&ep()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y,v,O,f]);let el=(0,s.useCallback)(e=>{if(X)return;e.preventDefault();let t=e.deltaY>0?-.1:.1;S(e=>{let s=Math.min(Math.max(e+t,.5),3);return s<=1&&I({x:0,y:0}),s})},[X]),er=(0,s.useCallback)(e=>{X||O<=1||(e.preventDefault(),T(!0),W.current={x:e.clientX-$.x,y:e.clientY-$.y})},[X,O,$]),ei=(0,s.useCallback)(e=>{!U||X||I({x:e.clientX-W.current.x,y:e.clientY-W.current.y})},[U,X]),en=(0,s.useCallback)(()=>{T(!1)},[]),eo=e=>{if(e.length<2)return 0;let t=e[0].clientX-e[1].clientX,s=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+s*s)},ec=async t=>{N(!0),M(null);try{let s=await (0,p.getGallery)(e,t);s.success?(w(s.data),A(!1),_("")):s.requirePassword?A(!0):M(s.message||"加载图册失败")}catch(e){e.response?.status===401?e.response?.data?.requirePassword?A(!0):(A(!0),_("密码错误")):M("加载图册失败")}finally{N(!1)}},ed=async e=>{if(e.preventDefault(),!z.trim())return void _("请输入密码");q(!0),_("");try{await ec(z)}catch(e){}finally{q(!1)}},em=()=>{f&&0!==f.images.length&&(j(e=>(e+1)%f.images.length),ex())},eh=()=>{f&&0!==f.images.length&&(j(e=>(e-1+f.images.length)%f.images.length),ex())},ex=()=>{S(1),I({x:0,y:0})},eu=()=>{S(e=>Math.min(e+.25,3))},ep=()=>{S(e=>{let t=Math.max(e-.25,.5);return t<=1&&I({x:0,y:0}),t})},eg=()=>{if(!f||0===f.images.length)return;let e=f.images[v],t=(0,g.getFileUrl)(e.path),s=document.createElement("a");s.href=t,s.download=e.filename,s.target="_blank",document.body.appendChild(s),s.click(),document.body.removeChild(s)},ey=()=>{S(1),I({x:0,y:0}),j(0),w(null),A(!1),L(""),_(""),b()};if(!y)return null;f&&f.images.length;let eb=(0,t.jsx)(r.AnimatePresence,{children:(0,t.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] bg-black",style:{touchAction:"none",overscrollBehavior:"none",height:"100dvh"},onClick:ey,children:(0,t.jsx)("div",{className:"gallery-viewer-container relative w-full overflow-hidden flex flex-col",style:{touchAction:"none",overscrollBehavior:"none",height:"100dvh"},onClick:e=>e.stopPropagation(),children:X?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-shrink-0 z-20 bg-black/80 px-2 flex items-center justify-end",style:{height:"44px"},children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!k&&!E&&f&&f.images.length>0&&(0,t.jsx)("button",{onClick:eg,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"下载当前图片",children:(0,t.jsx)(m.Download,{className:"w-5 h-5 text-white"})}),!E&&(0,t.jsx)("button",{onClick:ey,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"关闭",children:(0,t.jsx)(i.X,{className:"w-5 h-5 text-white"})})]})}),(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center overflow-hidden",style:{touchAction:"none",overscrollBehavior:"none",minHeight:0},children:[k&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent mb-4"}),(0,t.jsx)("p",{className:"text-white",children:"加载中..."})]}),C&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-red-400 text-lg mb-4",children:C}),(0,t.jsx)("button",{onClick:ey,className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:"关闭"})]}),E&&(0,t.jsxs)(l.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},className:"w-full max-w-sm bg-bg-secondary rounded-xl p-5 shadow-xl border border-border-primary relative mx-4",children:[(0,t.jsx)("button",{onClick:ey,className:"absolute top-4 right-4 p-1.5 text-text-tertiary hover:text-text-primary hover:bg-bg-tertiary rounded-lg transition-colors",title:"关闭",disabled:R,children:(0,t.jsx)(i.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center mb-5",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)(h.Lock,{className:"w-6 h-6 text-primary-600"})}),(0,t.jsx)("h3",{className:"text-base font-bold text-text-primary mb-1",children:"需要密码访问"}),(0,t.jsx)("p",{className:"text-xs text-text-tertiary",children:"请输入密码查看图册内容"})]}),(0,t.jsxs)("form",{onSubmit:ed,className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:D?"text":"password",name:"gallery-access-password",value:z,onChange:e=>{L(e.target.value),_("")},placeholder:"请输入密码",className:`w-full px-3 py-2.5 pr-10 text-sm border ${P?"border-red-500":"border-border-primary"} rounded-lg bg-bg-tertiary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent`,autoFocus:!0,autoComplete:"off",disabled:R}),(0,t.jsx)("button",{type:"button",onClick:()=>F(!D),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors",children:D?(0,t.jsx)(u.EyeOff,{className:"w-4 h-4"}):(0,t.jsx)(x.Eye,{className:"w-4 h-4"})})]}),P&&(0,t.jsx)("p",{className:"mt-1.5 text-xs text-red-500",children:P})]}),(0,t.jsx)("button",{type:"submit",className:"w-full px-3 py-2 text-sm bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors disabled:opacity-50",disabled:R||!z,children:R?"验证中...":"确认"})]})]}),!k&&!C&&!E&&f&&f.images.length>0&&(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",style:{cursor:O>1?U?"grabbing":"grab":"default",touchAction:"none",overscrollBehavior:"none"},onTouchStart:e=>{if(2===e.touches.length)Y(eo(e.touches)),Z(O),et(!1);else if(1===e.touches.length){let t=e.touches[0];O>1?(T(!0),W.current={x:t.clientX-$.x,y:t.clientY-$.y}):(G({x:t.clientX,y:t.clientY}),Q(null),et(!0))}},onTouchMove:e=>{if(2===e.touches.length&&H){let t=Math.min(Math.max(V*(eo(e.touches)/H),.5),3);S(t),t<=1&&I({x:0,y:0})}else if(1===e.touches.length){let t=e.touches[0];U&&O>1?I({x:t.clientX-W.current.x,y:t.clientY-W.current.y}):ee&&O<=1&&Q({x:t.clientX,y:t.clientY})}},onTouchEnd:()=>{if(Y(null),T(!1),ee&&K&&J&&O<=1){let e=K.x-J.x;Math.abs(e)>Math.abs(K.y-J.y)&&Math.abs(e)>50&&(e>0?em():eh())}et(!1),G(null),Q(null)},children:[(0,t.jsx)(l.motion.img,{src:(0,g.getFileUrl)(f.images[v].path),alt:f.images[v].filename,className:"select-none",draggable:!1,style:{transform:`scale(${O}) translate(${$.x/O}px, ${$.y/O}px)`,transition:U?"none":"transform 0.2s ease-out",maxHeight:"100%",maxWidth:"100%",width:"100%",objectFit:"contain",touchAction:"none"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},v),f.images.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:eh,className:"absolute top-1/2 -translate-y-1/2 left-1 p-2 bg-black/40 hover:bg-black/60 rounded-full transition-colors backdrop-blur-sm z-10",title:"上一张",children:(0,t.jsx)(n.ChevronLeft,{className:"w-5 h-5 text-white/80"})}),(0,t.jsx)("button",{onClick:em,className:"absolute top-1/2 -translate-y-1/2 right-1 p-2 bg-black/40 hover:bg-black/60 rounded-full transition-colors backdrop-blur-sm z-10",title:"下一张",children:(0,t.jsx)(o.ChevronRight,{className:"w-5 h-5 text-white/80"})})]})]}),!k&&!C&&!E&&f&&0===f.images.length&&(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)("p",{className:"text-lg mb-4",children:"该图册暂无图片"}),(0,t.jsx)("button",{onClick:ey,className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"关闭"})]})]}),!k&&!C&&!E&&f&&f.images.length>1&&(0,t.jsxs)("div",{className:"flex-shrink-0 z-20 bg-black/80 px-2 py-2",children:[(0,t.jsx)("div",{className:"flex justify-center mb-2",children:(0,t.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-full px-3 py-1",children:(0,t.jsxs)("span",{className:"text-white text-sm font-medium",children:[v+1," / ",f.images.length]})})}),(0,t.jsx)("div",{className:"flex justify-center items-center",children:(0,t.jsx)("div",{ref:es,className:"flex gap-2 overflow-x-auto hide-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:f.images.map((e,s)=>(0,t.jsx)("button",{ref:e=>{ea.current[s]=e},onClick:()=>{j(s),ex()},className:`flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all ${s===v?"border-primary-500 opacity-100":"border-white/20 opacity-50 hover:opacity-75"}`,style:{width:"56px",height:"56px"},children:(0,t.jsx)("img",{src:(0,g.getFileUrl)(e.path),alt:e.filename,className:"w-full h-full object-cover",draggable:!1})},e.id))})})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-shrink-0 z-20 bg-black/80 px-2 flex items-center",style:{height:"56px"},children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"w-10"}),(0,t.jsx)("div",{className:"flex-1 flex justify-center",children:!k&&!E&&f&&f.images.length>1&&(0,t.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-full px-3 py-1",children:(0,t.jsxs)("span",{className:"text-white text-sm font-medium",children:[v+1," / ",f.images.length]})})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!k&&!E&&f&&f.images.length>0&&(0,t.jsx)("button",{onClick:eg,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"下载当前图片",children:(0,t.jsx)(m.Download,{className:"w-5 h-5 text-white"})}),!E&&(0,t.jsx)("button",{onClick:ey,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"关闭",children:(0,t.jsx)(i.X,{className:"w-5 h-5 text-white"})})]})]})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center overflow-hidden",style:{touchAction:"none",overscrollBehavior:"none"},children:[k&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent mb-4"}),(0,t.jsx)("p",{className:"text-white",children:"加载中..."})]}),C&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-red-400 text-lg mb-4",children:C}),(0,t.jsx)("button",{onClick:ey,className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:"关闭"})]}),E&&(0,t.jsxs)(l.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},className:"w-full max-w-sm bg-bg-secondary rounded-xl p-5 shadow-xl border border-border-primary relative mx-4",children:[(0,t.jsx)("button",{onClick:ey,className:"absolute top-4 right-4 p-1.5 text-text-tertiary hover:text-text-primary hover:bg-bg-tertiary rounded-lg transition-colors",title:"关闭",disabled:R,children:(0,t.jsx)(i.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center mb-5",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)(h.Lock,{className:"w-6 h-6 text-primary-600"})}),(0,t.jsx)("h3",{className:"text-base font-bold text-text-primary mb-1",children:"需要密码访问"}),(0,t.jsx)("p",{className:"text-xs text-text-tertiary",children:"请输入密码查看图册内容"})]}),(0,t.jsxs)("form",{onSubmit:ed,className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:D?"text":"password",name:"gallery-access-password",value:z,onChange:e=>{L(e.target.value),_("")},placeholder:"请输入密码",className:`w-full px-3 py-2.5 pr-10 text-sm border ${P?"border-red-500":"border-border-primary"} rounded-lg bg-bg-tertiary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent`,autoFocus:!0,autoComplete:"off",disabled:R}),(0,t.jsx)("button",{type:"button",onClick:()=>F(!D),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors",children:D?(0,t.jsx)(u.EyeOff,{className:"w-4 h-4"}):(0,t.jsx)(x.Eye,{className:"w-4 h-4"})})]}),P&&(0,t.jsx)("p",{className:"mt-1.5 text-xs text-red-500",children:P})]}),(0,t.jsx)("button",{type:"submit",className:"w-full px-3 py-2 text-sm bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors disabled:opacity-50",disabled:R||!z,children:R?"验证中...":"确认"})]})]}),!k&&!C&&!E&&f&&f.images.length>0&&(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",style:{cursor:O>1?U?"grabbing":"grab":"default",touchAction:"none",overscrollBehavior:"none",padding:"20px 80px"},onWheel:el,onMouseDown:er,onMouseMove:ei,onMouseUp:en,onMouseLeave:en,children:[(0,t.jsx)(l.motion.img,{src:(0,g.getFileUrl)(f.images[v].path),alt:f.images[v].filename,className:"select-none",draggable:!1,style:{transform:`scale(${O}) translate(${$.x/O}px, ${$.y/O}px)`,transition:U?"none":"transform 0.2s ease-out",maxHeight:"100%",maxWidth:"100%",objectFit:"contain",touchAction:"none"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},v),f.images.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:eh,className:"absolute top-1/2 -translate-y-1/2 p-3 bg-black/40 hover:bg-black/60 rounded-full transition-colors backdrop-blur-sm z-10 left-4 lg:left-8",title:"上一张 (←)",children:(0,t.jsx)(n.ChevronLeft,{className:"w-6 h-6 text-white/80"})}),(0,t.jsx)("button",{onClick:em,className:"absolute top-1/2 -translate-y-1/2 p-3 bg-black/40 hover:bg-black/60 rounded-full transition-colors backdrop-blur-sm z-10 right-4 lg:right-8",title:"下一张 (→)",children:(0,t.jsx)(o.ChevronRight,{className:"w-6 h-6 text-white/80"})})]})]}),!k&&!C&&!E&&f&&0===f.images.length&&(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)("p",{className:"text-lg mb-4",children:"该图册暂无图片"}),(0,t.jsx)("button",{onClick:ey,className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"关闭"})]})]}),!k&&!C&&!E&&f&&f.images.length>0&&(0,t.jsxs)("div",{className:"flex-shrink-0 z-20 bg-black/80",children:[(0,t.jsx)("div",{className:"flex justify-center py-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 bg-white/10 backdrop-blur-sm rounded-full px-3 py-1.5",children:[(0,t.jsx)("button",{onClick:ep,className:"p-1 hover:bg-white/10 rounded-full transition-colors",title:"缩小",children:(0,t.jsx)(d.ZoomOut,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("span",{className:"text-white text-xs min-w-[50px] text-center font-medium",children:[Math.round(100*O),"%"]}),(0,t.jsx)("button",{onClick:eu,className:"p-1 hover:bg-white/10 rounded-full transition-colors",title:"放大",children:(0,t.jsx)(c.ZoomIn,{className:"w-4 h-4 text-white"})})]})}),f.images.length>1&&(0,t.jsx)("div",{className:"px-2 pb-2 pt-1",children:(0,t.jsx)("div",{className:"flex justify-center max-w-7xl mx-auto h-full items-center",children:(0,t.jsx)("div",{ref:es,className:"flex gap-2 overflow-x-auto hide-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:f.images.map((e,s)=>(0,t.jsx)("button",{ref:e=>{ea.current[s]=e},onClick:()=>{j(s),ex()},className:`flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all ${s===v?"border-primary-500 opacity-100":"border-white/20 opacity-50 hover:opacity-75"}`,style:{width:"64px",height:"64px"},children:(0,t.jsx)("img",{src:(0,g.getFileUrl)(e.path),alt:e.filename,className:"w-full h-full object-cover",draggable:!1})},e.id))})})})]})]})})})});return(0,a.createPortal)(eb,document.body)}e.s(["default",()=>y])},840433,e=>{"use strict";let t=(0,e.i(475254).default)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);e.s(["Pin",()=>t],840433)},503116,e=>{"use strict";let t=(0,e.i(475254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],503116)},778917,e=>{"use strict";let t=(0,e.i(475254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],778917)},871689,e=>{"use strict";let t=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],871689)},463059,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],463059)},373375,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],373375)},554212,520354,e=>{"use strict";var t=e.i(475254);let s=(0,t.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);e.s(["ZoomIn",()=>s],554212);let a=(0,t.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);e.s(["ZoomOut",()=>a],520354)},440160,e=>{"use strict";let t=(0,e.i(475254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],440160)}]);