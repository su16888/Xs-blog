(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96433,e=>{"use strict";var t=e.i(18050),r=e.i(95987),a=e.i(75157);function o({className:e=""}){let{settings:o}=(0,r.useSettings)(),s=o.backgroundImage||"",l=o.backgroundOpacity||"0.5";if(!s)return null;let i=(0,a.getApiBaseUrl)(),n=s.startsWith("http")?s:`${i}${s}`;return(0,t.jsx)("div",{className:`absolute inset-0 z-0 pointer-events-none ${e}`,style:{backgroundImage:`url(${n})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:parseFloat(l)}})}e.s(["default",()=>o])},44739,e=>{"use strict";var t=e.i(18050),r=e.i(71645);let a="QXJjaGl0ZWN0dXJhbCBkcml2ZXIgaXMgYmFzZWQgb24g",o="WHMtYmxvZy4=",s=e=>{try{return atob(e)}catch{return""}};function l(){let[e,l]=(0,r.useState)(""),[i,n]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=setTimeout(()=>{let e,t;e=s(a),t=s(o),e.length>0&&t.includes("Xs-blog")&&(l(s(a)),n(s(o)),d(s("aHR0cHM6Ly9naXRodWIuY29tL3N1MTY4ODgvWHMtYmxvZw==")),m(!0))},100);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{!document.querySelector("[data-copyright]")&&u&&console.warn("Copyright notice must not be removed.")},5e3);return()=>clearInterval(e)},[u]);let b=async()=>{try{if(localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let t=e.split("=")[0].trim();document.cookie=`${t}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),"caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}"indexedDB"in window&&(await indexedDB.databases?.()||[]).forEach(e=>{e.name&&indexedDB.deleteDatabase(e.name)}),alert("清理成功全部数据！"),window.location.reload()}catch(e){alert("清理成功全部数据！"),window.location.reload()}};return u&&e?(0,t.jsxs)("div",{"data-copyright":"true",className:"text-[10px] md:text-xs text-gray-500 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},onContextMenu:e=>e.preventDefault(),children:[(0,t.jsx)("span",{onDoubleClick:b,style:{cursor:"default"},children:e}),(0,t.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:text-primary-600 transition-colors",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},children:i})]}):null}e.s(["default",()=>l])},26261,e=>{"use strict";var t=e.i(71645),r=e.i(95987);function a({forceNoIndex:e=!1,customTitle:a}){let{settings:o}=(0,r.useSettings)(),s="true"===o.allowSEO;return(0,t.useEffect)(()=>{if(a)document.title=a;else{let e=o.siteTitle||"",t=o.siteSubtitle||"";e&&(document.title=t?`${e} - ${t}`:e)}},[o.siteTitle,o.siteSubtitle,a]),(0,t.useEffect)(()=>{if(e||!s){let e=document.querySelector('meta[name="robots"]');e||((e=document.createElement("meta")).name="robots",document.head.appendChild(e)),e.content="noindex, nofollow, noarchive, nosnippet, noimageindex";let t=document.querySelector('meta[name="googlebot"]');t||((t=document.createElement("meta")).name="googlebot",document.head.appendChild(t)),t.content="noindex, nofollow";let r=document.querySelector('meta[http-equiv="X-Robots-Tag"]');r||((r=document.createElement("meta")).httpEquiv="X-Robots-Tag",document.head.appendChild(r)),r.content="noindex, nofollow"}else{let e=document.querySelector('meta[name="robots"]'),t=document.querySelector('meta[name="googlebot"]'),r=document.querySelector('meta[http-equiv="X-Robots-Tag"]');e&&e.remove(),t&&t.remove(),r&&r.remove()}},[e,s]),null}e.s(["default",()=>a])},15570,e=>{"use strict";var t=e.i(18050),r=e.i(71645),a=e.i(9165),o=e.i(44739),s=e.i(26261),l=e.i(96433);function i(){let[e,i]=(0,r.useState)([]),[n,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[m,b]=(0,r.useState)(""),[x,p]=(0,r.useState)("success"),[g,h]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),v={themeType:"default",footerCopyright:`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:"true",showWapSidebar:"true"},[w,j]=(0,r.useState)(v),[S,N]=(0,r.useState)({title:"",description:"",browserTitle:"",browserSubtitle:""}),[T,k]=(0,r.useState)(!1),[C,E]=(0,r.useState)({name:"",contact:"",category_id:"",content:"",captcha:""});(0,r.useEffect)(()=>{W(),q()},[]),(0,r.useEffect)(()=>{if(!S.browserTitle)return;let e=S.browserTitle;S.browserSubtitle&&(e=`${e} - ${S.browserSubtitle}`),document.title=e},[S.browserTitle,S.browserSubtitle]);let q=async()=>{try{let[e,t]=await Promise.all([(0,a.getSettings)(),(0,a.getPageText)("messages")]);if(e.success&&e.data){let t={};e.data.forEach(e=>{t[e.key]=e.value}),j({themeType:t.themeType||"default",footerCopyright:t.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:t.showTopNavbar||"true",showWapSidebar:t.showWapSidebar||"true"})}t.success&&t.data&&(N({title:t.data.title||"联系我们",description:t.data.description||"有任何问题都可以通过这里进行提交你的想法！",browserTitle:t.data.browserTitle||"留言板",browserSubtitle:t.data.browserSubtitle||""}),k(!0))}catch(e){console.error("Failed to load settings:",e),k(!0)}},W=async()=>{try{let e=await (0,a.getMessageCategories)();e.success&&i(e.data)}catch(e){console.error("加载数据失败:",e)}},$=async()=>{try{let e=await (0,a.getCaptcha)();if(e.success&&e.data){let t=e.data.image||e.data.svg,r=t.startsWith("data:")?t:`data:image/svg+xml;utf8,${encodeURIComponent(t)}`;c({id:e.data.id,image:r})}}catch(e){console.error("加载验证码失败:",e)}},M=async e=>{if(e.preventDefault(),b(""),!C.name.trim()){b("请输入您的称呼"),p("error"),setTimeout(()=>b(""),3e3);return}if(!C.contact.trim()){b("请输入联系方式"),p("error"),setTimeout(()=>b(""),3e3);return}if(!C.content.trim()){b("请输入留言内容"),p("error"),setTimeout(()=>b(""),3e3);return}await $(),h(!0)},D=async()=>{if(!C.captcha.trim()){b("请输入验证码"),p("error"),setTimeout(()=>b(""),3e3);return}try{f(!0);let e={...C,category_id:C.category_id?parseInt(C.category_id):null,captcha:{id:n?.id,text:C.captcha}},t=await (0,a.submitMessage)(e);t.success?(b("留言提交成功，我们会尽快处理！"),p("success"),E({name:"",contact:"",category_id:"",content:"",captcha:""}),h(!1)):(b(t.message||"提交失败，请重试"),p("error"),$())}catch(e){console.error("提交留言失败:",e),b(e.response?.data?.message||e.message||"提交失败，请重试"),p("error"),$()}finally{f(!1),setTimeout(()=>b(""),3e3)}},F=e=>{let{name:t,value:r}=e.target;E(e=>({...e,[t]:r}))};return w?.showWapSidebar,(0,t.jsxs)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col hide-scrollbar",children:[(0,t.jsx)(s.default,{}),(0,t.jsx)(l.default,{}),(0,t.jsxs)("div",{className:"relative z-0 flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"h-16"}),(0,t.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:S.title}),(0,t.jsx)("p",{className:"text-text-secondary",children:S.description})]}),(0,t.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-lg p-6 max-w-2xl mx-auto",children:[m&&(0,t.jsx)("div",{className:"mb-6 p-4 rounded-lg border",style:"success"===x?{backgroundColor:"var(--success-bg)",color:"var(--success-text)",borderColor:"var(--success-border)"}:{backgroundColor:"var(--error-bg)",color:"var(--error-text)",borderColor:"var(--error-border)"},children:m}),(0,t.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-text-primary mb-2",children:"用户称呼 *"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:C.name,onChange:F,required:!0,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",placeholder:"请输入您的称呼"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"contact",className:"block text-sm font-medium text-text-primary mb-2",children:"联系方式 *"}),(0,t.jsx)("input",{type:"text",id:"contact",name:"contact",value:C.contact,onChange:F,required:!0,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",placeholder:"请输入您的联系方式（邮箱、微信、电话等）"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"category_id",className:"block text-sm font-medium text-text-primary mb-2",children:"留言分类"}),(0,t.jsxs)("select",{id:"category_id",name:"category_id",value:C.category_id,onChange:F,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",children:[(0,t.jsx)("option",{value:"",children:"请选择分类"}),e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-text-primary mb-2",children:"留言内容 *"}),(0,t.jsx)("textarea",{id:"content",name:"content",value:C.content,onChange:F,required:!0,rows:6,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary resize-none",placeholder:"请输入您的留言内容..."})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white font-medium py-3 px-4 rounded-lg transition-colors focus:outline-none focus:ring-0",children:d?"提交中...":"提交留言"})})]})]})]}),(0,t.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,t.jsx)("p",{children:w.footerCopyright}),(0,t.jsx)(o.default,{})]})]}),g&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",onClick:()=>{h(!1),E({...C,captcha:""})},children:(0,t.jsxs)("div",{className:"bg-bg-secondary rounded-xl max-w-md w-full p-6 shadow-2xl border border-border-primary relative",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>{h(!1),E({...C,captcha:""})},className:"absolute top-4 right-4 text-text-tertiary hover:text-text-primary transition-colors text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-bg-tertiary",children:"×"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-text-primary mb-6 text-center",children:"请输入验证码"}),(0,t.jsx)("div",{className:"flex justify-center mb-6",children:n&&(0,t.jsx)("div",{onClick:$,className:"cursor-pointer border-2 border-border-primary rounded-lg overflow-hidden bg-bg-primary hover:border-primary-500 transition-colors",title:"点击刷新验证码",children:(0,t.jsx)("img",{src:n.image,alt:"验证码",className:"h-[50px] w-[150px] object-contain"})})}),(0,t.jsx)("p",{className:"text-text-secondary text-sm text-center mb-4",children:"点击图片可刷新验证码"}),(0,t.jsx)("input",{type:"text",value:C.captcha,onChange:e=>E({...C,captcha:e.target.value}),placeholder:"请输入验证码",className:"w-full px-4 py-3 border border-border-primary rounded-lg bg-bg-primary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent mb-6 text-center text-lg tracking-wider",autoFocus:!0,onKeyPress:e=>{"Enter"===e.key&&D()}}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>{h(!1),E({...C,captcha:""})},className:"flex-1 px-4 py-2.5 bg-bg-tertiary text-text-primary rounded-lg hover:bg-border-primary transition-colors font-medium",children:"取消"}),(0,t.jsx)("button",{onClick:D,disabled:y,className:"flex-1 px-4 py-2.5 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:y?"提交中...":"确认提交"})]})]})})]})}e.s(["default",()=>i])}]);