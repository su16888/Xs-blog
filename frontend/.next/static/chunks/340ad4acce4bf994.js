(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},88653,e=>{"use strict";e.i(47167);var t=e.i(18050),s=e.i(71645),r=e.i(31178),i=e.i(47414),a=e.i(74008),l=e.i(21476),n=e.i(72846),o=s,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,n.isHTMLElement)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:r,anchorX:i,root:a}){let l=(0,o.useId)(),n=(0,o.useRef)(null),m=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,o.useContext)(c.MotionConfigContext),f=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,r=e.map(e=>{let r=d(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():d(e[t],null)}}}}(...e),e)}(n,e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:o,right:c}=m.current;if(r||!n.current||!e||!t)return;let d="left"===i?`left: ${o}`:`right: ${c}`;n.current.dataset.motionPopId=l;let u=document.createElement("style");h&&(u.nonce=h);let f=a??document.head;return f.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            top: ${s}px !important;
          }
        `),()=>{f.contains(u)&&f.removeChild(u)}},[r]),(0,t.jsx)(u,{isPresent:r,childRef:n,sizeRef:m,children:o.cloneElement(e,{ref:f})})}let h=({children:e,initial:r,isPresent:a,onExitComplete:n,custom:o,presenceAffectsLayout:c,mode:d,anchorX:u,root:h})=>{let x=(0,i.useConstant)(f),p=(0,s.useId)(),g=!0,y=(0,s.useMemo)(()=>(g=!1,{id:p,initial:r,isPresent:a,custom:o,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;n&&n()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[a,x,n]);return c&&g&&(y={...y}),(0,s.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[a]),s.useEffect(()=>{a||x.size||!n||n()},[a]),"popLayout"===d&&(e=(0,t.jsx)(m,{isPresent:a,anchorX:u,root:h,children:e})),(0,t.jsx)(l.PresenceContext.Provider,{value:y,children:e})};function f(){return new Map}var x=e.i(64978);let p=e=>e.key||"";function g(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:l,initial:n=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:m="left",root:f})=>{let[y,v]=(0,x.usePresence)(u),j=(0,s.useMemo)(()=>g(e),[e]),b=u&&!y?[]:j.map(p),w=(0,s.useRef)(!0),k=(0,s.useRef)(j),N=(0,i.useConstant)(()=>new Map),[C,S]=(0,s.useState)(j),[T,E]=(0,s.useState)(j);(0,a.useIsomorphicLayoutEffect)(()=>{w.current=!1,k.current=j;for(let e=0;e<T.length;e++){let t=p(T[e]);b.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[T,b.length,b.join("-")]);let M=[];if(j!==C){let e=[...j];for(let t=0;t<T.length;t++){let s=T[t],r=p(s);b.includes(r)||(e.splice(t,0,s),M.push(s))}return"wait"===d&&M.length&&(e=M),E(g(e)),S(j),null}let{forceRender:L}=(0,s.useContext)(r.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:T.map(e=>{let s=p(e),r=(!u||!!y)&&(j===T||b.includes(s));return(0,t.jsx)(h,{isPresent:r,initial:(!w.current||!!n)&&void 0,custom:l,presenceAffectsLayout:c,mode:d,root:f,onExitComplete:r?void 0:()=>{if(!N.has(s))return;N.set(s,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(L?.(),E(k.current),u&&v?.(),o&&o())},anchorX:m,children:e},s)})})};e.s(["AnimatePresence",()=>y],88653)},75505,e=>{"use strict";let t=(0,e.i(75254).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);e.s(["FolderOpen",()=>t],75505)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},10980,e=>{"use strict";let t=(0,e.i(75254).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>t],10980)},37974,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(18566),i=e.i(46932),a=e.i(9165),l=e.i(95987),n=e.i(78583),o=e.i(55436),c=e.i(37727),d=e.i(75505),u=e.i(10980);let m=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var h=e.i(44739),f=e.i(32423),x=e.i(96433);let p={title:"æ–‡æ¡£ä¸­å¿ƒ",description:"æµè§ˆæ‰€æœ‰å¯ç”¨çš„ Markdown æ–‡æ¡£ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…",browserTitle:"æ–‡æ¡£ä¸­å¿ƒ",browserSubtitle:"",usageTitle:"ä½¿ç”¨è¯´æ˜Ž",usageContent:"å°† Markdown æ–‡ä»¶æ”¾å…¥ frontend/public/markdown ç›®å½•\né€šè¿‡ /docs/æ–‡ä»¶å è®¿é—®æ–‡æ¡£\næ”¯æŒæ ‡å‡† Markdown è¯­æ³•ã€GFM æ‰©å±•å’Œ HTML æ ‡ç­¾"};function g(){let e=(0,r.useRouter)(),{settings:g,pageTexts:y,isLoading:v}=(0,l.useSettings)(),[j,b]=(0,s.useState)([]),[w,k]=(0,s.useState)(!0),[N,C]=(0,s.useState)(null),[S,T]=(0,s.useState)(""),E=(0,s.useMemo)(()=>y?.docs?{title:y.docs.title||p.title,description:y.docs.description||p.description,browserTitle:y.docs.browserTitle||p.browserTitle,browserSubtitle:y.docs.browserSubtitle||p.browserSubtitle,usageTitle:y.docs.usageTitle||p.usageTitle,usageContent:y.docs.usageContent||p.usageContent}:p,[y]);if((0,s.useEffect)(()=>{v||"false"!==g.enableDocsPage||"true"===g.docsThemeEnabled||e.replace("/404")},[v,g.enableDocsPage,g.docsThemeEnabled,e]),(0,s.useEffect)(()=>{document.title=E.browserTitle},[E.browserTitle]),(0,s.useEffect)(()=>{(async()=>{try{k(!0);let e=await fetch((0,a.getApiUrl)("/markdown")),t=await e.json();t.success?b(t.data):C("èŽ·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥")}catch(e){console.error("åŠ è½½æ–‡ä»¶åˆ—è¡¨å¤±è´¥:",e),C("åŠ è½½æ–‡ä»¶åˆ—è¡¨å¤±è´¥")}finally{k(!1)}})()},[]),!v&&"false"===g.enableDocsPage&&"true"!==g.docsThemeEnabled)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-bg-primary",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-text-tertiary",children:"è·³è½¬ä¸­..."})]})});let M=j.filter(e=>e.toLowerCase().includes(S.toLowerCase())),L={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:[0,0,.2,1]}}};return(0,t.jsxs)("main",{className:"min-h-screen bg-bg-primary flex flex-col relative",children:[(0,t.jsx)(x.default,{}),(0,t.jsx)(f.default,{}),(0,t.jsx)("div",{className:"h-16"}),(0,t.jsxs)("div",{className:"flex-1 container mx-auto px-4 max-w-6xl py-8 md:py-12",children:[(0,t.jsxs)(i.motion.div,{className:"text-center mb-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-500/10 mb-4",children:(0,t.jsx)(u.BookOpen,{className:"w-8 h-8 text-primary-500"})}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-text-primary mb-3",children:E.title}),(0,t.jsx)("p",{className:"text-text-secondary text-lg max-w-2xl mx-auto",children:E.description})]}),(0,t.jsx)(i.motion.div,{className:"mb-10 max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-tertiary"}),(0,t.jsx)("input",{type:"text",placeholder:"æœç´¢æ–‡æ¡£...",value:S,onChange:e=>T(e.target.value),className:"w-full pl-12 pr-10 py-3.5 bg-bg-secondary border border-border-primary rounded-xl text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500 transition-all"}),S&&(0,t.jsx)("button",{onClick:()=>T(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors",children:(0,t.jsx)(c.X,{className:"w-5 h-5"})})]})}),w?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((e,s)=>(0,t.jsx)("div",{className:"h-28 bg-bg-secondary animate-pulse rounded-xl border border-border-primary"},s))}):N?(0,t.jsxs)(i.motion.div,{className:"text-center py-20",initial:{opacity:0},animate:{opacity:1},children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-bg-secondary mb-6",children:(0,t.jsx)(n.FileText,{className:"w-10 h-10 text-text-tertiary"})}),(0,t.jsx)("p",{className:"text-text-secondary text-lg mb-4",children:N}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-2.5 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"é‡è¯•"})]}):0===M.length?(0,t.jsxs)(i.motion.div,{className:"text-center py-20",initial:{opacity:0},animate:{opacity:1},children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-bg-secondary mb-6",children:(0,t.jsx)(d.FolderOpen,{className:"w-10 h-10 text-text-tertiary"})}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:S?"æœªæ‰¾åˆ°åŒ¹é…çš„æ–‡æ¡£":"æš‚æ— æ–‡æ¡£"}),(0,t.jsx)("p",{className:"text-text-tertiary max-w-md mx-auto",children:S?"å°è¯•ä½¿ç”¨å…¶ä»–å…³é”®è¯æœç´¢":"å°† .md æ–‡ä»¶æ”¾å…¥ public/markdown ç›®å½•å³å¯æ˜¾ç¤º"})]}):(0,t.jsx)(i.motion.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.06}}},initial:"hidden",animate:"visible",children:M.map((s,r)=>(0,t.jsxs)(i.motion.button,{variants:L,onClick:()=>e.push(`/docs/${s.replace(/\.md$/,"")}`),className:"group flex items-center gap-4 p-5 bg-bg-secondary rounded-xl border border-border-primary hover:border-primary-500/50 hover:shadow-lg hover:shadow-primary-500/5 transition-all text-left",whileHover:{y:-2},whileTap:{scale:.98},children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-xl bg-primary-500/10 flex items-center justify-center group-hover:bg-primary-500/20 transition-colors",children:(0,t.jsx)(n.FileText,{className:"w-6 h-6 text-primary-500"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-text-primary group-hover:text-primary-500 transition-colors truncate",children:s.replace(/\.md$/,"")}),(0,t.jsx)("p",{className:"text-sm text-text-tertiary mt-0.5 truncate",children:s})]}),(0,t.jsx)(m,{className:"w-5 h-5 text-text-tertiary group-hover:text-primary-500 group-hover:translate-x-1 transition-all flex-shrink-0"})]},s))}),!w&&!N&&j.length>0&&E.usageTitle&&E.usageContent&&(0,t.jsxs)(i.motion.div,{className:"mt-16 p-6 bg-bg-secondary rounded-xl border border-border-primary",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[(0,t.jsx)(u.BookOpen,{className:"w-5 h-5 text-primary-500"}),E.usageTitle]}),(0,t.jsx)("ul",{className:"space-y-3 text-text-secondary text-sm",children:E.usageContent.split("\n").filter(Boolean).map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-primary-500 mt-2 flex-shrink-0"}),(0,t.jsx)("span",{children:e})]},s))})]})]}),(0,t.jsx)("footer",{className:"border-t border-border-primary py-6",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl text-center text-sm text-text-tertiary",children:[(0,t.jsx)("p",{dangerouslySetInnerHTML:{__html:g.footerCopyright||`\xa9 ${new Date().getFullYear()} ä¸ªäººä¸»é¡µ. All rights reserved.`}}),(0,t.jsx)(h.default,{})]})})]})}e.s(["default",()=>g],37974)},84912,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(9165),i=e.i(44739);let a=e=>{let t=e.toLowerCase();return[".mp4",".webm",".ogg",".mov",".avi"].some(e=>t.endsWith(e)||t.endsWith("#"+e.slice(1)))},l=({src:e,alt:r,onClick:i,className:a=""})=>{let l=(0,s.useRef)(null),[n,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=l.current;if(!e)return;let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(d(!0),t.disconnect())})},{rootMargin:"100px",threshold:.1});return t.observe(e),()=>t.disconnect()},[]),(0,t.jsx)("img",{ref:l,src:c?e:void 0,"data-src":e,alt:r,onClick:i,className:`${a} ${n?"sf-img-loaded":"sf-img-loading"}`,onLoad:()=>o(!0),onError:()=>{m(!0),o(!0)},style:{backgroundColor:n?"transparent":void 0,display:u&&!n?"none":void 0}})},n=e=>e.startsWith("http://")||e.startsWith("https://"),o=({video:e,images:i})=>{let l=e||i.find(e=>a(e)),o=(0,s.useRef)(null),c=(0,s.useRef)(null),[d,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[f,x]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{let e=c.current;if(!e)return;let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(u(!0),t.disconnect())})},{rootMargin:"50px",threshold:.1});return t.observe(e),()=>t.disconnect()},[]),(0,s.useEffect)(()=>{let e=c.current,t=o.current;if(!e||!t)return;let s=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting||t.paused||t.pause()})},{threshold:0});return s.observe(e),()=>s.disconnect()},[d]),!l)return null;let p=l.replace(/#\.(mp4|webm|ogg|mov|avi)$/i,""),g=n(p)?(0,r.getApiUrl)(`/proxy/video?url=${encodeURIComponent(p)}`):(0,r.getImageUrl)(p);return(0,t.jsx)("div",{className:"sf-video",ref:c,children:d&&(0,t.jsxs)("div",{className:"sf-video-wrapper",children:[(0,t.jsx)("video",{ref:o,src:g,controls:!0,preload:m?"auto":"metadata",onPlay:()=>{x(!1)},onPause:()=>{x(!0)},playsInline:!0}),f&&(0,t.jsx)("div",{className:"sf-video-play-btn",onClick:()=>{h(!0),x(!1),setTimeout(()=>{o.current?.play()},100)},children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M8 5v14l11-7z"})})})]})})},c=({images:e,thumbnails:s,isFourImages:i=!1,onImageClick:o})=>{let c=e.filter(e=>!a(e));if(0===c.length)return null;let d=e=>{let t=c[e];return n(t)?t:s&&s[e]?(0,r.getImageUrl)(s[e]):(0,r.getImageUrl)(t)};return 1===c.length?(0,t.jsx)("div",{className:"sf-pic-grid sf-pic-1",children:(0,t.jsx)(l,{src:d(0),onClick:()=>o(c,0),alt:"åŠ¨æ€å›¾ç‰‡"})}):(0,t.jsx)("div",{className:`sf-pic-grid ${i?"sf-pic-4":""}`,children:c.map((e,s)=>(0,t.jsx)(l,{src:d(s),onClick:()=>o(c,s),alt:`åŠ¨æ€å›¾ç‰‡${s+1}`},s))})},d=s.default.memo(({content:e,maxLines:r=4})=>{let[i,a]=(0,s.useState)(!1),[l,n]=(0,s.useState)(!1),o=(0,s.useRef)(null),c=(0,s.useRef)(null),d=(0,s.useRef)(0),u=e&&e.includes("<iframe"),{textPart:m,iframePart:h}=(e=>{if(!e)return{textPart:"",iframePart:""};let t=/<iframe[\s\S]*?<\/iframe>/gi,s=e.match(t)||[];return{textPart:e.replace(t,"").trim(),iframePart:s.join("")}})(e),f=e=>{if(!e)return"";let t=e.replace(/\n/g,"<br>");return t.replace(/<iframe([^>]*)src="([^"]*)"([^>]*)>([\s\S]*?)<\/iframe>/gi,(e,t,s,r,i)=>{let a=s;a=s.includes("autoplay=")?s.replace(/autoplay=1/gi,"autoplay=0"):s+(s.includes("?")?"&":"?")+"autoplay=0";let l=t.includes("loading=")||r.includes("loading="),n=`<iframe${t}src="${a}"${r}${l?"":' loading="lazy"'}>${i}</iframe>`;return s.includes("music.163.com")?`<div class="sf-music163-wrapper">${n}</div>`:n})},x=f(m),p=f(h);(0,s.useEffect)(()=>{d.current+=1},[e]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{let e=o.current,t=c.current;if(!e||!t)return;let s=(parseFloat(getComputedStyle(e).lineHeight)||21)*r;t.scrollHeight>s+5?n(!0):n(!1)},100);return()=>{clearTimeout(e)}},[m,r]);let g=`content-${d.current}`;if(u)return(0,t.jsxs)("div",{className:"sf-text-wrapper",children:[m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:c,className:"sf-text sf-text-measure",dangerouslySetInnerHTML:{__html:x},style:{position:"absolute",visibility:"hidden",width:"100%",pointerEvents:"none"}}),(0,t.jsx)("div",{ref:o,className:`sf-text ${!i&&l?"sf-text-collapsed":""}`,style:!i&&l?{WebkitLineClamp:r,display:"-webkit-box",WebkitBoxOrient:"vertical",overflow:"hidden"}:void 0,dangerouslySetInnerHTML:{__html:x}}),l&&(0,t.jsx)("span",{className:"sf-text-toggle",onClick:()=>a(!i),children:i?"æ”¶èµ·":"å±•å¼€"})]}),(0,t.jsx)("div",{className:"sf-text sf-iframe-container",dangerouslySetInnerHTML:{__html:p}})]});let y=f(e);return(0,t.jsxs)("div",{className:"sf-text-wrapper",children:[(0,t.jsx)("div",{ref:c,className:"sf-text sf-text-measure",dangerouslySetInnerHTML:{__html:y},style:{position:"absolute",visibility:"hidden",width:"100%",pointerEvents:"none"}}),(0,t.jsx)("div",{ref:o,className:`sf-text ${!i&&l?"sf-text-collapsed":""}`,style:!i&&l?{WebkitLineClamp:r,display:"-webkit-box",WebkitBoxOrient:"vertical",overflow:"hidden"}:void 0,dangerouslySetInnerHTML:{__html:y}},g),l&&(0,t.jsx)("span",{className:"sf-text-toggle",onClick:()=>a(!i),children:i?"æ”¶èµ·":"å±•å¼€"})]})});function u(){let[e,l]=(0,s.useState)({cover_image:"",avatar:"",nickname:"æœ‹å‹åœˆ",signature:"",custom_copyright:""}),[u,m]=(0,s.useState)([]),[h,f]=(0,s.useState)(!0),[x,p]=(0,s.useState)(null),[g,y]=(0,s.useState)(1),[v,j]=(0,s.useState)(!0),[b,w]=(0,s.useState)(!1),k=(0,s.useRef)(null),[N,C]=(0,s.useState)([]),[S,T]=(0,s.useState)(0),[E,M]=(0,s.useState)(!1),[L,$]=(0,s.useState)(null),[I,P]=(0,s.useState)(null),[H,R]=(0,s.useState)(!1),[_,A]=(0,s.useState)({}),[F,U]=(0,s.useState)(!1),[B,W]=(0,s.useState)(!1),[z,O]=(0,s.useState)({browserTitle:"æœ‹å‹åœˆ",browserSubtitle:""});(0,s.useEffect)(()=>{document.title=z.browserTitle},[z.browserTitle]),(0,s.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([fetch((0,r.getApiUrl)("/settings")),fetch((0,r.getApiUrl)("/page-texts/socialFeed"))]);if(e.ok){let t=await e.json();if(t.success&&t.data){let e={};t.data.forEach(t=>{e[t.key]=t.value}),W("true"===e.socialFeedThemeEnabled)}}if(t.ok){let e=await t.json();e.success&&e.data&&O({browserTitle:e.data.browserTitle||"æœ‹å‹åœˆ",browserSubtitle:e.data.browserSubtitle||""})}}catch(e){console.error("èŽ·å–è®¾ç½®å¤±è´¥:",e)}})()},[]);let D=(0,s.useCallback)(async()=>{if(!b&&v){w(!0);try{let e=await fetch((0,r.getApiUrl)(`/social-feed/posts?page=${g+1}&limit=10`));if(e.ok){let t=await e.json();if(t.success&&t.data?.posts){let e=t.data.posts;e.length<10&&j(!1),e.length>0?(m(t=>[...t,...e]),y(e=>e+1)):j(!1)}}}catch(e){console.error("åŠ è½½æ›´å¤šå¤±è´¥:",e)}finally{w(!1)}}},[g,b,v]);(0,s.useEffect)(()=>{let e=k.current;if(!e)return;let t=new IntersectionObserver(e=>{e[0].isIntersecting&&v&&!b&&!h&&D()},{rootMargin:"100px",threshold:.1});return t.observe(e),()=>t.disconnect()},[v,b,h,D]),(0,s.useEffect)(()=>{(async()=>{try{f(!0),p(null);let[e,t]=await Promise.all([fetch((0,r.getApiUrl)("/social-feed/profile")),fetch((0,r.getApiUrl)("/social-feed/posts?page=1&limit=10"))]);if(e.ok){let t=await e.json();t.success&&t.data&&l(t.data)}if(t.ok){let e=await t.json();if(e.success&&e.data?.posts){let t=e.data.posts;m(t),t.length<10&&j(!1)}}}catch(e){console.error("åŠ è½½æ•°æ®å¤±è´¥:",e),p("åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}finally{f(!1)}})()},[]),(0,s.useEffect)(()=>{let e=()=>{R(window.scrollY>300)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,s.useEffect)(()=>{if(!E)return;let e=e=>{"ArrowLeft"===e.key&&S>0?T(e=>e-1):"ArrowRight"===e.key&&S<N.length-1?T(e=>e+1):"Escape"===e.key&&q()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[E,S,N.length]);let X=(0,s.useCallback)((e,t)=>{C(e.map(e=>n(e)?e:(0,r.getImageUrl)(e))),T(t),A({}),M(!0),document.body.style.overflow="hidden"},[]),q=()=>{M(!1),document.body.style.overflow="",T(0),C([])},V=e=>{let t=S+e;t>=0&&t<N.length&&T(t)};return h?(0,t.jsx)("div",{className:`sf-page ${F?"sf-dark":"sf-light"}`,children:(0,t.jsx)("div",{className:"sf-loading",children:"åŠ è½½ä¸­..."})}):x?(0,t.jsx)("div",{className:`sf-page ${F?"sf-dark":"sf-light"}`,children:(0,t.jsxs)("div",{className:"sf-error",children:[(0,t.jsx)("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"ðŸ˜”"}),(0,t.jsx)("div",{children:x})]})}):(0,t.jsxs)("div",{className:`sf-page ${F?"sf-dark":"sf-light"}`,children:[(0,t.jsxs)("div",{className:"sf-container",children:[(0,t.jsxs)("div",{className:"sf-header",children:[!B&&(0,t.jsx)("a",{href:"/",className:"sf-back-home",title:"è¿”å›žé¦–é¡µ",children:(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),(0,t.jsx)("img",{className:"sf-cover",src:e.cover_image?(0,r.getImageUrl)(e.cover_image):"/pyqbj.png",alt:"å°é¢"}),(0,t.jsx)("div",{className:"sf-nickname",children:e.nickname||"Arran"}),(0,t.jsx)("div",{className:"sf-signature",children:e.signature||"åˆ†äº«ç”Ÿæ´»ï¼Œè®°å½•ç¾Žå¥½æ—¶åˆ»"}),(0,t.jsx)("div",{className:"sf-avatar",children:(0,t.jsx)("img",{src:e.avatar?(0,r.getImageUrl)(e.avatar):"/pyqtx.png",alt:"å¤´åƒ"})})]}),(0,t.jsxs)("div",{className:"sf-feed-list",children:[0===u.length?(0,t.jsx)("div",{className:"sf-empty",children:"æš‚æ— åŠ¨æ€"}):u.map(s=>{let i,l,n,u,m;return(0,t.jsxs)("div",{className:"sf-feed-item",children:[(0,t.jsx)("div",{className:"sf-avatar-col",children:(0,t.jsx)("img",{src:e.avatar?(0,r.getImageUrl)(e.avatar):"/pyqtx.png",loading:"lazy",alt:e.nickname})}),(0,t.jsxs)("div",{className:"sf-content-col",children:[(0,t.jsx)("div",{className:"sf-user-name",children:e.nickname||"æœ‹å‹åœˆ"}),(0,t.jsx)(d,{content:s.content,maxLines:4}),(0,t.jsx)(o,{video:s.video,images:s.images||[]}),s.images&&s.images.length>0&&(0,t.jsx)(c,{images:s.images,thumbnails:s.thumbnails,isFourImages:4===s.images.filter(e=>!a(e)).length,onImageClick:X}),(0,t.jsxs)("div",{className:"sf-footer",children:[(0,t.jsx)("span",{className:"sf-time",children:(i=new Date(s.created_at),n=Math.floor((l=new Date().getTime()-i.getTime())/6e4),u=Math.floor(l/36e5),m=Math.floor(l/864e5),n<1?"åˆšåˆš":n<60?`${n}åˆ†é’Ÿå‰`:u<24?`${u}å°æ—¶å‰`:m<7?`${m}å¤©å‰`:i.toLocaleDateString("zh-CN",{month:"long",day:"numeric"}))}),s.is_pinned&&(0,t.jsx)("span",{className:"sf-pin",children:"ç½®é¡¶"})]})]})]},s.id)}),(0,t.jsxs)("div",{ref:k,className:"sf-load-more",children:[b&&(0,t.jsx)("div",{className:"sf-loading-more",children:"åŠ è½½ä¸­..."}),!v&&u.length>0&&(0,t.jsx)("div",{className:"sf-no-more",children:"å·²åŠ è½½å…¨éƒ¨åŠ¨æ€"})]})]}),(0,t.jsxs)("div",{className:"sf-copyright",children:[e.custom_copyright&&(0,t.jsx)("div",{className:"sf-custom-copyright",children:e.custom_copyright}),(0,t.jsx)(i.default,{})]}),E&&(0,t.jsxs)("div",{className:"sf-lightbox",onTouchStart:e=>{P(null),$(e.targetTouches[0].clientX)},onTouchMove:e=>{P(e.targetTouches[0].clientX)},onTouchEnd:()=>{if(!L||!I)return;let e=L-I;e>50&&S<N.length-1&&T(e=>e+1),e<-50&&S>0&&T(e=>e-1)},children:[(0,t.jsx)("div",{className:"sf-lb-close",onClick:q,children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,t.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),N.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`sf-lb-prev ${0===S?"sf-lb-disabled":""}`,onClick:()=>V(-1),children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,t.jsx)("div",{className:`sf-lb-next ${S===N.length-1?"sf-lb-disabled":""}`,onClick:()=>V(1),children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]}),(0,t.jsxs)("div",{className:"sf-lb-img-container",children:[!_[S]&&(0,t.jsx)("div",{className:"sf-lb-loading",children:(0,t.jsx)("div",{className:"sf-lb-spinner"})}),(0,t.jsx)("img",{src:N[S],alt:"é¢„è§ˆå›¾ç‰‡",className:`sf-lb-img ${_[S]?"sf-lb-img-loaded":"sf-lb-img-loading"}`,onLoad:()=>A(e=>({...e,[S]:!0})),onError:()=>A(e=>({...e,[S]:!0}))})]}),(0,t.jsxs)("div",{className:"sf-lb-counter",children:[S+1," / ",N.length]})]})]}),(0,t.jsx)("div",{className:"sf-theme-btn",onClick:()=>{U(e=>!e)},title:F?"åˆ‡æ¢æµ…è‰²":"åˆ‡æ¢æ·±è‰²",children:F?(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),(0,t.jsx)("div",{className:`sf-back-top ${H?"sf-visible":""}`,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},title:"å›žåˆ°é¡¶éƒ¨",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})}e.s(["default",()=>u])},52683,e=>{"use strict";var t=e.i(18050),s=e.i(95987),r=e.i(58795),i=e.i(26261),a=e.i(18795),l=e.i(84912),n=e.i(37974);function o(){let{settings:e,isLoading:o}=(0,s.useSettings)();return o?(0,t.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("div",{style:{color:"#666"},children:"åŠ è½½ä¸­..."})}):"true"===e.docsThemeEnabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.default,{}),(0,t.jsx)(n.default,{})]}):"true"===e.socialFeedThemeEnabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.default,{}),(0,t.jsx)(l.default,{})]}):"true"===e.promoThemeEnabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.default,{}),(0,t.jsx)(a.default,{})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.default,{}),(0,t.jsx)(r.default,{rawSettings:e,isLoading:o})]})}e.s(["default",()=>o])}]);