(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40803,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(46932),a=e.i(88653),i=e.i(75254);let l=(0,i.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),o=(0,i.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var n=e.i(37727);function d({show:e,message:i,type:d,duration:c=3e3,onClose:m}){let[u,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(e){x(!0);let e=setTimeout(()=>{x(!1)},c);return()=>clearTimeout(e)}x(!1)},[e,c]),(0,s.useEffect)(()=>{if(!u&&e){let e=setTimeout(m,300);return()=>clearTimeout(e)}},[u,e,m]);let g=(()=>{switch(d){case"success":return{bg:"bg-green-50 border-green-200",text:"text-green-800",icon:(0,t.jsx)(l,{className:"w-5 h-5 text-green-500"})};case"error":return{bg:"bg-red-50 border-red-200",text:"text-red-800",icon:(0,t.jsx)(o,{className:"w-5 h-5 text-red-500"})};default:return{bg:"bg-blue-50 border-blue-200",text:"text-blue-800",icon:(0,t.jsx)(l,{className:"w-5 h-5 text-blue-500"})}}})();return(0,t.jsx)(a.AnimatePresence,{children:u&&(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.2},className:"fixed top-4 right-4 z-[999999] min-w-[300px] max-w-md",children:(0,t.jsxs)("div",{className:`${g.bg} border rounded-lg shadow-lg p-4 flex items-start gap-3`,children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:g.icon}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:`${g.text} text-sm font-medium`,children:i})}),(0,t.jsx)("button",{onClick:()=>{x(!1)},className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,t.jsx)(n.X,{className:"w-4 h-4"})})]})})})}e.s(["default",()=>d],40803)},88653,e=>{"use strict";e.i(47167);var t=e.i(18050),s=e.i(71645),r=e.i(31178),a=e.i(47414),i=e.i(74008),l=e.i(21476),o=e.i(72846),n=s,d=e.i(37806);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class m extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:r,anchorX:a,root:i}){let l=(0,n.useId)(),o=(0,n.useRef)(null),u=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=(0,n.useContext)(d.MotionConfigContext),g=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,r=e.map(e=>{let r=c(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():c(e[t],null)}}}}(...e),e)}(o,e?.ref);return(0,n.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:n,right:d}=u.current;if(r||!o.current||!e||!t)return;let c="left"===a?`left: ${n}`:`right: ${d}`;o.current.dataset.motionPopId=l;let m=document.createElement("style");x&&(m.nonce=x);let g=i??document.head;return g.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${c}px !important;
            top: ${s}px !important;
          }
        `),()=>{g.contains(m)&&g.removeChild(m)}},[r]),(0,t.jsx)(m,{isPresent:r,childRef:o,sizeRef:u,children:n.cloneElement(e,{ref:g})})}let x=({children:e,initial:r,isPresent:i,onExitComplete:o,custom:n,presenceAffectsLayout:d,mode:c,anchorX:m,root:x})=>{let p=(0,a.useConstant)(g),h=(0,s.useId)(),b=!0,f=(0,s.useMemo)(()=>(b=!1,{id:h,initial:r,isPresent:i,custom:n,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;o&&o()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[i,p,o]);return d&&b&&(f={...f}),(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[i]),s.useEffect(()=>{i||p.size||!o||o()},[i]),"popLayout"===c&&(e=(0,t.jsx)(u,{isPresent:i,anchorX:m,root:x,children:e})),(0,t.jsx)(l.PresenceContext.Provider,{value:f,children:e})};function g(){return new Map}var p=e.i(64978);let h=e=>e.key||"";function b(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let f=({children:e,custom:l,initial:o=!0,onExitComplete:n,presenceAffectsLayout:d=!0,mode:c="sync",propagate:m=!1,anchorX:u="left",root:g})=>{let[f,y]=(0,p.usePresence)(m),j=(0,s.useMemo)(()=>b(e),[e]),v=m&&!f?[]:j.map(h),N=(0,s.useRef)(!0),_=(0,s.useRef)(j),w=(0,a.useConstant)(()=>new Map),[k,C]=(0,s.useState)(j),[S,$]=(0,s.useState)(j);(0,i.useIsomorphicLayoutEffect)(()=>{N.current=!1,_.current=j;for(let e=0;e<S.length;e++){let t=h(S[e]);v.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[S,v.length,v.join("-")]);let T=[];if(j!==k){let e=[...j];for(let t=0;t<S.length;t++){let s=S[t],r=h(s);v.includes(r)||(e.splice(t,0,s),T.push(s))}return"wait"===c&&T.length&&(e=T),$(b(e)),C(j),null}let{forceRender:F}=(0,s.useContext)(r.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:S.map(e=>{let s=h(e),r=(!m||!!f)&&(j===S||v.includes(s));return(0,t.jsx)(x,{isPresent:r,initial:(!N.current||!!o)&&void 0,custom:l,presenceAffectsLayout:d,mode:c,root:g,onExitComplete:r?void 0:()=>{if(!w.has(s))return;w.set(s,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(F?.(),$(_.current),m&&y?.(),n&&n())},anchorX:u,children:e},s)})})};e.s(["AnimatePresence",()=>f],88653)},64740,e=>{"use strict";var t=e.i(71645),s=e.i(90499);let r=null;function a(e,i=!1){let[l,o]=(0,t.useState)(r||""),n=(0,s.useOptionalPageTitleContext)();(0,t.useEffect)(()=>{i&&n&&n.setTitle(e)},[e,i,n]),(0,t.useEffect)(()=>{r?o(r):(async()=>{try{let e=await fetch("/api/settings");if(e.ok){let t=await e.json();if(t.success&&t.data){let e={};t.data.forEach(t=>{e[t.key]=t.value});let s=e.siteTitle||"";r=s,o(s)}}}catch(e){console.error("Failed to fetch site title:",e)}})()},[]),(0,t.useEffect)(()=>{let t=document.title;return i?"ä»ªè¡¨ç›˜"===e?document.title=`${l} - åŽå°ç®¡ç†ç³»ç»Ÿ`:document.title=`${e} - ${l}åŽå°ç®¡ç†ç³»ç»Ÿ`:document.title=`${e} - ${l}`,()=>{document.title=t}},[e,l,i])}e.s(["usePageTitle",()=>a])},79950,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(18566),a=e.i(57951),i=e.i(9165),l=e.i(64740),o=e.i(40803);let n=e=>{if(!e)return"";try{let t=new Date(e);if(isNaN(t.getTime()))return"";let s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${s}-${r}-${a}T${i}:${l}`}catch(e){return""}};function d(){(0,l.usePageTitle)("å¾…åŠžäº‹é¡¹ç®¡ç†",!0),(0,r.useRouter)();let{user:e}=(0,a.useAuth)(),[d,c]=(0,s.useState)([]),[m,u]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),[p,h]=(0,s.useState)(!1),[b,f]=(0,s.useState)({title:"",description:"",due_date:"",reminder_enabled:!1,reminder_time:"",is_completed:!1,progress:0,priority:"medium",status:"todo",category:"",estimated_hours:void 0,actual_hours:void 0,start_date:"",time_logs:[]}),[y,j]=(0,s.useState)(""),[v,N]=(0,s.useState)("all"),[_,w]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[S,$]=(0,s.useState)(null),[T,F]=(0,s.useState)({title:"",description:"",due_date:"",reminder_enabled:!1,reminder_time:"",is_completed:!1,progress:0,priority:"medium",status:"todo",category:"",estimated_hours:void 0,actual_hours:void 0,start_date:"",time_logs:[]}),[L,E]=(0,s.useState)({time:"",description:""}),[D,M]=(0,s.useState)({show:!1,type:"success",message:""});(0,s.useEffect)(()=>{P()},[]);let P=async()=>{try{let e=await (0,i.getAdminTodos)();if(e.success){let t=Array.isArray(e.data)?e.data:[];c(t)}}catch(e){M({show:!0,type:"error",message:e.response?.data?.message||e.message||"åŠ è½½å¾…åŠžäº‹é¡¹å¤±è´¥"}),c([])}finally{u(!1)}},A=e=>{let{name:t,type:s,value:r}=e.target,a=r;"checkbox"===s&&(a=e.target.checked),f({...b,[t]:a})},R=async e=>{e.preventDefault();try{let e={...b,due_date:b.due_date||void 0,reminder_time:b.reminder_time||void 0,progress:_?b.progress:0,priority:_?b.priority:"medium",status:_?b.status:"todo",category:_?b.category:null,estimated_hours:_?b.estimated_hours:null,actual_hours:_?b.actual_hours:null,start_date:_?b.start_date||void 0:null,time_logs:_?b.time_logs:[]};if(x?.id){if(!d.find(e=>e.id===x.id)){M({show:!0,type:"error",message:"å¾…åŠžäº‹é¡¹ä¸å­˜åœ¨ï¼Œå¯èƒ½å·²è¢«åˆ é™¤"}),I();return}(await (0,i.updateAdminTodo)(x.id,e)).success&&(M({show:!0,type:"success",message:"å¾…åŠžäº‹é¡¹æ›´æ–°æˆåŠŸ"}),await P(),I())}else(await (0,i.createAdminTodo)(e)).success&&(M({show:!0,type:"success",message:"å¾…åŠžäº‹é¡¹åˆ›å»ºæˆåŠŸ"}),await P(),I())}catch(e){e.response?.status===404?(M({show:!0,type:"error",message:"å¾…åŠžäº‹é¡¹ä¸å­˜åœ¨ï¼Œå¯èƒ½å·²è¢«åˆ é™¤"}),I()):M({show:!0,type:"error",message:e.response?.data?.message||"æ“ä½œå¤±è´¥"})}},z=async e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¾…åŠžäº‹é¡¹å—ï¼Ÿ"))try{(await (0,i.deleteAdminTodo)(e)).success&&(M({show:!0,type:"success",message:"å¾…åŠžäº‹é¡¹åˆ é™¤æˆåŠŸ"}),x?.id===e&&I(),await P())}catch(e){M({show:!0,type:"error",message:e.response?.data?.message||"åˆ é™¤å¤±è´¥"})}},H=async(e,t)=>{try{(await (0,i.updateAdminTodo)(e,{is_completed:!t})).success&&(M({show:!0,type:"success",message:t?"æ ‡è®°ä¸ºæœªå®Œæˆ":"æ ‡è®°ä¸ºå·²å®Œæˆ"}),await P())}catch(e){M({show:!0,type:"error",message:e.response?.data?.message||"æ“ä½œå¤±è´¥"})}},I=()=>{f({title:"",description:"",due_date:"",reminder_enabled:!1,reminder_time:"",is_completed:!1,progress:0,priority:"medium",status:"todo",category:"",estimated_hours:void 0,actual_hours:void 0,start_date:"",time_logs:[]}),g(null),h(!1),w(!1)},B=()=>{C(!1),$(null),E({time:"",description:""})},O=e=>{let{name:t,type:s,value:r}=e.target,a=r;"checkbox"===s?a=e.target.checked:"progress"===t?a=parseInt(r):("estimated_hours"===t||"actual_hours"===t)&&(a=""===r?void 0:parseFloat(r)),F({...T,[t]:a})},W=()=>{if(!L.time||!L.description.trim())return void M({show:!0,type:"error",message:"è¯·å¡«å†™å®Œæ•´çš„æ—¶é—´ç‚¹å’Œæè¿°"});let e={id:Date.now(),time:L.time,description:L.description.trim()};F({...T,time_logs:[...T.time_logs||[],e]}),E({time:"",description:""}),M({show:!0,type:"success",message:"æ—¶é—´ç‚¹è®°å½•å·²æ·»åŠ "})},U=(e,t,s)=>{F({...T,time_logs:(T.time_logs||[]).map(r=>r.id===e?{...r,[t]:s}:r)})},K=async()=>{if(S?.id)try{let e={...T,due_date:T.due_date||void 0,reminder_time:T.reminder_time||void 0,start_date:T.start_date||void 0};(await (0,i.updateAdminTodo)(S.id,e)).success&&(M({show:!0,type:"success",message:"é¡¹ç›®è¿›åº¦æ›´æ–°æˆåŠŸ"}),await P(),B())}catch(e){M({show:!0,type:"error",message:e.response?.data?.message||"ä¿å­˜å¤±è´¥"})}},X=e=>new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),q=(0,s.useMemo)(()=>d.filter(e=>{let t=e.title.toLowerCase().includes(y.toLowerCase())||e.description?.toLowerCase().includes(y.toLowerCase()),s="all"===v||"pending"===v&&!e.is_completed||"completed"===v&&e.is_completed;return t&&s}),[d,y,v]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.default,{show:D.show,message:D.message,type:D.type,onClose:()=>M({...D,show:!1})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"text",placeholder:"æœç´¢å¾…åŠžäº‹é¡¹...",value:y,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,t.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"å…¨éƒ¨çŠ¶æ€"}),(0,t.jsx)("option",{value:"pending",children:"æœªå®Œæˆ"}),(0,t.jsx)("option",{value:"completed",children:"å·²å®Œæˆ"})]})]})}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("button",{onClick:()=>{p?I():h(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:p?"å–æ¶ˆ":"+ æ·»åŠ å¾…åŠžäº‹é¡¹"})}),p&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:x?"ç¼–è¾‘å¾…åŠžäº‹é¡¹":"æ·»åŠ å¾…åŠžäº‹é¡¹"}),(0,t.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["æ ‡é¢˜ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:b.title,onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"å¾…åŠžäº‹é¡¹æ ‡é¢˜"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"æè¿°"}),(0,t.jsx)("textarea",{id:"description",name:"description",rows:3,value:b.description,onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"è¯¦ç»†æè¿°..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"æˆªæ­¢æ—¥æœŸ"}),(0,t.jsx)("input",{id:"due_date",name:"due_date",type:"datetime-local",value:b.due_date,onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("input",{id:"reminder_enabled",name:"reminder_enabled",type:"checkbox",checked:b.reminder_enabled,onChange:A,className:"w-4 h-4 mt-1 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("label",{htmlFor:"reminder_enabled",className:"font-medium text-gray-900",children:"å¯ç”¨æé†’åŠŸèƒ½"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"å¼€å¯åŽï¼Œå°†åœ¨è®¾å®šçš„æ—¶é—´é€šè¿‡å¼¹çª—æé†’æ‚¨å¤„ç†æ­¤å¾…åŠžäº‹é¡¹"})]})]}),b.reminder_enabled&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"reminder_time",className:"block text-sm font-medium text-gray-700 mb-2",children:"æé†’æ—¶é—´"}),(0,t.jsx)("input",{id:"reminder_time",name:"reminder_time",type:"datetime-local",value:b.reminder_time,onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"å¿«é€Ÿè®¾ç½®ï¼š"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{let e=new Date;e.setHours(e.getHours()+1),f({...b,reminder_time:n(e.toISOString())})},className:"px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",children:"1å°æ—¶åŽ"}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e=new Date;e.setHours(e.getHours()+3),f({...b,reminder_time:n(e.toISOString())})},className:"px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",children:"3å°æ—¶åŽ"}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e=new Date;e.setDate(e.getDate()+1),e.setHours(9,0,0,0),f({...b,reminder_time:n(e.toISOString())})},className:"px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",children:"æ˜Žå¤©ä¸Šåˆ9ç‚¹"}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e=new Date;e.setDate(e.getDate()+1),e.setHours(14,0,0,0),f({...b,reminder_time:n(e.toISOString())})},className:"px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",children:"æ˜Žå¤©ä¸‹åˆ2ç‚¹"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("input",{id:"progress_management_enabled",name:"progress_management_enabled",type:"checkbox",checked:_,onChange:e=>w(e.target.checked),className:"w-4 h-4 mt-1 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 focus:ring-2"}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("label",{htmlFor:"progress_management_enabled",className:"font-medium text-gray-900",children:"å¯ç”¨é¡¹ç›®è¿›åº¦ç®¡ç†"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"å¼€å¯åŽï¼Œå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ã€çŠ¶æ€ã€è¿›åº¦ã€å·¥æ—¶ç­‰è¯¦ç»†çš„é¡¹ç›®ç®¡ç†ä¿¡æ¯"})]})]}),_&&(0,t.jsx)("div",{className:"space-y-4 pt-3 border-t border-purple-200",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"ä¼˜å…ˆçº§"}),(0,t.jsxs)("select",{id:"priority",name:"priority",value:b.priority,onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"low",children:"ðŸŸ¢ ä½Ž"}),(0,t.jsx)("option",{value:"medium",children:"ðŸŸ¡ ä¸­"}),(0,t.jsx)("option",{value:"high",children:"ðŸŸ  é«˜"}),(0,t.jsx)("option",{value:"urgent",children:"ðŸ”´ ç´§æ€¥"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"ä»»åŠ¡çŠ¶æ€"}),(0,t.jsxs)("select",{id:"status",name:"status",value:b.status,onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"todo",children:"ðŸ“‹ å¾…å¼€å§‹"}),(0,t.jsx)("option",{value:"in_progress",children:"âš™ï¸ è¿›è¡Œä¸­"}),(0,t.jsx)("option",{value:"completed",children:"âœ… å·²å®Œæˆ"}),(0,t.jsx)("option",{value:"cancelled",children:"âŒ å·²å–æ¶ˆ"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»æ ‡ç­¾"}),(0,t.jsx)("input",{id:"category",name:"category",type:"text",value:b.category||"",onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼šå‰ç«¯å¼€å‘"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"progress",className:"block text-sm font-medium text-gray-700 mb-2",children:["å®Œæˆè¿›åº¦ (",b.progress,"%)"]}),(0,t.jsx)("input",{id:"progress",name:"progress",type:"range",min:"0",max:"100",value:b.progress||0,onChange:A,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"estimated_hours",className:"block text-sm font-medium text-gray-700 mb-2",children:"é¢„è®¡å·¥æ—¶ (å°æ—¶)"}),(0,t.jsx)("input",{id:"estimated_hours",name:"estimated_hours",type:"number",step:"0.5",min:"0",value:b.estimated_hours||"",onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼š8"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"actual_hours",className:"block text-sm font-medium text-gray-700 mb-2",children:"å®žé™…å·¥æ—¶ (å°æ—¶)"}),(0,t.jsx)("input",{id:"actual_hours",name:"actual_hours",type:"number",step:"0.5",min:"0",value:b.actual_hours||"",onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼š10"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"å¼€å§‹æ—¥æœŸ"}),(0,t.jsx)("input",{id:"start_date",name:"start_date",type:"datetime-local",value:b.start_date||"",onChange:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"is_completed",name:"is_completed",type:"checkbox",checked:b.is_completed,onChange:A,className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2"}),(0,t.jsx)("label",{htmlFor:"is_completed",className:"ml-2 text-sm font-medium text-gray-700",children:"æ ‡è®°ä¸ºå·²å®Œæˆ"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:x?"æ›´æ–°":"æ·»åŠ "}),(0,t.jsx)("button",{type:"button",onClick:I,className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"å–æ¶ˆ"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["å¾…åŠžäº‹é¡¹åˆ—è¡¨ (",q.length,")"]}),0===q.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,t.jsx)("p",{className:"text-sm",children:y||"all"!==v?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å¾…åŠžäº‹é¡¹":"è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•å¾…åŠžäº‹é¡¹"})]}):(0,t.jsx)("div",{className:"space-y-2",children:q.map(e=>{let s=e.progress&&e.progress>0||e.priority&&"medium"!==e.priority||e.status&&"todo"!==e.status||e.category||e.estimated_hours||e.actual_hours||e.start_date||e.time_logs&&e.time_logs.length>0;return(0,t.jsx)("div",{className:`p-3 sm:p-4 rounded-lg border transition-colors ${e.is_completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,t.jsx)("button",{onClick:()=>e.id&&H(e.id,e.is_completed),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-colors ${e.is_completed?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-green-500"}`,children:e.is_completed&&(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h3",{className:`font-medium break-words ${e.is_completed?"text-gray-500 line-through":"text-gray-900"}`,children:e.title}),e.priority&&"medium"!==e.priority&&(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded flex-shrink-0 ${"urgent"===e.priority?"bg-red-100 text-red-700":"high"===e.priority?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:"urgent"===e.priority?"ðŸ”´ ç´§æ€¥":"high"===e.priority?"ðŸŸ  é«˜":"ðŸŸ¢ ä½Ž"}),e.status&&"todo"!==e.status&&(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded flex-shrink-0 ${"completed"===e.status?"bg-green-100 text-green-700":"in_progress"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:"completed"===e.status?"âœ… å·²å®Œæˆ":"in_progress"===e.status?"âš™ï¸ è¿›è¡Œä¸­":"âŒ å·²å–æ¶ˆ"}),e.category&&(0,t.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded flex-shrink-0",children:["ðŸ·ï¸ ",e.category]}),e.reminder_enabled&&(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded flex-shrink-0",children:"ðŸ”” æé†’"})]}),void 0!==e.progress&&e.progress>0&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[(0,t.jsx)("span",{children:"è¿›åº¦"}),(0,t.jsxs)("span",{className:"font-semibold",children:[e.progress,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,t.jsx)("div",{className:`h-1.5 rounded-full transition-all ${100===e.progress?"bg-green-500":e.progress>=75?"bg-blue-500":e.progress>=50?"bg-yellow-500":"bg-orange-500"}`,style:{width:`${e.progress}%`}})})]}),e.description&&(0,t.jsx)("p",{className:`text-sm mb-1.5 break-words ${e.is_completed?"text-gray-400":"text-gray-600"}`,children:e.description}),(e.estimated_hours||e.actual_hours||e.start_date||e.due_date||e.reminder_enabled&&e.reminder_time)&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-0.5",children:[(e.estimated_hours||e.actual_hours)&&(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[e.estimated_hours&&(0,t.jsxs)("span",{children:["â±ï¸ é¢„è®¡: ",e.estimated_hours,"h"]}),e.actual_hours&&(0,t.jsxs)("span",{children:["â° å®žé™…: ",e.actual_hours,"h"]}),e.estimated_hours&&e.actual_hours&&(0,t.jsxs)("span",{className:`font-semibold ${e.actual_hours>e.estimated_hours?"text-red-600":"text-green-600"}`,children:["(",e.actual_hours>e.estimated_hours?"+":"",(e.actual_hours-e.estimated_hours).toFixed(1),"h)"]})]}),e.start_date&&(0,t.jsxs)("div",{children:["ðŸ“… å¼€å§‹: ",X(e.start_date)]}),e.due_date&&(0,t.jsxs)("div",{children:["â° æˆªæ­¢: ",X(e.due_date)]}),e.reminder_enabled&&e.reminder_time&&(0,t.jsxs)("div",{children:["ðŸ”” æé†’: ",X(e.reminder_time)]})]})]}),(0,t.jsxs)("div",{className:"flex sm:flex-col gap-2 flex-shrink-0",children:[s&&(0,t.jsx)("button",{onClick:()=>{$(e),F({...e,time_logs:e.time_logs||[]}),C(!0)},className:"flex-1 sm:flex-initial px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded transition-colors whitespace-nowrap",children:"ðŸ“Š è¿›åº¦è®°å½•"}),(0,t.jsx)("button",{onClick:()=>{g(e),f({title:e.title,description:e.description||"",due_date:n(e.due_date),reminder_enabled:e.reminder_enabled,reminder_time:n(e.reminder_time),is_completed:e.is_completed,progress:e.progress||0,priority:e.priority||"medium",status:e.status||"todo",category:e.category||"",estimated_hours:e.estimated_hours,actual_hours:e.actual_hours,start_date:n(e.start_date),time_logs:e.time_logs||[]}),w(!!(e.progress&&e.progress>0||e.priority&&"medium"!==e.priority||e.status&&"todo"!==e.status||e.category||e.estimated_hours||e.actual_hours||e.start_date||e.time_logs&&e.time_logs.length>0)),h(!0)},className:"flex-1 sm:flex-initial px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"ç¼–è¾‘"}),(0,t.jsx)("button",{onClick:()=>e.id&&z(e.id),className:"flex-1 sm:flex-initial px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors",children:"åˆ é™¤"})]})]})},e.id)})})]})]})}),k&&S&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 sm:px-6 py-3 z-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:["ðŸ“Š é¡¹ç›®è¿›åº¦ç®¡ç† - ",S.title]}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-0.5",children:"ç®¡ç†é¡¹ç›®è¿›åº¦ã€æ—¶é—´ç‚¹è®°å½•å’Œé¡¹ç›®ä¿¡æ¯"})]}),(0,t.jsx)("button",{onClick:B,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("div",{className:"p-4 sm:p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-3 border border-purple-200",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"ðŸ“Š é¡¹ç›®ä¿¡æ¯æ€»è§ˆ"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-2 text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"ä¼˜å…ˆçº§"}),(0,t.jsx)("div",{className:"text-sm font-semibold mt-0.5",children:"urgent"===T.priority?"ðŸ”´ ç´§æ€¥":"high"===T.priority?"ðŸŸ  é«˜":"low"===T.priority?"ðŸŸ¢ ä½Ž":"ðŸŸ¡ ä¸­"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-2 text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"çŠ¶æ€"}),(0,t.jsx)("div",{className:"text-sm font-semibold mt-0.5",children:"completed"===T.status?"âœ… å·²å®Œæˆ":"in_progress"===T.status?"âš™ï¸ è¿›è¡Œä¸­":"cancelled"===T.status?"âŒ å·²å–æ¶ˆ":"ðŸ“‹ å¾…å¼€å§‹"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-2 text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"è¿›åº¦"}),(0,t.jsxs)("div",{className:"text-sm font-semibold mt-0.5 text-purple-600",children:[T.progress,"%"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-2 text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"åˆ†ç±»"}),(0,t.jsx)("div",{className:"text-sm font-semibold mt-0.5 truncate",children:T.category||"æœªåˆ†ç±»"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"ðŸ“‹ åŸºç¡€ä¿¡æ¯"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ä¼˜å…ˆçº§"}),(0,t.jsxs)("select",{name:"priority",value:T.priority,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"low",children:"ðŸŸ¢ ä½Ž"}),(0,t.jsx)("option",{value:"medium",children:"ðŸŸ¡ ä¸­"}),(0,t.jsx)("option",{value:"high",children:"ðŸŸ  é«˜"}),(0,t.jsx)("option",{value:"urgent",children:"ðŸ”´ ç´§æ€¥"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ä»»åŠ¡çŠ¶æ€"}),(0,t.jsxs)("select",{name:"status",value:T.status,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"todo",children:"ðŸ“‹ å¾…å¼€å§‹"}),(0,t.jsx)("option",{value:"in_progress",children:"âš™ï¸ è¿›è¡Œä¸­"}),(0,t.jsx)("option",{value:"completed",children:"âœ… å·²å®Œæˆ"}),(0,t.jsx)("option",{value:"cancelled",children:"âŒ å·²å–æ¶ˆ"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»æ ‡ç­¾"}),(0,t.jsx)("input",{name:"category",type:"text",value:T.category||"",onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼šå‰ç«¯å¼€å‘"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å¼€å§‹æ—¥æœŸ"}),(0,t.jsx)("input",{name:"start_date",type:"datetime-local",value:T.start_date||"",onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"ðŸ“ˆ è¿›åº¦è·Ÿè¸ª"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["å®Œæˆè¿›åº¦: ",T.progress,"%"]}),(0,t.jsx)("input",{name:"progress",type:"range",min:"0",max:"100",step:"5",value:T.progress,onChange:O,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[(0,t.jsx)("span",{children:"0%"}),(0,t.jsx)("span",{children:"25%"}),(0,t.jsx)("span",{children:"50%"}),(0,t.jsx)("span",{children:"75%"}),(0,t.jsx)("span",{children:"100%"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"â±ï¸ å·¥æ—¶ç»Ÿè®¡"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"é¢„è®¡å·¥æ—¶ (å°æ—¶)"}),(0,t.jsx)("input",{name:"estimated_hours",type:"number",min:"0",step:"0.5",value:T.estimated_hours||"",onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼š8"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å®žé™…å·¥æ—¶ (å°æ—¶)"}),(0,t.jsx)("input",{name:"actual_hours",type:"number",min:"0",step:"0.5",value:T.actual_hours||"",onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼š10"})]})]}),T.estimated_hours&&T.actual_hours&&(0,t.jsx)("div",{className:`mt-3 text-xs sm:text-sm p-2 sm:p-3 rounded-lg ${T.actual_hours>T.estimated_hours?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-semibold",children:T.actual_hours>T.estimated_hours?"âš ï¸ è¶…æ—¶":"âœ… æå‰å®Œæˆ"}),(0,t.jsxs)("span",{children:["åå·®: ",T.actual_hours>T.estimated_hours?"+":"",(T.actual_hours-T.estimated_hours).toFixed(1),"h (",((T.actual_hours-T.estimated_hours)/T.estimated_hours*100).toFixed(1),"%)"]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"ðŸ• æ—¶é—´ç‚¹è®°å½•"}),(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-3",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"æ·»åŠ æ—¶é—´ç‚¹"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["æ—¶é—´ç‚¹ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"datetime-local",value:L.time,onChange:e=>E({...L,time:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["å·¥ä½œå†…å®¹ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:L.description,onChange:e=>E({...L,description:e.target.value}),onKeyPress:e=>"Enter"===e.key&&W(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"å¦‚ï¼šå®Œæˆäº†ç”¨æˆ·ç™»å½•æ¨¡å—"}),(0,t.jsx)("button",{type:"button",onClick:W,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors whitespace-nowrap",children:"æ·»åŠ "})]})]})]})]}),T.time_logs&&T.time_logs.length>0?(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["å·²è®°å½• ",T.time_logs.length," ä¸ªæ—¶é—´ç‚¹"]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"åºå·"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ—¶é—´ç‚¹"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"å·¥ä½œå†…å®¹"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ“ä½œ"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[...T.time_logs].sort((e,t)=>new Date(e.time).getTime()-new Date(t.time).getTime()).map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s+1}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:(0,t.jsx)("input",{type:"datetime-local",value:e.time,onChange:t=>U(e.id,"time",t.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,t.jsx)("input",{type:"text",value:e.description,onChange:t=>U(e.id,"description",t.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void(F({...T,time_logs:(T.time_logs||[]).filter(e=>e.id!==t)}),M({show:!0,type:"success",message:"æ—¶é—´ç‚¹è®°å½•å·²åˆ é™¤"}))},className:"text-red-600 hover:text-red-900",children:"åˆ é™¤"})})]},e.id))})]})}),(0,t.jsxs)("div",{className:"mt-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"æ—¶é—´è½´é¢„è§ˆ"}),(0,t.jsx)("div",{className:"space-y-3",children:[...T.time_logs].sort((e,t)=>new Date(e.time).getTime()-new Date(t.time).getTime()).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start bg-white rounded-lg p-3 shadow-sm",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:s+1}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:X(e.time)}),(0,t.jsx)("div",{className:"text-sm text-gray-900 mt-1",children:e.description})]})]},e.id))})]})]}):(0,t.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("h4",{className:"text-base font-medium text-gray-900 mb-2",children:"æš‚æ— æ—¶é—´ç‚¹è®°å½•"}),(0,t.jsx)("p",{className:"text-gray-500",children:"è¯·æ·»åŠ ç¬¬ä¸€ä¸ªæ—¶é—´ç‚¹è®°å½•æ¥è·Ÿè¸ªä»»åŠ¡è¿›åº¦"})]})]})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-4 sm:px-6 py-3 flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:B,className:"px-4 sm:px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"å–æ¶ˆ"}),(0,t.jsx)("button",{onClick:K,className:"px-4 sm:px-6 py-2 text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors",children:"ä¿å­˜æ›´æ”¹"})]})]})})]})}e.s(["default",()=>d])}]);