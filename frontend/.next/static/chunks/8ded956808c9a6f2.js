(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51951,e=>{"use strict";var s=e.i(18050),r=e.i(71645),t=e.i(18566),a=e.i(57951),o=e.i(75144),l=e.i(9165),n=e.i(75157);let i={siteTitle:"",siteSubtitle:"",siteDescription:"",siteKeywords:"",themeColor:"white",themeType:"default",footerCopyright:"",backgroundImage:"",backgroundOpacity:"0.5",showSiteNav:"true",showNotes:"true",showSocialLinks:"true",defaultDisplaySection:"notes",customFont:"",customFontName:"",todoReminderCheckInterval:"5",showNoteTags:"true",showNoteCategories:"true",messageIpLimitDays:"1",noteLayoutColumns:"1",avatarShape:"circle",showNoteCover:"true",defaultNoteCover:"",showNavigationRecommended:"true",blogLogo:"",blogLogoText:"",blogNavLinks:"[]",showTopNavbar:"true",showWapSidebar:"true",enableAvatarThemeSwitch:"false",promoThemeEnabled:"false",socialFeedThemeEnabled:"false",docsThemeEnabled:"false",enableUserPage:"true",enableBlogPage:"true",enablePromoPage:"true",enableDocsPage:"true",allowSEO:"false",enableSocialFeedPage:"true",blogAnnouncements:"[]",blogAnnouncementEnabled:"false"},d={navigation:{title:"导航列表",description:"探索精选的网站导航",browserTitle:"导航列表",browserSubtitle:""},services:{title:"服务业务",description:"为您提供专业的服务解决方案",browserTitle:"服务业务",browserSubtitle:""},notes:{title:"笔记列表",description:"探索所有已发布的笔记内容",browserTitle:"全部笔记",browserSubtitle:""},galleries:{title:"图库列表",description:"探索精彩的图片合集",browserTitle:"图库列表",browserSubtitle:""},messages:{title:"联系我们",description:"有任何问题都可以通过这里进行提交你的想法！",browserTitle:"留言板",browserSubtitle:""},promo:{browserTitle:"官网首页",browserSubtitle:"欢迎访问"},socialFeed:{browserTitle:"朋友圈",browserSubtitle:"分享生活点滴"},docs:{title:"文档中心",description:"浏览所有可用的 Markdown 文档，点击查看详情",browserTitle:"文档中心",browserSubtitle:"",usageTitle:"使用说明",usageContent:"将 Markdown 文件放入 public/markdown 目录\n通过 /docs/文件名 访问文档\n支持标准 Markdown 语法、GFM 扩展和 HTML 标签"}},c={section1:"notes",section2:"navigation",showInDefaultTheme:!0},u={storageType:"local",endpoint:"",region:"us-east-1",bucket:"",accessKeyId:"",secretAccessKey:"",customDomain:"",pathStyle:!1},h=[{key:"basic",label:"基本信息",icon:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{key:"functions",label:"功能设置",icon:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})},{key:"navigation",label:"导航栏",icon:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})},{key:"text-settings",label:"内容配置",icon:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})},{key:"account",label:"账户安全",icon:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}];function m({activeTab:e,setActiveTab:r}){return(0,s.jsx)("div",{className:"w-full flex-shrink-0",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsx)("div",{className:"p-3 overflow-x-auto",children:(0,s.jsx)("div",{className:"flex gap-2 min-w-max",children:h.map(t=>(0,s.jsx)("button",{onClick:()=>r(t.key),className:`px-4 py-2 text-sm font-medium transition-all duration-300 rounded-lg whitespace-nowrap ${e===t.key?"text-white bg-gradient-to-r from-blue-600 to-blue-700 shadow-md":"text-gray-700 hover:text-blue-600 hover:bg-blue-50 border border-gray-200"}`,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:e===t.key?"text-white":"text-gray-500",children:t.icon}),(0,s.jsx)("span",{children:t.label})]})},t.key))})})})})}function x({settings:e,saving:r,uploadingBackground:t,deletingBackground:a,uploadingFont:o,deletingFont:n,handleChange:i,handleSubmit:d,handleBackgroundUpload:c,handleBackgroundDelete:u,handleFontUpload:h,handleFontDelete:m}){return(0,s.jsx)("form",{onSubmit:d,children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-base font-semibold mb-4 text-gray-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center shadow-sm",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)("span",{children:"基本信息"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{htmlFor:"siteTitle",className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})}),"网站标题"]}),(0,s.jsx)("input",{id:"siteTitle",name:"siteTitle",type:"text",value:e.siteTitle,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400",placeholder:"XsBlog"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{htmlFor:"siteSubtitle",className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),"网站副标题"]}),(0,s.jsx)("input",{id:"siteSubtitle",name:"siteSubtitle",type:"text",value:e.siteSubtitle,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400",placeholder:"欢迎来到Xsblog"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"副标题将显示在网站标题下方"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{htmlFor:"siteDescription",className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"网站描述"]}),(0,s.jsx)("textarea",{id:"siteDescription",name:"siteDescription",rows:3,value:e.siteDescription,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white resize-none placeholder-gray-400",placeholder:"简单介绍一下你的网站..."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{htmlFor:"siteKeywords",className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"网站关键词"]}),(0,s.jsx)("input",{id:"siteKeywords",name:"siteKeywords",type:"text",value:e.siteKeywords,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400",placeholder:"用逗号分隔，例如：个人主页, 博客, 作品集"})]}),"true"===e.blogAnnouncementEnabled&&(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})}),"公告栏",(0,s.jsx)("span",{className:"text-xs text-gray-400 font-normal",children:"(仅博客模式展示，最多3条)"})]}),(0,s.jsx)("div",{className:"space-y-4",children:(()=>{let r=[];try{let s=JSON.parse(e.blogAnnouncements||"[]");Array.isArray(s)&&(r=s.map(e=>"string"==typeof e?{text:e,url:""}:e))}catch{r=[]}let t=e=>{i({target:{name:"blogAnnouncements",value:JSON.stringify(e.filter(e=>e.text)),type:"text"}})};return(0,s.jsx)(s.Fragment,{children:[0,1,2].map(e=>(0,s.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500 w-6 font-medium",children:[e+1,"."]}),(0,s.jsx)("input",{type:"text",value:r[e]?.text||"",onChange:s=>{let a=[...r];a[e]||(a[e]={text:"",url:""}),a[e].text=s.target.value,t(a)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400",placeholder:"公告内容"}),r[e]?.text&&(0,s.jsx)("button",{type:"button",onClick:()=>{t(r.filter((s,r)=>r!==e))},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r[e]?.text&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-6",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),(0,s.jsx)("input",{type:"text",value:r[e]?.url||"",onChange:s=>{let a=[...r];a[e]||(a[e]={text:"",url:""}),a[e].url=s.target.value,t(a)},className:"flex-1 px-3 py-1.5 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400",placeholder:"跳转链接（选填）"})]})]},e))})})()}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"公告将在博客模式的轮播图下方展示，超长文字会以跑马灯形式滚动，多条公告会自动切换"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-base font-semibold mb-4 text-gray-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center shadow-sm",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),(0,s.jsx)("span",{children:"外观设置"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),"主题颜色"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("label",{className:"relative cursor-pointer group",children:[(0,s.jsx)("input",{type:"radio",name:"themeColor",value:"gray",checked:"gray"===e.themeColor,onChange:i,className:"sr-only"}),(0,s.jsxs)("div",{className:`rounded-lg border-2 transition-all duration-300 p-3 text-center ${"gray"===e.themeColor?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-500/20":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-gray-400 to-gray-600 shadow-sm mx-auto mb-1.5"}),(0,s.jsx)("span",{className:`text-xs font-semibold ${"gray"===e.themeColor?"text-blue-600":"text-gray-700"}`,children:"灰色"})]})]}),(0,s.jsxs)("label",{className:"relative cursor-pointer group",children:[(0,s.jsx)("input",{type:"radio",name:"themeColor",value:"black",checked:"black"===e.themeColor,onChange:i,className:"sr-only"}),(0,s.jsxs)("div",{className:`rounded-lg border-2 transition-all duration-300 p-3 text-center ${"black"===e.themeColor?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-500/20":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-gray-800 to-black shadow-sm mx-auto mb-1.5"}),(0,s.jsx)("span",{className:`text-xs font-semibold ${"black"===e.themeColor?"text-blue-600":"text-gray-700"}`,children:"前台自定义"})]})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"选择前台的主题颜色方案：灰色主题会应用全局灰度效果，前台自定义由访客通过悬浮球切换"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"})}),"主题类型"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsxs)("label",{className:"relative cursor-pointer group",children:[(0,s.jsx)("input",{type:"radio",name:"themeType",value:"default",checked:"default"===e.themeType,onChange:i,className:"sr-only"}),(0,s.jsx)("div",{className:`rounded-lg border-2 transition-all duration-300 p-3 ${"default"===e.themeType?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-500/20":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,s.jsx)("div",{className:`w-8 h-8 rounded-lg border-2 flex items-center justify-center transition-all shadow-sm ${"default"===e.themeType?"border-blue-500 bg-white":"border-gray-300 bg-white"}`,children:(0,s.jsx)("div",{className:"w-5 h-2.5 bg-gradient-to-r from-gray-500 to-gray-700 rounded"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:`block text-xs font-semibold ${"default"===e.themeType?"text-blue-700":"text-gray-800"}`,children:"默认主题"}),(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"简洁个人主页"})]})]})})]}),(0,s.jsxs)("label",{className:"relative cursor-pointer group",children:[(0,s.jsx)("input",{type:"radio",name:"themeType",value:"blog",checked:"blog"===e.themeType,onChange:i,className:"sr-only"}),(0,s.jsx)("div",{className:`rounded-lg border-2 transition-all duration-300 p-3 ${"blog"===e.themeType?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-500/20":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,s.jsx)("div",{className:`w-8 h-8 rounded-lg border-2 flex items-center justify-center transition-all shadow-sm ${"blog"===e.themeType?"border-blue-500 bg-gradient-to-br from-blue-500 to-indigo-600":"border-gray-300 bg-gradient-to-br from-blue-400 to-indigo-500"}`,children:(0,s.jsx)("div",{className:"w-5 h-2.5 bg-white/90 rounded"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:`block text-xs font-semibold ${"blog"===e.themeType?"text-blue-700":"text-gray-800"}`,children:"博客主题"}),(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"更完善的个人程序"})]})]})})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"选择前台的主题布局类型，博客主题会将滑块左移并添加搜索框"})]}),"default"===e.themeType&&(0,s.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),"点击开启默认主题跳转博客主题"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"点击默认模式下头像跳转"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",name:"enableAvatarThemeSwitch",value:"true",checked:"true"===e.enableAvatarThemeSwitch,onChange:i,className:"sr-only"}),(0,s.jsx)("div",{className:`w-10 h-5 rounded-full transition-all duration-300 ${"true"===e.enableAvatarThemeSwitch?"bg-blue-500 shadow-inner":"bg-gray-300"}`,children:(0,s.jsx)("div",{className:`absolute top-1 left-0.5 w-3 h-3 rounded-full bg-white shadow-md transition-all duration-300 ${"true"===e.enableAvatarThemeSwitch?"translate-x-5":"translate-x-0"}`})})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{htmlFor:"footerCopyright",className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"底部版权文字"]}),(0,s.jsx)("textarea",{id:"footerCopyright",name:"footerCopyright",rows:3,value:e.footerCopyright,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white resize-none placeholder-gray-400 font-mono",placeholder:"例如：© 2025 个人主页. All rights reserved. 支持HTML标签"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:'支持HTML标签，例如：<strong>加粗</strong>、<a href="#">链接</a>等'})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"背景图片"]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[e.backgroundImage&&(0,s.jsx)("div",{className:"flex-shrink-0 w-24 h-16 bg-gray-50 rounded border border-gray-200 overflow-hidden",children:(0,s.jsx)("img",{src:(0,l.getImageUrl)(e.backgroundImage),alt:"Background",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[!e.backgroundImage&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"file",id:"backgroundInput",accept:"image/*",onChange:c,disabled:t,className:"hidden"}),(0,s.jsx)("label",{htmlFor:"backgroundInput",className:`px-4 py-2 bg-blue-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-blue-600 hover:shadow-md text-xs cursor-pointer whitespace-nowrap ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"上传中...":"选择文件"})]}),(0,s.jsx)("input",{type:"text",name:"backgroundImage",value:e.backgroundImage,onChange:i,placeholder:"图片URL地址",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400"})]}),e.backgroundImage&&(0,s.jsx)("button",{type:"button",onClick:u,disabled:a,className:"flex-shrink-0 px-3 py-2 bg-red-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-red-600 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed text-xs whitespace-nowrap",children:a?"删除中...":"删除"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"上传背景图片后，可调整透明度"})]}),e.backgroundImage&&(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{htmlFor:"backgroundOpacity",className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"背景透明度"]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{id:"backgroundOpacity",name:"backgroundOpacity",type:"number",min:"0",max:"1",step:"0.1",value:e.backgroundOpacity,onChange:i,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"(0-1)"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"调整背景图片的透明度（0完全透明，1完全不透明，建议0.1）"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})}),"自定义字体"]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[e.customFont&&(0,s.jsx)("div",{className:"flex-shrink-0 w-32 px-3 py-2 bg-gray-50 rounded border border-gray-200",children:(0,s.jsx)("p",{className:"text-xs text-gray-700 truncate",title:e.customFontName||e.customFont,children:e.customFontName||e.customFont})}),(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[!e.customFont&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"file",id:"fontInput",accept:".ttf,.otf,.woff,.woff2",onChange:h,disabled:o,className:"hidden"}),(0,s.jsx)("label",{htmlFor:"fontInput",className:`px-4 py-2 bg-blue-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-blue-600 hover:shadow-md text-xs cursor-pointer whitespace-nowrap ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"上传中...":"选择文件"})]}),(0,s.jsx)("input",{type:"text",name:"customFont",value:e.customFont,onChange:i,placeholder:"字体文件URL地址",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400"})]}),e.customFont&&(0,s.jsx)("button",{type:"button",onClick:m,disabled:n,className:"flex-shrink-0 px-3 py-2 bg-red-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-red-600 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed text-xs whitespace-nowrap",children:n?"删除中...":"删除"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"支持 ttf、otf、woff、woff2 格式，最大 10MB"})]})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200 mt-4",children:(0,s.jsx)("button",{type:"submit",disabled:r,className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold transition-all duration-300 hover:from-blue-700 hover:to-blue-800 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-blue-600 disabled:hover:to-blue-700 disabled:hover:shadow-none text-sm ${r?"cursor-wait":""}`,children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"保存中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"保存设置"]})})})]})})})}function g({name:e,checked:r,onChange:t,disabled:a=!1}){return(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",name:e,value:"true",checked:r,onChange:t,disabled:a,className:"sr-only"}),(0,s.jsx)("div",{className:`w-10 h-5 rounded-full transition-all duration-300 ${r?"bg-blue-500 shadow-inner":"bg-gray-300"} ${a?"opacity-50 cursor-not-allowed":""}`,children:(0,s.jsx)("div",{className:`absolute top-1 left-0.5 w-3 h-3 rounded-full bg-white shadow-md transition-all duration-300 ${r?"translate-x-5":"translate-x-0"}`})})]})}function b({title:e,description:r,icon:t,children:a}){return(0,s.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2 flex items-center gap-3",children:[t,e]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:r})]}),a]})})}function p({settings:e,saving:r,handleChange:t,handleSubmit:a}){return(0,s.jsx)("form",{onSubmit:a,children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-base font-semibold mb-4 text-gray-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center shadow-sm",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),(0,s.jsx)("span",{children:"功能配置"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(b,{title:"官网主题模式",description:"开启后，访问首页将自动显示官网页面内容，且浏览器地址栏不显示 /promo 路径。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),children:(0,s.jsx)(g,{name:"promoThemeEnabled",checked:"true"===e.promoThemeEnabled,onChange:t,disabled:"true"===e.socialFeedThemeEnabled||"true"===e.docsThemeEnabled})}),(0,s.jsx)(b,{title:"朋友圈主题模式",description:"开启后，访问首页将自动显示朋友圈页面内容，且浏览器地址栏不显示 /social-feed 路径。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),children:(0,s.jsx)(g,{name:"socialFeedThemeEnabled",checked:"true"===e.socialFeedThemeEnabled,onChange:t,disabled:"true"===e.promoThemeEnabled||"true"===e.docsThemeEnabled})}),(0,s.jsx)(b,{title:"文档主题模式",description:"开启后，访问首页将自动显示文档中心页面内容，且浏览器地址栏不显示 /docs 路径。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),children:(0,s.jsx)(g,{name:"docsThemeEnabled",checked:"true"===e.docsThemeEnabled,onChange:t,disabled:"true"===e.promoThemeEnabled||"true"===e.socialFeedThemeEnabled})}),(0,s.jsx)(b,{title:"启用 /user 页面访问",description:"开启后，可通过 /user 路径访问个人主页模式（默认主题）。关闭后访问将跳转到404页面。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),children:(0,s.jsx)(g,{name:"enableUserPage",checked:"true"===e.enableUserPage,onChange:t})}),(0,s.jsx)(b,{title:"启用 /blog 页面访问",description:"开启后，可通过 /blog 路径访问博客模式（博客主题）。关闭后访问将跳转到404页面。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),children:(0,s.jsx)(g,{name:"enableBlogPage",checked:"true"===e.enableBlogPage,onChange:t})}),"true"!==e.promoThemeEnabled&&(0,s.jsx)(b,{title:"启用 /promo 页面访问",description:"开启后，可通过 /promo 路径访问官网主题页面。关闭后访问将跳转到404页面。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),children:(0,s.jsx)(g,{name:"enablePromoPage",checked:"true"===e.enablePromoPage,onChange:t})}),"true"!==e.docsThemeEnabled&&(0,s.jsx)(b,{title:"启用 /docs 页面访问",description:"开启后，可通过 /docs 路径访问文档中心页面。关闭后访问将跳转到404页面。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),children:(0,s.jsx)(g,{name:"enableDocsPage",checked:"true"===e.enableDocsPage,onChange:t})}),"true"!==e.socialFeedThemeEnabled&&(0,s.jsx)(b,{title:"启用朋友圈页面访问",description:"开启后，通过 /social-feed 访问朋友圈页面。关闭后访问将跳转到404页面。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),children:(0,s.jsx)(g,{name:"enableSocialFeedPage",checked:"true"===e.enableSocialFeedPage,onChange:t})}),(0,s.jsx)(b,{title:"允许 SEO 搜索引擎抓取",description:"开启后，允许搜索引擎抓取前台页面内容。关闭后，所有页面将禁止搜索引擎索引。后台 /admins 路径始终禁止抓取。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),children:(0,s.jsx)(g,{name:"allowSEO",checked:"true"===e.allowSEO,onChange:t})}),(0,s.jsx)(b,{title:"显示博客公告栏",description:"开启后，在博客模式的轮播图下方显示公告栏。公告内容在基本信息中设置。",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})}),children:(0,s.jsx)(g,{name:"blogAnnouncementEnabled",checked:"true"===e.blogAnnouncementEnabled,onChange:t})}),"default"===e.themeType&&(0,s.jsx)(b,{title:"显示社交链接",description:"控制是否在前台显示社交链接区域（仅默认主题生效）",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"})}),children:(0,s.jsx)(g,{name:"showSocialLinks",checked:"true"===e.showSocialLinks,onChange:t})}),"default"===e.themeType&&(0,s.jsx)(b,{title:"显示顶部导航栏",description:"控制是否在前台显示顶部导航栏（仅默认主题生效）",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),children:(0,s.jsx)(g,{name:"showTopNavbar",checked:"true"===e.showTopNavbar,onChange:t})}),"default"===e.themeType&&"true"===e.showTopNavbar&&(0,s.jsx)(b,{title:"显示WAP侧边栏及搜索框",description:"控制是否在移动端显示侧边栏及搜索框",icon:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),children:(0,s.jsx)(g,{name:"showWapSidebar",checked:"true"===e.showWapSidebar,onChange:t})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"头像形状"]}),(0,s.jsxs)("select",{name:"avatarShape",value:e.avatarShape,onChange:t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",children:[(0,s.jsx)("option",{value:"circle",children:"圆形"}),(0,s.jsx)("option",{value:"rounded",children:"圆角矩形"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"设置个人资料中头像的形状，圆角矩形建议在本站为APP下载页面时使用。"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{htmlFor:"todoReminderCheckInterval",className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"待办事项提醒检查频率（分钟）"]}),(0,s.jsx)("input",{id:"todoReminderCheckInterval",name:"todoReminderCheckInterval",type:"number",min:"1",max:"60",value:e.todoReminderCheckInterval,onChange:t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400",placeholder:"5"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"设置后台仪表板检查待办事项提醒的频率（1-60分钟）"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("label",{htmlFor:"messageIpLimitDays",className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"留言IP提交频率限制（天）"]}),(0,s.jsx)("input",{id:"messageIpLimitDays",name:"messageIpLimitDays",type:"number",min:"0",max:"365",value:e.messageIpLimitDays,onChange:t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400",placeholder:"1"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"设置同一IP地址提交留言的时间间隔（0表示不限制，1表示24小时内只能提交一次）"})]})]})]})}),(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200 mt-4",children:(0,s.jsx)("button",{type:"submit",disabled:r,className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold transition-all duration-300 hover:from-blue-700 hover:to-blue-800 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-blue-600 disabled:hover:to-blue-700 disabled:hover:shadow-none text-sm ${r?"cursor-wait":""}`,children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"保存中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"保存设置"]})})})]})})})}function v({navLinks:e,saving:r,uploadingNavIcon:t,handleSubmit:a,handleAddNavLink:o,handleNavLinkChange:n,handleRemoveNavLink:i,handleMoveNavLink:d,handleNavIconUpload:c,handleRemoveNavIcon:u,setNavLinks:h,setSettings:m,settings:x}){return(0,s.jsx)("form",{onSubmit:a,children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-base font-semibold mb-4 text-gray-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center shadow-sm",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,s.jsx)("span",{children:"导航链接"})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("span",{className:"font-semibold",children:"注意："}),"默认模式下需要先在功能设置中开启【显示顶部导航栏】"]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[e.map((r,a)=>(0,s.jsxs)("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1 pt-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>d(a,"up"),disabled:0===a,className:"p-1 text-gray-400 hover:text-blue-600 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"上移",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),(0,s.jsx)("button",{type:"button",onClick:()=>d(a,"down"),disabled:a===e.length-1,className:"p-1 text-gray-400 hover:text-blue-600 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"下移",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsx)("input",{type:"text",placeholder:"链接名称",value:r.name,onChange:e=>n(a,"name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsx)("input",{type:"text",placeholder:"链接地址",value:r.url,onChange:e=>n(a,"url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 flex-shrink-0 transition-colors",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("span",{className:"text-sm",children:t===a?"上传中...":"上传图标"}),(0,s.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>e.target.files?.[0]&&c(a,e.target.files[0]),disabled:t===a})]}),r.icon&&(0,s.jsx)("img",{src:(0,l.getImageUrl)(r.icon),alt:"",className:"w-7 h-7 object-contain flex-shrink-0"}),(0,s.jsx)("input",{type:"text",placeholder:"图标URL（可直接粘贴链接或上传）",value:r.icon||"",onChange:s=>{let r=[...e];r[a].icon=s.target.value,h(r),m(e=>({...e,blogNavLinks:JSON.stringify(r)}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white placeholder-gray-400"}),r.icon&&(0,s.jsx)("button",{type:"button",onClick:()=>u(a),className:"text-red-500 hover:text-red-600 text-sm flex-shrink-0 px-2",children:"删除"})]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>i(a),className:"text-red-600 hover:text-red-700 p-2",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a)),0===e.length&&(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无导航链接"}),(0,s.jsx)("button",{type:"button",onClick:o,disabled:e.length>=8,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"+ 添加导航链接"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"最多可添加8个导航链接"})]})]})}),(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200 mt-4",children:(0,s.jsx)("button",{type:"submit",disabled:r,className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold transition-all duration-300 hover:from-blue-700 hover:to-blue-800 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-blue-600 disabled:hover:to-blue-700 disabled:hover:shadow-none text-sm ${r?"cursor-wait":""}`,children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"保存中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"保存设置"]})})})]})})})}function j({settings:e,setSettings:t,pageTexts:a,setPageTexts:o,homeContentSections:l,setHomeContentSections:n,savingTextSettings:i,s3Config:d,setS3Config:c,loadingS3Config:u,savingS3Config:h,testingS3:m,handleSaveTextSettings:x,loadS3Config:g,handleSaveS3Config:b,handleTestS3Connection:p,showToast:v,docsFiles:j,setDocsFiles:f,loadingDocsOrder:y,savingDocsOrder:w,loadDocsOrder:N,handleSaveDocsOrder:k,handleMoveDoc:C}){let[L,S]=(0,r.useState)("page-texts"),T=(0,r.useRef)(!1),M=(0,r.useRef)(!1);(0,r.useEffect)(()=>{"s3-storage"!==L||T.current||(T.current=!0,g())},[L,g]),(0,r.useEffect)(()=>{"docs-order"!==L||M.current||(M.current=!0,N())},[L,N]);let F={navigation:"导航列表页面",services:"服务业务页面",notes:"笔记列表页面",galleries:"图库列表页面",messages:"留言列表页面"};return(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[(0,s.jsx)("button",{onClick:()=>S("page-texts"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"page-texts"===L?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"页面文本设置"}),(0,s.jsx)("button",{onClick:()=>S("home-content"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"home-content"===L?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"首页内容切换"}),(0,s.jsx)("button",{onClick:()=>S("s3-storage"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"s3-storage"===L?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"S3存储配置"}),(0,s.jsx)("button",{onClick:()=>S("docs-order"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"docs-order"===L?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"文档排序"})]}),"page-texts"===L&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("span",{className:"font-semibold",children:"说明："}),"在这里可以自定义各页面的标题、描述和浏览器标签标题。"]})}),["navigation","services","notes","galleries","messages"].map(e=>(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center justify-between",children:[F[e],(0,s.jsxs)("a",{href:`/${e}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:["预览",(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["页面标题 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:a[e].title||"",onChange:s=>o({...a,[e]:{...a[e],title:s.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：导航列表"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["页面描述 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:a[e].description||"",onChange:s=>o({...a,[e]:{...a[e],description:s.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：探索精选的网站导航"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["浏览器标签标题 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:a[e].browserTitle,onChange:s=>o({...a,[e]:{...a[e],browserTitle:s.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：导航列表"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"浏览器标签副标题"}),(0,s.jsx)("input",{type:"text",value:a[e].browserSubtitle||"",onChange:s=>o({...a,[e]:{...a[e],browserSubtitle:s.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：个人主页"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"副标题将显示在浏览器标签中，格式为：主标题 - 副标题"})]})]})]},e)),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center justify-between",children:["官网主题页面 (/promo)",(0,s.jsxs)("a",{href:"/promo",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:["预览",(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["浏览器标签主标题 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:a.promo?.browserTitle||"",onChange:e=>o({...a,promo:{...a.promo,browserTitle:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：官网首页"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"浏览器标签副标题"}),(0,s.jsx)("input",{type:"text",value:a.promo?.browserSubtitle||"",onChange:e=>o({...a,promo:{...a.promo,browserSubtitle:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：欢迎访问"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"副标题将显示在浏览器标签中，格式为：主标题 - 副标题"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center justify-between",children:["朋友圈页面 (/social-feed)",(0,s.jsxs)("a",{href:"/social-feed",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:["预览",(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["浏览器标签主标题 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:a.socialFeed?.browserTitle||"",onChange:e=>o({...a,socialFeed:{...a.socialFeed,browserTitle:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：朋友圈"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"浏览器标签副标题"}),(0,s.jsx)("input",{type:"text",value:a.socialFeed?.browserSubtitle||"",onChange:e=>o({...a,socialFeed:{...a.socialFeed,browserSubtitle:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：分享生活点滴"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"副标题将显示在浏览器标签中，格式为：主标题 - 副标题"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center justify-between",children:["文档中心页面 (/docs)",(0,s.jsxs)("a",{href:"/docs",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:["预览",(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["页面标题 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:a.docs?.title||"",onChange:e=>o({...a,docs:{...a.docs,title:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：文档中心"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["页面描述 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:a.docs?.description||"",onChange:e=>o({...a,docs:{...a.docs,description:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：浏览所有可用的 Markdown 文档"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["浏览器标签标题 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:a.docs?.browserTitle||"",onChange:e=>o({...a,docs:{...a.docs,browserTitle:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：文档中心"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"浏览器标签副标题"}),(0,s.jsx)("input",{type:"text",value:a.docs?.browserSubtitle||"",onChange:e=>o({...a,docs:{...a.docs,browserSubtitle:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：技术文档"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"副标题将显示在浏览器标签中，格式为：主标题 - 副标题"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"使用说明标题"}),(0,s.jsx)("input",{type:"text",value:a.docs?.usageTitle||"",onChange:e=>o({...a,docs:{...a.docs,usageTitle:e.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：使用说明"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"使用说明内容"}),(0,s.jsx)("textarea",{value:a.docs?.usageContent||"",onChange:e=>o({...a,docs:{...a.docs,usageContent:e.target.value}}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"每行一条说明内容，例如： 将 Markdown 文件放入 public/markdown 目录 通过 /docs/文件名 访问文档"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"每行一条说明内容，将显示为列表形式"})]})]})]})]}),"home-content"===L&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,s.jsxs)("p",{className:"text-sm text-blue-800 mb-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:"说明："}),"选择首页下方展示的内容区域"]}),(0,s.jsx)("p",{className:"text-xs text-blue-700",children:"• 默认主题：可以不显示内容区，或显示1-2个内容区域"}),(0,s.jsx)("p",{className:"text-xs text-blue-700",children:"• 博客主题：至少需要选择1个内容区域"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:l.showInDefaultTheme,onChange:e=>n({...l,showInDefaultTheme:e.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm font-semibold text-gray-700",children:"在默认主题下显示内容区"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2 ml-6",children:"关闭后，默认主题下不显示下方内容区域"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"内容区域 1"}),(0,s.jsxs)("select",{value:l.section1,onChange:s=>{let r=s.target.value;"blog"===e.themeType&&""===r&&""===l.section2?v("error","博客主题下至少需要选择一个内容区域"):""!==r&&r===l.section2?v("error","两个区域不能选择相同的内容"):n({...l,section1:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"不显示"}),(0,s.jsx)("option",{value:"notes",children:"笔记列表"}),(0,s.jsx)("option",{value:"navigation",children:"导航列表"}),(0,s.jsx)("option",{value:"services",children:"服务业务"}),(0,s.jsx)("option",{value:"galleries",children:"图库列表"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"内容区域 2"}),(0,s.jsxs)("select",{value:l.section2,onChange:s=>{let r=s.target.value;"blog"===e.themeType&&""===r&&""===l.section1?v("error","博客主题下至少需要选择一个内容区域"):""!==r&&r===l.section1?v("error","两个区域不能选择相同的内容"):n({...l,section2:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"不显示"}),(0,s.jsx)("option",{value:"notes",children:"笔记列表"}),(0,s.jsx)("option",{value:"navigation",children:"导航列表"}),(0,s.jsx)("option",{value:"services",children:"服务业务"}),(0,s.jsx)("option",{value:"galleries",children:"图库列表"})]})]}),("notes"===l.section1||"notes"===l.section2)&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-blue-900 mb-1 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"笔记列表配置"]}),(0,s.jsx)("p",{className:"text-xs text-blue-700",children:'这些设置仅影响"笔记列表"内容区域的显示'})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-800 mb-2 text-center",children:"显示封面图"}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:"true"===e.showNoteCover,onChange:e=>{let s=e.target.checked?"true":"false";t(e=>({...e,showNoteCover:s,noteLayoutColumns:"false"===s?"1":e.noteLayoutColumns}))},className:"sr-only"}),(0,s.jsx)("div",{className:`w-10 h-5 rounded-full transition-all duration-300 ${"true"===e.showNoteCover?"bg-blue-500 shadow-inner":"bg-gray-300"}`,children:(0,s.jsx)("div",{className:`absolute top-1 left-0.5 w-3 h-3 rounded-full bg-white shadow-md transition-all duration-300 ${"true"===e.showNoteCover?"translate-x-5":"translate-x-0"}`})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("label",{className:`block text-xs font-semibold text-gray-800 mb-2 text-center ${parseInt(e.noteLayoutColumns)>=2?"opacity-50":""}`,children:"显示标签"}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:"true"===e.showNoteTags,onChange:e=>t(s=>({...s,showNoteTags:e.target.checked?"true":"false"})),disabled:parseInt(e.noteLayoutColumns)>=2,className:"sr-only"}),(0,s.jsx)("div",{className:`w-10 h-5 rounded-full transition-all duration-300 ${"true"===e.showNoteTags?"bg-blue-500 shadow-inner":"bg-gray-300"} ${parseInt(e.noteLayoutColumns)>=2?"opacity-50 cursor-not-allowed":""}`,children:(0,s.jsx)("div",{className:`absolute top-1 left-0.5 w-3 h-3 rounded-full bg-white shadow-md transition-all duration-300 ${"true"===e.showNoteTags?"translate-x-5":"translate-x-0"}`})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("label",{className:`block text-xs font-semibold text-gray-800 mb-2 text-center ${parseInt(e.noteLayoutColumns)>=2?"opacity-50":""}`,children:"显示分类"}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:"true"===e.showNoteCategories,onChange:e=>t(s=>({...s,showNoteCategories:e.target.checked?"true":"false"})),disabled:parseInt(e.noteLayoutColumns)>=2,className:"sr-only"}),(0,s.jsx)("div",{className:`w-10 h-5 rounded-full transition-all duration-300 ${"true"===e.showNoteCategories?"bg-blue-500 shadow-inner":"bg-gray-300"} ${parseInt(e.noteLayoutColumns)>=2?"opacity-50 cursor-not-allowed":""}`,children:(0,s.jsx)("div",{className:`absolute top-1 left-0.5 w-3 h-3 rounded-full bg-white shadow-md transition-all duration-300 ${"true"===e.showNoteCategories?"translate-x-5":"translate-x-0"}`})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("label",{className:`block text-xs font-semibold text-gray-800 mb-2 text-center ${"false"===e.showNoteCover?"opacity-50":""}`,children:"列表布局"}),(0,s.jsxs)("select",{value:e.noteLayoutColumns,onChange:e=>{let s=e.target.value;t(e=>({...e,noteLayoutColumns:s,showNoteTags:parseInt(s)>=2?"false":e.showNoteTags,showNoteCategories:parseInt(s)>=2?"false":e.showNoteCategories}))},disabled:"false"===e.showNoteCover,className:`px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-blue-500 ${"false"===e.showNoteCover?"opacity-50 cursor-not-allowed bg-gray-100":""}`,children:[(0,s.jsx)("option",{value:"1",children:"1列"}),(0,s.jsx)("option",{value:"2",children:"2列"}),(0,s.jsx)("option",{value:"3",children:"3列"}),(0,s.jsx)("option",{value:"4",children:"4列"})]})]})]}),"false"===e.showNoteCover&&(0,s.jsx)("p",{className:"text-xs text-amber-600 mt-3 bg-amber-50 px-3 py-2 rounded",children:"关闭封面图后，列表布局将固定为1列"}),parseInt(e.noteLayoutColumns)>=2&&(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-3 bg-blue-50 px-3 py-2 rounded",children:"2列及以上布局时，标签和分类显示将自动关闭，以保持界面简洁"})]}),"true"===e.showNoteCover&&(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"默认封面图 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:e.defaultNoteCover,onChange:e=>t(s=>({...s,defaultNoteCover:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/default-cover.jpg"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"笔记未设置封面图时，将自动使用此默认封面图"})]})]})]})]}),"s3-storage"===L&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("span",{className:"font-semibold",children:"说明："}),"配置S3兼容的对象存储服务（如AWS S3、阿里云OSS、腾讯云COS、MinIO等）。切换到S3存储后，新上传的文件将存储到S3，子文件夹结构保持不变。"]})}),u?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)("svg",{className:"w-6 h-6 animate-spin text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:"加载配置中..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),"存储类型"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("label",{className:"relative cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",value:"local",checked:"local"===d.storageType,onChange:e=>c({...d,storageType:e.target.value}),className:"sr-only"}),(0,s.jsxs)("div",{className:`rounded-lg border-2 transition-all duration-300 p-3 text-center ${"local"===d.storageType?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-500/20":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[(0,s.jsx)("span",{className:`text-sm font-semibold ${"local"===d.storageType?"text-blue-600":"text-gray-700"}`,children:"本地存储"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"文件存储在服务器本地"})]})]}),(0,s.jsxs)("label",{className:"relative cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",value:"s3",checked:"s3"===d.storageType,onChange:e=>c({...d,storageType:e.target.value}),className:"sr-only"}),(0,s.jsxs)("div",{className:`rounded-lg border-2 transition-all duration-300 p-3 text-center ${"s3"===d.storageType?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-500/20":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[(0,s.jsx)("span",{className:`text-sm font-semibold ${"s3"===d.storageType?"text-blue-600":"text-gray-700"}`,children:"S3存储"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"文件存储到S3兼容服务"})]})]})]})]}),"s3"===d.storageType&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["端点地址 (Endpoint) ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:d.endpoint,onChange:e=>c({...d,endpoint:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：https://s3.amazonaws.com 或 https://oss-cn-hangzhou.aliyuncs.com"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"区域 (Region)"}),(0,s.jsx)("input",{type:"text",value:d.region,onChange:e=>c({...d,region:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：us-east-1、cn-hangzhou"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["存储桶名称 (Bucket) ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:d.bucket,onChange:e=>c({...d,bucket:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：my-bucket"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Access Key ID ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:d.accessKeyId,onChange:e=>c({...d,accessKeyId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"输入Access Key ID"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Secret Access Key ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("form",{autoComplete:"off",children:(0,s.jsx)("input",{type:"password",autoComplete:"off",value:d.secretAccessKey,onChange:e=>c({...d,secretAccessKey:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"输入Secret Access Key（已保存则显示******）"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"自定义域名 (CDN)"}),(0,s.jsx)("input",{type:"text",value:d.customDomain,onChange:e=>c({...d,customDomain:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",placeholder:"例如：https://cdn.example.com（可选，用于访问文件）"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"配置后，文件URL将使用此域名。格式：https://cdn.example.com/uploads/xxx"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-1",children:"路径风格 (Path Style)"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"MinIO等自建服务通常需要开启此选项"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.pathStyle,onChange:e=>c({...d,pathStyle:e.target.checked}),className:"sr-only"}),(0,s.jsx)("div",{className:`w-10 h-5 rounded-full transition-all duration-300 ${d.pathStyle?"bg-blue-500 shadow-inner":"bg-gray-300"}`,children:(0,s.jsx)("div",{className:`absolute top-1 left-0.5 w-3 h-3 rounded-full bg-white shadow-md transition-all duration-300 ${d.pathStyle?"translate-x-5":"translate-x-0"}`})})]})]})}),(0,s.jsx)("div",{className:"flex gap-3",children:(0,s.jsx)("button",{type:"button",onClick:p,disabled:m,className:`flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg font-medium transition-all duration-300 hover:bg-green-600 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed text-sm ${m?"cursor-wait":""}`,children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"测试中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"测试连接"]})})})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,s.jsx)("button",{type:"button",onClick:b,disabled:h,className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold transition-all duration-300 hover:from-blue-700 hover:to-blue-800 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm ${h?"cursor-wait":""}`,children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"保存中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"保存S3配置"]})})})]})]}),"docs-order"===L&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("span",{className:"font-semibold",children:"说明："}),"拖动或使用上下箭头调整文档在 /docs 页面的显示顺序。文档文件存放在 frontend/public/markdown 目录下。"]})}),y?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)("svg",{className:"w-6 h-6 animate-spin text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:"加载文档列表中..."})]}):0===j.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"暂无文档文件"}),(0,s.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"请将 .md 文件放入 frontend/public/markdown 目录"})]}):(0,s.jsx)("div",{className:"space-y-2",children:j.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 transition-colors",children:[(0,s.jsx)("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-blue-100 text-blue-600 rounded-lg text-sm font-semibold",children:r+1}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.replace(/\.md$/,"")}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>C(r,"up"),disabled:0===r,className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"上移",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),(0,s.jsx)("button",{type:"button",onClick:()=>C(r,"down"),disabled:r===j.length-1,className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"下移",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]},e))}),j.length>0&&(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,s.jsx)("button",{type:"button",onClick:k,disabled:w,className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold transition-all duration-300 hover:from-blue-700 hover:to-blue-800 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm ${w?"cursor-wait":""}`,children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"保存中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"保存排序"]})})})]}),("page-texts"===L||"home-content"===L)&&(0,s.jsx)("div",{className:"flex justify-end pt-6 border-t border-gray-200 mt-6",children:(0,s.jsx)("button",{type:"button",onClick:x,disabled:i,className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold transition-all duration-300 hover:from-blue-700 hover:to-blue-800 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm ${i?"cursor-wait":""}`,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"保存中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"保存设置"]})})})]})})}function f({user:e,usernameForm:r,passwordForm:t,changingUsername:a,changingPassword:o,handleUsernameChange:l,handlePasswordChange:n,handleUsernameSubmit:i,handlePasswordSubmit:d}){return(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-base font-semibold mb-4 text-gray-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center shadow-sm",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,s.jsx)("span",{children:"修改用户名"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i()},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"当前用户名"}),(0,s.jsx)("p",{className:"text-gray-700 bg-gray-50 px-3 py-2 rounded-lg",children:e?.username||"加载中..."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[(0,s.jsxs)("label",{htmlFor:"currentPasswordForUsername",className:"block text-sm font-semibold text-gray-800 mb-2",children:["当前密码 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"currentPasswordForUsername",name:"currentPassword",type:"password",autoComplete:"current-password",value:r.currentPassword,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"请输入当前密码"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[(0,s.jsxs)("label",{htmlFor:"newUsername",className:"block text-sm font-semibold text-gray-800 mb-2",children:["新用户名 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"newUsername",name:"newUsername",type:"text",autoComplete:"username",value:r.newUsername,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"请输入新用户名（至少3位）"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:a||!r.currentPassword||!r.newUsername,className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold transition-all duration-300 hover:from-blue-700 hover:to-blue-800 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm ${a?"cursor-wait":""}`,children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"修改中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"修改用户名"]})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-base font-semibold mb-4 text-gray-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center shadow-sm",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,s.jsx)("span",{children:"修改密码"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d()},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[(0,s.jsxs)("label",{htmlFor:"currentPasswordForPassword",className:"block text-sm font-semibold text-gray-800 mb-2",children:["当前密码 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"currentPasswordForPassword",name:"currentPassword",type:"password",autoComplete:"current-password",value:t.currentPassword,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"请输入当前密码"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[(0,s.jsxs)("label",{htmlFor:"newPassword",className:"block text-sm font-semibold text-gray-800 mb-2",children:["新密码 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"newPassword",name:"newPassword",type:"password",autoComplete:"new-password",value:t.newPassword,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"请输入新密码（至少6位）"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[(0,s.jsxs)("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-800 mb-2",children:["确认新密码 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",value:t.confirmPassword,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"请再次输入新密码"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:o||!t.currentPassword||!t.newPassword||!t.confirmPassword,className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg font-semibold transition-all duration-300 hover:from-red-700 hover:to-red-800 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm ${o?"cursor-wait":""}`,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"修改中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"修改密码"]})})})]})]})]})})})}var y=e.i(64740),w=e.i(40803);function N(){(0,y.usePageTitle)("系统设置");let[e,h]=(0,r.useState)("basic"),g=function(){(0,t.useRouter)();let{theme:e,setTheme:s}=(0,o.useTheme)(),{user:h,refreshUser:m}=(0,a.useAuth)(),[x,g]=(0,r.useState)(!0),[b,p]=(0,r.useState)(!1),[v,j]=(0,r.useState)(i),[f,y]=(0,r.useState)([]),[w,N]=(0,r.useState)(null),[k,C]=(0,r.useState)({currentPassword:"",newUsername:""}),[L,S]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[T,M]=(0,r.useState)(!1),[F,B]=(0,r.useState)(!1),[P,W]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!1),[H,D]=(0,r.useState)(!1),[$,E]=(0,r.useState)(!1),[z,O]=(0,r.useState)({show:!1,type:"success",message:""}),[V,U]=(0,r.useState)(d),[K,R]=(0,r.useState)(c),[J,_]=(0,r.useState)(!1),[X,G]=(0,r.useState)(u),[Y,q]=(0,r.useState)(!1),[Q,Z]=(0,r.useState)(!1),[ee,es]=(0,r.useState)(!1),[er,et]=(0,r.useState)([]),[ea,eo]=(0,r.useState)(!1),[el,en]=(0,r.useState)(!1),ei=(0,r.useCallback)((e,s)=>{O({show:!0,type:e,message:s})},[]),ed=(0,r.useCallback)(()=>{O(e=>({...e,show:!1}))},[]),ec=(0,r.useCallback)(async()=>{try{let[e,r]=await Promise.all([(0,l.getAdminSettings)(),(0,l.getAdminPageTexts)()]);if(e.success&&e.data){let t={};e.data.forEach(e=>{t[e.key]=e.value});let a=t.themeColor||"white";if(s(a),j({siteTitle:t.siteTitle||"",siteSubtitle:t.siteSubtitle||"",siteDescription:t.siteDescription||"",siteKeywords:t.siteKeywords||"",themeColor:a,themeType:t.themeType||"default",footerCopyright:t.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,backgroundImage:t.backgroundImage||"",backgroundOpacity:t.backgroundOpacity||"0.5",showSiteNav:t.showSiteNav||"true",showNotes:t.showNotes||"true",showSocialLinks:t.showSocialLinks||"true",defaultDisplaySection:t.defaultDisplaySection||"notes",customFont:t.customFont||"",customFontName:t.customFontName||"",todoReminderCheckInterval:t.todoReminderCheckInterval||"5",showNoteTags:t.showNoteTags||"true",showNoteCategories:t.showNoteCategories||"true",messageIpLimitDays:t.messageIpLimitDays||"1",noteLayoutColumns:t.noteLayoutColumns||"1",avatarShape:t.avatarShape||"circle",showNoteCover:t.showNoteCover||"true",defaultNoteCover:t.defaultNoteCover||"",showNavigationRecommended:t.showNavigationRecommended||"true",blogLogo:t.blogLogo||"",blogLogoText:t.blogLogoText||"",blogNavLinks:t.blogNavLinks||"[]",showTopNavbar:t.showTopNavbar||"true",showWapSidebar:t.showWapSidebar||"true",enableAvatarThemeSwitch:t.enableAvatarThemeSwitch||"false",promoThemeEnabled:t.promoThemeEnabled||"false",socialFeedThemeEnabled:t.socialFeedThemeEnabled||"false",docsThemeEnabled:t.docsThemeEnabled||"false",enableUserPage:t.enableUserPage||"true",enableBlogPage:t.enableBlogPage||"true",enablePromoPage:t.enablePromoPage||"true",enableDocsPage:t.enableDocsPage||"true",allowSEO:t.allowSEO||"false",enableSocialFeedPage:t.enableSocialFeedPage||"true",blogAnnouncements:t.blogAnnouncements||"[]",blogAnnouncementEnabled:t.blogAnnouncementEnabled||"false"}),r.success&&r.data){let e=r.data,s={...d};for(let r of Object.keys(d))e[r]&&(s[r]={...d[r],...e[r]});U(s)}if(t.homeContentSections)try{let e=JSON.parse(t.homeContentSections);R({...c,...e})}catch(e){console.error("Failed to parse homeContentSections:",e)}try{let e=JSON.parse(t.blogNavLinks||"[]");Array.isArray(e)&&0!==e.length?y(e):y([{name:"首页",url:"/"},{name:"全部笔记",url:"/notes"},{name:"导航列表",url:"/navigation"}])}catch{y([{name:"首页",url:"/"},{name:"全部笔记",url:"/notes"},{name:"导航列表",url:"/navigation"}])}}}catch(e){console.error("加载系统设置失败:",e)}finally{g(!1)}},[s]);(0,r.useEffect)(()=>{ec()},[ec]);let eu=(0,r.useCallback)(e=>{let s=e.target,r="checkbox"===s.type?s.checked?"true":"false":s.value;j(e=>{let t={...e,[s.name]:r};return"showTopNavbar"===s.name&&"false"===r&&(t.showWapSidebar="false"),"promoThemeEnabled"===s.name&&"true"===r&&(t.socialFeedThemeEnabled="false",t.docsThemeEnabled="false"),"socialFeedThemeEnabled"===s.name&&"true"===r&&(t.promoThemeEnabled="false",t.docsThemeEnabled="false"),"docsThemeEnabled"===s.name&&"true"===r&&(t.promoThemeEnabled="false",t.socialFeedThemeEnabled="false"),t})},[]),eh=(0,r.useCallback)(e=>{C(s=>({...s,[e.target.name]:e.target.value}))},[]),em=(0,r.useCallback)(e=>{S(s=>({...s,[e.target.name]:e.target.value}))},[]),ex=(0,r.useCallback)(()=>{f.length>=8?ei("error","最多只能添加8个导航链接"):y(e=>[...e,{name:"",url:""}])},[f.length,ei]),eg=(0,r.useCallback)((e,s,r)=>{y(t=>{let a=[...t];return a[e][s]=r,j(e=>({...e,blogNavLinks:JSON.stringify(a)})),a})},[]),eb=(0,r.useCallback)(e=>{y(s=>{let r=s.filter((s,r)=>r!==e);return j(e=>({...e,blogNavLinks:JSON.stringify(r)})),r})},[]),ep=(0,r.useCallback)((e,s)=>{y(r=>{let t=[...r],a="up"===s?e-1:e+1;return a<0||a>=t.length?r:([t[e],t[a]]=[t[a],t[e]],j(e=>({...e,blogNavLinks:JSON.stringify(t)})),t)})},[]),ev=(0,r.useCallback)(async(e,s)=>{N(e);let r=new FormData;r.append("icon",s);try{let s=await (0,n.safeFetch)("/api/admin/blog-theme/nav-icon/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:r}),t=await s.json();t.success&&(y(s=>{let r=[...s];return r[e].icon=t.data.url,j(e=>({...e,blogNavLinks:JSON.stringify(r)})),r}),ei("success","图标上传成功"))}catch(e){ei("error",e.response?.data?.message||e.message||"图标上传失败")}finally{N(null)}},[ei]),ej=(0,r.useCallback)(e=>{y(s=>{let r=[...s];return delete r[e].icon,j(e=>({...e,blogNavLinks:JSON.stringify(r)})),r})},[]),ef=(0,r.useCallback)(async()=>{if(k.newUsername.length<3)return void ei("error","新用户名长度至少为3位");M(!0);try{(await (0,l.changeUsername)(k.currentPassword,k.newUsername)).success&&(ei("success","用户名修改成功"),C({currentPassword:"",newUsername:""}),await m())}catch(e){ei("error",e.response?.data?.message||"用户名修改失败")}finally{M(!1)}},[k,ei,m]),ey=(0,r.useCallback)(async()=>{if(L.newPassword!==L.confirmPassword)return void ei("error","新密码和确认密码不一致");if(L.newPassword.length<6)return void ei("error","新密码长度至少为6位");B(!0);try{(await (0,l.changePassword)(L.currentPassword,L.newPassword)).success&&(ei("success","密码修改成功"),S({currentPassword:"",newPassword:"",confirmPassword:""}))}catch(e){ei("error",e.response?.data?.message||"密码修改失败")}finally{B(!1)}},[L,ei]),ew=(0,r.useCallback)(async e=>{let s=e.target.files?.[0];if(s){W(!0);try{let e=await (0,l.uploadAdminBackgroundImage)(s);e.success&&(ei("success","背景图片上传成功"),j(s=>({...s,backgroundImage:e.data.url})))}catch(e){ei("error",e.response?.data?.message||"背景图片上传失败")}finally{W(!1)}}},[ei]),eN=(0,r.useCallback)(async()=>{A(!0);try{(await (0,l.deleteAdminBackgroundImage)()).success&&(ei("success","背景图片删除成功"),j(e=>({...e,backgroundImage:""})))}catch(e){ei("error",e.response?.data?.message||"背景图片删除失败")}finally{A(!1)}},[ei]),ek=(0,r.useCallback)(async e=>{let s=e.target.files?.[0];if(s){if(![".ttf",".otf",".woff",".woff2"].includes(s.name.substring(s.name.lastIndexOf(".")).toLowerCase())){ei("error","不支持的文件类型，请上传 ttf、otf、woff、woff2 格式的字体文件"),e.target.value="";return}if(s.size>0xa00000){ei("error",`字体文件大小不能超过 10MB，当前文件大小为 ${(s.size/1024/1024).toFixed(2)}MB`),e.target.value="";return}D(!0);try{let e=await (0,l.uploadAdminCustomFont)(s);e.success&&(ei("success","字体上传成功，即将刷新页面应用新字体..."),j(s=>({...s,customFont:e.data.url,customFontName:e.data.originalName})),setTimeout(()=>{window.location.reload()},1500))}catch(r){let s="字体上传失败";r.response?.data?.message?s=r.response.data.message:r.message&&(s=r.message),ei("error",s),e.target.value=""}finally{D(!1)}}},[ei]),eC=(0,r.useCallback)(async()=>{if(confirm("确定要删除自定义字体吗？删除后将恢复默认字体。")){E(!0);try{(await (0,l.deleteAdminCustomFont)()).success&&(ei("success","字体删除成功，即将刷新页面恢复默认字体..."),j(e=>({...e,customFont:"",customFontName:""})),setTimeout(()=>{window.location.reload()},1500))}catch(s){let e="字体删除失败";s.response?.data?.message?e=s.response.data.message:s.message&&(e=s.message),ei("error",e)}finally{E(!1)}}},[ei]),eL=(0,r.useCallback)(async e=>{e.preventDefault(),p(!0);try{s(v.themeColor);let e=["todoReminderCheckInterval","messageIpLimitDays","backgroundOpacity"],r=Object.entries(v).map(([s,r])=>({key:s,value:r,type:e.includes(s)?"number":"string"})),t=await (0,l.updateAdminSettings)(r);if(t.success){try{sessionStorage.removeItem("xs_settings_cache"),sessionStorage.removeItem("xs_settings_expire")}catch(e){}ei("success","网站设置保存成功")}else ei("error",t.message||"保存失败")}catch(e){ei("error",e.response?.data?.message||"保存失败")}finally{p(!1)}},[v,s,ei]),eS=(0,r.useCallback)(async()=>{_(!0);try{let e=[{key:"homeContentSections",value:JSON.stringify(K),type:"string"},{key:"showNoteTags",value:v.showNoteTags,type:"string"},{key:"showNoteCategories",value:v.showNoteCategories,type:"string"},{key:"showNoteCover",value:v.showNoteCover,type:"string"},{key:"defaultNoteCover",value:v.defaultNoteCover,type:"string"},{key:"noteLayoutColumns",value:v.noteLayoutColumns,type:"string"}],[s,r]=await Promise.all([(0,l.updateAdminPageTexts)(V),(0,l.updateAdminSettings)(e)]);s.success&&r.success?ei("success","文本设置保存成功！"):ei("error",s.message||r.message||"保存失败")}catch(e){ei("error",e.response?.data?.message||"保存失败")}finally{_(!1)}},[V,K,v,ei]),eT=(0,r.useCallback)(async()=>{q(!0);try{let e=await (0,l.getS3Config)();e.success&&e.data&&G({storageType:e.data.storageType||"local",endpoint:e.data.endpoint||"",region:e.data.region||"us-east-1",bucket:e.data.bucket||"",accessKeyId:e.data.accessKeyId||"",secretAccessKey:e.data.secretAccessKey||"",customDomain:e.data.customDomain||"",pathStyle:e.data.pathStyle||!1})}catch(e){console.error("加载S3配置失败:",e)}finally{q(!1)}},[]),eM=(0,r.useCallback)(async()=>{Z(!0);try{let e=await (0,l.saveS3Config)(X);e.success?ei("success","S3配置保存成功"):ei("error",e.message||"保存失败")}catch(e){ei("error",e.response?.data?.message||"保存失败")}finally{Z(!1)}},[X,ei]),eF=(0,r.useCallback)(async()=>{if(!X.endpoint||!X.bucket||!X.accessKeyId||!X.secretAccessKey)return void ei("error","请填写完整的S3配置信息");es(!0);try{let e=await (0,l.testS3Connection)({endpoint:X.endpoint,region:X.region,bucket:X.bucket,accessKeyId:X.accessKeyId,secretAccessKey:X.secretAccessKey,pathStyle:X.pathStyle});e.success?ei("success","S3连接测试成功！"):ei("error",e.message||"连接测试失败")}catch(e){ei("error",e.response?.data?.message||"连接测试失败")}finally{es(!1)}},[X,ei]),eB=(0,r.useCallback)(async()=>{eo(!0);try{let e=await (0,l.getDocsOrder)();e.success&&e.data&&et(e.data.files||[])}catch(e){console.error("加载文档排序配置失败:",e)}finally{eo(!1)}},[]),eP=(0,r.useCallback)(async()=>{en(!0);try{let e=await (0,l.saveDocsOrder)(er);e.success?ei("success","文档排序保存成功"):ei("error",e.message||"保存失败")}catch(e){ei("error",e.response?.data?.message||"保存失败")}finally{en(!1)}},[er,ei]),eW=(0,r.useCallback)((e,s)=>{et(r=>{let t=[...r],a="up"===s?e-1:e+1;return a<0||a>=t.length?r:([t[e],t[a]]=[t[a],t[e]],t)})},[]);return{loading:x,saving:b,settings:v,setSettings:j,navLinks:f,setNavLinks:y,uploadingNavIcon:w,usernameForm:k,passwordForm:L,changingUsername:T,changingPassword:F,uploadingBackground:P,deletingBackground:I,uploadingFont:H,deletingFont:$,toast:z,pageTexts:V,setPageTexts:U,homeContentSections:K,setHomeContentSections:R,savingTextSettings:J,s3Config:X,setS3Config:G,loadingS3Config:Y,savingS3Config:Q,testingS3:ee,docsFiles:er,setDocsFiles:et,loadingDocsOrder:ea,savingDocsOrder:el,user:h,showToast:ei,hideToast:ed,handleChange:eu,handleUsernameChange:eh,handlePasswordChange:em,handleAddNavLink:ex,handleNavLinkChange:eg,handleRemoveNavLink:eb,handleMoveNavLink:ep,handleNavIconUpload:ev,handleRemoveNavIcon:ej,handleUsernameSubmit:ef,handlePasswordSubmit:ey,handleBackgroundUpload:ew,handleBackgroundDelete:eN,handleFontUpload:ek,handleFontDelete:eC,handleSubmit:eL,handleSaveTextSettings:eS,loadS3Config:eT,handleSaveS3Config:eM,handleTestS3Connection:eF,loadDocsOrder:eB,handleSaveDocsOrder:eP,handleMoveDoc:eW}}();return(0,r.useEffect)(()=>{if(g.toast.show){let e=setTimeout(()=>{g.hideToast()},3e3);return()=>clearTimeout(e)}},[g.toast.show,g.hideToast]),(0,s.jsx)(s.Fragment,{children:g.loading?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-12 h-12 animate-spin mx-auto text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"加载中..."})]})}):(0,s.jsxs)("div",{className:"py-8",children:[(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)(m,{activeTab:e,setActiveTab:h}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:["basic"===e&&(0,s.jsx)(x,{settings:g.settings,saving:g.saving,uploadingBackground:g.uploadingBackground,deletingBackground:g.deletingBackground,uploadingFont:g.uploadingFont,deletingFont:g.deletingFont,handleChange:g.handleChange,handleSubmit:g.handleSubmit,handleBackgroundUpload:g.handleBackgroundUpload,handleBackgroundDelete:g.handleBackgroundDelete,handleFontUpload:g.handleFontUpload,handleFontDelete:g.handleFontDelete}),"functions"===e&&(0,s.jsx)(p,{settings:g.settings,saving:g.saving,handleChange:g.handleChange,handleSubmit:g.handleSubmit}),"navigation"===e&&(0,s.jsx)(v,{navLinks:g.navLinks,saving:g.saving,uploadingNavIcon:g.uploadingNavIcon,handleSubmit:g.handleSubmit,handleAddNavLink:g.handleAddNavLink,handleNavLinkChange:g.handleNavLinkChange,handleRemoveNavLink:g.handleRemoveNavLink,handleMoveNavLink:g.handleMoveNavLink,handleNavIconUpload:g.handleNavIconUpload,handleRemoveNavIcon:g.handleRemoveNavIcon,setNavLinks:g.setNavLinks,setSettings:g.setSettings,settings:g.settings}),"text-settings"===e&&(0,s.jsx)(j,{settings:g.settings,setSettings:g.setSettings,pageTexts:g.pageTexts,setPageTexts:g.setPageTexts,homeContentSections:g.homeContentSections,setHomeContentSections:g.setHomeContentSections,savingTextSettings:g.savingTextSettings,s3Config:g.s3Config,setS3Config:g.setS3Config,loadingS3Config:g.loadingS3Config,savingS3Config:g.savingS3Config,testingS3:g.testingS3,handleSaveTextSettings:g.handleSaveTextSettings,loadS3Config:g.loadS3Config,handleSaveS3Config:g.handleSaveS3Config,handleTestS3Connection:g.handleTestS3Connection,showToast:g.showToast,docsFiles:g.docsFiles,setDocsFiles:g.setDocsFiles,loadingDocsOrder:g.loadingDocsOrder,savingDocsOrder:g.savingDocsOrder,loadDocsOrder:g.loadDocsOrder,handleSaveDocsOrder:g.handleSaveDocsOrder,handleMoveDoc:g.handleMoveDoc}),"account"===e&&(0,s.jsx)(f,{user:g.user,usernameForm:g.usernameForm,passwordForm:g.passwordForm,changingUsername:g.changingUsername,changingPassword:g.changingPassword,handleUsernameChange:g.handleUsernameChange,handlePasswordChange:g.handlePasswordChange,handleUsernameSubmit:g.handleUsernameSubmit,handlePasswordSubmit:g.handlePasswordSubmit})]})]})}),(0,s.jsx)(w.default,{show:g.toast.show,message:g.toast.message,type:g.toast.type,onClose:()=>g.hideToast()})]})})}e.s(["default",()=>N],51951)}]);