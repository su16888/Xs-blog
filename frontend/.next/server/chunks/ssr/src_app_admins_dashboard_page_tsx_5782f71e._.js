module.exports=[87135,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19032),f=a.i(68114),g=a.i(60137);let h=(0,g.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var i=a.i(44494),j=a.i(4720),k=a.i(8501),l=a.i(87534),m=a.i(63588),n=a.i(38632),o=a.i(78987);let p=(0,g.default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),q=(0,g.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),r=(0,g.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),s=(0,g.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),t=(0,g.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var u=a.i(53722),v=a.i(52495);let w=(0,g.default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var x=a.i(65763),y=a.i(11642);function z({onClose:a}){let[d,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0);(0,c.useEffect)(()=>{i()},[]);let i=async()=>{try{let a=await (0,e.getPendingReminders)();if(a.success){let b=Array.isArray(a.data)?a.data:[];f(b)}}catch(a){f([])}finally{h(!1)}},j=async(b,c)=>{try{await (0,e.dismissReminder)(b,c),f(a=>a.filter(a=>a.id!==b)),1===d.length&&a()}catch(a){}},k=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return g?(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsx)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderBottomColor:"var(--primary-600)"}}),(0,b.jsx)("p",{className:"text-gray-600",children:"加载提醒中..."})]})})}):0===d.length?null:(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"待办事项提醒"}),(0,b.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"space-y-4",children:d.map(a=>(0,b.jsxs)("div",{className:"border border-orange-200 bg-orange-50 rounded-lg p-4",children:[(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-gray-700 mb-3",children:a.description}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[a.due_date&&(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"截止时间: ",k(a.due_date)]}),a.reminder_time&&(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"提醒时间: ",k(a.reminder_time)]})]})]})}),(0,b.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,b.jsx)("button",{onClick:()=>j(a.id,"ignore"),className:"flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"本次忽略"}),(0,b.jsx)("button",{onClick:()=>j(a.id,"disable"),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"不再提醒"})]})]},a.id))}),(0,b.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",children:(0,b.jsxs)("p",{children:["您有 ",d.length," 个待办事项需要处理"]})})]})})}var A=a.i(33508);function B(){let[a,d]=(0,c.useState)(null),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null);(0,c.useEffect)(()=>{l()},[]);let l=async()=>{if(!h){i(!0),k(null);try{let a=null;try{a=localStorage.getItem("token")}catch(a){}if(!a)return void i(!1);let b=await (0,e.checkVersionUpdate)();b.success&&b.data?(d(b.data),b.data.hasUpdate&&(0,e.getDismissedVersion)()!==b.data.currentVersion&&g(!0)):k(b.data?.message||"版本检测失败")}catch(a){console.error("版本检测失败:",a),k("版本检测失败，请稍后重试")}finally{i(!1)}}},m=async()=>{try{a?.currentVersion&&await (0,e.dismissVersionUpdate)(a.currentVersion)}catch(a){console.error("保存忽略版本失败:",a)}finally{g(!1)}};return f&&a?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm animate-fadeIn",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden animate-slideUp",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center animate-pulse",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-white font-bold text-lg",children:"发现新版本"}),(0,b.jsx)("p",{className:"text-white/80 text-sm",children:"建议尽快更新"})]})]}),(0,b.jsx)("button",{onClick:()=>{g(!1)},className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-1.5 transition-colors","aria-label":"关闭",children:(0,b.jsx)(A.X,{className:"w-5 h-5"})})]})}),(0,b.jsx)("div",{className:"px-6 py-5",children:(0,b.jsx)("div",{className:"text-center py-2",children:(0,b.jsx)("p",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400 leading-relaxed",children:a.message})})}),(0,b.jsx)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-center",children:(0,b.jsx)("button",{onClick:m,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all shadow-md hover:shadow-lg",children:"我知道了"})})]})}):null}var C=a.i(26971);let D=[{value:"day",label:"日"},{value:"week",label:"周"},{value:"month",label:"月"}],E=[{value:5,label:"TOP 5"},{value:10,label:"TOP 10"},{value:15,label:"TOP 15"},{value:20,label:"TOP 20"}];function F(){(0,x.usePageTitle)("仪表盘",!0),(0,d.useRouter)();let{user:a,isAuthenticated:g}=(0,y.useAuth)(),[A,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)("获取中..."),[I,J]=(0,c.useState)("获取中..."),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)("1.0.0"),[U,V]=(0,c.useState)([]),[W,X]=(0,c.useState)(null),[Y,Z]=(0,c.useState)([]),[$,_]=(0,c.useState)([]),[aa,ab]=(0,c.useState)(null),[ac,ad]=(0,c.useState)([]),[ae,af]=(0,c.useState)("day"),[ag,ah]=(0,c.useState)(5),[ai,aj]=(0,c.useState)(null);(0,c.useEffect)(()=>{ak();let a=setTimeout(()=>{al()},100);return"requestIdleCallback"in window?window.requestIdleCallback(()=>{as(),au()},{timeout:2e3}):setTimeout(()=>{as(),au()},500),()=>clearTimeout(a)},[]),(0,c.useEffect)(()=>{ae&&an()},[ae]),(0,c.useEffect)(()=>{ag&&ap()},[ag]);let ak=async()=>{F(!0);try{await Promise.all([am(),aq()])}catch(a){console.error("加载关键数据失败:",a)}finally{F(!1)}},al=async()=>{try{await Promise.all([an(),ao(),ap(),ar()])}catch(a){console.error("加载次要数据失败:",a)}},am=async()=>{try{let a=await (0,e.getCurrentVersion)();a.success&&a.data&&T(a.data.version)}catch(a){}},an=async()=>{try{let a=await (0,e.getVisitTrends)({period:ae});a.success&&a.data&&V(a.data.trends||[])}catch(a){console.error("加载趋势数据失败:",a)}},ao=async()=>{try{let a=await (0,e.getModuleStats)();a.success&&a.data&&X(a.data)}catch(a){console.error("加载模块统计失败:",a)}},ap=async()=>{try{let a=await (0,e.getIPRanking)({limit:ag,days:7});a.success&&a.data&&(Z(a.data.ranking||[]),_(a.data.daily||[]))}catch(a){console.error("加载IP排行失败:",a)}},aq=async()=>{try{let a=await (0,e.getDashboardOverview)();a.success&&a.data&&ab(a.data)}catch(a){console.error("加载概览数据失败:",a)}},ar=async()=>{try{let a=await (0,e.getAdminSites)();if(a.success&&a.data){let b=a.data.filter(a=>"backend"===a.display_type||!a.display_type&&!1===a.is_frontend_visible);ad(b)}}catch(a){console.error("加载后台导航失败:",a)}},as=async()=>{let a="xs_ip_location_cache",b="xs_ip_location_expire";try{let c=localStorage.getItem(a),d=localStorage.getItem(b);if(c&&d&&Date.now()<parseInt(d)){let{ip:a,location:b}=JSON.parse(c);H(a),J(b);return}}catch(a){}setTimeout(async()=>{try{let c=new AbortController,d=setTimeout(()=>c.abort(),5e3),e=await (0,f.safeFetch)("/api/client-ip",{signal:c.signal});if(clearTimeout(d),e.ok){let c=await e.json();if(c.success&&c.data){let d=c.data.ip;"::1"===d&&(d="127.0.0.1"),H(d);let e=c.data.isPrivate||"127.0.0.1"===d||"localhost"===d?"本地环境":c.data.location||"暂无法获取";J(e);try{localStorage.setItem(a,JSON.stringify({ip:d,location:e})),localStorage.setItem(b,String(Date.now()+18e5))}catch(a){}}}else H("127.0.0.1"),J("本地环境")}catch(a){H("127.0.0.1"),J("本地环境")}},100)},at=async()=>{P(!0),N(!0);try{let a=await (0,e.checkVersionUpdate)();a.success&&a.data?R(a.data):R({currentVersion:S||"未知",latestVersion:null,hasUpdate:!1,message:a.data?.message||"版本检测失败",updateUrl:null,releaseNotes:null})}catch(a){R({currentVersion:S||"未知",latestVersion:null,hasUpdate:!1,message:"版本检测失败，请检查网络连接或稍后重试",updateUrl:null,releaseNotes:null})}finally{P(!1)}},au=async()=>{try{let a=await (0,e.getAdminPendingReminders)();a.success&&a.data&&a.data.length>0&&L(!0)}catch(a){}},av=(0,c.useMemo)(()=>U.length?Math.max(Math.max(...U.map(a=>a.visit_count)),Math.max(...U.map(a=>a.unique_ips)),10):100,[U]),aw=(a,b)=>{let c;return"day"===ae&&void 0!==a.hour?`${a.hour}:00`:(c=new Date(a.date),`${c.getMonth()+1}/${c.getDate()}`)};return(0,b.jsx)("div",{className:"min-h-full",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,b.jsx)("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-blue-400 rounded-2xl p-6 md:p-8 text-white shadow-lg",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 md:gap-6",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-2 md:mb-3",children:"Xs-Blog仪表盘"}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:at,className:"px-3 py-1 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors border border-white/30",children:"检测更新"}),(0,b.jsxs)("span",{className:"text-blue-50/80 text-sm",children:["（当前版本：V ",S,"）"]})]})})]}),(0,b.jsx)("div",{className:"bg-white/15 backdrop-blur-md rounded-xl p-4 md:p-6 border border-white/30 shadow-lg min-w-0 md:min-w-[280px]",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)("div",{className:"w-14 h-14 md:w-20 md:h-20 rounded-2xl border-2 border-white/30 bg-white/10"}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden rounded-2xl",children:(0,b.jsx)("img",{src:"/admin.png",alt:"网站图标",className:"w-[85%] h-[85%] opacity-30 object-cover"})})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-lg md:text-xl font-bold mb-1 md:mb-2",children:"Hi , Admin !"}),(0,b.jsxs)("div",{className:"space-y-1 md:space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h,{className:"w-3 h-3 md:w-4 md:h-4 opacity-70 flex-shrink-0"}),(0,b.jsxs)("span",{className:"text-xs md:text-sm font-medium opacity-90 truncate",children:["IP: ",G||"加载中..."]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Globe,{className:"w-3 h-3 md:w-4 md:h-4 opacity-70 flex-shrink-0"}),(0,b.jsxs)("span",{className:"text-xs md:text-sm font-medium opacity-90 truncate",children:["位置: ",I||"加载中..."]})]})]})]})]})})]})}),(0,b.jsxs)("div",{className:"mb-6 bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 md:mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r,{className:"w-5 h-5 text-blue-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"访问趋势"})]}),(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:(0,b.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:D.map(a=>(0,b.jsx)("button",{onClick:()=>af(a.value),className:`px-2 md:px-3 py-1 text-xs md:text-sm rounded-md transition-colors ${ae===a.value?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:a.label},a.value))})})]}),(0,b.jsx)("div",{className:"relative h-48 md:h-64",children:A?(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):0===U.length?(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:"暂无数据"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 800 200",preserveAspectRatio:"none",children:[[0,1,2,3,4].map(a=>(0,b.jsx)("line",{x1:"50",y1:40+35*a,x2:"780",y2:40+35*a,stroke:"#e5e7eb",strokeWidth:"1"},a)),[0,1,2,3,4].map(a=>(0,b.jsx)("text",{x:"45",y:44+35*a,textAnchor:"end",className:"text-[10px] fill-gray-400",children:Math.round(av*(4-a)/4)},a)),(0,b.jsx)("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"2",points:U.map((a,b)=>{let c=50+730*b/Math.max(U.length-1,1),d=180-a.visit_count/av*140;return`${c},${d}`}).join(" ")}),(0,b.jsx)("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"2",strokeDasharray:"5,5",points:U.map((a,b)=>{let c=50+730*b/Math.max(U.length-1,1),d=180-a.unique_ips/av*140;return`${c},${d}`}).join(" ")}),U.map((a,c)=>{let d=50+730*c/Math.max(U.length-1,1),e=180-a.visit_count/av*140,f=180-a.unique_ips/av*140;return(0,b.jsxs)("g",{children:[(0,b.jsx)("rect",{x:d-20,y:20,width:40,height:170,fill:"transparent",className:"cursor-pointer",onMouseEnter:()=>aj({index:c,x:d,y:Math.min(e,f)}),onMouseLeave:()=>aj(null)}),(0,b.jsx)("circle",{cx:d,cy:e,r:ai?.index===c?6:4,fill:"#3b82f6",className:"transition-all"}),(0,b.jsx)("circle",{cx:d,cy:f,r:ai?.index===c?6:4,fill:"#10b981",className:"transition-all"}),(0,b.jsx)("text",{x:d,y:"195",textAnchor:"middle",className:"text-[9px] fill-gray-500",children:aw(a,c)})]},c)})]}),null!==ai&&U[ai.index]&&(0,b.jsxs)("div",{className:"absolute bg-gray-800 text-white text-xs rounded-lg px-3 py-2 shadow-lg pointer-events-none z-10",style:{left:`${ai.x/800*100}%`,top:`${ai.y/200*100-15}%`,transform:"translate(-50%, -100%)"},children:[(0,b.jsx)("div",{className:"font-medium mb-1",children:aw(U[ai.index],ai.index)}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,b.jsxs)("span",{children:["访问: ",U[ai.index].visit_count," 次"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),(0,b.jsxs)("span",{children:["独立IP: ",U[ai.index].unique_ips," 个"]})]})]})]})}),(0,b.jsxs)("div",{className:"flex justify-center gap-6 mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-0.5 bg-blue-500"}),(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"访问次数"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-0.5 bg-emerald-500",style:{borderStyle:"dashed"}}),(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"独立IP"})]})]})]}),(0,b.jsxs)("div",{className:"mb-6 bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4 md:mb-6",children:[(0,b.jsx)(t,{className:"w-5 h-5 text-purple-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"内容统计"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4",children:W&&Object.entries(W).map(([a,c])=>{let d={socialFeed:q,notes:j.FileText,stickyNotes:k.StickyNote,navigation:p,galleries:n.Image,services:o.ShoppingBag,todos:l.CheckSquare,messages:m.MessageSquare,docs:u.BookOpen}[a]||t,e={socialFeed:"bg-emerald-500",notes:"bg-green-500",stickyNotes:"bg-yellow-500",navigation:"bg-indigo-500",galleries:"bg-pink-500",services:"bg-purple-500",todos:"bg-orange-500",messages:"bg-cyan-500",docs:"bg-blue-500"}[a]||"bg-gray-500";return(0,b.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-3 md:p-4 border border-gray-200 hover:shadow-md transition-all hover:-translate-y-0.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2 md:mb-3",children:[(0,b.jsx)("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-lg ${e} flex items-center justify-center flex-shrink-0`,children:(0,b.jsx)(d,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),(0,b.jsx)("span",{className:"text-xs md:text-sm font-medium text-gray-700 truncate",children:c.label})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsx)("span",{className:"text-xl md:text-2xl font-bold text-gray-900",children:c.count}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"条"})]}),"messages"===a&&"number"==typeof c.unread&&c.unread>0&&(0,b.jsxs)("div",{className:"inline-flex items-center px-2 py-0.5 bg-red-100 text-red-600 rounded-full text-xs",children:[c.unread," 条未读"]})]})]},a)})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 md:mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s,{className:"w-5 h-5 text-orange-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"IP访问排行"})]}),(0,b.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:E.map(a=>(0,b.jsx)("button",{onClick:()=>ah(a.value),className:`px-2 md:px-3 py-1 text-xs md:text-sm rounded-md transition-colors ${ag===a.value?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:a.label},a.value))})]}),(0,b.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:A?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-gray-600 rounded-full animate-spin"})}):0===Y.length?(0,b.jsx)("div",{className:"text-center py-12 text-gray-400",children:"暂无数据"}):(0,b.jsx)("div",{className:"space-y-3",children:Y.map((a,c)=>{let d=Math.max(...Y.map(a=>a.visits),1),e=a.visits/d*100;return(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${0===c?"bg-yellow-400 text-yellow-900":1===c?"bg-gray-300 text-gray-700":2===c?"bg-orange-400 text-orange-900":"bg-gray-200 text-gray-600"}`,children:c+1}),(0,b.jsx)("div",{className:"w-28 md:w-36 text-xs md:text-sm font-medium text-gray-700 truncate flex-shrink-0",children:a.ip}),(0,b.jsxs)("div",{className:"flex-1 h-7 bg-gray-200 rounded-lg overflow-hidden relative",children:[(0,b.jsx)("div",{className:"h-full bg-blue-500 rounded-lg transition-all duration-500",style:{width:`${Math.max(e,5)}%`}}),(0,b.jsxs)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs font-semibold text-gray-600 whitespace-nowrap",children:[a.visits," 次"]})]})]},c)})})})]}),ac.length>0&&(0,b.jsxs)("div",{className:"mt-6 bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4 md:mb-6",children:[(0,b.jsx)(w,{className:"w-5 h-5 text-indigo-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"常用导航"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3",children:ac.map(a=>(0,b.jsxs)("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col items-center p-3 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200 hover:border-indigo-300 hover:shadow-md transition-all hover:-translate-y-0.5",children:[(0,b.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-xl bg-white border border-gray-200 flex items-center justify-center mb-2 group-hover:border-indigo-300 transition-colors overflow-hidden",children:a.icon?(0,b.jsx)("img",{src:a.icon,alt:a.name,className:"w-6 h-6 md:w-8 md:h-8 object-contain",onError:a=>{a.target.style.display="none";let b=a.target.parentElement;b&&(b.innerHTML='<svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>')}}):(0,b.jsx)(v.ExternalLink,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-500 transition-colors"})}),(0,b.jsx)("span",{className:"text-xs md:text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors text-center truncate w-full",children:a.name}),a.description&&(0,b.jsx)("span",{className:"text-[10px] text-gray-400 truncate w-full text-center mt-0.5 hidden md:block",children:a.description})]},a.id))})]}),K&&(0,b.jsx)(z,{onClose:()=>L(!1)}),(0,b.jsx)(B,{}),M&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[99999] p-4 animate-fadeIn",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full shadow-2xl animate-slideUp overflow-hidden",children:[(0,b.jsx)("div",{className:`px-6 py-4 ${O?"bg-gradient-to-r from-blue-500 to-blue-600":Q?.hasUpdate?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-green-500 to-emerald-500"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[O?(0,b.jsx)("div",{className:"w-10 h-10 border-3 border-white/30 border-t-white rounded-full animate-spin"}):Q?.hasUpdate?(0,b.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}):(0,b.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-white",children:O?"版本检测中":Q?.hasUpdate?"发现新版本":"版本检测"}),(0,b.jsx)("p",{className:"text-white/80 text-sm",children:O?"请稍候...":Q?.hasUpdate?"建议尽快更新":"当前已是最新版本"})]})]})}),(0,b.jsxs)("div",{className:"p-6",children:[O?(0,b.jsx)("div",{className:"flex flex-col items-center justify-center py-4",children:(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"正在检测版本..."})}):Q?(0,b.jsx)("div",{className:"text-center py-2",children:(0,b.jsx)("p",{className:`text-lg font-semibold leading-relaxed ${Q.hasUpdate?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:Q.message})}):null,(0,b.jsx)("div",{className:"mt-6 flex justify-center",children:(0,b.jsx)("button",{onClick:()=>{N(!1),R(null)},className:`px-6 py-2 text-white rounded-lg transition-all shadow-md hover:shadow-lg ${Q?.hasUpdate?"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600"}`,children:"我知道了"})})]})]})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(C.default,{})})]})})}a.s(["default",()=>F],87135)}];

//# sourceMappingURL=src_app_admins_dashboard_page_tsx_5782f71e._.js.map