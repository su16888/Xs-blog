module.exports=[26971,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d="QXJjaGl0ZWN0dXJhbCBkcml2ZXIgaXMgYmFzZWQgb24g",e="WHMtYmxvZy4=",f=a=>{try{return atob(a)}catch{return""}};function g(){let[a,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=setTimeout(()=>{let a,b;a=f(d),b=f(e),a.length>0&&b.includes("Xs-blog")&&(g(f(d)),i(f(e)),k(f("aHR0cHM6Ly9naXRodWIuY29tL3N1MTY4ODgvWHMtYmxvZw==")),m(!0))},100);return()=>clearTimeout(a)},[]),(0,c.useEffect)(()=>{let a=setInterval(()=>{document.querySelector("[data-copyright]")},5e3);return()=>clearInterval(a)},[l]);let n=async()=>{try{if(localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(a=>{let b=a.split("=")[0].trim();document.cookie=`${b}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),"caches"in window){let a=await caches.keys();await Promise.all(a.map(a=>caches.delete(a)))}"indexedDB"in window&&(await indexedDB.databases?.()||[]).forEach(a=>{a.name&&indexedDB.deleteDatabase(a.name)}),alert("y"),window.location.reload()}catch(a){alert("y"),window.location.reload()}};return l&&a?(0,b.jsxs)("div",{"data-copyright":"true",className:"text-[10px] md:text-xs text-gray-500 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},onContextMenu:a=>a.preventDefault(),children:[(0,b.jsx)("span",{onDoubleClick:n,style:{cursor:"default"},children:a}),(0,b.jsx)("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:text-primary-600 transition-colors",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},children:h})]}):null}a.s(["default",()=>g])},46712,a=>{"use strict";var b=a.i(72131),c=a.i(55488);function d({forceNoIndex:a=!1,customTitle:d}){let{settings:e}=(0,c.useSettings)(),f="true"===e.allowSEO;return(0,b.useEffect)(()=>{if(d)document.title=d;else{let a=e.siteTitle||"",b=e.siteSubtitle||"";a&&(document.title=b?`${a} - ${b}`:a)}},[e.siteTitle,e.siteSubtitle,d]),(0,b.useEffect)(()=>{if(a||!f){let a=document.querySelector('meta[name="robots"]');a||((a=document.createElement("meta")).name="robots",document.head.appendChild(a)),a.content="noindex, nofollow, noarchive, nosnippet, noimageindex";let b=document.querySelector('meta[name="googlebot"]');b||((b=document.createElement("meta")).name="googlebot",document.head.appendChild(b)),b.content="noindex, nofollow";let c=document.querySelector('meta[http-equiv="X-Robots-Tag"]');c||((c=document.createElement("meta")).httpEquiv="X-Robots-Tag",document.head.appendChild(c)),c.content="noindex, nofollow"}else{let a=document.querySelector('meta[name="robots"]'),b=document.querySelector('meta[name="googlebot"]'),c=document.querySelector('meta[http-equiv="X-Robots-Tag"]');a&&a.remove(),b&&b.remove(),c&&c.remove()}},[a,f]),null}a.s(["default",()=>d])},78891,a=>{"use strict";var b=a.i(87924),c=a.i(55488),d=a.i(68114);function e({className:a=""}){let{settings:e}=(0,c.useSettings)(),f=e.backgroundImage||"",g=e.backgroundOpacity||"0.5";if(!f)return null;let h=(0,d.getApiBaseUrl)(),i=f.startsWith("http")?f:`${h}${f}`;return(0,b.jsx)("div",{className:`absolute inset-0 z-0 pointer-events-none ${a}`,style:{backgroundImage:`url(${i})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:parseFloat(g)}})}a.s(["default",()=>e])},26680,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19032),e=a.i(26971),f=a.i(46712),g=a.i(78891);function h(){let[a,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)("success"),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),u={themeType:"default",footerCopyright:`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:"true",showWapSidebar:"true"},[v,w]=(0,c.useState)(u),[x,y]=(0,c.useState)({title:"",description:"",browserTitle:"",browserSubtitle:""}),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)({name:"",contact:"",category_id:"",content:"",captcha:""});(0,c.useEffect)(()=>{E(),D()},[]),(0,c.useEffect)(()=>{if(!x.browserTitle)return;let a=x.browserTitle;x.browserSubtitle&&(a=`${a} - ${x.browserSubtitle}`),document.title=a},[x.browserTitle,x.browserSubtitle]);let D=async()=>{try{let[a,b]=await Promise.all([(0,d.getSettings)(),(0,d.getPageText)("messages")]);if(a.success&&a.data){let b={};a.data.forEach(a=>{b[a.key]=a.value}),w({themeType:b.themeType||"default",footerCopyright:b.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:b.showTopNavbar||"true",showWapSidebar:b.showWapSidebar||"true"})}b.success&&b.data&&(y({title:b.data.title||"联系我们",description:b.data.description||"有任何问题都可以通过这里进行提交你的想法！",browserTitle:b.data.browserTitle||"留言板",browserSubtitle:b.data.browserSubtitle||""}),A(!0))}catch(a){console.error("Failed to load settings:",a),A(!0)}},E=async()=>{try{let a=await (0,d.getMessageCategories)();a.success&&h(a.data)}catch(a){console.error("加载数据失败:",a)}},F=async()=>{try{let a=await (0,d.getCaptcha)();if(a.success&&a.data){let b=a.data.image||a.data.svg,c=b.startsWith("data:")?b:`data:image/svg+xml;utf8,${encodeURIComponent(b)}`;j({id:a.data.id,image:c})}}catch(a){console.error("加载验证码失败:",a)}},G=async a=>{if(a.preventDefault(),n(""),!B.name.trim()){n("请输入您的称呼"),p("error"),setTimeout(()=>n(""),3e3);return}if(!B.contact.trim()){n("请输入联系方式"),p("error"),setTimeout(()=>n(""),3e3);return}if(!B.content.trim()){n("请输入留言内容"),p("error"),setTimeout(()=>n(""),3e3);return}await F(),r(!0)},H=async()=>{if(!B.captcha.trim()){n("请输入验证码"),p("error"),setTimeout(()=>n(""),3e3);return}try{t(!0);let a={...B,category_id:B.category_id?parseInt(B.category_id):null,captcha:{id:i?.id,text:B.captcha}},b=await (0,d.submitMessage)(a);b.success?(n("留言提交成功，我们会尽快处理！"),p("success"),C({name:"",contact:"",category_id:"",content:"",captcha:""}),r(!1)):(n(b.message||"提交失败，请重试"),p("error"),F())}catch(a){console.error("提交留言失败:",a),n(a.response?.data?.message||a.message||"提交失败，请重试"),p("error"),F()}finally{t(!1),setTimeout(()=>n(""),3e3)}},I=a=>{let{name:b,value:c}=a.target;C(a=>({...a,[b]:c}))};return v?.showWapSidebar,(0,b.jsxs)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col hide-scrollbar",children:[(0,b.jsx)(f.default,{}),(0,b.jsx)(g.default,{}),(0,b.jsxs)("div",{className:"relative z-0 flex-1 flex flex-col",children:[(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl py-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:x.title}),(0,b.jsx)("p",{className:"text-text-secondary",children:x.description})]}),(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-lg p-6 max-w-2xl mx-auto",children:[m&&(0,b.jsx)("div",{className:"mb-6 p-4 rounded-lg border",style:"success"===o?{backgroundColor:"var(--success-bg)",color:"var(--success-text)",borderColor:"var(--success-border)"}:{backgroundColor:"var(--error-bg)",color:"var(--error-text)",borderColor:"var(--error-border)"},children:m}),(0,b.jsxs)("form",{onSubmit:G,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-text-primary mb-2",children:"用户称呼 *"}),(0,b.jsx)("input",{type:"text",id:"name",name:"name",value:B.name,onChange:I,required:!0,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",placeholder:"请输入您的称呼"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"contact",className:"block text-sm font-medium text-text-primary mb-2",children:"联系方式 *"}),(0,b.jsx)("input",{type:"text",id:"contact",name:"contact",value:B.contact,onChange:I,required:!0,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",placeholder:"请输入您的联系方式（邮箱、微信、电话等）"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category_id",className:"block text-sm font-medium text-text-primary mb-2",children:"留言分类"}),(0,b.jsxs)("select",{id:"category_id",name:"category_id",value:B.category_id,onChange:I,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",children:[(0,b.jsx)("option",{value:"",children:"请选择分类"}),a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-text-primary mb-2",children:"留言内容 *"}),(0,b.jsx)("textarea",{id:"content",name:"content",value:B.content,onChange:I,required:!0,rows:6,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary resize-none",placeholder:"请输入您的留言内容..."})]}),(0,b.jsx)("div",{className:"pt-4",children:(0,b.jsx)("button",{type:"submit",disabled:k,className:"w-full bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white font-medium py-3 px-4 rounded-lg transition-colors focus:outline-none focus:ring-0",children:k?"提交中...":"提交留言"})})]})]})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{children:v.footerCopyright}),(0,b.jsx)(e.default,{})]})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",onClick:()=>{r(!1),C({...B,captcha:""})},children:(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-xl max-w-md w-full p-6 shadow-2xl border border-border-primary relative",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:()=>{r(!1),C({...B,captcha:""})},className:"absolute top-4 right-4 text-text-tertiary hover:text-text-primary transition-colors text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-bg-tertiary",children:"×"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-text-primary mb-6 text-center",children:"请输入验证码"}),(0,b.jsx)("div",{className:"flex justify-center mb-6",children:i&&(0,b.jsx)("div",{onClick:F,className:"cursor-pointer border-2 border-border-primary rounded-lg overflow-hidden bg-bg-primary hover:border-primary-500 transition-colors",title:"点击刷新验证码",children:(0,b.jsx)("img",{src:i.image,alt:"验证码",className:"h-[50px] w-[150px] object-contain"})})}),(0,b.jsx)("p",{className:"text-text-secondary text-sm text-center mb-4",children:"点击图片可刷新验证码"}),(0,b.jsx)("input",{type:"text",value:B.captcha,onChange:a=>C({...B,captcha:a.target.value}),placeholder:"请输入验证码",className:"w-full px-4 py-3 border border-border-primary rounded-lg bg-bg-primary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent mb-6 text-center text-lg tracking-wider",autoFocus:!0,onKeyPress:a=>{"Enter"===a.key&&H()}}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{r(!1),C({...B,captcha:""})},className:"flex-1 px-4 py-2.5 bg-bg-tertiary text-text-primary rounded-lg hover:bg-border-primary transition-colors font-medium",children:"取消"}),(0,b.jsx)("button",{onClick:H,disabled:s,className:"flex-1 px-4 py-2.5 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:s?"提交中...":"确认提交"})]})]})})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=src_046357cc._.js.map