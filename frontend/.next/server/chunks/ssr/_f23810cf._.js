module.exports=[57723,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(62036),f=a.i(70106);let g=(0,f.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),h=(0,f.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var i=a.i(33508);function j({show:a,message:f,type:j,duration:k=3e3,onClose:l}){let[m,n]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(a){n(!0);let a=setTimeout(()=>{n(!1)},k);return()=>clearTimeout(a)}n(!1)},[a,k]),(0,c.useEffect)(()=>{if(!m&&a){let a=setTimeout(l,300);return()=>clearTimeout(a)}},[m,a,l]);let o=(()=>{switch(j){case"success":return{bg:"bg-green-50 border-green-200",text:"text-green-800",icon:(0,b.jsx)(g,{className:"w-5 h-5 text-green-500"})};case"error":return{bg:"bg-red-50 border-red-200",text:"text-red-800",icon:(0,b.jsx)(h,{className:"w-5 h-5 text-red-500"})};default:return{bg:"bg-blue-50 border-blue-200",text:"text-blue-800",icon:(0,b.jsx)(g,{className:"w-5 h-5 text-blue-500"})}}})();return(0,b.jsx)(e.AnimatePresence,{children:m&&(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.2},className:"fixed top-4 right-4 z-[999999] min-w-[300px] max-w-md",children:(0,b.jsxs)("div",{className:`${o.bg} border rounded-lg shadow-lg p-4 flex items-start gap-3`,children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:o.icon}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("p",{className:`${o.text} text-sm font-medium`,children:f})}),(0,b.jsx)("button",{onClick:()=>{n(!1)},className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)(i.X,{className:"w-4 h-4"})})]})})})}a.s(["default",()=>j],57723)},62036,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(86723),e=a.i(74290),f=a.i(1703),g=a.i(14800),h=a.i(91128),i=c,j=a.i(65802);function k(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class l extends i.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,h.isHTMLElement)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:a,isPresent:d,anchorX:e,root:f}){let g=(0,i.useId)(),h=(0,i.useRef)(null),m=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:n}=(0,i.useContext)(j.MotionConfigContext),o=function(...a){return c.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=k(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():k(a[b],null)}}}}(...a),a)}(h,a?.ref);return(0,i.useInsertionEffect)(()=>{let{width:a,height:b,top:c,left:i,right:j}=m.current;if(d||!h.current||!a||!b)return;let k="left"===e?`left: ${i}`:`right: ${j}`;h.current.dataset.motionPopId=g;let l=document.createElement("style");n&&(l.nonce=n);let o=f??document.head;return o.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${k}px !important;
            top: ${c}px !important;
          }
        `),()=>{o.contains(l)&&o.removeChild(l)}},[d]),(0,b.jsx)(l,{isPresent:d,childRef:h,sizeRef:m,children:i.cloneElement(a,{ref:o})})}let n=({children:a,initial:d,isPresent:f,onExitComplete:h,custom:i,presenceAffectsLayout:j,mode:k,anchorX:l,root:n})=>{let p=(0,e.useConstant)(o),q=(0,c.useId)(),r=!0,s=(0,c.useMemo)(()=>(r=!1,{id:q,initial:d,isPresent:f,custom:i,onExitComplete:a=>{for(let b of(p.set(a,!0),p.values()))if(!b)return;h&&h()},register:a=>(p.set(a,!1),()=>p.delete(a))}),[f,p,h]);return j&&r&&(s={...s}),(0,c.useMemo)(()=>{p.forEach((a,b)=>p.set(b,!1))},[f]),c.useEffect(()=>{f||p.size||!h||h()},[f]),"popLayout"===k&&(a=(0,b.jsx)(m,{isPresent:f,anchorX:l,root:n,children:a})),(0,b.jsx)(g.PresenceContext.Provider,{value:s,children:a})};function o(){return new Map}var p=a.i(20410);let q=a=>a.key||"";function r(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}let s=({children:a,custom:g,initial:h=!0,onExitComplete:i,presenceAffectsLayout:j=!0,mode:k="sync",propagate:l=!1,anchorX:m="left",root:o})=>{let[s,t]=(0,p.usePresence)(l),u=(0,c.useMemo)(()=>r(a),[a]),v=l&&!s?[]:u.map(q),w=(0,c.useRef)(!0),x=(0,c.useRef)(u),y=(0,e.useConstant)(()=>new Map),[z,A]=(0,c.useState)(u),[B,C]=(0,c.useState)(u);(0,f.useIsomorphicLayoutEffect)(()=>{w.current=!1,x.current=u;for(let a=0;a<B.length;a++){let b=q(B[a]);v.includes(b)?y.delete(b):!0!==y.get(b)&&y.set(b,!1)}},[B,v.length,v.join("-")]);let D=[];if(u!==z){let a=[...u];for(let b=0;b<B.length;b++){let c=B[b],d=q(c);v.includes(d)||(a.splice(b,0,c),D.push(c))}return"wait"===k&&D.length&&(a=D),C(r(a)),A(u),null}let{forceRender:E}=(0,c.useContext)(d.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:B.map(a=>{let c=q(a),d=(!l||!!s)&&(u===B||v.includes(c));return(0,b.jsx)(n,{isPresent:d,initial:(!w.current||!!h)&&void 0,custom:g,presenceAffectsLayout:j,mode:k,root:o,onExitComplete:d?void 0:()=>{if(!y.has(c))return;y.set(c,!0);let a=!0;y.forEach(b=>{b||(a=!1)}),a&&(E?.(),C(x.current),l&&t?.(),i&&i())},anchorX:m,children:a},c)})})};a.s(["AnimatePresence",()=>s],62036)},65763,a=>{"use strict";var b=a.i(72131),c=a.i(82572);let d=null;function e(a,f=!1){let[g,h]=(0,b.useState)(d||""),i=(0,c.useOptionalPageTitleContext)();(0,b.useEffect)(()=>{f&&i&&i.setTitle(a)},[a,f,i]),(0,b.useEffect)(()=>{d?h(d):(async()=>{try{let a=await fetch("/api/settings");if(a.ok){let b=await a.json();if(b.success&&b.data){let a={};b.data.forEach(b=>{a[b.key]=b.value});let c=a.siteTitle||"";d=c,h(c)}}}catch(a){console.error("Failed to fetch site title:",a)}})()},[]),(0,b.useEffect)(()=>{let b=document.title;return f?"仪表盘"===a?document.title=`${g} - 后台管理系统`:document.title=`${a} - ${g}后台管理系统`:document.title=`${a} - ${g}`,()=>{document.title=b}},[a,g,f])}a.s(["usePageTitle",()=>e])},3512,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(11642),f=a.i(19032),g=a.i(65763),h=a.i(57723);let i=[{name:"黄色",value:"#fef68a"},{name:"绿色",value:"#d1fae5"},{name:"蓝色",value:"#bfdbfe"},{name:"粉色",value:"#fce7f3"},{name:"橙色",value:"#fed7aa"},{name:"紫色",value:"#e9d5ff"}];function j(){(0,g.usePageTitle)("便签管理",!0),(0,d.useRouter)();let{user:a}=(0,e.useAuth)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({title:"",content:"",category:"",color:"#fef68a",sort_order:0}),[v,w]=(0,c.useState)({show:!1,type:"success",message:""}),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),B=(0,c.useMemo)(()=>j.filter(a=>{let b=x.toLowerCase(),c=a.title.toLowerCase().includes(b)||a.content.toLowerCase().includes(b),d=!z||a.category===z;return c&&d}),[j,x,z]);(0,c.useEffect)(()=>{C()},[]);let C=async()=>{try{let a=await (0,f.getAdminStickyNotes)();if(a.success){let b=Array.isArray(a.data)?a.data:[];k(b)}let b=await (0,f.getAdminStickyNoteCategories)();b.success&&m(b.data||[])}catch(a){w({show:!0,type:"error",message:"加载便签失败"}),k([])}finally{o(!1)}},D=a=>{u({...t,[a.target.name]:a.target.value})},E=async a=>{a.preventDefault();try{p?.id?(await (0,f.updateAdminStickyNote)(p.id,t)).success&&(w({show:!0,type:"success",message:"便签更新成功"}),await C(),G()):(await (0,f.createAdminStickyNote)(t)).success&&(w({show:!0,type:"success",message:"便签添加成功"}),await C(),G())}catch(a){w({show:!0,type:"error",message:a.response?.data?.message||"操作失败"})}},F=async a=>{if(confirm("确定要删除这个便签吗？"))try{(await (0,f.deleteAdminStickyNote)(a)).success&&(w({show:!0,type:"success",message:"便签删除成功"}),await C())}catch(a){w({show:!0,type:"error",message:a.response?.data?.message||"删除失败"})}},G=()=>{u({title:"",content:"",category:"",color:"#fef68a",sort_order:0}),q(null),s(!1)},H=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.default,{show:v.show,message:v.message,type:v.type,onClose:()=>w({...v,show:!1})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,b.jsx)("button",{onClick:()=>s(!r),className:"btn btn-primary",children:r?"取消":"+ 添加便签"}),(0,b.jsx)("div",{className:"w-full sm:w-auto sm:flex-1 sm:max-w-md",children:(0,b.jsx)("input",{type:"text",placeholder:"搜索便签标题或内容...",value:x,onChange:a=>y(a.target.value),className:"input w-full"})})]}),l.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"分类筛选："}),(0,b.jsx)("button",{onClick:()=>A(""),className:`px-3 py-1 rounded-full text-sm transition-colors ${""===z?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"全部"}),l.map(a=>(0,b.jsx)("button",{onClick:()=>A(a),className:`px-3 py-1 rounded-full text-sm transition-colors ${z===a?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:a},a))]})]}),r&&(0,b.jsxs)("div",{className:"card mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:p?"编辑便签":"添加便签"}),(0,b.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"便签标题"}),(0,b.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:t.title,onChange:D,className:"input",placeholder:"输入便签标题..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"便签内容"}),(0,b.jsx)("textarea",{id:"content",name:"content",rows:5,required:!0,value:t.content,onChange:D,className:"input",placeholder:"输入便签内容..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"便签分类 (可选)"}),(0,b.jsx)("input",{id:"category",name:"category",type:"text",value:t.category,onChange:D,className:"input",placeholder:"输入分类，如：工作、学习、生活...",list:"category-suggestions"}),l.length>0&&(0,b.jsx)("datalist",{id:"category-suggestions",children:l.map(a=>(0,b.jsx)("option",{value:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-700 mb-2",children:"便签颜色"}),(0,b.jsx)("div",{className:"flex gap-2",children:i.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>u({...t,color:a.value}),className:`w-12 h-12 rounded-lg border-2 transition-all ${t.color===a.value?"border-gray-800 scale-110 shadow-lg":"border-gray-300 hover:border-gray-500"}`,style:{backgroundColor:a.value},title:a.name},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"sort_order",className:"block text-sm font-medium text-gray-700 mb-2",children:"排序 (可选)"}),(0,b.jsx)("input",{id:"sort_order",name:"sort_order",type:"number",value:t.sort_order,onChange:D,className:"input",placeholder:"0"})]}),(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",children:p?"更新":"添加"}),(0,b.jsx)("button",{type:"button",onClick:G,className:"btn btn-secondary",children:"取消"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["便签列表 ",x&&`(找到 ${B.length} 个结果)`]}),0===B.length?(0,b.jsx)("div",{className:"card text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:x?"没有找到匹配的便签":"还没有添加任何便签"})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(a=>(0,b.jsxs)("div",{className:"rounded-lg shadow-md p-5 relative transition-transform hover:scale-105",style:{backgroundColor:a.color},children:[(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 text-lg mb-2",children:a.title}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.category&&(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-500/70 text-white rounded",children:a.category}),void 0!==a.sort_order&&a.sort_order>0&&(0,b.jsxs)("span",{className:"text-xs px-2 py-1 bg-white/70 text-gray-700 rounded",children:["排序: ",a.sort_order]})]})]}),(0,b.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap mb-4 min-h-[60px]",children:a.content}),(0,b.jsxs)("div",{className:"text-xs text-gray-600 mb-3 space-y-1",children:[a.created_at&&(0,b.jsxs)("div",{children:["创建: ",H(a.created_at)]}),a.updated_at&&a.updated_at!==a.created_at&&(0,b.jsxs)("div",{children:["修改: ",H(a.updated_at)]})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{q(a),u({title:a.title,content:a.content,category:a.category||"",color:a.color||"#fef68a",sort_order:a.sort_order||0}),s(!0)},className:"flex-1 px-3 py-1.5 bg-white/80 hover:bg-white text-gray-800 rounded text-sm font-medium transition-colors",children:"编辑"}),(0,b.jsx)("button",{onClick:()=>a.id&&F(a.id),className:"flex-1 px-3 py-1.5 bg-red-500/80 hover:bg-red-500 text-white rounded text-sm font-medium transition-colors",children:"删除"})]})]},a.id))})]})]})})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=_f23810cf._.js.map