module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},26971,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d="QXJjaGl0ZWN0dXJhbCBkcml2ZXIgaXMgYmFzZWQgb24g",e="WHMtYmxvZy4=",f=a=>{try{return atob(a)}catch{return""}};function g(){let[a,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=setTimeout(()=>{let a,b;a=f(d),b=f(e),a.length>0&&b.includes("Xs-blog")&&(g(f(d)),i(f(e)),k(f("aHR0cHM6Ly9naXRodWIuY29tL3N1MTY4ODgvWHMtYmxvZw==")),m(!0))},100);return()=>clearTimeout(a)},[]),(0,c.useEffect)(()=>{let a=setInterval(()=>{document.querySelector("[data-copyright]")},5e3);return()=>clearInterval(a)},[l]);let n=async()=>{try{if(localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(a=>{let b=a.split("=")[0].trim();document.cookie=`${b}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),"caches"in window){let a=await caches.keys();await Promise.all(a.map(a=>caches.delete(a)))}"indexedDB"in window&&(await indexedDB.databases?.()||[]).forEach(a=>{a.name&&indexedDB.deleteDatabase(a.name)}),alert("y"),window.location.reload()}catch(a){alert("y"),window.location.reload()}};return l&&a?(0,b.jsxs)("div",{"data-copyright":"true",className:"text-[10px] md:text-xs text-gray-500 text-center select-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},onContextMenu:a=>a.preventDefault(),children:[(0,b.jsx)("span",{onDoubleClick:n,style:{cursor:"default"},children:a}),(0,b.jsx)("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:text-primary-600 transition-colors",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},children:h})]}):null}a.s(["default",()=>g])},46712,a=>{"use strict";var b=a.i(72131),c=a.i(55488);function d({forceNoIndex:a=!1,customTitle:d}){let{settings:e}=(0,c.useSettings)(),f="true"===e.allowSEO;return(0,b.useEffect)(()=>{if(d)document.title=d;else{let a=e.siteTitle||"",b=e.siteSubtitle||"";a&&(document.title=b?`${a} - ${b}`:a)}},[e.siteTitle,e.siteSubtitle,d]),(0,b.useEffect)(()=>{if(a||!f){let a=document.querySelector('meta[name="robots"]');a||((a=document.createElement("meta")).name="robots",document.head.appendChild(a)),a.content="noindex, nofollow, noarchive, nosnippet, noimageindex";let b=document.querySelector('meta[name="googlebot"]');b||((b=document.createElement("meta")).name="googlebot",document.head.appendChild(b)),b.content="noindex, nofollow";let c=document.querySelector('meta[http-equiv="X-Robots-Tag"]');c||((c=document.createElement("meta")).httpEquiv="X-Robots-Tag",document.head.appendChild(c)),c.content="noindex, nofollow"}else{let a=document.querySelector('meta[name="robots"]'),b=document.querySelector('meta[name="googlebot"]'),c=document.querySelector('meta[http-equiv="X-Robots-Tag"]');a&&a.remove(),b&&b.remove(),c&&c.remove()}},[a,f]),null}a.s(["default",()=>d])},96101,a=>{"use strict";let b=(0,a.i(60137).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);a.s(["FolderOpen",()=>b],96101)},43108,a=>{"use strict";let b=(0,a.i(60137).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},38632,a=>{"use strict";let b=(0,a.i(60137).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);a.s(["Image",()=>b],38632)},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},8591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(72131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},5784,a=>{"use strict";let b=(0,a.i(60137).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},78891,a=>{"use strict";var b=a.i(87924),c=a.i(55488),d=a.i(68114);function e({className:a=""}){let{settings:e}=(0,c.useSettings)(),f=e.backgroundImage||"",g=e.backgroundOpacity||"0.5";if(!f)return null;let h=(0,d.getApiBaseUrl)(),i=f.startsWith("http")?f:`${h}${f}`;return(0,b.jsx)("div",{className:`absolute inset-0 z-0 pointer-events-none ${a}`,style:{backgroundImage:`url(${i})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:parseFloat(g)}})}a.s(["default",()=>e])},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},34845,a=>{"use strict";var b=a.i(87924),c=a.i(87532),d=a.i(33508),e=a.i(43108),f=a.i(38632),g=a.i(96101),h=a.i(5784),i=a.i(72131),j=a.i(19721),k=a.i(71987),l=a.i(68114),m=a.i(26971),n=a.i(19032),o=a.i(46712),p=a.i(78891);let q=(0,j.default)(async()=>{},{loadableGenerated:{modules:[20613]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,b.jsx)("div",{className:"text-white",children:"加载中..."})})});function r(){let[a,j]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[t,u]=(0,i.useState)(!0),[v,w]=(0,i.useState)(""),[x,y]=(0,i.useState)(!1),[z,A]=(0,i.useState)(null),[B,C]=(0,i.useState)(!1),[D,E]=(0,i.useState)(!1),[F,G]=(0,i.useState)(null),[H,I]=(0,i.useState)(1),[J]=(0,i.useState)(20),[K,L]=(0,i.useState)(!0),[M,N]=(0,i.useState)(!1),[O,P]=(0,i.useState)([]),Q={themeType:"default",footerCopyright:`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:"true",showWapSidebar:"true"},[R,S]=(0,i.useState)(Q),[T,U]=(0,i.useState)({title:"",description:"",browserTitle:"",browserSubtitle:""}),[V,W]=(0,i.useState)(!1);(0,i.useEffect)(()=>{X()},[]),(0,i.useEffect)(()=>{if(!T.browserTitle)return;let a=T.browserTitle;T.browserSubtitle&&(a=`${a} - ${T.browserSubtitle}`),document.title=a},[T.browserTitle,T.browserSubtitle]);let X=async()=>{I(1);try{await Promise.all([Y(),Z(1,!0),_()])}catch(a){console.error("Failed to load data:",a)}finally{u(!1)}},Y=async()=>{try{let[a,b]=await Promise.all([(0,n.getSettings)(),(0,n.getPageText)("galleries")]);if(a.success&&a.data){let b={};a.data.forEach(a=>{b[a.key]=a.value}),S({themeType:b.themeType||"default",footerCopyright:b.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:b.showTopNavbar||"true",showWapSidebar:b.showWapSidebar||"true"})}b.success&&b.data&&(U({title:b.data.title||"图库列表",description:b.data.description||"探索精彩的图片合集",browserTitle:b.data.browserTitle||"图库列表",browserSubtitle:b.data.browserSubtitle||""}),W(!0))}catch(a){console.error("Failed to load settings:",a),W(!0)}},Z=async(a=H,b=!1,c)=>{try{let d=await (0,n.getGalleries)(c);if(d.success&&d.data){let c=d.data;b&&P(c);let e=(a-1)*J,f=e+J,g=c.slice(e,f);b?j(g):j(a=>[...a,...g]),L(f<c.length)}}catch(a){console.error("Failed to fetch galleries:",a),j([])}},$=async()=>{if(M||!K)return;N(!0);let a=H+1;I(a);try{let b=(a-1)*J,c=b+J,d=O.slice(b,c);j(a=>[...a,...d]),L(c<O.length)}catch(a){console.error("Failed to load more galleries:",a)}finally{N(!1)}},_=async()=>{try{let a=await (0,n.getGalleryCategories)();a.success&&a.data&&s(a.data)}catch(a){console.error("Failed to fetch categories:",a),s([])}},aa=(0,i.useMemo)(()=>a.filter(a=>{if(!v.trim())return!0;let b=v.toLowerCase(),c=a.title?.toLowerCase().includes(b),d=a.description?.toLowerCase().includes(b);return c||d}),[a,v]),ab=v.trim()&&aa.length>0,ac=v.trim()&&0===aa.length,ad=a=>{A(a),I(1),Z(1,!0,{search:v||void 0,category_id:a||void 0})};return R?.themeType,R?.showTopNavbar,R?.showWapSidebar,(0,b.jsxs)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col hide-scrollbar",children:[(0,b.jsx)(o.default,{}),(0,b.jsx)(p.default,{}),(0,b.jsxs)("div",{className:"relative z-0 flex-1 flex flex-col",children:[(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl py-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:T.title}),(0,b.jsx)("p",{className:"text-text-secondary",children:T.description})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[r.length>0&&(0,b.jsxs)("div",{className:"relative md:w-48 flex-shrink-0",children:[(0,b.jsxs)("button",{onClick:()=>C(!B),className:"w-full flex items-center justify-between px-4 py-3 bg-bg-secondary rounded-lg border border-border-primary hover:bg-bg-tertiary transition-all",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.FolderOpen,{className:"w-4 h-4 text-text-secondary"}),(0,b.jsx)("span",{className:"text-sm font-medium text-text-primary truncate",children:null===z?"全部分类":r.find(a=>a.id===z)?.name||"全部分类"})]}),(0,b.jsx)(h.ChevronDown,{className:`w-4 h-4 text-text-tertiary transition-transform flex-shrink-0 ${B?"rotate-180":""}`})]}),B&&(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 p-3 bg-bg-secondary rounded-lg border border-border-primary shadow-lg z-20",children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsx)("button",{onClick:()=>{ad(null),C(!1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${null===z?"bg-primary-500 text-white shadow-md":"bg-bg-tertiary text-text-secondary hover:bg-bg-primary border border-border-primary"}`,children:"全部"}),r.map(a=>(0,b.jsxs)("button",{onClick:()=>{ad(a.id),C(!1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${z===a.id?"bg-primary-500 text-white shadow-md":"bg-bg-tertiary text-text-secondary hover:bg-bg-primary border border-border-primary"}`,children:[a.icon&&(0,b.jsx)("span",{className:"mr-1.5",children:a.icon}),a.name]},a.id))]})})]}),(0,b.jsx)("div",{className:"hidden md:flex items-center",children:x?(0,b.jsx)("div",{className:"w-64",children:(0,b.jsxs)("div",{className:"relative flex items-center",children:[(0,b.jsx)(c.Search,{className:"absolute left-3 top-0 bottom-0 my-auto w-4 h-4 text-text-tertiary pointer-events-none"}),(0,b.jsx)("input",{type:"text",placeholder:"搜索图册...",value:v,onChange:a=>w(a.target.value),className:"w-full h-[46px] pl-9 pr-9 bg-bg-secondary border border-border-primary rounded-lg text-sm text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off",autoFocus:!0}),(0,b.jsx)("button",{type:"button",onClick:()=>{w(""),y(!1)},className:"absolute right-3 top-0 bottom-0 my-auto w-5 h-5 flex items-center justify-center text-text-tertiary hover:text-text-primary transition-colors","aria-label":"关闭搜索",children:(0,b.jsx)(d.X,{className:"w-4 h-4"})})]})}):(0,b.jsx)("button",{type:"button",onClick:()=>y(!0),className:"flex items-center justify-center w-[46px] h-[46px] bg-bg-secondary border border-border-primary rounded-lg text-text-secondary hover:bg-bg-tertiary hover:text-text-primary transition-all","aria-label":"搜索",children:(0,b.jsx)(c.Search,{className:"w-5 h-5"})})})]}),ab&&(0,b.jsx)("div",{className:"mt-3 p-4 rounded-xl border",style:{backgroundColor:"var(--info-bg)",borderColor:"var(--info-border)"},children:(0,b.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm",style:{color:"var(--info-text)"},children:["搜索结果: 找到 ",aa.length," 个相关图册",(0,b.jsxs)("span",{className:"font-medium ml-1",children:['"',v,'"']})]})})}),ac&&(0,b.jsx)("div",{className:"mt-3 p-4 bg-bg-tertiary rounded-xl border border-border-primary text-center",children:(0,b.jsxs)("span",{className:"text-sm text-text-tertiary",children:['没有找到包含 "',v,'" 的图册']})})]}),t?(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[...Array(10)].map((a,c)=>(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-sm border border-border-primary overflow-hidden animate-pulse",children:[(0,b.jsx)("div",{className:"w-full pt-[100%] bg-bg-tertiary"}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-full"})]})]})},c))}):0!==aa.length||v.trim()?aa.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:aa.map((a,c)=>{let d;return(0,b.jsx)("div",{children:(d=a.hasPassword,(0,b.jsxs)("button",{onClick:()=>{G(a.id),E(!0)},className:"group block bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer overflow-hidden w-full animate-fade-in",children:[(0,b.jsxs)("div",{className:"relative w-full pt-[100%] bg-gradient-to-br from-primary-100 to-primary-200 overflow-hidden",children:[a.cover_image?(0,b.jsx)(k.default,{src:(0,l.getThumbnailUrl)((0,l.getFileUrl)(a.cover_image)),alt:a.title,fill:!0,sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 20vw",className:`object-cover transition-transform duration-300 ${d?"blur-xl scale-110":"group-hover:scale-105"}`,draggable:!1,onContextMenu:a=>a.preventDefault(),unoptimized:!0}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(f.Image,{className:"w-12 h-12 text-primary-400"})}),d&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"bg-black/60 backdrop-blur-sm rounded-full p-3",children:(0,b.jsx)(e.Lock,{className:"w-6 h-6 text-white"})})}),(0,b.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-white font-medium",children:[a.image_count," 张"]})]}),(0,b.jsxs)("div",{className:"p-3 text-left",children:[(0,b.jsx)("h3",{className:"font-medium text-sm text-text-primary group-hover:text-primary-500 transition-colors line-clamp-1 mb-1",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-xs text-text-tertiary line-clamp-2 leading-relaxed",children:a.description})]})]},`gallery-${a.id}`))},a.id)})}),K&&!v.trim()&&(0,b.jsx)("div",{className:"text-center mt-8",children:(0,b.jsx)("button",{onClick:$,disabled:M,className:"px-8 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:M?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"加载中..."]}):"加载更多"})})]}):null:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(f.Image,{className:"w-16 h-16 text-text-tertiary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-text-tertiary",children:"暂无图册"})]})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{children:R.footerCopyright}),(0,b.jsx)(m.default,{})]})]}),F&&(0,b.jsx)(q,{galleryId:F,isOpen:D,onClose:()=>{E(!1),setTimeout(()=>{G(null)},300)}})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=_e0366b43._.js.map