module.exports=[33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},62036,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(86723),e=a.i(74290),f=a.i(1703),g=a.i(14800),h=a.i(91128),i=c,j=a.i(65802);function k(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class l extends i.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,h.isHTMLElement)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:a,isPresent:d,anchorX:e,root:f}){let g=(0,i.useId)(),h=(0,i.useRef)(null),m=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:n}=(0,i.useContext)(j.MotionConfigContext),o=function(...a){return c.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=k(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():k(a[b],null)}}}}(...a),a)}(h,a?.ref);return(0,i.useInsertionEffect)(()=>{let{width:a,height:b,top:c,left:i,right:j}=m.current;if(d||!h.current||!a||!b)return;let k="left"===e?`left: ${i}`:`right: ${j}`;h.current.dataset.motionPopId=g;let l=document.createElement("style");n&&(l.nonce=n);let o=f??document.head;return o.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${k}px !important;
            top: ${c}px !important;
          }
        `),()=>{o.contains(l)&&o.removeChild(l)}},[d]),(0,b.jsx)(l,{isPresent:d,childRef:h,sizeRef:m,children:i.cloneElement(a,{ref:o})})}let n=({children:a,initial:d,isPresent:f,onExitComplete:h,custom:i,presenceAffectsLayout:j,mode:k,anchorX:l,root:n})=>{let p=(0,e.useConstant)(o),q=(0,c.useId)(),r=!0,s=(0,c.useMemo)(()=>(r=!1,{id:q,initial:d,isPresent:f,custom:i,onExitComplete:a=>{for(let b of(p.set(a,!0),p.values()))if(!b)return;h&&h()},register:a=>(p.set(a,!1),()=>p.delete(a))}),[f,p,h]);return j&&r&&(s={...s}),(0,c.useMemo)(()=>{p.forEach((a,b)=>p.set(b,!1))},[f]),c.useEffect(()=>{f||p.size||!h||h()},[f]),"popLayout"===k&&(a=(0,b.jsx)(m,{isPresent:f,anchorX:l,root:n,children:a})),(0,b.jsx)(g.PresenceContext.Provider,{value:s,children:a})};function o(){return new Map}var p=a.i(20410);let q=a=>a.key||"";function r(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}let s=({children:a,custom:g,initial:h=!0,onExitComplete:i,presenceAffectsLayout:j=!0,mode:k="sync",propagate:l=!1,anchorX:m="left",root:o})=>{let[s,t]=(0,p.usePresence)(l),u=(0,c.useMemo)(()=>r(a),[a]),v=l&&!s?[]:u.map(q),w=(0,c.useRef)(!0),x=(0,c.useRef)(u),y=(0,e.useConstant)(()=>new Map),[z,A]=(0,c.useState)(u),[B,C]=(0,c.useState)(u);(0,f.useIsomorphicLayoutEffect)(()=>{w.current=!1,x.current=u;for(let a=0;a<B.length;a++){let b=q(B[a]);v.includes(b)?y.delete(b):!0!==y.get(b)&&y.set(b,!1)}},[B,v.length,v.join("-")]);let D=[];if(u!==z){let a=[...u];for(let b=0;b<B.length;b++){let c=B[b],d=q(c);v.includes(d)||(a.splice(b,0,c),D.push(c))}return"wait"===k&&D.length&&(a=D),C(r(a)),A(u),null}let{forceRender:E}=(0,c.useContext)(d.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:B.map(a=>{let c=q(a),d=(!l||!!s)&&(u===B||v.includes(c));return(0,b.jsx)(n,{isPresent:d,initial:(!w.current||!!h)&&void 0,custom:g,presenceAffectsLayout:j,mode:k,root:o,onExitComplete:d?void 0:()=>{if(!y.has(c))return;y.set(c,!0);let a=!0;y.forEach(b=>{b||(a=!1)}),a&&(E?.(),C(x.current),l&&t?.(),i&&i())},anchorX:m,children:a},c)})})};a.s(["AnimatePresence",()=>s],62036)},52495,a=>{"use strict";let b=(0,a.i(70106).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],52495)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},21374,32790,a=>{"use strict";let b=(0,a.i(70106).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],21374);var c=a.i(87924),d=a.i(46271),e=a.i(62036),f=a.i(33508),g=a.i(52495),h=a.i(210),i=a.i(72131);function j({isOpen:a,onClose:b,site:j,logoUrl:k}){return((0,i.useEffect)(()=>{let c=a=>{"Escape"===a.key&&b()};return a&&(document.addEventListener("keydown",c),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}},[a,b]),j)?(0,c.jsx)(e.AnimatePresence,{children:a&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,c.jsxs)(d.motion.div,{initial:{scale:.95,opacity:0,y:15},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:15},transition:{type:"spring",damping:30,stiffness:400},onClick:a=>a.stopPropagation(),className:"bg-bg-primary rounded-2xl shadow-2xl max-w-md w-full overflow-hidden relative",children:[(0,c.jsx)("button",{onClick:b,className:"absolute top-3 right-3 p-1.5 rounded-lg bg-bg-secondary hover:bg-bg-tertiary transition-colors z-10","aria-label":"关闭",children:(0,c.jsx)(f.X,{className:"w-4 h-4 text-text-secondary"})}),(0,c.jsxs)("div",{className:"p-6 text-center",children:[(0,c.jsx)("div",{className:"mb-5 flex justify-center",children:k?(0,c.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden shadow-md",children:(0,c.jsx)("img",{src:k,alt:j.name,className:"w-full h-full object-cover"})}):(0,c.jsx)("div",{className:"w-20 h-20 rounded-xl flex items-center justify-center text-primary-500 font-bold text-3xl",children:j.name[0]})}),(0,c.jsx)("h2",{className:"text-xl font-bold text-text-primary mb-2.5",children:j.name}),j.description&&(0,c.jsx)("p",{className:"text-text-secondary text-sm mb-6 leading-relaxed",children:j.description}),(0,c.jsxs)("div",{className:"flex gap-2.5",children:[(0,c.jsxs)("button",{onClick:b,className:"flex-1 px-4 py-2.5 rounded-lg bg-bg-secondary text-text-primary hover:bg-bg-tertiary transition-all duration-200 font-medium text-sm flex items-center justify-center gap-2",children:[(0,c.jsx)(h.ArrowLeft,{className:"w-3.5 h-3.5"}),"返回"]}),(0,c.jsxs)("button",{onClick:()=>{window.open(j.link,"_blank","noopener,noreferrer"),b()},className:"flex-1 px-4 py-2.5 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-all duration-200 font-medium text-sm flex items-center justify-center gap-2",children:["进入网站",(0,c.jsx)(g.ExternalLink,{className:"w-3.5 h-3.5"})]})]})]})]})})})}):null}a.s(["default",()=>j],32790)},82735,a=>{"use strict";var b=a.i(87924),c=a.i(46271),d=a.i(52495),e=a.i(87532),f=a.i(33508),g=a.i(21374),h=a.i(72131),i=a.i(68114),j=a.i(32790),k=a.i(11295),l=a.i(19032),m=a.i(30230),n=a.i(70042),o=a.i(46712),p=a.i(78891);function q(){let[a,q]=(0,h.useState)({showRecommended:!1,recommended:[],categories:[]}),[r,s]=(0,h.useState)(!0),[t,u]=(0,h.useState)(!1),[v,w]=(0,h.useState)(null),[x,y]=(0,h.useState)(""),[z,A]=(0,h.useState)({title:"导航列表",description:"探索精选的网站导航",browserTitle:"导航列表",browserSubtitle:""}),[B,C]=(0,h.useState)(!1),D={themeType:"default",footerCopyright:`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:"true",showWapSidebar:"true"},[E,F]=(0,h.useState)(D);(0,h.useEffect)(()=>{G()},[]),(0,h.useEffect)(()=>{let a=z.browserSubtitle?` - ${z.browserSubtitle}`:"";document.title=`${z.browserTitle}${a}`},[z.browserTitle,z.browserSubtitle]);let G=async()=>{try{await Promise.all([H(),I()])}catch(a){console.error("Failed to load data:",a)}finally{s(!1)}},H=async()=>{try{let[a,b]=await Promise.all([(0,l.getSettings)(),(0,l.getPageText)("navigation")]);if(a.success&&a.data){let b={};a.data.forEach(a=>{b[a.key]=a.value}),F({themeType:b.themeType||"default",footerCopyright:b.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:b.showTopNavbar||"true",showWapSidebar:b.showWapSidebar||"true"})}b.success&&b.data&&(A({title:b.data.title||"导航列表",description:b.data.description||"探索精选的网站导航",browserTitle:b.data.browserTitle||"导航列表",browserSubtitle:b.data.browserSubtitle||""}),C(!0))}catch(a){console.error("Failed to load settings:",a),C(!0)}},I=async()=>{try{let a=await (0,l.getSitesGroupedByCategory)();a.success&&a.data&&q(a.data)}catch(a){console.error("Failed to fetch navigation data:",a),q({showRecommended:!1,recommended:[],categories:[]})}},J=a=>{if(!x.trim())return a;let b=x.toLowerCase();return a.filter(a=>{let c=a.name.toLowerCase().includes(b),d=a.description?.toLowerCase().includes(b);return c||d})},K=(a,e,f)=>(0,b.jsx)(c.motion.button,{onClick:()=>{w(a),u(!0)},className:"group block p-3 bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer text-left w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.03*e},children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center",children:[a.logo?(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md overflow-hidden flex items-center justify-center",children:(0,b.jsx)("img",{src:(0,i.getFileUrl)(a.logo),alt:a.name,className:"w-full h-full object-cover"})}):(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-semibold text-base shadow-sm",children:a.name[0]}),(0,b.jsxs)("div",{className:"relative flex flex-col items-center mb-1",children:[(0,b.jsx)("h3",{className:"font-medium text-xs text-text-primary group-hover:text-primary-500 transition-colors",children:a.name}),(0,b.jsx)(d.ExternalLink,{className:"w-3 h-3 text-primary-500 opacity-0 group-hover:opacity-100 transition-opacity absolute -right-4 top-1/2 transform -translate-y-1/2"})]}),a.description&&(0,b.jsx)("p",{className:"text-[10px] text-text-tertiary line-clamp-2 text-center leading-relaxed",children:a.description})]})},`site-${void 0!==f?`${f}-`:""}${e}`);E?.themeType,E?.showTopNavbar;let L=E?.showWapSidebar!=="false",M=J(a?.recommended||[]),N=(a?.categories||[]).map(a=>({...a,sites:J(a.sites)})).filter(a=>a.sites.length>0),O=M.length>0||N.length>0,P=x.trim()&&O,Q=x.trim()&&!O;return(0,b.jsxs)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col hide-scrollbar",children:[(0,b.jsx)(o.default,{}),(0,b.jsx)(p.default,{}),(0,b.jsx)(k.default,{showWapSidebar:L}),(0,b.jsxs)("div",{className:"relative z-0 flex-1 flex flex-col",children:[(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl py-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:z.title}),(0,b.jsx)("p",{className:"text-text-secondary",children:z.description})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("form",{onSubmit:a=>{a.preventDefault()},children:(0,b.jsxs)("div",{className:"relative max-w-2xl mx-auto",children:[(0,b.jsx)(e.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-tertiary"}),(0,b.jsx)("input",{type:"text",placeholder:"搜索导航站点...",value:x,onChange:a=>y(a.target.value),className:"w-full pl-12 pr-12 py-3 bg-bg-secondary border border-border-primary rounded-xl text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off"}),x&&(0,b.jsx)("button",{type:"button",onClick:()=>{y("")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors","aria-label":"清空搜索",children:(0,b.jsx)(f.X,{className:"w-5 h-5"})})]})})}),P&&(0,b.jsx)("div",{className:"mb-6 p-4 rounded-xl border max-w-2xl mx-auto",style:{backgroundColor:"var(--info-bg)",borderColor:"var(--info-border)"},children:(0,b.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm",style:{color:"var(--info-text)"},children:["搜索结果: 找到 ",M.length+N.reduce((a,b)=>a+b.sites.length,0)," 个相关网站",(0,b.jsxs)("span",{className:"font-medium ml-1",children:['"',x,'"']})]})})}),Q&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-bg-tertiary/50 rounded-xl border border-border-primary/50 text-center max-w-2xl mx-auto",children:(0,b.jsxs)("span",{className:"text-sm text-text-secondary",children:['没有找到包含 "',x,'" 的网站']})}),r&&(0,b.jsx)(m.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:[...Array(15)].map((a,c)=>(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)("div",{className:"p-3 bg-bg-secondary rounded-lg shadow-sm border border-border-primary animate-pulse",children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md bg-bg-tertiary"}),(0,b.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-16 mb-1"}),(0,b.jsx)("div",{className:"h-2 bg-bg-tertiary rounded w-20"})]})})},c))}),!r&&a?.showRecommended&&M.length>0&&(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 mb-4",children:[(0,b.jsx)(g.Star,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,b.jsx)("h2",{className:"text-lg font-bold text-text-primary",children:"导航推荐"})]}),(0,b.jsx)(m.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:M.map((a,c)=>(0,b.jsx)("div",{className:"mb-3",children:K(a,c)},`recommended-${c}`))})]}),!r&&N.map((a,c)=>(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[a.category.icon&&(0,b.jsx)("span",{className:"text-lg",children:a.category.icon}),(0,b.jsx)("h2",{className:"text-lg font-bold text-text-primary",children:a.category.name})]}),a.category.description&&(0,b.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:a.category.description})]}),(0,b.jsx)(m.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:a.sites.map((a,d)=>(0,b.jsx)("div",{className:"mb-3",children:K(a,d,c)},`site-${c}-${d}`))})]},`category-${c}`)),!r&&!a?.showRecommended&&0===(a?.categories?.length||0)&&(0,b.jsxs)("div",{className:"text-center py-16 text-text-tertiary",children:[(0,b.jsx)("p",{className:"text-lg",children:"暂无导航数据"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:"请在后台添加导航分类和站点"})]})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{children:E.footerCopyright}),(0,b.jsx)(n.default,{})]})]}),(0,b.jsx)(j.default,{isOpen:t,onClose:()=>{u(!1),setTimeout(()=>{w(null)},300)},site:v,logoUrl:v?.logo?(0,i.getFileUrl)(v.logo):void 0})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=_91c44a77._.js.map