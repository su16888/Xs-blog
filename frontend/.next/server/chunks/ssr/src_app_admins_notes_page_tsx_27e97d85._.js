module.exports=[88587,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(11642),f=a.i(19032),g=a.i(62180),h=a.i(58348),i=a.i(5276),j=a.i(65763),k=a.i(57723),l=a.i(7222);function m(){(0,j.usePageTitle)("ç¬”è®°ç®¡ç†",!0),(0,d.useRouter)();let{user:a}=(0,e.useAuth)(),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)("notes"),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)({name:"",description:"",icon:"",sort_order:0}),[G,H]=(0,c.useState)({show:!1,type:"success",message:""}),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)({text:"",url:""}),[Q,R]=(0,c.useState)({alt:"",url:"",blur:!1,align:"center",scale:100}),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)("all"),[$,_]=(0,c.useState)("all"),aa=(0,c.useRef)(null),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(null),[af,ag]=(0,c.useState)(!1);(0,c.useEffect)(()=>{ah()},[]);let ah=async()=>{try{await Promise.all([ai(),aj()])}catch(a){console.error("åŠ è½½ç¬”è®°æ•°æ®å¤±è´¥:",a)}finally{r(!1)}},ai=async()=>{try{let a=await (0,f.getAdminNotes)();if(a.success){let b=Array.isArray(a.data.notes)?a.data.notes:[];n(b)}}catch(a){H({show:!0,type:"error",message:"åŠ è½½ç¬”è®°å¤±è´¥"}),n([])}},aj=async()=>{try{let a=await (0,f.getAdminNoteCategories)();if(a.success){let b=Array.isArray(a.data)?a.data:[];p(b)}}catch(a){console.error("åŠ è½½ç¬”è®°åˆ†ç±»å¤±è´¥:",a),p([])}},ak=a=>{let{name:b,type:c}=a.target,d=a.target.value;"checkbox"===c?d=a.target.checked:"sort_order"===b&&(d=parseInt(d)||0),z({...y,[b]:d})},al=async a=>{a.preventDefault();try{let a={...y};u?.id?(await (0,f.updateAdminNote)(u.id,a)).success&&(H({show:!0,type:"success",message:"ç¬”è®°æ›´æ–°æˆåŠŸ"}),await ai(),aq()):(await (0,f.createAdminNote)({...a,is_published:!0})).success&&(H({show:!0,type:"success",message:"ç¬”è®°åˆ›å»ºæˆåŠŸ"}),await ai(),aq())}catch(a){H({show:!0,type:"error",message:a.response?.data?.message||"æ“ä½œå¤±è´¥"})}},am=async()=>{try{let a={...y,is_published:!1};u?.id?(await (0,f.updateAdminNote)(u.id,a)).success&&(H({show:!0,type:"success",message:"è‰ç¨¿ä¿å­˜æˆåŠŸ"}),await ai()):(await (0,f.createAdminNote)(a)).success&&(H({show:!0,type:"success",message:"è‰ç¨¿ä¿å­˜æˆåŠŸ"}),await ai())}catch(a){H({show:!0,type:"error",message:a.response?.data?.message||"è‰ç¨¿ä¿å­˜å¤±è´¥"})}},an=async a=>{try{let b=m.find(b=>b.id===a);if(!b)return void H({show:!0,type:"error",message:"ç¬”è®°ä¸å­˜åœ¨"});let c={...b,is_published:!0};(await (0,f.updateAdminNote)(a,c)).success&&(H({show:!0,type:"success",message:"ç¬”è®°å‘å¸ƒæˆåŠŸ"}),await ai())}catch(a){H({show:!0,type:"error",message:a.response?.data?.message||"å‘å¸ƒå¤±è´¥"})}},ao=a=>{v(a),z({title:a.title,content:a.content,summary:a.summary||"",category:a.category||"",tags:a.tags||"",password:a.password||"",sort_order:a.sort_order||0,is_pinned:a.is_pinned||!1,show_in_list:void 0===a.show_in_list||a.show_in_list,cover_image:a.cover_image||"",source_type:a.source_type||"none",source_url:a.source_url||"",source_text:a.source_text||""}),x(!0),t("editNote")},ap=async a=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ç¯‡ç¬”è®°å—ï¼Ÿ"))try{(await (0,f.deleteAdminNote)(a)).success&&(H({show:!0,type:"success",message:"ç¬”è®°åˆ é™¤æˆåŠŸ"}),await ai())}catch(a){H({show:!0,type:"error",message:a.response?.data?.message||"åˆ é™¤å¤±è´¥"})}},aq=()=>{z({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),v(null),x(!1),J(!1),L(!1),N(!1),P({text:"",url:""}),R({alt:"",url:"",blur:!1,align:"center",scale:100}),t("notes"),ag(!1)},ar=a=>{let{name:b,value:c}=a.target,d=c;"sort_order"===b&&(d=parseInt(c)||0),F({...E,[b]:d})},as=async a=>{if(a.preventDefault(),!E.name.trim())return void H({show:!0,type:"error",message:"åˆ†ç±»åç§°ä¸èƒ½ä¸ºç©º"});try{A?.id?(await (0,f.updateAdminCategory)(A.id,E)).success&&(H({show:!0,type:"success",message:"åˆ†ç±»æ›´æ–°æˆåŠŸ"}),await aj(),au()):(await (0,f.createAdminCategory)(E)).success&&(H({show:!0,type:"success",message:"åˆ†ç±»æ·»åŠ æˆåŠŸ"}),await aj(),au())}catch(a){H({show:!0,type:"error",message:a.response?.data?.message||"æ“ä½œå¤±è´¥"})}},at=async a=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåˆ†ç±»å—ï¼Ÿå¦‚æœæœ‰ç¬”è®°ä½¿ç”¨æ­¤åˆ†ç±»ï¼Œå°†æ— æ³•åˆ é™¤ã€‚"))try{(await (0,f.deleteAdminCategory)(a)).success&&(H({show:!0,type:"success",message:"åˆ†ç±»åˆ é™¤æˆåŠŸ"}),await aj())}catch(a){H({show:!0,type:"error",message:a.response?.data?.message||"åˆ é™¤å¤±è´¥"})}},au=()=>{F({name:"",description:"",icon:"",sort_order:0}),B(null),D(!1)},av=a=>{let b=aa.current;if(!b)return;let c=b.selectionStart,d=b.selectionEnd,e=b.scrollTop,f=y.content.substring(0,c)+a+y.content.substring(d);z({...y,content:f}),setTimeout(()=>{b.focus(),b.setSelectionRange(c+a.length,c+a.length),b.scrollTop=e},0)},aw=(a,b,c,d,e)=>{let f=100!==e?`width: ${e}%;`:"",g=["left"===d?"img-align-left":"right"===d?"img-align-right":"img-align-center",c?"blur-image":""].filter(Boolean).join(" ");return`<img src="${a}" alt="${b}" class="${g}" style="${f}" ${c?'data-blur="true"':""} />`},ax=a=>{let{prefix:b,suffix:c,placeholder:d}={bold:{prefix:"**",suffix:"**",placeholder:"ç²—ä½“æ–‡æœ¬"},italic:{prefix:"*",suffix:"*",placeholder:"æ–œä½“æ–‡æœ¬"},code:{prefix:"`",suffix:"`",placeholder:"ä»£ç "},quote:{prefix:"> ",suffix:"",placeholder:"å¼•ç”¨æ–‡æœ¬"},list:{prefix:"- ",suffix:"",placeholder:"åˆ—è¡¨é¡¹"},numberedList:{prefix:"1. ",suffix:"",placeholder:"åˆ—è¡¨é¡¹"},h1:{prefix:"# ",suffix:"",placeholder:"ä¸€çº§æ ‡é¢˜"},h2:{prefix:"## ",suffix:"",placeholder:"äºŒçº§æ ‡é¢˜"},h3:{prefix:"### ",suffix:"",placeholder:"ä¸‰çº§æ ‡é¢˜"},strikethrough:{prefix:"~~",suffix:"~~",placeholder:"åˆ é™¤çº¿æ–‡æœ¬"},hr:{prefix:"\n---\n",suffix:"",placeholder:""},codeblock:{prefix:"```javascript\n",suffix:"\n```",placeholder:'console.log("Hello World");'},table:{prefix:"| åˆ—1 | åˆ—2 | åˆ—3 |\n| --- | --- | --- |\n| ",suffix:" | å†…å®¹ | å†…å®¹ |",placeholder:"å†…å®¹"},tasklist:{prefix:"- [ ] ",suffix:"",placeholder:"å¾…åŠäº‹é¡¹"},collapse:{prefix:"<details>\n<summary>ç‚¹å‡»å±•å¼€/æ”¶èµ·</summary>\n\n",suffix:"\n\n</details>",placeholder:"è¿™é‡Œæ˜¯å¯æŠ˜å çš„å†…å®¹"}}[a];av(`${b}${d}${c}`)},ay=async()=>{if(U&&0!==U.length){T(!0);try{let a=await (0,f.uploadAdminNoteMedia)(U);if(a.success){let b=a.data.urls[0],c=aw(b,Q.alt,Q.blur,Q.align,Q.scale);av(c),H({show:!0,type:"success",message:"å›¾ç‰‡ä¸Šä¼ æˆåŠŸ"}),N(!1),V(null),R({alt:"",url:"",blur:!1,align:"center",scale:100})}}catch(a){H({show:!0,type:"error",message:a.response?.data?.message||"å›¾ç‰‡ä¸Šä¼ å¤±è´¥"})}finally{T(!1)}}},az=(0,c.useMemo)(()=>Array.from(new Set(m.map(a=>a.category).filter(Boolean))),[m]),aA=(0,c.useMemo)(()=>Array.from(new Set(m.flatMap(a=>a.tags?a.tags.split(",").map(a=>a.trim()).filter(Boolean):[]))),[m]),aB=(0,c.useMemo)(()=>m.filter(a=>{let b=""===W||a.title.toLowerCase().includes(W.toLowerCase())||a.content.toLowerCase().includes(W.toLowerCase())||a.tags&&a.tags.toLowerCase().includes(W.toLowerCase()),c="all"===Y||"uncategorized"===Y&&!a.category||a.category===Y,d="all"===$||a.tags&&a.tags.split(",").map(a=>a.trim()).includes($);return b&&c&&d}),[m,W,Y,$]),aC=(0,c.useMemo)(()=>m.filter(a=>!a.is_published),[m]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.default,{show:G.show,message:G.message,type:G.type,onClose:()=>H({...G,show:!1})}),(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,b.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,b.jsx)("button",{onClick:()=>t("notes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"notes"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"ç¬”è®°ç®¡ç†"}),(0,b.jsx)("button",{onClick:()=>t("categories"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"categories"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"åˆ†ç±»ç®¡ç†"}),(0,b.jsx)("button",{onClick:()=>t("drafts"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"drafts"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"è‰ç¨¿ç®±"}),(0,b.jsx)("button",{onClick:()=>{w||(z({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),v(null),J(!1),x(!0)),t("editNote")},className:`py-4 px-1 border-b-2 font-medium text-sm ${"editNote"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:u?"ç¼–è¾‘ç¬”è®°":"æ–°å»ºç¬”è®°"})]})}),"notes"===s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"card mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"æœç´¢å’Œç­›é€‰"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å…³é”®è¯æœç´¢"}),(0,b.jsx)("input",{type:"text",placeholder:"æœç´¢æ ‡é¢˜ã€å†…å®¹æˆ–æ ‡ç­¾...",value:W,onChange:a=>X(a.target.value),className:"input"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»ç­›é€‰"}),(0,b.jsxs)("select",{value:Y,onChange:a=>Z(a.target.value),className:"input",children:[(0,b.jsx)("option",{value:"all",children:"æ‰€æœ‰åˆ†ç±»"}),(0,b.jsx)("option",{value:"uncategorized",children:"æœªåˆ†ç±»"}),az.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ ‡ç­¾ç­›é€‰"}),(0,b.jsxs)("select",{value:$,onChange:a=>_(a.target.value),className:"input",children:[(0,b.jsx)("option",{value:"all",children:"æ‰€æœ‰æ ‡ç­¾"}),aA.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["æ‰¾åˆ° ",aB.length," ç¯‡ç¬”è®°"]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"æˆ‘çš„ç¬”è®°"}),0===aB.length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"è¿˜æ²¡æœ‰åˆ›å»ºä»»ä½•ç¬”è®°"}):(0,b.jsx)("div",{className:"space-y-4",children:aB.map(a=>(0,b.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900 break-words",children:a.title||"(æ— æ ‡é¢˜)"}),a.is_pinned&&(0,b.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded flex-shrink-0",children:"ç½®é¡¶"}),a.category&&(0,b.jsxs)("span",{onClick:()=>Z(a.category),className:"inline-flex text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded cursor-pointer hover:bg-green-200 transition-colors flex-shrink-0",title:`ç­›é€‰"${a.category}"åˆ†ç±»`,children:["åˆ†ç±»: ",a.category]}),a.tags&&a.tags.split(",").map((a,c)=>(0,b.jsx)("span",{onClick:()=>_(a.trim()),className:"inline-flex text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded cursor-pointer hover:bg-purple-200 transition-colors flex-shrink-0",title:`ç­›é€‰"${a.trim()}"æ ‡ç­¾`,children:a.trim()},c)),void 0!==a.sort_order&&a.sort_order>0&&(0,b.jsxs)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded flex-shrink-0",children:["æ’åº: ",a.sort_order]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 break-words",children:a.summary||(a.content?a.content.substring(0,150)+"...":"æš‚æ— å†…å®¹")})]}),(0,b.jsxs)("div",{className:"flex sm:flex-col gap-2 sm:ml-4 flex-shrink-0",children:[(0,b.jsx)("button",{onClick:()=>ao(a),className:"flex-1 sm:flex-initial px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50",children:"ç¼–è¾‘"}),(0,b.jsx)("button",{onClick:()=>a.id&&ap(a.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded",children:"åˆ é™¤"})]})]})},a.id))})]})]}),"editNote"===s&&w&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"card mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:u?"ç¼–è¾‘ç¬”è®°":"æ–°å»ºç¬”è®°"}),u&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"|"}),(0,b.jsxs)("a",{href:y.password&&""!==y.password.trim()?`/note/${u.id}?password=${encodeURIComponent(y.password)}`:`/note/${u.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 underline flex items-center gap-1 max-w-md truncate",title:y.password&&""!==y.password.trim()?"ç‚¹å‡»è®¿é—®å¸¦å¯†ç çš„ç¬”è®°é“¾æ¥":"ç‚¹å‡»è®¿é—®ç¬”è®°é“¾æ¥",children:[(0,b.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),y.password&&""!==y.password.trim()?`/note/${u.id}?password=${encodeURIComponent(y.password)}`:`/note/${u.id}`]}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a=y.password&&""!==y.password.trim()?`/note/${u.id}?password=${encodeURIComponent(y.password)}`:`/note/${u.id}`;navigator.clipboard.writeText(a),H({show:!0,type:"success",message:"é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"})},className:"text-gray-500 hover:text-gray-700 flex-shrink-0",title:"å¤åˆ¶é“¾æ¥",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),(0,b.jsx)("div",{className:"flex space-x-2",children:(0,b.jsx)("button",{type:"button",onClick:()=>J(!I),className:`btn btn-secondary text-sm ${I?"bg-primary-600 text-white":""}`,children:I?"ç¼–è¾‘æ¨¡å¼":"é¢„è§ˆæ¨¡å¼"})})]}),(0,b.jsxs)("form",{onSubmit:al,className:"space-y-4",children:[!af&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["æ ‡é¢˜ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:y.title,onChange:ak,className:"input",placeholder:"ç¬”è®°æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"å†…å®¹"}),I?(0,b.jsx)("div",{className:"min-h-[300px] border border-gray-300 rounded-lg p-4 bg-white overflow-auto",children:y.content?(0,b.jsx)("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:(0,b.jsx)(g.default,{remarkPlugins:[h.default],rehypePlugins:[i.default],components:{img:({src:a,alt:c,...d})=>{let e=a;return"string"==typeof a&&a.startsWith("/uploads/")&&(e=(0,f.getImageUrl)(a)),(0,b.jsx)("img",{src:e,alt:c||"",className:"max-w-full h-auto rounded-lg shadow-md",style:{maxHeight:"400px",objectFit:"contain"},onError:a=>{a.target.style.display="none"},...d})},iframe:({node:a,...c})=>(0,b.jsx)("div",{className:"iframe-container",children:(0,b.jsx)("iframe",{...c})}),pre:({node:a,children:c,...d})=>(0,b.jsx)("pre",{className:"bg-code-block-bg text-code-block-text p-4 rounded-lg overflow-x-auto my-4",...d,children:c}),code:({node:a,inline:c,className:d,children:e,...f})=>c?(0,b.jsx)("code",{className:"bg-code-bg text-code-text px-1.5 py-0.5 rounded text-sm font-mono",...f,children:e}):(0,b.jsx)("code",{className:`text-sm font-mono ${d||""}`,...f,children:e})},children:y.content})}):(0,b.jsxs)("div",{className:"text-center text-gray-500 py-16",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"ğŸ“"}),(0,b.jsx)("p",{children:"è¾“å…¥å†…å®¹åé¢„è§ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º"})]})}):(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-2 p-2 bg-gray-50 rounded-lg border border-gray-200 overflow-x-auto",children:(0,b.jsxs)("div",{className:"flex flex-nowrap gap-2 min-w-max",children:[(0,b.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,b.jsx)("button",{type:"button",onClick:()=>ax("h1"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"ä¸€çº§æ ‡é¢˜",children:"H1"}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("h2"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"äºŒçº§æ ‡é¢˜",children:"H2"}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("h3"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"ä¸‰çº§æ ‡é¢˜",children:"H3"})]}),(0,b.jsx)("div",{className:"border-l border-gray-300"}),(0,b.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,b.jsx)("button",{type:"button",onClick:()=>ax("bold"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"ç²—ä½“",children:(0,b.jsx)("strong",{children:"B"})}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("italic"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"æ–œä½“",children:(0,b.jsx)("em",{children:"I"})}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("strikethrough"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"åˆ é™¤çº¿",children:(0,b.jsx)("s",{children:"S"})}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("code"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"è¡Œå†…ä»£ç ",children:"</>"}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("codeblock"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"ä»£ç å—",children:"{}"})]}),(0,b.jsx)("div",{className:"border-l border-gray-300"}),(0,b.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,b.jsx)("button",{type:"button",onClick:()=>ax("quote"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"å¼•ç”¨",children:'""'}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("list"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"æ— åºåˆ—è¡¨",children:"â€¢"}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("numberedList"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"æœ‰åºåˆ—è¡¨",children:"1."}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("tasklist"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"ä»»åŠ¡åˆ—è¡¨",children:"â˜‘"})]}),(0,b.jsx)("div",{className:"border-l border-gray-300"}),(0,b.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,b.jsx)("button",{type:"button",onClick:()=>L(!0),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"æ’å…¥é“¾æ¥",children:"é“¾æ¥"}),(0,b.jsx)("button",{type:"button",onClick:()=>N(!0),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"æ’å…¥å›¾ç‰‡",children:"å›¾ç‰‡"}),(0,b.jsxs)("label",{className:"cursor-pointer",children:[(0,b.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.gif,.webp,.svg",onChange:a=>{let b=a.target.files;if(!b||0===b.length)return;let c=Array.from(b),d=new DataTransfer;c.forEach(a=>d.items.add(a)),V(d.files),R({alt:"",url:"",blur:!1,align:"center",scale:100}),N(!0),a.target.value=""},disabled:S,className:"hidden",multiple:!0}),(0,b.jsx)("div",{className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 whitespace-nowrap",children:"ä¸Šä¼ å›¾ç‰‡"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("table"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"æ’å…¥è¡¨æ ¼",children:"è¡¨æ ¼"}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("hr"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",title:"åˆ†éš”çº¿",children:"â€•"}),(0,b.jsx)("button",{type:"button",onClick:()=>ax("collapse"),className:"px-2.5 py-1.5 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100 whitespace-nowrap",title:"å±•å¼€/æ”¶èµ·å†…å®¹å—",children:"æŠ˜å "})]}),(0,b.jsx)("div",{className:"border-l border-gray-300"}),(0,b.jsx)("button",{type:"button",onClick:()=>{u?.id?(ae(u.id),ac(!0)):alert("è¯·å…ˆä¿å­˜ç¬”è®°åå†ç®¡ç†ç½‘ç›˜")},className:"px-2.5 py-1.5 text-xs bg-blue-50 border border-blue-300 rounded hover:bg-blue-100 text-blue-700 whitespace-nowrap",title:"ç®¡ç†ç½‘ç›˜èµ„æº",children:"ğŸ“ ç½‘ç›˜"}),(0,b.jsx)("div",{className:"border-l border-gray-300"}),(0,b.jsx)("button",{type:"button",onClick:()=>ag(!af),className:`px-2.5 py-1.5 text-xs border rounded whitespace-nowrap ${af?"bg-orange-50 border-orange-300 text-orange-700 hover:bg-orange-100":"bg-white border-gray-300 text-gray-700 hover:bg-gray-100"}`,title:af?"é€€å‡ºç¼–è¾‘æ¨¡å¼":"ç¼–è¾‘æ¨¡å¼",children:af?"ğŸ“± æ­£å¸¸æ¨¡å¼":"ğŸ“± ç¼–è¾‘æ¨¡å¼"})]})}),(0,b.jsx)("textarea",{ref:aa,id:"content",name:"content",rows:af?20:12,required:!0,value:y.content,onChange:ak,className:`input font-mono text-sm w-full ${af?"min-h-[500px] text-base":"min-h-[300px]"}`,placeholder:"# æ ‡é¢˜\\n\\nè¿™é‡Œæ˜¯ä½ çš„ç¬”è®°å†…å®¹...\\n\\n- æ”¯æŒåˆ—è¡¨\\n- æ”¯æŒ**ç²—ä½“**\\n- æ”¯æŒ*æ–œä½“*\\n- æ”¯æŒä»£ç å—\\n\\n```javascript\\nconsole.log('Hello World!');\\n```"})]})]}),!af&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»"}),(0,b.jsxs)("select",{id:"category",name:"category",value:y.category,onChange:ak,className:"input",children:[(0,b.jsx)("option",{value:"",children:"è¯·é€‰æ‹©åˆ†ç±»ï¼ˆå¯é€‰ï¼‰"}),o.map(a=>(0,b.jsxs)("option",{value:a.name,children:[a.icon?`${a.icon} `:"",a.name]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"æ ‡ç­¾"}),(0,b.jsx)("input",{id:"tags",name:"tags",type:"text",value:y.tags,onChange:ak,className:"input",placeholder:"å¤šä¸ªæ ‡ç­¾ç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼ˆå¯é€‰ï¼‰"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"summary",className:"block text-sm font-medium text-gray-700 mb-2",children:"ç¬”è®°æ‘˜è¦"}),(0,b.jsx)("textarea",{id:"summary",name:"summary",rows:3,value:y.summary||"",onChange:ak,className:"input",placeholder:"è¾“å…¥ç¬”è®°æ‘˜è¦ï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™è‡ªåŠ¨æˆªå–æ­£æ–‡å‰150å­—ï¼‰"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"ğŸ’¡ æ‘˜è¦ä¼šæ˜¾ç¤ºåœ¨ç¬”è®°åˆ—è¡¨ä¸­ï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿäº†è§£å†…å®¹"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"è®¿é—®å¯†ç "}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{id:"password",name:"password",type:"text",value:y.password||"",onChange:ak,className:"input w-48",placeholder:"è®¾ç½®è®¿é—®å¯†ç ï¼ˆå¯é€‰ï¼‰"}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a="abcdefghijklmnopqrstuvwxyz0123456789",b=Math.floor(3*Math.random())+4,c="";for(let d=0;d<b;d++)c+=a.charAt(Math.floor(Math.random()*a.length));z({...y,password:c})},className:"px-3 py-2 text-sm bg-blue-50 border border-blue-300 rounded-lg hover:bg-blue-100 text-blue-700 whitespace-nowrap",children:"ğŸ² éšæœºç”Ÿæˆ"}),y.password&&(0,b.jsx)("button",{type:"button",onClick:()=>z({...y,password:""}),className:"px-3 py-2 text-sm bg-red-50 border border-red-300 rounded-lg hover:bg-red-100 text-red-700 whitespace-nowrap",children:"æ¸…é™¤"})]}),(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"ğŸ’¡ è®¾ç½®å¯†ç åï¼Œè®¿å®¢éœ€è¦è¾“å…¥æ­£ç¡®å¯†ç æ‰èƒ½æŸ¥çœ‹ç¬”è®°å†…å®¹"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"source_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"æ¥æºç±»å‹"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"radio",name:"source_type",value:"none",checked:"none"===y.source_type,onChange:ak,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"ä¸å±•ç¤º"})]}),(0,b.jsxs)("label",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"radio",name:"source_type",value:"original",checked:"original"===y.source_type,onChange:ak,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"åŸåˆ›"})]}),(0,b.jsxs)("label",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"radio",name:"source_type",value:"reprint",checked:"reprint"===y.source_type,onChange:ak,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"è½¬è½½"})]})]}),"reprint"===y.source_type&&(0,b.jsxs)("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,b.jsx)("label",{htmlFor:"source_text",className:"block text-sm font-medium text-gray-700 mb-2",children:"æ–‡ç« æ¥æº"}),(0,b.jsx)("textarea",{id:"source_text",name:"source_text",rows:3,value:y.source_text||"",onChange:ak,className:"input w-full",placeholder:"è¯·è¾“å…¥æ–‡ç« æ¥æºä¿¡æ¯ï¼Œå¯ä»¥æ˜¯ç½‘å€ã€ä½œè€…åã€å¹³å°åç§°ç­‰..."}),(0,b.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"ğŸ’¡ è½¬è½½æ—¶è¯·åŠ¡å¿…æ³¨æ˜æ¥æºï¼Œæ”¯æŒè¾“å…¥ç½‘å€ã€ä½œè€…åã€å¹³å°åç§°ç­‰ä»»æ„æ–‡æœ¬"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"cover_image",className:"block text-sm font-bold text-gray-700 mb-2",children:"å°é¢å›¾"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[y.cover_image&&(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"w-32 h-32 rounded-lg overflow-hidden bg-gray-100 border-2 border-gray-200",children:(0,b.jsx)("img",{src:(0,f.getImageUrl)(y.cover_image),alt:"å°é¢é¢„è§ˆ",className:"w-full h-full object-cover",onError:a=>{a.target.style.display="none"}})})}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)("input",{id:"cover_image",name:"cover_image",type:"text",value:y.cover_image||"",onChange:ak,className:"input",placeholder:"è¾“å…¥å°é¢å›¾URLï¼ˆå¯é€‰ï¼‰"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{id:"cover-upload",type:"file",accept:"image/*",onChange:async a=>{let b=a.target.files?.[0];if(b){if(b.size>5242880)return void H({show:!0,type:"error",message:"å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB"});T(!0);try{let b=a.target.files,c=await (0,f.uploadAdminNoteMedia)(b);c.success&&c.data&&c.data.urls&&c.data.urls.length>0&&(z({...y,cover_image:c.data.urls[0]}),H({show:!0,type:"success",message:"å°é¢å›¾ä¸Šä¼ æˆåŠŸ"}))}catch(a){H({show:!0,type:"error",message:a.response?.data?.message||a.message||"å°é¢å›¾ä¸Šä¼ å¤±è´¥"})}finally{T(!1),a.target.value=""}}},className:"hidden"}),(0,b.jsx)("label",{htmlFor:"cover-upload",className:`px-3 py-2 text-sm bg-blue-50 border border-blue-300 rounded-lg hover:bg-blue-100 text-blue-700 cursor-pointer ${S?"opacity-50 cursor-not-allowed":""}`,children:S?"ä¸Šä¼ ä¸­...":"ğŸ“ é€‰æ‹©å›¾ç‰‡"}),y.cover_image&&(0,b.jsx)("button",{type:"button",onClick:()=>z({...y,cover_image:""}),className:"px-3 py-2 text-sm bg-red-50 border border-red-300 rounded-lg hover:bg-red-100 text-red-700",children:"ğŸ—‘ï¸ åˆ é™¤"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"ğŸ’¡ å°é¢å›¾å°†åœ¨ç¬”è®°åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼ˆæ”¯æŒjpgã€pngã€gifã€webpï¼Œå»ºè®®å°ºå¯¸1:1ï¼Œæœ€å¤§5MBï¼‰"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{id:"is_pinned",name:"is_pinned",type:"checkbox",checked:y.is_pinned,onChange:ak,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500 focus:ring-2"}),(0,b.jsx)("label",{htmlFor:"is_pinned",className:"ml-2 text-sm font-medium text-gray-700",children:"ç½®é¡¶ç¬”è®°"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{id:"show_in_list",name:"show_in_list",type:"checkbox",checked:y.show_in_list,onChange:ak,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500 focus:ring-2"}),(0,b.jsx)("label",{htmlFor:"show_in_list",className:"ml-2 text-sm font-medium text-gray-700",children:"åœ¨åˆ—è¡¨ä¸­å±•ç¤º"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"sort_order",className:"block text-sm font-medium text-gray-700 mb-2",children:"æ’åºæƒé‡"}),(0,b.jsx)("input",{id:"sort_order",name:"sort_order",type:"number",value:y.sort_order,onChange:ak,className:"input",placeholder:"æ•°å­—è¶Šå¤§è¶Šé å‰"})]})}),(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",children:u?"æ›´æ–°å¹¶å‘å¸ƒ":"åˆ›å»º"}),(0,b.jsx)("button",{type:"button",onClick:async a=>{a.preventDefault(),await am()},className:"btn btn-secondary",children:"ä¿å­˜è‰ç¨¿"}),(0,b.jsx)("button",{type:"button",onClick:aq,className:"btn btn-secondary",children:"å–æ¶ˆ"})]})]})]})]}),K&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"æ’å…¥é“¾æ¥"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"é“¾æ¥æ–‡æœ¬"}),(0,b.jsx)("input",{type:"text",value:O.text,onChange:a=>P({...O,text:a.target.value}),className:"input",placeholder:"é“¾æ¥æ˜¾ç¤ºæ–‡æœ¬"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"é“¾æ¥åœ°å€"}),(0,b.jsx)("input",{type:"url",value:O.url,onChange:a=>P({...O,url:a.target.value}),className:"input",placeholder:"https://example.com"})]})]}),(0,b.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,b.jsx)("button",{onClick:()=>{O.text&&O.url?(av(`[${O.text}](${O.url})`),L(!1),P({text:"",url:""})):alert("è¯·å¡«å†™é“¾æ¥æ–‡æœ¬å’ŒURL")},className:"btn btn-primary flex-1",children:"æ’å…¥"}),(0,b.jsx)("button",{onClick:()=>L(!1),className:"btn btn-secondary",children:"å–æ¶ˆ"})]})]})}),M&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:U?"ä¸Šä¼ å›¾ç‰‡è®¾ç½®":"æ’å…¥å›¾ç‰‡"}),(0,b.jsxs)("div",{className:"space-y-4",children:[U&&(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,b.jsxs)("p",{className:"text-sm text-blue-700",children:["å·²é€‰æ‹©æ–‡ä»¶ï¼š",U[0]?.name]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å›¾ç‰‡æè¿°ï¼ˆå¯é€‰ï¼‰"}),(0,b.jsx)("input",{type:"text",value:Q.alt,onChange:a=>R({...Q,alt:a.target.value}),className:"input",placeholder:"å›¾ç‰‡æè¿°"})]}),!U&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å›¾ç‰‡åœ°å€"}),(0,b.jsx)("input",{type:"url",value:Q.url,onChange:a=>R({...Q,url:a.target.value}),className:"input",placeholder:"https://example.com/image.jpg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å¯¹é½æ–¹å¼"}),(0,b.jsx)("div",{className:"flex gap-4",children:["left","center","right"].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"imageAlign",checked:Q.align===a,onChange:()=>R({...Q,align:a}),className:"w-4 h-4 text-blue-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"left"===a?"å±…å·¦":"center"===a?"å±…ä¸­":"å±…å³"})]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ç¼©æ”¾æ¯”ä¾‹ï¼š",Q.scale,"%"]}),(0,b.jsx)("input",{type:"range",min:"10",max:"100",step:"10",value:Q.scale,onChange:a=>R({...Q,scale:parseInt(a.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,b.jsx)("span",{children:"10%"}),(0,b.jsx)("span",{children:"50%"}),(0,b.jsx)("span",{children:"100%"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:Q.blur,onChange:a=>R({...Q,blur:a.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"å›¾ç‰‡æ¨¡ç³Š"})]}),(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"å¼€å¯åå›¾ç‰‡å°†é«˜åº¦æ¨¡ç³Šæ˜¾ç¤ºï¼Œç‚¹å‡»å›¾ç‰‡æ‰ä¼šæ˜¾ç¤ºå…·ä½“ç”»é¢"})]})]}),(0,b.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,b.jsx)("button",{onClick:U?ay:()=>{Q.url?(av(aw(Q.url,Q.alt||"",Q.blur,Q.align,Q.scale)),N(!1),R({alt:"",url:"",blur:!1,align:"center",scale:100})):alert("è¯·å¡«å†™å›¾ç‰‡URL")},disabled:S,className:"btn btn-primary flex-1 disabled:opacity-50",children:S?"ä¸Šä¼ ä¸­...":U?"ä¸Šä¼ ":"æ’å…¥"}),(0,b.jsx)("button",{onClick:()=>{N(!1),V(null),R({alt:"",url:"",blur:!1,align:"center",scale:100})},className:"btn btn-secondary",children:"å–æ¶ˆ"})]})]})})]}),"editNote"===s&&!w&&(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"text-6xl mb-4 text-gray-300",children:"ğŸ“"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:u?"æ­£åœ¨ç¼–è¾‘ç¬”è®°":"å‡†å¤‡åˆ›å»ºæ–°ç¬”è®°"}),(0,b.jsx)("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:u?'æ‚¨æ­£åœ¨ç¼–è¾‘ä¸€ç¯‡ç¬”è®°ã€‚å¦‚éœ€è¿”å›ç¬”è®°åˆ—è¡¨ï¼Œè¯·ç‚¹å‡»å·¦ä¾§çš„"ç¬”è®°ç®¡ç†"é€‰é¡¹å¡ã€‚':'ç‚¹å‡»"æ–°å»ºç¬”è®°"é€‰é¡¹å¡å¼€å§‹åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ç¯‡ç¬”è®°ï¼Œæˆ–ä»"ç¬”è®°ç®¡ç†"é€‰é¡¹å¡ä¸­é€‰æ‹©ä¸€ç¯‡ç¬”è®°è¿›è¡Œç¼–è¾‘ã€‚'}),!u&&(0,b.jsx)("button",{onClick:()=>{z({title:"",content:"",summary:"",category:"",tags:"",password:"",sort_order:0,is_pinned:!1,show_in_list:!0,cover_image:"",source_type:"none",source_url:"",source_text:""}),v(null),J(!1),x(!0)},className:"btn btn-primary",children:"å¼€å§‹åˆ›å»ºç¬”è®°"})]})}),"drafts"===s&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"è‰ç¨¿ç®±"}),0===aC.length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•è‰ç¨¿"}):(0,b.jsx)("div",{className:"space-y-4",children:aC.map(a=>(0,b.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900 break-words",children:a.title||"(æ— æ ‡é¢˜)"}),(0,b.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded flex-shrink-0",children:"è‰ç¨¿"}),a.category&&(0,b.jsxs)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded flex-shrink-0",children:["åˆ†ç±»: ",a.category]}),a.tags&&a.tags.split(",").map((a,c)=>(0,b.jsx)("span",{className:"inline-flex text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded flex-shrink-0",children:a.trim()},c))]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 break-words",children:a.summary||(a.content?a.content.substring(0,150)+"...":"æš‚æ— å†…å®¹")})]}),(0,b.jsxs)("div",{className:"flex sm:flex-col gap-2 sm:ml-4 flex-shrink-0",children:[(0,b.jsx)("button",{onClick:()=>ao(a),className:"flex-1 sm:flex-initial px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50",children:"ç¼–è¾‘"}),(0,b.jsx)("button",{onClick:()=>a.id&&an(a.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",children:"å‘å¸ƒ"}),(0,b.jsx)("button",{onClick:()=>a.id&&ap(a.id),className:"flex-1 sm:flex-initial px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded",children:"åˆ é™¤"})]})]})},a.id))})]})}),"categories"===s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("button",{onClick:()=>D(!C),className:"btn btn-primary",children:C?"å–æ¶ˆ":"+ æ·»åŠ åˆ†ç±»"})}),C&&(0,b.jsxs)("div",{className:"card mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:A?"ç¼–è¾‘åˆ†ç±»":"æ·»åŠ åˆ†ç±»"}),(0,b.jsxs)("form",{onSubmit:as,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["åˆ†ç±»åç§° ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"name",value:E.name,onChange:ar,className:"input",placeholder:"ä¾‹å¦‚ï¼šæŠ€æœ¯ç¬”è®°",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»æè¿°"}),(0,b.jsx)("textarea",{name:"description",value:E.description,onChange:ar,rows:3,className:"input",placeholder:"åˆ†ç±»çš„è¯¦ç»†æè¿°"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»å›¾æ ‡"}),(0,b.jsx)("input",{type:"text",name:"icon",value:E.icon,onChange:ar,className:"input",placeholder:"ä¾‹å¦‚ï¼šğŸ“ æˆ– emoji è¡¨æƒ…"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"å¯ä»¥ä½¿ç”¨ emoji è¡¨æƒ…ä½œä¸ºå›¾æ ‡"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ’åºé¡ºåº"}),(0,b.jsx)("input",{type:"number",name:"sort_order",value:E.sort_order,onChange:ar,className:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"})]})]}),(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",children:A?"æ›´æ–°":"æ·»åŠ "}),(0,b.jsx)("button",{type:"button",onClick:au,className:"btn btn-secondary",children:"å–æ¶ˆ"})]})]})]}),(0,b.jsxs)("div",{className:"card overflow-hidden",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4 px-6 pt-6",children:"åˆ†ç±»åˆ—è¡¨"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"å›¾æ ‡"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"åç§°"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æè¿°"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ’åº"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ“ä½œ"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===o.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"æš‚æ— åˆ†ç±»æ•°æ®"})}):o.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-2xl",children:a.icon||"ğŸ“"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:a.description||"-"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.sort_order}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,b.jsx)("button",{onClick:()=>{B(a),F({name:a.name,description:a.description||"",icon:a.icon||"",sort_order:a.sort_order||0}),D(!0)},className:"text-primary-600 hover:text-primary-900 mr-4",children:"ç¼–è¾‘"}),(0,b.jsx)("button",{onClick:()=>a.id&&at(a.id),className:"text-red-600 hover:text-red-900",children:"åˆ é™¤"})]})]},a.id))})]})})]})]})]}),ad&&(0,b.jsx)(l.default,{isOpen:ab,onClose:()=>ac(!1),noteId:ad,isAdmin:!0})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=src_app_admins_notes_page_tsx_27e97d85._.js.map