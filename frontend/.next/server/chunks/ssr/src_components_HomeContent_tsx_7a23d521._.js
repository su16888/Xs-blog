module.exports=[30499,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(31626),e=a.i(90914),f=a.i(55488),g=a.i(68114);function h(){let{profile:a,isLoading:h}=(0,e.useProfile)(),{settings:i}=(0,f.useSettings)(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),n=(0,c.useRef)(null),o=i.avatarShape||"circle",p=i.themeColor||"white",q=i.themeType||"default",r="true"===i.enableAvatarThemeSwitch;(0,c.useEffect)(()=>{if(!h&&r&&"default"===q){let a=setTimeout(()=>{k(!0);let a=setTimeout(()=>{k(!1)},2e3);return()=>clearTimeout(a)},500);return()=>clearTimeout(a)}},[r,q,h]);let s=()=>"rounded"===o?"rounded-xl":"rounded-full",t=()=>"black"===p?"0 0 0 3px rgba(255, 255, 255, 0.15), 0 4px 14px 0 rgba(255, 255, 255, 0.1)":"0 0 0 3px rgba(0, 0, 0, 0.08), 0 4px 14px 0 rgba(0, 0, 0, 0.15)",u=async a=>{r&&"default"===q&&!l&&(m(!0),await new Promise(a=>setTimeout(a,500)),sessionStorage.setItem("userThemeType","blog"),sessionStorage.setItem("userShowSiteNav","true"),sessionStorage.setItem("userShowNotes","true"),await new Promise(a=>setTimeout(a,500)),window.location.reload())};return h?(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`w-20 md:w-32 h-20 md:h-32 ${s()} bg-gray-200 animate-pulse mb-3 md:mb-4`}),(0,b.jsx)("div",{className:"h-6 md:h-8 w-36 md:w-48 bg-gray-200 animate-pulse mb-1 md:mb-2"}),(0,b.jsx)("div",{className:"h-4 w-48 md:w-64 bg-gray-200 animate-pulse"})]}):(0,b.jsxs)(b.Fragment,{children:[l&&(0,b.jsx)("div",{style:{backdropFilter:"blur(0px)",animation:"blur-fade 0.5s ease-out forwards"},className:"jsx-90f916ff8d57b529 fixed inset-0 z-[9999] pointer-events-none"}),(0,b.jsxs)("div",{className:"jsx-90f916ff8d57b529 flex flex-col items-center",children:[(0,b.jsxs)("div",{ref:n,onClick:u,className:`jsx-90f916ff8d57b529 relative mb-5 md:mb-6 ${r&&"default"===q?"cursor-pointer hover:scale-105 transition-transform duration-300":""} ${l?"avatar-rotating":""}`,children:[j&&r&&"default"===q&&(0,b.jsx)("div",{style:{animation:"tooltip-fade 2s ease-in-out forwards"},className:"jsx-90f916ff8d57b529 absolute -top-16 left-1/2 transform -translate-x-1/2 animate-fade-in",children:(0,b.jsxs)("div",{className:"jsx-90f916ff8d57b529 bg-gray-800/45 dark:bg-gray-200/45 backdrop-blur-sm text-white/50 dark:text-gray-900/50 px-4 py-2 rounded-2xl relative whitespace-nowrap text-sm",children:["点我开启博客世界！",(0,b.jsx)("div",{className:"jsx-90f916ff8d57b529 absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-0 h-0 arrow-tooltip"})]})}),a?.avatar?(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.avatar),alt:a.name||"头像",style:{boxShadow:t()},className:`jsx-90f916ff8d57b529 w-16 md:w-24 h-16 md:h-24 ${s()} object-cover`}):(0,b.jsx)("div",{style:{boxShadow:t()},className:`jsx-90f916ff8d57b529 w-16 md:w-24 h-16 md:h-24 ${s()} bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl md:text-4xl font-bold`,children:a?.name?.[0]||"U"})]}),(0,b.jsx)("h1",{className:"jsx-90f916ff8d57b529 text-2xl md:text-4xl font-bold text-text-primary mb-1.5 md:mb-2",children:a?.name||""}),a?.title&&(0,b.jsx)("p",{className:"jsx-90f916ff8d57b529 text-base md:text-xl text-text-secondary mb-2.5 md:mb-4",children:a.title}),a?.bio&&(0,b.jsx)("p",{className:"jsx-90f916ff8d57b529 text-sm md:text-lg text-text-secondary max-w-md md:max-w-2xl text-center mb-2.5 md:mb-4",children:a.bio}),(0,b.jsxs)("div",{className:"jsx-90f916ff8d57b529 flex items-center gap-3 md:gap-4 text-xs md:text-sm text-text-tertiary",children:[a?.location&&(0,b.jsxs)("div",{className:"jsx-90f916ff8d57b529 flex items-center gap-1",children:[(0,b.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-90f916ff8d57b529 w-3 md:w-4 h-3 md:h-4",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",className:"jsx-90f916ff8d57b529"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-90f916ff8d57b529"})]}),(0,b.jsx)("span",{className:"jsx-90f916ff8d57b529",children:a.location})]}),a?.website&&(0,b.jsxs)("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"jsx-90f916ff8d57b529 flex items-center gap-1 hover:text-primary-500 transition-colors",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-90f916ff8d57b529 w-3 md:w-4 h-3 md:h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9",className:"jsx-90f916ff8d57b529"})}),(0,b.jsx)("span",{className:"jsx-90f916ff8d57b529",children:a.website_title||"个人网站"})]})]})]}),(0,b.jsx)(d.default,{id:"90f916ff8d57b529",children:".arrow-tooltip.jsx-90f916ff8d57b529{filter:opacity();border-top:8px solid #1f293773;border-left:8px solid #0000;border-right:8px solid #0000}.dark .arrow-tooltip.jsx-90f916ff8d57b529{border-top-color:#e5e7eb73}.avatar-rotating.jsx-90f916ff8d57b529 img,.avatar-rotating.jsx-90f916ff8d57b529 div{animation:.5s ease-in-out forwards avatar-rotate}@keyframes avatar-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes blur-fade{0%{-webkit-backdrop-filter:blur();backdrop-filter:blur();opacity:0}50%{opacity:1}to{-webkit-backdrop-filter:blur(30px);backdrop-filter:blur(30px);opacity:1}}@keyframes tooltip-fade{0%{opacity:0;transform:translateY(10px)translate(-50%)}10%{opacity:1;transform:translateY(0)translate(-50%)}90%{opacity:1;transform:translateY(0)translate(-50%)}to{opacity:0;transform:translateY(-10px)translate(-50%)}}"})]})}var i=a.i(60137);let j=(0,i.default)("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),k=(0,i.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),l=(0,i.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),m=(0,i.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),n=(0,i.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var o=a.i(33508),p=a.i(15831);let q={github:j,telegram:l,email:k,gmail:k,qq:m,wechat:m};function r({className:a}){let{socialLinks:d,isLoading:e}=(0,p.useSocialLinks)(),[f,h]=(0,c.useState)({}),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),A=()=>{j(!1),l(null)},B=()=>{r(!1),v(!1),t(null)},C=()=>{x(!1),z(null)},D=async()=>{if(s)try{await navigator.clipboard.writeText(s.account),v(!0),setTimeout(()=>v(!1),2e3)}catch(a){console.error("Failed to copy:",a)}};return e?(0,b.jsx)("div",{className:"text-center py-6 md:py-8",children:(0,b.jsx)("div",{className:"inline-block w-6 md:w-8 h-6 md:h-8 border-3 md:border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--primary-500)"}})}):Array.isArray(d)&&0!==d.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:(0,g.cn)("flex flex-wrap justify-center gap-3 md:gap-6 max-w-4xl mx-auto",a),children:d.slice(0,6).map((a,c)=>{let d,e=q[a.platform.toLowerCase()]||n,i=a.icon&&""!==a.icon.trim()&&!f[a.platform];return(0,b.jsxs)("a",{href:a.link||"#",target:a.link?"_blank":"_self",rel:"noopener noreferrer",onClick:b=>{a.qrcode&&""!==a.qrcode.trim()?(b.preventDefault(),l({image:a.qrcode,platform:a.platform}),j(!0)):a.link&&""!==a.link.trim()&&"#"!==a.link?(b.preventDefault(),z({url:a.link,platform:a.platform}),x(!0)):(b.preventDefault(),t({account:a.account,platform:a.platform}),r(!0))},className:"card-glow rounded-lg md:rounded-xl p-3 md:p-4 items-center justify-center group aspect-square cursor-pointer animate-fade-in hover:scale-105 transition-transform",style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,b.jsxs)("div",{className:"relative",children:[i?(0,b.jsx)("div",{className:"relative w-5 md:w-8 h-5 md:h-8",children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.icon),alt:a.platform,className:(0,g.cn)("w-5 md:w-8 h-5 md:h-8 object-contain transition-all",(d=a.icon)&&d.toLowerCase().endsWith(".svg")?"icon-themed group-hover:brightness-110":"group-hover:brightness-110"),onError:()=>{var b;return b=a.platform,void h(a=>({...a,[b]:!0}))},loading:"eager"})}):(0,b.jsx)(e,{className:"w-5 md:w-8 h-5 md:h-8 text-primary-500 group-hover:text-primary-600 transition-colors"}),(0,b.jsx)("div",{className:"absolute inset-0 blur-lg md:blur-xl opacity-30 group-hover:opacity-50 transition-opacity",style:{backgroundColor:"var(--primary-500)"}})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xs md:text-sm font-semibold text-text-secondary capitalize",children:a.platform}),(0,b.jsx)("p",{className:"text-[10px] md:text-xs text-text-tertiary mt-0.5 md:mt-1 truncate max-w-[80px] md:max-w-[120px]",children:a.account})]})]},`${a.platform}-${c}`)})}),i&&k&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:A,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:A,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(o.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:k.platform}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl inline-block",children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(k.image),alt:`${k.platform} QR Code`,className:"w-64 h-64 object-contain"})}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"截图或长按保存上方二维码"})]})]})}),m&&s&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:B,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:B,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(o.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:s.platform}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl mb-4",children:(0,b.jsx)("p",{className:"text-lg font-mono text-gray-900 dark:text-white break-all",children:s.account})}),(0,b.jsx)("button",{onClick:D,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${u?"bg-green-500 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`,children:u?"✓ 已复制":"复制账号"})]})]})}),w&&y&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:C,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:C,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(o.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:y.platform}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"是否跳转到以下链接？"}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-xl mb-4",children:(0,b.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white break-all",children:y.url})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:C,className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-white",children:"取消"}),(0,b.jsx)("button",{onClick:()=>{y&&window.open(y.url,"_blank","noopener,noreferrer"),C()},className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors bg-primary-500 hover:bg-primary-600 text-white",children:"确认跳转"})]})]})]})})]}):null}var s=a.i(52495),t=a.i(21374),u=a.i(19032),v=a.i(210);function w({isOpen:a,onClose:d,site:e,logoUrl:f}){return((0,c.useEffect)(()=>{let b=a=>{"Escape"===a.key&&d()};return a&&(document.addEventListener("keydown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",b),document.body.style.overflow="unset"}},[a,d]),e)?(0,b.jsx)(b.Fragment,{children:a&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{onClick:d,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:(0,b.jsxs)("div",{onClick:a=>a.stopPropagation(),className:"bg-bg-primary rounded-2xl shadow-2xl max-w-md w-full overflow-hidden relative",children:[(0,b.jsx)("button",{onClick:d,className:"absolute top-3 right-3 p-1.5 rounded-lg bg-bg-secondary hover:bg-bg-tertiary transition-colors z-10","aria-label":"关闭",children:(0,b.jsx)(o.X,{className:"w-4 h-4 text-text-secondary"})}),(0,b.jsxs)("div",{className:"p-6 text-center",children:[(0,b.jsx)("div",{className:"mb-5 flex justify-center",children:f?(0,b.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden shadow-md",children:(0,b.jsx)("img",{src:f,alt:e.name,className:"w-full h-full object-cover"})}):(0,b.jsx)("div",{className:"w-20 h-20 rounded-xl flex items-center justify-center text-primary-500 font-bold text-3xl",children:e.name[0]})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-text-primary mb-2.5",children:e.name}),e.description&&(0,b.jsx)("p",{className:"text-text-secondary text-sm mb-6 leading-relaxed",children:e.description}),(0,b.jsxs)("div",{className:"flex gap-2.5",children:[(0,b.jsxs)("button",{onClick:d,className:"flex-1 px-4 py-2.5 rounded-lg bg-bg-secondary text-text-primary hover:bg-bg-tertiary transition-all duration-200 font-medium text-sm flex items-center justify-center gap-2",children:[(0,b.jsx)(v.ArrowLeft,{className:"w-3.5 h-3.5"}),"返回"]}),(0,b.jsxs)("button",{onClick:()=>{window.open(e.link,"_blank","noopener,noreferrer"),d()},className:"flex-1 px-4 py-2.5 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-all duration-200 font-medium text-sm flex items-center justify-center gap-2",children:["进入网站",(0,b.jsx)(s.ExternalLink,{className:"w-3.5 h-3.5"})]})]})]})]})})})}):null}function x({site:a,index:c,onSiteClick:d}){return(0,b.jsx)("button",{onClick:()=>d(a),className:"group block p-3 bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer text-left w-full animate-fade-in",children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md overflow-hidden flex items-center justify-center",children:a.logo?(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.logo),alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-semibold text-base shadow-sm",children:a.name[0]})}),(0,b.jsxs)("div",{className:"relative flex flex-col items-center mb-1",children:[(0,b.jsx)("h3",{className:"font-medium text-xs text-text-primary group-hover:text-primary-500 transition-colors",children:a.name}),(0,b.jsx)(s.ExternalLink,{className:"w-3 h-3 text-primary-500 opacity-0 group-hover:opacity-100 transition-opacity absolute -right-4 top-1/2 transform -translate-y-1/2"})]}),a.description&&(0,b.jsx)("p",{className:"text-[10px] text-text-tertiary line-clamp-2 text-center leading-relaxed",children:a.description})]})})}function y({searchQuery:a=""}){let{settings:d}=(0,f.useSettings)(),[e,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),o="default"===(d.themeType||"default");(0,c.useEffect)(()=>{p()},[]);let p=async()=>{try{let a=await (0,u.getSitesGroupedByCategory)();a.success&&a.data&&h(a.data)}catch(a){console.error("Failed to fetch navigation data:",a),h({showRecommended:!1,recommended:[],categories:[]})}finally{j(!1)}},q=a=>{n(a),l(!0)},r=b=>{if(!a.trim())return b;let c=a.toLowerCase();return b.filter(a=>{let b=a.name.toLowerCase().includes(c),d=a.description?.toLowerCase().includes(c);return b||d})};if(i)return(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:[...Array(10)].map((a,c)=>(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"p-3 bg-bg-secondary rounded-lg shadow-sm border border-border-primary animate-pulse",children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md bg-bg-tertiary"}),(0,b.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-16 mb-1"}),(0,b.jsx)("div",{className:"h-2 bg-bg-tertiary rounded w-20"})]})})},c))})});if(!e)return null;let s=r(e.recommended),v=e.categories.map(a=>({...a,sites:r(a.sites)})).filter(a=>a.sites.length>0),y=s.length>0||v.length>0,z=a.trim()&&y,A=a.trim()&&!y,B=[];return z&&B.push((0,b.jsx)("div",{className:"mb-4 p-3 bg-blue-50/50 rounded-lg border border-blue-200/50",children:(0,b.jsxs)("span",{className:"text-sm text-blue-700",children:["搜索结果: 找到 ",s.length+v.reduce((a,b)=>a+b.sites.length,0)," 个相关网站",(0,b.jsxs)("span",{className:"font-medium ml-1",children:['"',a,'"']})]})},"search-results")),A&&B.push((0,b.jsx)("div",{className:"mb-4 p-3 bg-gray-50/50 rounded-lg border border-gray-200/50 text-center",children:(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:['没有找到包含 "',a,'" 的网站']})},"no-results")),e.showRecommended&&s.length>0&&B.push((0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:`flex items-center gap-1.5 mb-4 ${o?"hidden md:hidden":""}`,children:[(0,b.jsx)(t.Star,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,b.jsx)("h2",{className:"text-lg font-bold text-text-primary",children:"导航推荐"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:s.map((a,c)=>(0,b.jsx)("div",{children:(0,b.jsx)(x,{site:a,index:c,onSiteClick:q})},`recommended-${a.id}`))})]},"recommended-section")),v.forEach(a=>{B.push((0,b.jsxs)("div",{className:"mb-8 last:mb-0",children:[(0,b.jsxs)("div",{className:`flex items-center gap-1.5 mb-4 ${o?"hidden md:hidden":""}`,children:[a.category.icon&&(0,b.jsx)("span",{className:"text-lg",children:a.category.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-text-primary",children:a.category.name}),a.category.description&&(0,b.jsx)("p",{className:"text-xs text-text-secondary mt-0.5",children:a.category.description})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:a.sites.map((c,d)=>(0,b.jsx)("div",{children:(0,b.jsx)(x,{site:c,index:d,onSiteClick:q})},`site-${a.category.id}-${c.id}`))})]},`category-${a.category.id}`))}),e.showRecommended||0!==e.categories.length||B.push((0,b.jsx)("div",{className:"text-center py-12 text-text-tertiary",children:"暂无导航数据"},"empty-state")),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:B}),(0,b.jsx)(w,{isOpen:k,onClose:()=>{l(!1),setTimeout(()=>{n(null)},300)},site:m,logoUrl:m?.logo?(0,g.getFileUrl)(m.logo):void 0})]})}var z=a.i(41710),A=a.i(1239),B=a.i(50944),C=a.i(54897),D=a.i(27094);let E=(0,g.getApiBaseUrl)(),F=a=>{let b=new Date(a),c=b.getFullYear(),d=String(b.getMonth()+1).padStart(2,"0"),e=String(b.getDate()).padStart(2,"0"),f=String(b.getHours()).padStart(2,"0"),g=String(b.getMinutes()).padStart(2,"0");return`${c}-${d}-${e} ${f}:${g}`},G=(a,b)=>a.length<=b?a:a.substring(0,b)+"...";function H({searchQuery:a=""}){let d=(0,B.usePathname)();(0,B.useRouter)();let e=(0,B.useSearchParams)(),f=!!d&&(0,C.isAdminPage)(d),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(1),[p,q]=(0,c.useState)(1),[r,s]=(0,c.useState)({}),[t,v]=(0,c.useState)({showNoteTags:!0,showNoteCategories:!0,noteLayoutColumns:"1",showNoteCover:"true",defaultNoteCover:""}),[w,x]=(0,c.useState)({type:null,value:null}),y="/"===d,[H,I]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=()=>{I(window.innerWidth>=768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,c.useEffect)(()=>{J(),K(),Q()},[n,w]),(0,c.useEffect)(()=>{let a=e.get("noteId");if(a){let b=parseInt(a,10);isNaN(b)||(window.location.href=`/note/${b}`)}},[e]);let J=async()=>{try{let a={is_published:!0,page:n,limit:6};w.type&&w.value&&("tag"===w.type?a.tag=w.value:"category"===w.type&&(a.category=w.value));let b=await u.default.get("/notes",{params:a}),c=b.data?.data,d=Array.isArray(c?.notes)?c.notes:[];i(d),q(c?.pagination?.totalPages||1)}catch(a){console.error("Failed to fetch notes:",a),i([])}finally{m(!1)}},K=async()=>{try{let a=await u.default.get("/notes/categories/list"),b=a.data?.data;k(Array.isArray(b)?b:[])}catch(a){console.error("Failed to fetch categories:",a),k([])}},L=a=>{try{return new URL(a).hostname.replace("www.","")}catch{return""}},M=a=>{let b=L(a);return[`https://${b}/favicon.ico`,`https://www.${b}/favicon.ico`,`https://icons.duckduckgo.com/ip3/${b}.ico`,`https://favicon.yandex.net/favicon/${b}`][0]},N=async a=>{if(r[a])return r[a];try{let b=await (0,g.safeFetch)(`/api/metadata?url=${encodeURIComponent(a)}`);if(b.ok){let c=await b.json();return s(b=>({...b,[a]:{title:c.title||L(a),description:c.description||"点击卡片访问网站",favicon:c.favicon||M(a),image:c.image||""}})),c}}catch(a){console.error("Failed to fetch URL metadata:",a)}let b={title:L(a),description:"点击卡片访问网站",favicon:M(a),image:""};return s(c=>({...c,[a]:b})),b},O=a=>{y?window.location.href=`/notes?tag=${encodeURIComponent(a)}`:(x({type:"tag",value:a}),o(1))},P=a=>{y?window.location.href=`/notes?category=${encodeURIComponent(a)}`:(x({type:"category",value:a}),o(1))},Q=async()=>{try{let a=await u.default.get("/settings");if(a.data.success&&a.data.data){let b=a.data.data,c=b.find(a=>"showNoteTags"===a.key),d=b.find(a=>"showNoteCategories"===a.key),e=b.find(a=>"noteLayoutColumns"===a.key),f=b.find(a=>"showNoteCover"===a.key),g=b.find(a=>"defaultNoteCover"===a.key);v({showNoteTags:!c||"true"===c.value,showNoteCategories:!d||"true"===d.value,noteLayoutColumns:e?.value||"1",showNoteCover:f?.value||"true",defaultNoteCover:g?.value||""})}}catch(a){console.error("Failed to load settings:",a)}};(0,c.useEffect)(()=>{let a=async()=>{for(let a of h.filter(a=>(a=>{if(!a)return!1;let b=a.trim();return/^https?:\/\/[\w\-\.]+\.[a-z]{2,}(\/\S*)?$/i.test(b)})(a.content)))await N(a.content.trim())};h.length>0&&a()},[h]);let R=h.filter(b=>{if(!a.trim())return!0;let c=a.toLowerCase(),d=b.title?.toLowerCase().includes(c),e=(0,D.stripMarkdown)(b.content).toLowerCase().includes(c),f=b.category?.toLowerCase().includes(c),g=b.Tags?.some(a=>a.name.toLowerCase().includes(c))||b.tags?.toLowerCase().includes(c);return d||e||f||g}),S=new Map(j.map(a=>[a.name,a])),T=parseInt(t.noteLayoutColumns)||1,U=1===T||(2===T||3===T)&&H,V=(!!H||!(T>=2))&&(!H||4!==T)&&(t.showNoteTags||t.showNoteCategories),W=(!!H||!(T>=2))&&(!H||4!==T);if(l)return(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"p-4 bg-bg-secondary/50 rounded-lg",children:[(0,b.jsx)("div",{className:"h-5 w-3/4 bg-bg-tertiary/50 animate-pulse mb-3 rounded"}),(0,b.jsx)("div",{className:"h-4 w-full bg-bg-tertiary/50 animate-pulse mb-2 rounded"}),(0,b.jsx)("div",{className:"h-4 w-2/3 bg-bg-tertiary/50 animate-pulse mb-3 rounded"}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("div",{className:"h-3 w-24 bg-bg-tertiary/50 animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-3 w-16 bg-bg-tertiary/50 animate-pulse rounded"})]})]},a))});if(0===h.length)return null;let X=a.trim()&&R.length>0,Y=a.trim()&&0===R.length;return(0,b.jsxs)(b.Fragment,{children:[X&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-blue-50/50 rounded-lg border border-blue-200/50 flex items-center justify-between",children:(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm text-blue-700",children:["搜索结果: 找到 ",R.length," 条相关笔记",(0,b.jsxs)("span",{className:"font-medium ml-1",children:['"',a,'"']})]})})}),Y&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-bg-tertiary/50 rounded-lg border border-border-primary/50 text-center",children:(0,b.jsxs)("span",{className:"text-sm text-text-tertiary",children:['没有找到包含 "',a,'" 的笔记']})}),w.type&&w.value&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-bg-secondary/50 rounded-lg border border-border-primary/20 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm text-text-secondary",children:["当前筛选:",(0,b.jsxs)("span",{className:"font-medium text-text-primary ml-1",children:["tag"===w.type?"标签":"分类",": ",w.value]})]})}),(0,b.jsx)("button",{onClick:()=>{x({type:null,value:null}),o(1)},className:"text-xs text-text-tertiary hover:text-text-primary transition-colors px-2 py-1 hover:bg-bg-tertiary/50 rounded",children:"清除筛选"})]}),(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${parseInt(t.noteLayoutColumns)||1}, minmax(0, 1fr))`},children:R.map((a,c)=>(0,b.jsx)("div",{className:`group block rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border transition-all duration-300 cursor-pointer overflow-hidden animate-fade-in ${f?"bg-white border-gray-200":"bg-bg-secondary border-border-primary"}`,onClick:()=>{window.location.href=`/note/${a.id}`},children:U?(0,b.jsxs)("div",{className:"flex gap-3 items-stretch p-3 h-32",children:[(a.cover_image||t.defaultNoteCover)&&"true"===t.showNoteCover&&(0,b.jsx)("div",{className:"flex-shrink-0 w-26 h-26 rounded-md overflow-hidden bg-bg-tertiary",children:(0,b.jsx)("img",{src:(a.cover_image||t.defaultNoteCover||"").startsWith("http")?a.cover_image||t.defaultNoteCover:`${E}${a.cover_image||t.defaultNoteCover}`,alt:a.title||"封面图",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:a=>{a.target.style.display="none"}})}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col justify-between min-w-0 py-1",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2 mb-1.5",children:[a.title&&(0,b.jsx)("h3",{className:"text-base font-semibold text-text-primary line-clamp-2 flex-1 group-hover:text-primary-500 transition-colors leading-snug",children:a.title}),a.is_pinned&&(0,b.jsx)("div",{className:"flex-shrink-0 px-1.5 py-0.5 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded text-[10px] font-semibold flex items-center gap-0.5",children:(0,b.jsx)(A.Pin,{className:"w-2.5 h-2.5 fill-current"})})]}),W&&(0,b.jsx)("p",{className:"text-xs text-text-secondary line-clamp-2 mb-1.5 leading-relaxed opacity-80",children:a.summary||(a.content?G((0,D.stripMarkdown)(a.content),60):"暂无内容")}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap text-[10px] mt-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-text-tertiary",children:[(0,b.jsx)(z.Clock,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"text-[10px]",children:F(a.published_at||a.created_at)})]}),V&&t.showNoteCategories&&a.category&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 bg-primary-100 text-primary-700 rounded-full font-medium cursor-pointer hover:bg-primary-200 transition-colors text-[10px]",onClick:b=>{b.stopPropagation(),P(a.category)},children:[S.get(a.category)?.icon&&(0,b.jsx)("span",{className:"mr-0.5",children:S.get(a.category)?.icon}),a.category]}),V&&t.showNoteTags&&a.Tags&&a.Tags.length>0&&(0,b.jsxs)(b.Fragment,{children:[a.Tags.slice(0,2).map(a=>(0,b.jsx)("span",{className:"px-1.5 py-0.5 rounded-full font-medium cursor-pointer hover:opacity-80 transition-opacity text-[10px]",style:a.color?{backgroundColor:`${a.color}20`,color:a.color}:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},onClick:b=>{b.stopPropagation(),O(a.name)},children:a.name},a.id)),a.Tags.length>2&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 rounded-full text-[10px]",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},children:["+",a.Tags.length-2]})]}),V&&t.showNoteTags&&(!a.Tags||0===a.Tags.length)&&a.tags&&(0,b.jsxs)(b.Fragment,{children:[a.tags.split(",").slice(0,2).map((a,c)=>(0,b.jsx)("span",{className:"px-1.5 py-0.5 rounded-full font-medium cursor-pointer hover:opacity-80 transition-opacity text-[10px]",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},onClick:b=>{b.stopPropagation(),O(a.trim())},children:a.trim()},c)),a.tags.split(",").length>2&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 rounded-full text-[10px]",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},children:["+",a.tags.split(",").length-2]})]})]})]})]}):(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(a.cover_image||t.defaultNoteCover)&&"true"===t.showNoteCover&&(0,b.jsxs)("div",{className:"relative w-full pt-[100%] overflow-hidden bg-gradient-to-br from-primary-100 to-primary-200 flex-shrink-0",children:[(0,b.jsx)("img",{src:(a.cover_image||t.defaultNoteCover||"").startsWith("http")?a.cover_image||t.defaultNoteCover:`${E}${a.cover_image||t.defaultNoteCover}`,alt:a.title||"封面图",className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:a=>{a.target.style.display="none"}}),a.is_pinned&&(0,b.jsxs)("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-sm rounded-full px-2 py-1 text-[10px] text-white font-semibold flex items-center gap-1",children:[(0,b.jsx)(A.Pin,{className:"w-2.5 h-2.5 fill-current"}),(0,b.jsx)("span",{children:"置顶"})]})]}),(0,b.jsxs)("div",{className:"p-2.5 flex flex-col flex-1 min-h-0",children:[a.title&&(0,b.jsx)("h3",{className:"font-semibold text-base text-text-primary group-hover:text-primary-500 transition-colors line-clamp-2 mb-1.5 leading-snug",children:a.title}),W&&(0,b.jsx)("p",{className:"text-xs text-text-secondary line-clamp-2 leading-relaxed mb-2 opacity-80",children:a.summary||(a.content?G((0,D.stripMarkdown)(a.content),60):"暂无内容")}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-1.5 text-[10px] mt-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-text-tertiary",children:[(0,b.jsx)(z.Clock,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"text-[10px]",children:F(a.published_at||a.created_at)})]}),V&&(0,b.jsxs)("div",{className:"flex items-center gap-1 flex-wrap",children:[t.showNoteCategories&&a.category&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 bg-primary-100 text-primary-700 rounded-full font-medium cursor-pointer hover:bg-primary-200 transition-colors text-[10px]",onClick:b=>{b.stopPropagation(),P(a.category)},children:[S.get(a.category)?.icon&&(0,b.jsx)("span",{className:"mr-0.5",children:S.get(a.category)?.icon}),a.category]}),t.showNoteTags&&a.Tags&&a.Tags.length>0&&(0,b.jsxs)(b.Fragment,{children:[a.Tags.slice(0,1).map(a=>(0,b.jsx)("span",{className:"px-1.5 py-0.5 rounded-full font-medium cursor-pointer hover:opacity-80 transition-opacity text-[10px]",style:a.color?{backgroundColor:`${a.color}20`,color:a.color}:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},onClick:b=>{b.stopPropagation(),O(a.name)},children:a.name},a.id)),a.Tags.length>1&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 rounded-full text-[10px]",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},children:["+",a.Tags.length-1]})]}),t.showNoteTags&&(!a.Tags||0===a.Tags.length)&&a.tags&&(0,b.jsxs)(b.Fragment,{children:[a.tags.split(",").slice(0,1).map((a,c)=>(0,b.jsx)("span",{className:"px-1.5 py-0.5 rounded-full font-medium cursor-pointer hover:opacity-80 transition-opacity text-[10px]",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},onClick:b=>{b.stopPropagation(),O(a.trim())},children:a.trim()},c)),a.tags.split(",").length>1&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 rounded-full text-[10px]",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},children:["+",a.tags.split(",").length-1]})]})]})]})]})]})},a.id))}),p>1&&(0,b.jsxs)("div",{className:"flex justify-center gap-2 pt-6 mt-4",children:[(0,b.jsx)("button",{onClick:()=>o(a=>Math.max(1,a-1)),disabled:1===n,className:"px-3 py-1.5 rounded-lg bg-bg-primary text-text-secondary hover:bg-bg-secondary disabled:opacity-30 disabled:cursor-not-allowed transition-all text-sm",children:"上一页"}),(0,b.jsx)("div",{className:"flex items-center gap-1.5",children:Array.from({length:Math.min(p,5)},(a,c)=>{let d,e=(d=p<=5||n<=3?c+1:n>=p-2?p-4+c:n-2+c)===n;return(0,b.jsx)("button",{onClick:()=>o(d),className:"w-8 h-8 rounded-lg transition-all text-sm "+(e?"bg-primary-500 text-white":"bg-bg-primary text-text-secondary hover:bg-bg-secondary"),children:d},d)})}),(0,b.jsx)("button",{onClick:()=>o(a=>Math.min(p,a+1)),disabled:n===p,className:"px-3 py-1.5 rounded-lg bg-bg-primary text-text-secondary hover:bg-bg-secondary disabled:opacity-30 disabled:cursor-not-allowed transition-all text-sm",children:"下一页"})]})]})}var I=a.i(78987),J=a.i(50522);let K=(0,i.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var L=a.i(62180);function M({service:a,isOpen:d,onClose:e}){let[f,g]=(0,c.useState)(!1);if(!a)return null;let h=a.show_order_button&&a.order_button_url;return(0,b.jsx)(b.Fragment,{children:d&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-3 animate-fade-in",onClick:e,children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-900 w-full max-w-[380px] rounded-2xl overflow-hidden shadow-2xl relative flex flex-col",style:{aspectRatio:"9/16",maxHeight:"calc(100vh - 24px)"},onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:e,className:"absolute top-3 right-3 z-30 w-8 h-8 flex items-center justify-center bg-black/30 hover:bg-black/50 backdrop-blur-sm rounded-full transition-all duration-200","aria-label":"关闭",children:(0,b.jsx)(o.X,{className:"w-4 h-4 text-white"})}),(0,b.jsxs)("div",{className:`flex-1 overflow-y-auto overscroll-contain hide-scrollbar ${h?"pb-20":"pb-4"}`,children:[(0,b.jsxs)("div",{className:"relative w-full aspect-square bg-gray-100 dark:bg-gray-800",children:[a.cover_image&&!f?(0,b.jsx)("img",{src:(0,u.getImageUrl)(a.cover_image),alt:a.name,className:"w-full h-full object-cover",onError:()=>g(!0)}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20",children:(0,b.jsx)(I.ShoppingBag,{className:"w-20 h-20 text-gray-300 dark:text-gray-600"})}),a.is_recommended&&(0,b.jsxs)("div",{className:"absolute top-3 left-3 flex items-center gap-1 bg-gradient-to-r from-orange-500 to-rose-500 text-white px-2.5 py-1 rounded-full text-[11px] font-medium shadow-lg",children:[(0,b.jsx)(K,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"精选推荐"})]}),a.Category&&(0,b.jsxs)("div",{className:"absolute top-3 right-12 flex items-center gap-1 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm px-2.5 py-1 rounded-full text-[11px] text-gray-600 dark:text-gray-300 shadow-sm",children:[a.Category.icon&&(0,b.jsx)("span",{children:a.Category.icon}),(0,b.jsx)("span",{children:a.Category.name})]})]}),(0,b.jsxs)("div",{className:"px-4 py-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white leading-snug mb-2",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm leading-relaxed mb-3",children:a.description}),(0,b.jsxs)("div",{className:"flex items-baseline gap-0.5",children:[(0,b.jsx)("span",{className:"text-rose-500 text-sm font-bold",children:"¥"}),(0,b.jsx)("span",{className:"text-rose-500 text-2xl font-bold tracking-tight",children:a.price})]})]}),a.specifications&&a.specifications.length>0&&(0,b.jsxs)("div",{className:"px-4 mb-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-1 h-4 bg-gradient-to-b from-violet-500 to-fuchsia-500 rounded-full"}),a.spec_title||"服务规格"]})}),(0,b.jsx)("div",{className:"space-y-2",children:a.specifications.sort((a,b)=>a.sort_order-b.sort_order).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-2.5 px-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:a.spec_name}),(0,b.jsx)("span",{className:"text-gray-900 dark:text-white text-sm font-medium",children:a.spec_value})]},a.id))})]}),a.content&&(0,b.jsxs)("div",{className:"px-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-1 h-4 bg-gradient-to-b from-violet-500 to-fuchsia-500 rounded-full"}),"服务详情"]})}),(0,b.jsx)("div",{className:"prose prose-sm max-w-none text-gray-600 dark:text-gray-300 prose-headings:text-gray-900 dark:prose-headings:text-white prose-strong:text-gray-900 dark:prose-strong:text-white prose-a:text-violet-600 dark:prose-a:text-violet-400",children:(0,b.jsx)(L.default,{components:{h1:({node:a,...c})=>(0,b.jsx)("h1",{className:"text-base font-bold mt-4 mb-2 text-gray-900 dark:text-white",...c}),h2:({node:a,...c})=>(0,b.jsx)("h2",{className:"text-sm font-bold mt-3 mb-2 text-gray-900 dark:text-white",...c}),h3:({node:a,...c})=>(0,b.jsx)("h3",{className:"text-sm font-semibold mt-3 mb-1.5 text-gray-800 dark:text-gray-100",...c}),p:({node:a,children:d,...e})=>c.default.Children.toArray(d).some(a=>"string"==typeof a&&a.includes("\n"))?(0,b.jsx)("p",{className:"mb-3 leading-relaxed text-sm text-gray-600 dark:text-gray-300",...e,children:c.default.Children.map(d,(a,d)=>{if("string"==typeof a){let e=a.split("\n");return(0,b.jsx)(c.default.Fragment,{children:e.map((a,d)=>(0,b.jsxs)(c.default.Fragment,{children:[a,d<e.length-1&&(0,b.jsx)("br",{})]},d))},d)}return a})}):(0,b.jsx)("p",{className:"mb-3 leading-relaxed text-sm text-gray-600 dark:text-gray-300",...e,children:d}),ul:({node:a,...c})=>(0,b.jsx)("ul",{className:"list-disc list-outside ml-4 mb-3 space-y-1.5 text-sm text-gray-600 dark:text-gray-300",...c}),ol:({node:a,...c})=>(0,b.jsx)("ol",{className:"list-decimal list-outside ml-4 mb-3 space-y-1.5 text-sm text-gray-600 dark:text-gray-300",...c}),li:({node:a,...c})=>(0,b.jsx)("li",{className:"text-sm leading-relaxed",...c}),blockquote:({node:a,...c})=>(0,b.jsx)("blockquote",{className:"border-l-3 border-violet-500 pl-3 py-2 my-3 bg-violet-50 dark:bg-violet-900/20 rounded-r-lg text-sm italic",...c}),code:({node:a,inline:c,...d})=>c?(0,b.jsx)("code",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-xs font-mono text-violet-600 dark:text-violet-400",...d}):(0,b.jsx)("code",{className:"block p-3 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-x-auto text-xs font-mono",...d}),img:({node:a,...c})=>(0,b.jsx)("img",{className:"rounded-xl shadow-md my-3 max-w-full",loading:"lazy",...c}),a:({node:a,...c})=>(0,b.jsx)("a",{className:"text-violet-600 dark:text-violet-400 hover:underline font-medium",target:"_blank",rel:"noopener noreferrer",...c})},children:a.content})})]})]}),h&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-white via-white dark:from-gray-900 dark:via-gray-900 to-transparent pt-8",children:(0,b.jsxs)("a",{href:a.order_button_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white py-3.5 rounded-xl font-semibold shadow-lg shadow-violet-500/30 hover:shadow-xl hover:shadow-violet-500/40 transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-200",children:[(0,b.jsx)("span",{className:"text-[15px]",children:a.order_button_text||"立即下单"}),(0,b.jsx)(J.ChevronRight,{className:"w-4 h-4"})]})})]})})})}function N({searchQuery:a=""}){let[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null);(0,c.useEffect)(()=>{j()},[]);let j=async()=>{try{let a=await (0,u.getServices)({});if(a&&a.success&&a.data){let b=a.data.services||[];e(b)}else a&&Array.isArray(a)?e(a):(console.warn("Unexpected services response format:",a),e([]))}catch(a){console.error("Failed to fetch services:",a),e([])}finally{g(!1)}},k=d.filter(b=>{if(!a.trim())return!0;let c=a.toLowerCase(),d=b.name?.toLowerCase().includes(c),e=b.description?.toLowerCase().includes(c),f=b.price?.toLowerCase().includes(c);return d||e||f});return f?(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3",children:[...Array(12)].map((a,c)=>(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-xl shadow-sm border border-border-primary overflow-hidden animate-pulse",children:[(0,b.jsx)("div",{className:"aspect-square bg-bg-tertiary"}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-3/4 mb-2"}),(0,b.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,b.jsx)("div",{className:"h-5 bg-bg-tertiary rounded w-16"}),(0,b.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-12"})]})]})]})},c))})}):0===k.length?(0,b.jsxs)("div",{className:"bg-bg-secondary/40 rounded-2xl p-8 text-center",children:[(0,b.jsx)(I.ShoppingBag,{className:"w-12 h-12 text-text-tertiary opacity-30 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-text-secondary",children:"暂无服务"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3",children:k.map((a,c)=>(0,b.jsxs)("div",{onClick:()=>{i(a)},className:"group bg-bg-secondary rounded-xl shadow-sm hover:shadow-xl hover:-translate-y-1 border border-border-primary transition-all duration-300 cursor-pointer overflow-hidden animate-fade-in",children:[(0,b.jsxs)("div",{className:"relative aspect-square bg-bg-tertiary overflow-hidden",children:[a.cover_image?(0,b.jsx)("img",{src:(0,u.getImageUrl)(a.cover_image),alt:a.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:a=>{a.target.style.display="none"}}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(I.ShoppingBag,{className:"w-16 h-16 text-text-tertiary opacity-30"})}),a.is_recommended&&(0,b.jsx)("div",{className:"absolute top-2 right-2 px-2 py-1 rounded text-xs font-semibold",style:{background:"linear-gradient(to right, var(--accent-gradient-from), var(--accent-gradient-to))",color:"var(--accent-text)"},children:"推荐"})]}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("h3",{className:"text-base font-semibold text-text-primary group-hover:text-primary-500 transition-colors mb-2 line-clamp-1",children:a.name}),(0,b.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,b.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:[(0,b.jsx)("span",{className:"text-base font-normal mr-0.5",children:"¥"}),a.price]}),a.Category&&(0,b.jsxs)("span",{className:"text-xs text-text-tertiary px-2 py-0.5 bg-bg-tertiary rounded",children:[a.Category.icon&&(0,b.jsx)("span",{className:"mr-1",children:a.Category.icon}),a.Category.name]})]})]})]},a.id))})}),(0,b.jsx)(M,{service:h,isOpen:!!h,onClose:()=>{i(null)}})]})}var O=a.i(38632),P=a.i(43108);a.i(35112);var Q=a.i(13749),R=a.i(61690),S=a.i(69602),T=a.i(84505),U=a.i(77156),V=a.i(41379);function W({galleryId:a,isOpen:d,onClose:e}){let[f,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(0),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[p,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(!1),[t,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)({x:0,y:0}),[G,H]=(0,c.useState)(!1),I=(0,c.useRef)({x:0,y:0});(0,c.useRef)({x:0,y:0});let[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(1),[O,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)(null),[Z,$]=(0,c.useState)(!1),_=(0,c.useRef)(null),aa=(0,c.useRef)([]);(0,c.useEffect)(()=>{let a=()=>{D(window.innerWidth<768||"ontouchstart"in window)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,c.useEffect)(()=>{d&&a&&ab()},[d,a]),(0,c.useEffect)(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[d]),(0,c.useEffect)(()=>{if(_.current&&aa.current[i]){let a=_.current,b=aa.current[i];if(b){let c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e=d.left-c.left+a.scrollLeft,f=e+d.width,g=c.width;if(e<a.scrollLeft||f>a.scrollLeft+g){let b=e-g/2+d.width/2;a.scrollTo({left:Math.max(0,b),behavior:"smooth"})}}}},[i]),(0,c.useEffect)(()=>{if(!d)return;let a=a=>{"Escape"===a.key?e():"ArrowLeft"===a.key?ad():"ArrowRight"===a.key?ac():"+"===a.key||"="===a.key?af():"-"===a.key&&ag()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[d,i,p,f]),(0,c.useCallback)(a=>{if(C)return;a.preventDefault();let b=a.deltaY>0?-.1:.1;q(a=>{let c=Math.min(Math.max(a+b,.5),3);return c<=1&&F({x:0,y:0}),c})},[C]),(0,c.useCallback)(a=>{C||p<=1||(a.preventDefault(),H(!0),I.current={x:a.clientX-E.x,y:a.clientY-E.y})},[C,p,E]),(0,c.useCallback)(a=>{!G||C||F({x:a.clientX-I.current.x,y:a.clientY-I.current.y})},[G,C]),(0,c.useCallback)(()=>{H(!1)},[]);let ab=async b=>{l(!0),n(null);try{let c=await (0,u.getGallery)(a,b);c.success?(h(c.data),s(!1),x("")):c.requirePassword?s(!0):n(c.message||"加载图册失败")}catch(a){a.response?.status===401?a.response?.data?.requirePassword?s(!0):(s(!0),x("密码错误")):n("加载图册失败")}finally{l(!1)}},ac=()=>{f&&0!==f.images.length&&(j(a=>(a+1)%f.images.length),ae())},ad=()=>{f&&0!==f.images.length&&(j(a=>(a-1+f.images.length)%f.images.length),ae())},ae=()=>{q(1),F({x:0,y:0})},af=()=>{q(a=>Math.min(a+.25,3))},ag=()=>{q(a=>{let b=Math.max(a-.25,.5);return b<=1&&F({x:0,y:0}),b})};return d&&(f&&f.images.length,C?(b.Fragment,!k&&!r&&f&&f.images.length>0&&T.Download,r||o.X,r&&(o.X,P.Lock,y?V.EyeOff:U.Eye),!k&&!m&&!r&&f&&f.images.length>0&&((0,g.getFileUrl)(f.images[i].path),f.images[i].filename,E.x,E.y,f.images.length>1&&(b.Fragment,Q.ChevronLeft,J.ChevronRight)),k||m||r||!f||f.images.length,k||m||r||!f||!(f.images.length>1)||(f.images.length,f.images.map((a,c)=>(0,b.jsx)("button",{ref:a=>{aa.current[c]=a},onClick:()=>{j(c),ae()},className:`flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all ${c===i?"border-primary-500 opacity-100":"border-white/20 opacity-50 hover:opacity-75"}`,style:{width:"56px",height:"56px"},children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.path),alt:a.filename,className:"w-full h-full object-cover",draggable:!1})},a.id)))):(b.Fragment,!k&&!r&&f&&f.images.length>1&&f.images.length,!k&&!r&&f&&f.images.length>0&&T.Download,r||o.X,r&&(o.X,P.Lock,y?V.EyeOff:U.Eye),!k&&!m&&!r&&f&&f.images.length>0&&((0,g.getFileUrl)(f.images[i].path),f.images[i].filename,E.x,E.y,f.images.length>1&&(b.Fragment,Q.ChevronLeft,J.ChevronRight)),k||m||r||!f||f.images.length,!k&&!m&&!r&&f&&f.images.length>0&&(S.ZoomOut,R.ZoomIn,f.images.length>1&&f.images.map((a,c)=>(0,b.jsx)("button",{ref:a=>{aa.current[c]=a},onClick:()=>{j(c),ae()},className:`flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all ${c===i?"border-primary-500 opacity-100":"border-white/20 opacity-50 hover:opacity-75"}`,style:{width:"64px",height:"64px"},children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.path),alt:a.filename,className:"w-full h-full object-cover",draggable:!1})},a.id))))),null}function X({searchQuery:a=""}){let[d,e]=(0,c.useState)([]),[f,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null);(0,c.useEffect)(()=>{m()},[]);let m=async()=>{try{let a=await (0,u.getGalleries)({});if(a.success&&a.data){let b=a.data.slice(0,12);e(b)}else console.warn("Unexpected galleries response format:",a),e([])}catch(a){console.error("Failed to fetch galleries:",a),e([])}finally{h(!1)}},n=d.filter(b=>{if(!a.trim())return!0;let c=a.toLowerCase(),d=b.title?.toLowerCase().includes(c),e=b.description?.toLowerCase().includes(c);return d||e});return f?(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:[...Array(10)].map((a,c)=>(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-sm border border-border-primary overflow-hidden animate-pulse",children:[(0,b.jsx)("div",{className:"w-full pt-[100%] bg-bg-tertiary"}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-full"})]})]})},c))})}):0===n.length?(0,b.jsxs)("div",{className:"bg-bg-secondary/40 rounded-2xl p-8 text-center",children:[(0,b.jsx)(O.Image,{className:"w-12 h-12 text-text-tertiary opacity-30 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-text-secondary",children:"暂无图册"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:n.map((a,c)=>(0,b.jsxs)("div",{onClick:()=>{l(a.id),j(!0)},className:"group block bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer overflow-hidden animate-fade-in",children:[(0,b.jsxs)("div",{className:"relative w-full pt-[100%] bg-gradient-to-br from-primary-100 to-primary-200 overflow-hidden",children:[a.cover_image?(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.cover_image),alt:a.title,className:`absolute inset-0 w-full h-full object-cover transition-transform duration-300 ${a.hasPassword?"blur-xl scale-110":"group-hover:scale-105"}`,draggable:!1,onContextMenu:a=>a.preventDefault(),loading:"lazy"}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(O.Image,{className:"w-12 h-12 text-primary-400"})}),a.hasPassword&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"bg-black/60 backdrop-blur-sm rounded-full p-3",children:(0,b.jsx)(P.Lock,{className:"w-6 h-6 text-white"})})}),(0,b.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-white font-medium",children:[a.image_count," 张"]})]}),(0,b.jsxs)("div",{className:"p-3 text-left",children:[(0,b.jsx)("h3",{className:"font-medium text-sm text-text-primary group-hover:text-primary-500 transition-colors line-clamp-1 mb-1",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-xs text-text-tertiary line-clamp-2 leading-relaxed",children:a.description})]})]},a.id))})}),i&&k&&(0,b.jsx)(W,{galleryId:k,isOpen:i,onClose:()=>{j(!1),setTimeout(()=>{l(null)},300)}})]})}var Y=a.i(87532);function Z({tabs:a,defaultTab:d,onSearch:e,searchPlaceholder:g="搜索内容...",onTabChange:h,externalSearchQuery:i=""}){let{settings:j}=(0,f.useSettings)(),[k,l]=(0,c.useState)(d||a[0]?.key||""),[m,n]=(0,c.useState)(0),[p,q]=(0,c.useState)(0),[r,s]=(0,c.useState)(""),t=(0,c.useRef)(null),u=a[0],v=a[1],w=2===a.length,x=j.themeType||"default";(0,c.useEffect)(()=>{d&&l(d)},[d]),(0,c.useEffect)(()=>{h&&h(k)},[k]),(0,c.useEffect)(()=>{s(i)},[i]);let y=a=>{let b=a.target.value;s(b),e&&e(b,k)},z=()=>{s(""),e&&e("",k)};return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:`flex flex-col md:flex-row items-center md:items-center md:justify-between gap-4 ${"default"===x?"mb-0 md:mb-6":"mb-6"}`,children:[!w&&e?(0,b.jsxs)("div",{className:"relative w-72 flex-shrink-0 hidden md:block",children:[(0,b.jsx)(Y.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary"}),(0,b.jsx)("input",{type:"text",placeholder:g,value:r,onChange:y,className:"w-full pl-10 pr-10 py-2 bg-bg-secondary border border-border-primary rounded-xl text-sm text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off"}),r&&(0,b.jsx)("button",{type:"button",onClick:z,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors","aria-label":"清空搜索",children:(0,b.jsx)(o.X,{className:"w-4 h-4"})})]}):(0,b.jsxs)("div",{className:"flex items-center gap-3 mx-auto md:mx-0 md:flex-shrink-0",children:[w&&(0,b.jsx)("button",{onClick:()=>{w&&k===v?.key&&l(u.key)},disabled:k===u.key,className:`p-1.5 rounded-lg transition-all ${k===u.key?"opacity-20 cursor-not-allowed":"hover:bg-bg-secondary opacity-60 hover:opacity-100"}`,"aria-label":"上一页",children:(0,b.jsx)(Q.ChevronLeft,{className:"w-5 h-5 text-text-primary"})}),(0,b.jsxs)("div",{className:"flex gap-2 bg-bg-secondary rounded-full p-1 border border-border-primary",children:[(0,b.jsx)("button",{onClick:()=>l(u.key),className:`px-5 py-2 rounded-full text-xs font-medium transition-all ${k===u.key?"bg-primary-500 text-white":"text-text-secondary hover:text-text-primary"}`,children:u.label}),v&&(0,b.jsx)("button",{onClick:()=>l(v.key),className:`px-5 py-2 rounded-full text-xs font-medium transition-all ${k===v.key?"bg-primary-500 text-white":"text-text-secondary hover:text-text-primary"}`,children:v.label})]}),w&&(0,b.jsx)("button",{onClick:()=>{w&&k===u.key&&v&&l(v.key)},disabled:k===v?.key,className:`p-1.5 rounded-lg transition-all ${k===v?.key?"opacity-20 cursor-not-allowed":"hover:bg-bg-secondary opacity-60 hover:opacity-100"}`,"aria-label":"下一页",children:(0,b.jsx)(J.ChevronRight,{className:"w-5 h-5 text-text-primary"})})]}),w&&e&&(0,b.jsxs)("div",{className:"relative w-72 flex-shrink-0 hidden md:block",children:[(0,b.jsx)(Y.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary"}),(0,b.jsx)("input",{type:"text",placeholder:g,value:r,onChange:y,className:"w-full pl-10 pr-10 py-2 bg-bg-secondary border border-border-primary rounded-xl text-sm text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off"}),r&&(0,b.jsx)("button",{type:"button",onClick:z,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors","aria-label":"清空搜索",children:(0,b.jsx)(o.X,{className:"w-4 h-4"})})]})]}),(0,b.jsx)("div",{ref:t,className:"relative overflow-hidden",onTouchStart:a=>{n(a.targetTouches[0].clientX)},onTouchMove:a=>{q(a.targetTouches[0].clientX)},onTouchEnd:()=>{if(!m||!p||!w)return;let a=m-p;a>50&&k===u.key&&v&&l(v.key),a<-50&&k===v?.key&&u&&l(u.key),n(0),q(0)},children:k===u.key?(0,b.jsx)("div",{className:"animate-fade-in",children:u.content},u.key):v&&k===v.key?(0,b.jsx)("div",{className:"animate-fade-in",children:v.content},v.key):null}),w&&(0,b.jsxs)("div",{className:"flex justify-center gap-1.5 mt-5",children:[(0,b.jsx)("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${k===u.key?"bg-primary-500 w-6":"bg-border-secondary"}`}),(0,b.jsx)("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${k===v?.key?"bg-primary-500 w-6":"bg-border-secondary"}`})]})]})}var $=a.i(71987);function _(){let[a,d]=(0,c.useState)([]),[e,g]=(0,c.useState)(0),[h,i]=(0,c.useState)(!0),{settings:j,isLoading:k}=(0,f.useSettings)();return((0,c.useEffect)(()=>{if(!k){try{let a=JSON.parse(j.blogCarouselImages||"[]");d(a.filter(a=>a.url))}catch{d([])}i(!1)}},[j.blogCarouselImages,k]),(0,c.useEffect)(()=>{if(a.length>1){let b=null,c=setTimeout(()=>{g(1),b=setInterval(()=>{g(b=>(b+1)%a.length)},1500)},1500);return()=>{clearTimeout(c),b&&clearInterval(b)}}},[a.length]),h)?(0,b.jsx)("div",{className:"w-full aspect-video md:h-96 md:aspect-auto bg-bg-tertiary animate-pulse rounded-lg"}):0===a.length?(0,b.jsx)("div",{className:"relative w-full overflow-hidden rounded-lg shadow-sm bg-bg-secondary flex items-center justify-center aspect-video md:h-96 md:aspect-auto",children:(0,b.jsx)("p",{className:"text-text-tertiary text-sm",children:"暂无轮播图，请在后台上传"})}):(0,b.jsxs)("div",{className:"relative w-full overflow-hidden rounded-lg shadow-sm aspect-video md:h-96 md:aspect-auto",children:[(0,b.jsx)("div",{className:"relative w-full h-full",children:a.map((a,c)=>{let d=(0,b.jsx)($.default,{src:(0,u.getImageUrl)(a.url),alt:a.alt||"轮播图",fill:!0,sizes:"(max-width: 768px) 100vw, 800px",className:"object-cover",priority:0===c,unoptimized:!0});return(0,b.jsx)("div",{className:`absolute inset-0 transition-opacity duration-500 ease-in-out ${c===e?"opacity-100":"opacity-0"}`,children:a.link?(0,b.jsx)("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:d}):d},c)})}),a.length>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{g(b=>(b-1+a.length)%a.length)},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-primary-500/50 hover:bg-primary-600 text-white p-2 rounded-full transition-colors duration-200",children:(0,b.jsx)(Q.ChevronLeft,{className:"h-5 w-5"})}),(0,b.jsx)("button",{onClick:()=>{g(b=>(b+1)%a.length)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-primary-500/50 hover:bg-primary-600 text-white p-2 rounded-full transition-colors duration-200",children:(0,b.jsx)(J.ChevronRight,{className:"h-5 w-5"})}),(0,b.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:a.map((a,c)=>(0,b.jsx)("button",{onClick:()=>{g(c)},className:`h-1 rounded-full transition-all duration-300 ${c===e?"w-8 bg-white shadow-md":"w-4 bg-white/40 hover:bg-white/60"}`},c))})]})]})}function aa(){let{profile:a,isLoading:d}=(0,e.useProfile)(),{profileSocialLinks:h}=(0,p.useSocialLinks)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),{settings:z}=(0,f.useSettings)(),A=z.avatarShape||"circle",B=()=>"rounded"===A?"rounded-xl":"rounded-full",C=()=>{j(!1),setTimeout(()=>l(null),300)},D=()=>{n(!1),t(!1),setTimeout(()=>r(null),300)},E=()=>{w(!1),setTimeout(()=>y(null),300)},F=async()=>{if(q)try{await navigator.clipboard.writeText(q.account),t(!0),setTimeout(()=>t(!1),2e3)}catch(a){console.error("Failed to copy:",a)}};return d?(0,b.jsx)("div",{className:"bg-bg-secondary rounded-lg shadow-sm p-6 border border-border-primary h-full",children:(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-bg-tertiary rounded-full animate-pulse"}),(0,b.jsxs)("div",{className:"w-full space-y-2",children:[(0,b.jsx)("div",{className:"h-6 w-32 bg-bg-tertiary animate-pulse mx-auto"}),(0,b.jsx)("div",{className:"h-4 w-48 bg-bg-tertiary animate-pulse mx-auto"})]})]})}):a?(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg transition-all duration-300 p-6 border border-border-primary h-full flex flex-col justify-center",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:a.avatar?(0,b.jsx)("img",{src:(0,u.getImageUrl)(a.avatar),alt:a.name||"头像",className:`w-20 h-20 ${B()} object-cover shadow-lg`,style:{boxShadow:"0 3px 10px 0 rgba(0, 0, 0, 0.12)"}}):(0,b.jsx)("div",{className:`w-20 h-20 ${B()} bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl font-bold shadow-lg`,style:{boxShadow:"0 3px 10px 0 rgba(0, 0, 0, 0.12)"},children:a.name?.[0]||"X"})}),(0,b.jsxs)("div",{className:"text-center mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-text-primary",children:a.name||""}),a.title&&(0,b.jsx)("p",{className:"text-sm text-text-secondary mt-2",children:a.title}),a.bio&&(0,b.jsx)("p",{className:"text-sm text-text-tertiary mt-3 line-clamp-3",children:a.bio})]}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-3 mb-4",children:[a.location&&(0,b.jsxs)("div",{className:"flex items-center text-xs text-text-tertiary",children:[(0,b.jsxs)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.location]},"location"),a.email&&(0,b.jsxs)("div",{className:"flex items-center text-xs text-text-tertiary",children:[(0,b.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.email]},"email"),a.website&&(0,b.jsxs)("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-xs text-primary-600 hover:text-primary-700 transition-colors",children:[(0,b.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),a.website_title||"个人网站"]},"website")].filter(Boolean)}),h.length>0&&(0,b.jsx)("div",{className:`flex items-center pt-5 border-t border-border-primary/20 px-8 ${1===h.length?"justify-center":"justify-between"}`,children:h.map((a,c)=>(0,b.jsx)("a",{href:a.link||"#",target:a.link?"_blank":"_self",rel:"noopener noreferrer",onClick:b=>{a.qrcode&&""!==a.qrcode.trim()?(b.preventDefault(),l({image:a.qrcode,platform:a.platform}),j(!0)):a.link&&""!==a.link.trim()&&"#"!==a.link?(b.preventDefault(),y({url:a.link,platform:a.platform}),w(!0)):(b.preventDefault(),r({account:a.account,platform:a.platform}),n(!0))},className:"group relative flex items-center justify-center transition-all hover:scale-110 hover:opacity-80 cursor-pointer",title:`${a.platform}: ${a.account}`,children:a.icon&&""!==a.icon.trim()?(0,b.jsx)("div",{className:`flex items-center justify-center ${1===h.length?"w-10 h-10":2===h.length?"w-9 h-9":3===h.length?"w-8 h-8":"w-7 h-7"}`,children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.icon),alt:a.platform,className:"w-full h-full object-contain transition-all group-hover:brightness-110 icon-themed",onError:a=>{a.target.style.display="none"}})}):(0,b.jsx)("div",{className:`rounded-full bg-primary-500/20 flex items-center justify-center text-primary-500 font-bold group-hover:bg-primary-500/30 transition-colors ${1===h.length?"w-10 h-10 text-base":2===h.length?"w-9 h-9 text-sm":3===h.length?"w-8 h-8 text-sm":"w-7 h-7 text-xs"}`,children:a.platform[0].toUpperCase()})},`social-link-${a.id}-${c}`))}),i&&k&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:C,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:C,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(o.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:k.platform}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl inline-block",children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(k.image),alt:`${k.platform} QR Code`,className:"w-64 h-64 object-contain"})}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"截图或长按保存上方二维码"})]})]})}),m&&q&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:D,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:D,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(o.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:q.platform}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl mb-4",children:(0,b.jsx)("p",{className:"text-lg font-mono text-gray-900 dark:text-white break-all",children:q.account})}),(0,b.jsx)("button",{onClick:F,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${s?"bg-green-500 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`,children:s?"✓ 已复制":"复制账号"})]})]})}),v&&x&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:E,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:E,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(o.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:x.platform}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"是否跳转到以下链接？"}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-xl mb-4",children:(0,b.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white break-all",children:x.url})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:E,className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-white",children:"取消"}),(0,b.jsx)("button",{onClick:()=>{x&&window.open(x.url,"_blank","noopener,noreferrer"),E()},className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors bg-primary-500 hover:bg-primary-600 text-white",children:"确认跳转"})]})]})]})})]}):null}function ab({announcements:a}){let[e,f]=(0,c.useState)(0),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(0),o=(0,c.useRef)(null),p=(0,c.useRef)(null),q=(0,c.useRef)(null),r=(0,c.useRef)(null),s=a.filter(a=>a&&a.text&&a.text.trim()),t=s.length>1,u=(0,c.useCallback)(()=>{s.length<=1||(h(!0),l(!1),setTimeout(()=>{f(a=>(a+1)%s.length),h(!1),n(a=>a+1)},300))},[s.length]);if((0,c.useEffect)(()=>{let a=()=>{if(o.current&&p.current){let a=o.current.scrollWidth,b=p.current.clientWidth;j(t&&a>b-20)}},b=setTimeout(a,100);return window.addEventListener("resize",a),()=>{clearTimeout(b),window.removeEventListener("resize",a)}},[e,s,t]),(0,c.useEffect)(()=>t?(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{l(!0)},1500),()=>{r.current&&clearTimeout(r.current)}):void l(!1),[e,m,t]),(0,c.useEffect)(()=>{if(!(s.length<=1)&&k)return q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{u()},i?15e3:3500),()=>{q.current&&clearTimeout(q.current)}},[s.length,i,k,u]),0===s.length)return null;let v=s[e];return(0,b.jsxs)("div",{onClick:()=>{v.url&&window.open(v.url,"_blank","noopener,noreferrer")},className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`w-full bg-bg-secondary/80 border border-border-primary rounded-xl shadow-sm backdrop-blur-sm overflow-hidden transition-all duration-300 ${v.url?"cursor-pointer hover:bg-bg-tertiary/80 hover:shadow-md":""}`,children:[(0,b.jsxs)("div",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" flex items-center px-4 py-3 gap-3",children:[(0,b.jsx)("span",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" flex-shrink-0 text-xs font-bold text-white bg-gradient-to-r from-blue-500 to-indigo-500 px-2.5 py-1 rounded-md shadow-sm",children:"公告"}),(0,b.jsx)("div",{ref:p,className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" flex-1 overflow-hidden relative min-w-0",children:(0,b.jsx)("div",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`transition-all duration-300 ease-in-out ${g?"opacity-0 -translate-y-3":"opacity-100 translate-y-0"}`,children:(0,b.jsxs)("div",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`overflow-hidden ${i&&k?"marquee-container":""}`,children:[(0,b.jsx)("span",{ref:o,className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`text-sm font-medium text-text-primary whitespace-nowrap inline-block ${i&&k?"marquee-text":""}`,children:v.text}),i&&k&&(0,b.jsx)("span",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" text-sm font-medium text-text-primary whitespace-nowrap inline-block marquee-text-copy",children:v.text})]})})}),s.length>1&&(0,b.jsx)("div",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" flex-shrink-0 flex items-center gap-1.5",children:s.map((a,c)=>(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),c!==e&&(q.current&&clearTimeout(q.current),r.current&&clearTimeout(r.current),h(!0),l(!1),setTimeout(()=>{f(c),h(!1),n(a=>a+1)},300))},className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`h-2 rounded-full transition-all duration-300 ${c===e?"bg-primary w-4":"bg-text-tertiary/40 hover:bg-text-tertiary/60 w-2"}`},c))}),v.url&&(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" w-4 h-4 text-text-tertiary flex-shrink-0",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:d.default.dynamic([["d6910ecd2e201128",[15]]])})})]}),(0,b.jsx)(d.default,{id:"d6910ecd2e201128",dynamic:[15],children:".marquee-container.__jsx-style-dynamic-selector{gap:80px;display:flex}.marquee-text.__jsx-style-dynamic-selector,.marquee-text-copy.__jsx-style-dynamic-selector{animation:linear forwards marquee;animation-timeline:15s}@keyframes marquee{0%{transform:translate(0)}to{transform:translate(calc(-100% - 80px))}}"})]})}var ac=a.i(26971);function ad({forceThemeType:a,rawSettings:d,isLoading:e}){var f;let[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)("notes"),[m,n]=(0,c.useState)("notes"),[o,p]=(0,c.useState)(!1),[q,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),v=(d.enableAvatarThemeSwitch,d.themeType||"default"),w=v;a&&(w=a);let x={showSiteNav:"false"!==d.showSiteNav,showNotes:"false"!==d.showNotes,showSocialLinks:"false"!==d.showSocialLinks,themeColor:d.themeColor||"white",themeType:w,footerCopyright:d.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,backgroundImage:(f=d.backgroundImage||"",(0,g.getFileUrl)(f)),backgroundOpacity:d.backgroundOpacity||"0.5",defaultDisplaySection:d.defaultDisplaySection||"notes",showTopNavbar:d.showTopNavbar||"true",showWapSidebar:d.showWapSidebar||"true",blogProfileEnabled:d.blogProfileEnabled||"true",blogCarouselEnabled:d.blogCarouselEnabled||"true"};(0,c.useEffect)(()=>{if(d.homeContentSections)try{let a=JSON.parse(d.homeContentSections),b={section1:a.section1||"",section2:a.section2||"",showInDefaultTheme:!1!==a.showInDefaultTheme};s(b);let c=b.section1||b.section2||"notes";n(c),l(c)}catch(a){console.error("Failed to parse homeContentSections:",a),s({section1:"notes",section2:"navigation",showInDefaultTheme:!0}),n("notes"),l("notes")}else s({section1:"notes",section2:"navigation",showInDefaultTheme:!0}),n("notes"),l("notes");if(d.pageTexts)try{let a=JSON.parse(d.pageTexts);u(a)}catch(a){console.error("Failed to parse pageTexts:",a),u(null)}},[d]),(0,c.useEffect)(()=>{let a=()=>{p(window.innerWidth>=1024)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);let{showSocialLinks:z,themeType:A,footerCopyright:B,backgroundImage:C,backgroundOpacity:D,blogProfileEnabled:E,blogCarouselEnabled:F}=x,G="blog"===A,I="false"!==x.showTopNavbar;x.showWapSidebar;let J="false"!==F;(0,c.useEffect)(()=>{let a=a=>{j(a.detail),l(m)};return window.addEventListener("globalSearch",a),()=>{window.removeEventListener("globalSearch",a)}},[m]);let K=a=>{n(a),l(a)},L=(a,b)=>{j(a),b&&l(b)},M=(a,c)=>{switch(a){case"notes":default:return(0,b.jsx)(H,{searchQuery:c},`notes-${c}`);case"navigation":return(0,b.jsx)(y,{searchQuery:c},`navigation-${c}`);case"services":return(0,b.jsx)(N,{searchQuery:c},`services-${c}`);case"galleries":return(0,b.jsx)(X,{searchQuery:c},`galleries-${c}`)}},O=a=>t&&t[a]?.title?t[a].title:({notes:"笔记列表",navigation:"导航列表",services:"服务业务",galleries:"图库列表"})[a]||a,P=q&&(G?q.section1||q.section2:q.showInDefaultTheme&&(q.section1||q.section2));return(0,b.jsx)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col overflow-x-hidden hide-scrollbar",children:e?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-text-secondary",children:"加载中..."})]})}):(0,b.jsxs)(b.Fragment,{children:[C&&(0,b.jsx)("div",{className:"absolute inset-0 z-0",style:{backgroundImage:`url(${C})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:parseFloat(D)}}),G&&(0,b.jsxs)("div",{className:"relative z-0",children:[(G||I)&&(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl pt-3 pb-4 md:py-8",children:[(0,b.jsxs)("section",{className:"animate-slide-up mb-8",style:{animationDelay:"0.1s"},children:[(0,b.jsxs)("div",{className:"hidden lg:flex gap-6 items-stretch",children:[J&&(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(_,{})}),"false"!==E&&(0,b.jsx)("div",{className:`w-72 flex-shrink-0 h-96 ${!J?"mx-auto":""}`,children:o&&(0,b.jsx)(aa,{})})]}),J&&(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsx)(_,{})})]}),"true"===d.blogAnnouncementEnabled&&(()=>{let a=[];try{let b=JSON.parse(d.blogAnnouncements||"[]");Array.isArray(b)&&(a=b.map(a=>"string"==typeof a?{text:a,url:""}:a))}catch{a=[]}let c=a.filter(a=>a&&a.text&&a.text.trim());return 0===c.length?null:(0,b.jsx)("section",{className:"animate-slide-up mb-6",style:{animationDelay:"0.15s"},children:(0,b.jsx)(ab,{announcements:c})})})(),P&&q&&(0,b.jsx)("section",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:(0,b.jsx)(Z,{tabs:[q.section1&&{key:q.section1,label:O(q.section1),content:M(q.section1,i)},q.section2&&{key:q.section2,label:O(q.section2),content:M(q.section2,i)}].filter(Boolean),defaultTab:q.section1||q.section2,onSearch:L,onTabChange:K,searchPlaceholder:"搜索内容...",externalSearchQuery:i})})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{dangerouslySetInnerHTML:{__html:B}}),(0,b.jsx)(ac.default,{})]})]}),!G&&(0,b.jsxs)("div",{className:"relative z-0 flex flex-col min-h-screen",children:[I&&(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:`container mx-auto px-4 max-w-6xl ${P?"py-8":"flex-1 flex items-center justify-center"}`,children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,b.jsx)("section",{className:"text-center animate-fade-in mb-5 md:mb-6",children:(0,b.jsx)(h,{})}),z&&(0,b.jsx)("section",{className:"animate-slide-up",style:{animationDelay:"0.1s"},children:(0,b.jsx)(r,{className:"gap-3 md:gap-4"})})]}),P&&q&&(0,b.jsx)("section",{className:`animate-slide-up md:mt-12 ${G?"mt-8":"mt-0"}`,style:{animationDelay:"0.2s"},children:(0,b.jsx)(Z,{tabs:[q.section1&&{key:q.section1,label:O(q.section1),content:M(q.section1,i)},q.section2&&{key:q.section2,label:O(q.section2),content:M(q.section2,i)}].filter(Boolean),defaultTab:q.section1||q.section2,onSearch:L,onTabChange:K,searchPlaceholder:"搜索内容...",externalSearchQuery:i})})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{dangerouslySetInnerHTML:{__html:B}}),(0,b.jsx)(ac.default,{})]})]})]})})}a.s(["default",()=>ad],30499)}];

//# sourceMappingURL=src_components_HomeContent_tsx_7a23d521._.js.map