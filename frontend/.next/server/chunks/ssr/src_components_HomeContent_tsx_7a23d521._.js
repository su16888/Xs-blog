module.exports=[30499,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(31626),e=a.i(90914),f=a.i(55488),g=a.i(68114);function h(){let{profile:a,isLoading:h}=(0,e.useProfile)(),{settings:i}=(0,f.useSettings)(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),n=(0,c.useRef)(null),o=i.avatarShape||"circle",p=i.themeColor||"white",q=i.themeType||"default",r="true"===i.enableAvatarThemeSwitch;(0,c.useEffect)(()=>{if(!h&&r&&"default"===q){let a=setTimeout(()=>{k(!0);let a=setTimeout(()=>{k(!1)},2e3);return()=>clearTimeout(a)},500);return()=>clearTimeout(a)}},[r,q,h]);let s=()=>"rounded"===o?"rounded-xl":"rounded-full",t=()=>"black"===p?"0 0 0 3px rgba(255, 255, 255, 0.15), 0 4px 14px 0 rgba(255, 255, 255, 0.1)":"0 0 0 3px rgba(0, 0, 0, 0.08), 0 4px 14px 0 rgba(0, 0, 0, 0.15)",u=async a=>{r&&"default"===q&&!l&&(m(!0),await new Promise(a=>setTimeout(a,500)),sessionStorage.setItem("userThemeType","blog"),sessionStorage.setItem("userShowSiteNav","true"),sessionStorage.setItem("userShowNotes","true"),await new Promise(a=>setTimeout(a,500)),window.location.reload())};return h?(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`w-20 md:w-32 h-20 md:h-32 ${s()} bg-gray-200 animate-pulse mb-3 md:mb-4`}),(0,b.jsx)("div",{className:"h-6 md:h-8 w-36 md:w-48 bg-gray-200 animate-pulse mb-1 md:mb-2"}),(0,b.jsx)("div",{className:"h-4 w-48 md:w-64 bg-gray-200 animate-pulse"})]}):(0,b.jsxs)(b.Fragment,{children:[l&&(0,b.jsx)("div",{style:{backdropFilter:"blur(0px)",animation:"blur-fade 0.5s ease-out forwards"},className:"jsx-90f916ff8d57b529 fixed inset-0 z-[9999] pointer-events-none"}),(0,b.jsxs)("div",{className:"jsx-90f916ff8d57b529 flex flex-col items-center",children:[(0,b.jsxs)("div",{ref:n,onClick:u,className:`jsx-90f916ff8d57b529 relative mb-5 md:mb-6 ${r&&"default"===q?"cursor-pointer hover:scale-105 transition-transform duration-300":""} ${l?"avatar-rotating":""}`,children:[j&&r&&"default"===q&&(0,b.jsx)("div",{style:{animation:"tooltip-fade 2s ease-in-out forwards"},className:"jsx-90f916ff8d57b529 absolute -top-16 left-1/2 transform -translate-x-1/2 animate-fade-in",children:(0,b.jsxs)("div",{className:"jsx-90f916ff8d57b529 bg-gray-800/45 dark:bg-gray-200/45 backdrop-blur-sm text-white/50 dark:text-gray-900/50 px-4 py-2 rounded-2xl relative whitespace-nowrap text-sm",children:["点我开启博客世界！",(0,b.jsx)("div",{className:"jsx-90f916ff8d57b529 absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-0 h-0 arrow-tooltip"})]})}),a?.avatar?(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.avatar),alt:a.name||"头像",style:{boxShadow:t()},className:`jsx-90f916ff8d57b529 w-16 md:w-24 h-16 md:h-24 ${s()} object-cover`}):(0,b.jsx)("div",{style:{boxShadow:t()},className:`jsx-90f916ff8d57b529 w-16 md:w-24 h-16 md:h-24 ${s()} bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl md:text-4xl font-bold`,children:a?.name?.[0]||"U"})]}),(0,b.jsx)("h1",{className:"jsx-90f916ff8d57b529 text-2xl md:text-4xl font-bold text-text-primary mb-1.5 md:mb-2",children:i.siteTitle||a?.name||""}),a?.title&&(0,b.jsx)("p",{className:"jsx-90f916ff8d57b529 text-base md:text-xl text-text-secondary mb-2.5 md:mb-4",children:a.title}),a?.bio&&(0,b.jsx)("p",{className:"jsx-90f916ff8d57b529 text-sm md:text-lg text-text-secondary max-w-md md:max-w-2xl text-center mb-2.5 md:mb-4",children:a.bio}),(0,b.jsxs)("div",{className:"jsx-90f916ff8d57b529 flex items-center gap-3 md:gap-4 text-xs md:text-sm text-text-tertiary",children:[a?.location&&(0,b.jsxs)("div",{className:"jsx-90f916ff8d57b529 flex items-center gap-1",children:[(0,b.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-90f916ff8d57b529 w-3 md:w-4 h-3 md:h-4",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",className:"jsx-90f916ff8d57b529"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-90f916ff8d57b529"})]}),(0,b.jsx)("span",{className:"jsx-90f916ff8d57b529",children:a.location})]}),a?.website&&(0,b.jsxs)("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"jsx-90f916ff8d57b529 flex items-center gap-1 hover:text-primary-500 transition-colors",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-90f916ff8d57b529 w-3 md:w-4 h-3 md:h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9",className:"jsx-90f916ff8d57b529"})}),(0,b.jsx)("span",{className:"jsx-90f916ff8d57b529",children:a.website_title||"个人网站"})]})]})]}),(0,b.jsx)(d.default,{id:"90f916ff8d57b529",children:".arrow-tooltip.jsx-90f916ff8d57b529{filter:opacity();border-top:8px solid #1f293773;border-left:8px solid #0000;border-right:8px solid #0000}.dark .arrow-tooltip.jsx-90f916ff8d57b529{border-top-color:#e5e7eb73}.avatar-rotating.jsx-90f916ff8d57b529 img,.avatar-rotating.jsx-90f916ff8d57b529 div{animation:.5s ease-in-out forwards avatar-rotate}@keyframes avatar-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes blur-fade{0%{-webkit-backdrop-filter:blur();backdrop-filter:blur();opacity:0}50%{opacity:1}to{-webkit-backdrop-filter:blur(30px);backdrop-filter:blur(30px);opacity:1}}@keyframes tooltip-fade{0%{opacity:0;transform:translateY(10px)translate(-50%)}10%{opacity:1;transform:translateY(0)translate(-50%)}90%{opacity:1;transform:translateY(0)translate(-50%)}to{opacity:0;transform:translateY(-10px)translate(-50%)}}"})]})}var i=a.i(46271),j=a.i(62036),k=a.i(70106);let l=(0,k.default)("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),m=(0,k.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),n=(0,k.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),o=(0,k.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),p=(0,k.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var q=a.i(33508),r=a.i(15831);let s={github:l,telegram:n,email:m,gmail:m,qq:o,wechat:o};function t({className:a}){let{socialLinks:d,isLoading:e}=(0,r.useSocialLinks)(),[f,h]=(0,c.useState)({}),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),C=()=>{l(!1),n(null)},D=()=>{t(!1),x(!1),v(null)},E=()=>{z(!1),B(null)},F=async()=>{if(u)try{await navigator.clipboard.writeText(u.account),x(!0),setTimeout(()=>x(!1),2e3)}catch(a){console.error("Failed to copy:",a)}};return e?(0,b.jsx)("div",{className:"text-center py-6 md:py-8",children:(0,b.jsx)("div",{className:"inline-block w-6 md:w-8 h-6 md:h-8 border-3 md:border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--primary-500)"}})}):Array.isArray(d)&&0!==d.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:(0,g.cn)("flex flex-wrap justify-center gap-3 md:gap-6 max-w-4xl mx-auto",a),children:d.slice(0,6).map((a,c)=>{let d,e=s[a.platform.toLowerCase()]||p,j=a.icon&&""!==a.icon.trim()&&!f[a.platform];return(0,b.jsxs)(i.motion.a,{href:a.link||"#",target:a.link?"_blank":"_self",rel:"noopener noreferrer",onClick:b=>{a.qrcode&&""!==a.qrcode.trim()?(b.preventDefault(),n({image:a.qrcode,platform:a.platform}),l(!0)):a.link&&""!==a.link.trim()&&"#"!==a.link?(b.preventDefault(),B({url:a.link,platform:a.platform}),z(!0)):(b.preventDefault(),v({account:a.account,platform:a.platform}),t(!0))},className:"card-glow rounded-lg md:rounded-xl p-3 md:p-4 flex flex-col items-center justify-center gap-2 md:gap-3 group aspect-square cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*c,duration:.3},whileHover:{scale:1.05},children:[(0,b.jsxs)("div",{className:"relative",children:[j?(0,b.jsx)("div",{className:"relative w-5 md:w-8 h-5 md:h-8",children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.icon),alt:a.platform,className:(0,g.cn)("w-5 md:w-8 h-5 md:h-8 object-contain transition-all",(d=a.icon)&&d.toLowerCase().endsWith(".svg")?"icon-themed group-hover:brightness-110":"group-hover:brightness-110"),onError:()=>{var b;return b=a.platform,void h(a=>({...a,[b]:!0}))},loading:"eager"})}):(0,b.jsx)(e,{className:"w-5 md:w-8 h-5 md:h-8 text-primary-500 group-hover:text-primary-600 transition-colors"}),(0,b.jsx)("div",{className:"absolute inset-0 blur-lg md:blur-xl opacity-30 group-hover:opacity-50 transition-opacity",style:{backgroundColor:"var(--primary-500)"}})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xs md:text-sm font-semibold text-text-secondary capitalize",children:a.platform}),(0,b.jsx)("p",{className:"text-[10px] md:text-xs text-text-tertiary mt-0.5 md:mt-1 truncate max-w-[80px] md:max-w-[120px]",children:a.account})]})]},`${a.platform}-${c}`)})}),(0,b.jsx)(j.AnimatePresence,{children:k&&m&&(0,b.jsx)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:C,children:(0,b.jsxs)(i.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.15},className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:C,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(q.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:m.platform}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl inline-block",children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(m.image),alt:`${m.platform} QR Code`,className:"w-64 h-64 object-contain"})}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"扫描二维码添加联系方式"})]})]})})}),(0,b.jsx)(j.AnimatePresence,{children:o&&u&&(0,b.jsx)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:D,children:(0,b.jsxs)(i.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.15},className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:D,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(q.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:u.platform}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl mb-4",children:(0,b.jsx)("p",{className:"text-lg font-mono text-gray-900 dark:text-white break-all",children:u.account})}),(0,b.jsx)("button",{onClick:F,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${w?"bg-green-500 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`,children:w?"✓ 已复制":"复制账号"})]})]})})}),(0,b.jsx)(j.AnimatePresence,{children:y&&A&&(0,b.jsx)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:E,children:(0,b.jsxs)(i.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.15},className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:E,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(q.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:A.platform}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"是否跳转到以下链接？"}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-xl mb-4",children:(0,b.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white break-all",children:A.url})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:E,className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-white",children:"取消"}),(0,b.jsx)("button",{onClick:()=>{A&&window.open(A.url,"_blank","noopener,noreferrer"),E()},className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors bg-primary-500 hover:bg-primary-600 text-white",children:"确认跳转"})]})]})]})})})]}):null}var u=a.i(52495),v=a.i(21374),w=a.i(19032),x=a.i(32790),y=a.i(30230);function z({site:a,index:c,onSiteClick:d}){return(0,b.jsx)(i.motion.button,{onClick:()=>d(a),className:"group block p-3 bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer text-left w-full",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.02*c},children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md overflow-hidden flex items-center justify-center",children:a.logo?(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.logo),alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-semibold text-base shadow-sm",children:a.name[0]})}),(0,b.jsxs)("div",{className:"relative flex flex-col items-center mb-1",children:[(0,b.jsx)("h3",{className:"font-medium text-xs text-text-primary group-hover:text-primary-500 transition-colors",children:a.name}),(0,b.jsx)(u.ExternalLink,{className:"w-3 h-3 text-primary-500 opacity-0 group-hover:opacity-100 transition-opacity absolute -right-4 top-1/2 transform -translate-y-1/2"})]}),a.description&&(0,b.jsx)("p",{className:"text-[10px] text-text-tertiary line-clamp-2 text-center leading-relaxed",children:a.description})]})})}function A({searchQuery:a=""}){let{settings:d}=(0,f.useSettings)(),[e,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),o="default"===(d.themeType||"default");(0,c.useEffect)(()=>{p()},[]);let p=async()=>{try{let a=await (0,w.getSitesGroupedByCategory)();a.success&&a.data&&h(a.data)}catch(a){console.error("Failed to fetch navigation data:",a),h({showRecommended:!1,recommended:[],categories:[]})}finally{j(!1)}},q=a=>{n(a),l(!0)},r=b=>{if(!a.trim())return b;let c=a.toLowerCase();return b.filter(a=>{let b=a.name.toLowerCase().includes(c),d=a.description?.toLowerCase().includes(c);return b||d})};if(i)return(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)(y.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:[...Array(10)].map((a,c)=>(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)("div",{className:"p-3 bg-bg-secondary rounded-lg shadow-sm border border-border-primary animate-pulse",children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md bg-bg-tertiary"}),(0,b.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-16 mb-1"}),(0,b.jsx)("div",{className:"h-2 bg-bg-tertiary rounded w-20"})]})})},c))})});if(!e)return null;let s=r(e.recommended),t=e.categories.map(a=>({...a,sites:r(a.sites)})).filter(a=>a.sites.length>0),u=s.length>0||t.length>0,A=a.trim()&&u,B=a.trim()&&!u,C=[];return A&&C.push((0,b.jsx)("div",{className:"mb-4 p-3 bg-blue-50/50 rounded-lg border border-blue-200/50",children:(0,b.jsxs)("span",{className:"text-sm text-blue-700",children:["搜索结果: 找到 ",s.length+t.reduce((a,b)=>a+b.sites.length,0)," 个相关网站",(0,b.jsxs)("span",{className:"font-medium ml-1",children:['"',a,'"']})]})},"search-results")),B&&C.push((0,b.jsx)("div",{className:"mb-4 p-3 bg-gray-50/50 rounded-lg border border-gray-200/50 text-center",children:(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:['没有找到包含 "',a,'" 的网站']})},"no-results")),e.showRecommended&&s.length>0&&C.push((0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:`flex items-center gap-1.5 mb-4 ${o?"hidden md:hidden":""}`,children:[(0,b.jsx)(v.Star,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,b.jsx)("h2",{className:"text-lg font-bold text-text-primary",children:"导航推荐"})]}),(0,b.jsx)(y.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:s.map((a,c)=>(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(z,{site:a,index:c,onSiteClick:q})},`recommended-${a.id}`))})]},"recommended-section")),t.forEach(a=>{C.push((0,b.jsxs)("div",{className:"mb-8 last:mb-0",children:[(0,b.jsxs)("div",{className:`flex items-center gap-1.5 mb-4 ${o?"hidden md:hidden":""}`,children:[a.category.icon&&(0,b.jsx)("span",{className:"text-lg",children:a.category.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-text-primary",children:a.category.name}),a.category.description&&(0,b.jsx)("p",{className:"text-xs text-text-secondary mt-0.5",children:a.category.description})]})]}),(0,b.jsx)(y.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:a.sites.map((c,d)=>(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(z,{site:c,index:d,onSiteClick:q})},`site-${a.category.id}-${c.id}`))})]},`category-${a.category.id}`))}),e.showRecommended||0!==e.categories.length||C.push((0,b.jsx)("div",{className:"text-center py-12 text-text-tertiary",children:"暂无导航数据"},"empty-state")),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:C}),(0,b.jsx)(x.default,{isOpen:k,onClose:()=>{l(!1),setTimeout(()=>{n(null)},300)},site:m,logoUrl:m?.logo?(0,g.getFileUrl)(m.logo):void 0})]})}var B=a.i(41710),C=a.i(1239),D=a.i(50944),E=a.i(62180),F=a.i(58348),G=a.i(5276),H=a.i(54897),I=a.i(7222),J=a.i(52825),K=a.i(99209);let L=(0,g.getApiBaseUrl)(),M=a=>{let b=new Date(a),c=b.getFullYear(),d=String(b.getMonth()+1).padStart(2,"0"),e=String(b.getDate()).padStart(2,"0"),f=String(b.getHours()).padStart(2,"0"),g=String(b.getMinutes()).padStart(2,"0");return`${c}-${d}-${e} ${f}:${g}`},N=(a,b)=>a.length<=b?a:a.substring(0,b)+"...",O=a=>{if(!a)return"";let b=a;return(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=b.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,"")).replace(/!\[([^\]]*)\]\[([^\]]+)\]/g,"")).replace(/!\[([^\]]+)\]/g,"")).replace(/!\s*\[/g,"")).replace(/```[\s\S]*?```/g,"")).replace(/`([^`]+)`/g,"$1")).replace(/`/g,"")).replace(/^#{1,6}\s+/gm,"")).replace(/\*\*([^\*]+)\*\*/g,"$1")).replace(/__([^_]+)__/g,"$1")).replace(/\*([^\*]+)\*/g,"$1")).replace(/_([^_]+)_/g,"$1")).replace(/~~([^~]+)~~/g,"$1")).replace(/^[\s]*[-*+]\s+/gm,"")).replace(/^[\s]*\d+\.\s+/gm,"")).replace(/^>\s+/gm,"")).replace(/\[([^\]]+)\]\(([^)]+)\)/g,"$1")).replace(/\|.*\|/g,"")).replace(/^\s*[-*_]{3,}\s*$/gm,"")).replace(/\s+/g," ").replace(/\n{3,}/g,"\n\n").replace(/\n\s*\n/g,"\n\n").trim()};function P({searchQuery:a=""}){let d=(0,D.usePathname)();(0,D.useRouter)();let e=!!d&&(0,H.isAdminPage)(d),[f,h]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(1),[p,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,x]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)({}),[V,W]=(0,c.useState)({showNoteTags:!0,showNoteCategories:!0,noteDisplayMode:"modal",noteLayoutColumns:"1",showNoteCover:"true",defaultNoteCover:""}),[X,Y]=(0,c.useState)({type:null,value:null}),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)(!1),af="/"===d,[ag,ah]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=()=>{ah(window.innerWidth>=768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,c.useEffect)(()=>{ai(),aj(),at()},[n,X]);let ai=async()=>{try{let a={is_published:!0,page:n,limit:6};X.type&&X.value&&("tag"===X.type?a.tag=X.value:"category"===X.type&&(a.category=X.value));let b=await w.default.get("/notes",{params:a}),c=b.data?.data,d=Array.isArray(c?.notes)?c.notes:[];h(d),q(c?.pagination?.totalPages||1)}catch(a){console.error("Failed to fetch notes:",a),h([])}finally{m(!1)}},aj=async()=>{try{let a=await w.default.get("/notes/categories/list"),b=a.data?.data;k(Array.isArray(b)?b:[])}catch(a){console.error("Failed to fetch categories:",a),k([])}},ak=async a=>{if("page"===V.noteDisplayMode)window.location.href=`/note/${a.id}`;else try{let b=await w.default.get(`/notes/${a.id}`);if(b.data?.success&&b.data?.data){let c=b.data.data;await al(a.id),c.requiresPassword?(s(c),x(!0)):(s(c),u(!0))}}catch(a){console.error("Failed to fetch note:",a)}},al=async(a,b)=>{try{let c=b?`?password=${encodeURIComponent(b)}`:"",d=await w.default.get(`/notes/${a}/disks${c}`);d.data?.success&&d.data?.data&&aa(d.data.data.length>0)}catch(a){console.error("Failed to check disks:",a),aa(!1)}},am=async a=>{if(a.preventDefault(),r){Q(""),S(!0);try{let a=await w.default.post(`/notes/${r.id}/verify`,{password:z});a.data?.success&&a.data?.data&&(s(a.data.data),x(!1),u(!0),ac(z),await al(r.id,z),A(""))}catch(a){a.response?.status===401?Q("密码错误，请重试"):Q("验证失败，请稍后重试")}finally{S(!1)}}},an=()=>{u(!1),s(null)},ao=a=>{try{return new URL(a).hostname.replace("www.","")}catch{return""}},ap=a=>{let b=ao(a);return[`https://${b}/favicon.ico`,`https://www.${b}/favicon.ico`,`https://icons.duckduckgo.com/ip3/${b}.ico`,`https://favicon.yandex.net/favicon/${b}`][0]},aq=async a=>{if(T[a])return T[a];try{let b=await (0,g.safeFetch)(`/api/metadata?url=${encodeURIComponent(a)}`);if(b.ok){let c=await b.json();return U(b=>({...b,[a]:{title:c.title||ao(a),description:c.description||"点击卡片访问网站",favicon:c.favicon||ap(a),image:c.image||""}})),c}}catch(a){console.error("Failed to fetch URL metadata:",a)}let b={title:ao(a),description:"点击卡片访问网站",favicon:ap(a),image:""};return U(c=>({...c,[a]:b})),b},ar=a=>{af?window.location.href=`/notes?tag=${encodeURIComponent(a)}`:(Y({type:"tag",value:a}),o(1))},as=a=>{af?window.location.href=`/notes?category=${encodeURIComponent(a)}`:(Y({type:"category",value:a}),o(1))},at=async()=>{try{let a=await w.default.get("/settings");if(a.data.success&&a.data.data){let b=a.data.data,c=b.find(a=>"showNoteTags"===a.key),d=b.find(a=>"showNoteCategories"===a.key),e=b.find(a=>"noteDisplayMode"===a.key),f=b.find(a=>"noteLayoutColumns"===a.key),g=b.find(a=>"showNoteCover"===a.key),h=b.find(a=>"defaultNoteCover"===a.key);W({showNoteTags:c?.value!=="false",showNoteCategories:d?.value!=="false",noteDisplayMode:e?.value||"modal",noteLayoutColumns:f?.value||"1",showNoteCover:g?.value||"true",defaultNoteCover:h?.value||""})}}catch(a){console.error("Failed to load settings:",a)}};(0,c.useEffect)(()=>{let a=async()=>{for(let a of f.filter(a=>(a=>{if(!a)return!1;let b=a.trim();return/^https?:\/\/[\w\-\.]+\.[a-z]{2,}(\/\S*)?$/i.test(b)})(a.content)))await aq(a.content.trim())};f.length>0&&a()},[f]);let au=f.filter(b=>{if(!a.trim())return!0;let c=a.toLowerCase(),d=b.title?.toLowerCase().includes(c),e=O(b.content).toLowerCase().includes(c),f=b.category?.toLowerCase().includes(c),g=b.Tags?.some(a=>a.name.toLowerCase().includes(c))||b.tags?.toLowerCase().includes(c);return d||e||f||g}),av=new Map(j.map(a=>[a.name,a])),aw=parseInt(V.noteLayoutColumns)||1,ax=1===aw||(2===aw||3===aw)&&ag,ay=(!!ag||!(aw>=2))&&(!ag||4!==aw),az=(!!ag||!(aw>=2))&&(!ag||4!==aw);if(l)return(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"p-4 bg-bg-secondary/50 rounded-lg",children:[(0,b.jsx)("div",{className:"h-5 w-3/4 bg-bg-tertiary/50 animate-pulse mb-3 rounded"}),(0,b.jsx)("div",{className:"h-4 w-full bg-bg-tertiary/50 animate-pulse mb-2 rounded"}),(0,b.jsx)("div",{className:"h-4 w-2/3 bg-bg-tertiary/50 animate-pulse mb-3 rounded"}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("div",{className:"h-3 w-24 bg-bg-tertiary/50 animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-3 w-16 bg-bg-tertiary/50 animate-pulse rounded"})]})]},a))});if(0===f.length)return null;let aA=a.trim()&&au.length>0,aB=a.trim()&&0===au.length;return(0,b.jsxs)(b.Fragment,{children:[aA&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-blue-50/50 rounded-lg border border-blue-200/50 flex items-center justify-between",children:(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm text-blue-700",children:["搜索结果: 找到 ",au.length," 条相关笔记",(0,b.jsxs)("span",{className:"font-medium ml-1",children:['"',a,'"']})]})})}),aB&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-bg-tertiary/50 rounded-lg border border-border-primary/50 text-center",children:(0,b.jsxs)("span",{className:"text-sm text-text-tertiary",children:['没有找到包含 "',a,'" 的笔记']})}),X.type&&X.value&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-bg-secondary/50 rounded-lg border border-border-primary/20 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm text-text-secondary",children:["当前筛选:",(0,b.jsxs)("span",{className:"font-medium text-text-primary ml-1",children:["tag"===X.type?"标签":"分类",": ",X.value]})]})}),(0,b.jsx)("button",{onClick:()=>{Y({type:null,value:null}),o(1)},className:"text-xs text-text-tertiary hover:text-text-primary transition-colors px-2 py-1 hover:bg-bg-tertiary/50 rounded",children:"清除筛选"})]}),(0,b.jsx)(y.default,{breakpointCols:{default:parseInt(V.noteLayoutColumns)||1,1536:parseInt(V.noteLayoutColumns)||1,1280:4===parseInt(V.noteLayoutColumns)?3:parseInt(V.noteLayoutColumns)||1,1024:parseInt(V.noteLayoutColumns)>=3?2:parseInt(V.noteLayoutColumns)||1,768:parseInt(V.noteLayoutColumns)>1?2:1,640:parseInt(V.noteLayoutColumns)>1?2:1},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:au.map((a,c)=>(0,b.jsx)(i.motion.div,{className:`group block rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border transition-all duration-300 cursor-pointer overflow-hidden mb-3 ${e?"bg-white border-gray-200":"bg-bg-secondary border-border-primary"}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*c},onClick:()=>ak(a),children:ax?(0,b.jsxs)("div",{className:"flex gap-3 items-stretch p-3 h-32",children:[(a.cover_image||V.defaultNoteCover)&&"true"===V.showNoteCover&&(0,b.jsx)("div",{className:"flex-shrink-0 w-26 h-26 rounded-md overflow-hidden bg-bg-tertiary",children:(0,b.jsx)("img",{src:(a.cover_image||V.defaultNoteCover||"").startsWith("http")?a.cover_image||V.defaultNoteCover:`${L}${a.cover_image||V.defaultNoteCover}`,alt:a.title||"封面图",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:a=>{a.target.style.display="none"}})}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col justify-between min-w-0 py-1",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2 mb-1.5",children:[a.title&&(0,b.jsx)("h3",{className:"text-base font-semibold text-text-primary line-clamp-2 flex-1 group-hover:text-primary-500 transition-colors leading-snug",children:a.title}),a.is_pinned&&(0,b.jsx)("div",{className:"flex-shrink-0 px-1.5 py-0.5 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded text-[10px] font-semibold flex items-center gap-0.5",children:(0,b.jsx)(C.Pin,{className:"w-2.5 h-2.5 fill-current"})})]}),az&&(0,b.jsx)("p",{className:"text-xs text-text-secondary line-clamp-2 mb-1.5 leading-relaxed opacity-80",children:a.summary||(a.content?N(O(a.content),60):"暂无内容")}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap text-[10px] mt-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-text-tertiary",children:[(0,b.jsx)(B.Clock,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"text-[10px]",children:M(a.published_at||a.created_at)})]}),ay&&V.showNoteCategories&&a.category&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 bg-primary-100 text-primary-700 rounded-full font-medium cursor-pointer hover:bg-primary-200 transition-colors text-[10px]",onClick:b=>{b.stopPropagation(),as(a.category)},children:[av.get(a.category)?.icon&&(0,b.jsx)("span",{className:"mr-0.5",children:av.get(a.category)?.icon}),a.category]}),ay&&V.showNoteTags&&a.Tags&&a.Tags.length>0&&(0,b.jsxs)(b.Fragment,{children:[a.Tags.slice(0,2).map(a=>(0,b.jsx)("span",{className:"px-1.5 py-0.5 rounded-full font-medium cursor-pointer hover:opacity-80 transition-opacity text-[10px]",style:a.color?{backgroundColor:`${a.color}20`,color:a.color}:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},onClick:b=>{b.stopPropagation(),ar(a.name)},children:a.name},a.id)),a.Tags.length>2&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 rounded-full text-[10px]",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},children:["+",a.Tags.length-2]})]})]})]})]}):(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(a.cover_image||V.defaultNoteCover)&&"true"===V.showNoteCover&&(0,b.jsxs)("div",{className:"relative w-full pt-[100%] overflow-hidden bg-gradient-to-br from-primary-100 to-primary-200 flex-shrink-0",children:[(0,b.jsx)("img",{src:(a.cover_image||V.defaultNoteCover||"").startsWith("http")?a.cover_image||V.defaultNoteCover:`${L}${a.cover_image||V.defaultNoteCover}`,alt:a.title||"封面图",className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:a=>{a.target.style.display="none"}}),a.is_pinned&&(0,b.jsxs)("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-sm rounded-full px-2 py-1 text-[10px] text-white font-semibold flex items-center gap-1",children:[(0,b.jsx)(C.Pin,{className:"w-2.5 h-2.5 fill-current"}),(0,b.jsx)("span",{children:"置顶"})]})]}),(0,b.jsxs)("div",{className:"p-2.5 flex flex-col flex-1 min-h-0",children:[a.title&&(0,b.jsx)("h3",{className:"font-semibold text-base text-text-primary group-hover:text-primary-500 transition-colors line-clamp-2 mb-1.5 leading-snug",children:a.title}),az&&(0,b.jsx)("p",{className:"text-xs text-text-secondary line-clamp-2 leading-relaxed mb-2 opacity-80",children:a.summary||(a.content?N(O(a.content),60):"暂无内容")}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-1.5 text-[10px] mt-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-text-tertiary",children:[(0,b.jsx)(B.Clock,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"text-[10px]",children:M(a.published_at||a.created_at)})]}),ay&&(0,b.jsxs)("div",{className:"flex items-center gap-1 flex-wrap",children:[V.showNoteCategories&&a.category&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 bg-primary-100 text-primary-700 rounded-full font-medium cursor-pointer hover:bg-primary-200 transition-colors text-[10px]",onClick:b=>{b.stopPropagation(),as(a.category)},children:[av.get(a.category)?.icon&&(0,b.jsx)("span",{className:"mr-0.5",children:av.get(a.category)?.icon}),a.category]}),V.showNoteTags&&a.Tags&&a.Tags.length>0&&(0,b.jsxs)(b.Fragment,{children:[a.Tags.slice(0,1).map(a=>(0,b.jsx)("span",{className:"px-1.5 py-0.5 rounded-full font-medium cursor-pointer hover:opacity-80 transition-opacity text-[10px]",style:a.color?{backgroundColor:`${a.color}20`,color:a.color}:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},onClick:b=>{b.stopPropagation(),ar(a.name)},children:a.name},a.id)),a.Tags.length>1&&(0,b.jsxs)("span",{className:"px-1.5 py-0.5 rounded-full text-[10px]",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},children:["+",a.Tags.length-1]})]})]})]})]})]})},a.id))}),p>1&&(0,b.jsxs)("div",{className:"flex justify-center gap-2 pt-6 mt-4",children:[(0,b.jsx)("button",{onClick:()=>o(a=>Math.max(1,a-1)),disabled:1===n,className:"px-3 py-1.5 rounded-lg bg-bg-primary text-text-secondary hover:bg-bg-secondary disabled:opacity-30 disabled:cursor-not-allowed transition-all text-sm",children:"上一页"}),(0,b.jsx)("div",{className:"flex items-center gap-1.5",children:Array.from({length:Math.min(p,5)},(a,c)=>{let d,e=(d=p<=5||n<=3?c+1:n>=p-2?p-4+c:n-2+c)===n;return(0,b.jsx)("button",{onClick:()=>o(d),className:"w-8 h-8 rounded-lg transition-all text-sm "+(e?"bg-primary-500 text-white":"bg-bg-primary text-text-secondary hover:bg-bg-secondary"),children:d},d)})}),(0,b.jsx)("button",{onClick:()=>o(a=>Math.min(p,a+1)),disabled:n===p,className:"px-3 py-1.5 rounded-lg bg-bg-primary text-text-secondary hover:bg-bg-secondary disabled:opacity-30 disabled:cursor-not-allowed transition-all text-sm",children:"下一页"})]}),v&&r&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:(0,b.jsxs)(i.motion.div,{className:"bg-bg-secondary rounded-2xl max-w-md w-full p-6 border border-border-primary shadow-2xl",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-text-primary mb-2",children:"此笔记需要密码"}),(0,b.jsx)("p",{className:"text-sm text-text-secondary",children:"请输入访问密码以查看内容"})]}),(0,b.jsxs)("form",{onSubmit:am,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"password",name:"note-access-password",value:z,onChange:a=>A(a.target.value),placeholder:"请输入密码",className:"w-full px-4 py-3 border border-border-primary rounded-lg bg-bg-primary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!0,autoComplete:"off",disabled:R}),P&&(0,b.jsx)("p",{className:"mt-2 text-sm text-red-600",children:P})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{x(!1),s(null),A(""),Q("")},className:"flex-1 px-4 py-3 bg-bg-tertiary text-text-secondary rounded-lg hover:bg-bg-tertiary/80 transition-colors",disabled:R,children:"取消"}),(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:R||!z,children:R?"验证中...":"确认"})]})]})]})}),t&&r&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:(0,b.jsxs)(i.motion.div,{className:"bg-bg-primary rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col border border-border-primary",style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.15)"},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:[(0,b.jsxs)("div",{className:"bg-bg-tertiary px-5 pt-6 pb-4 flex items-center justify-between sticky top-0 z-50",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-text-primary truncate",children:r.title}),"original"===r.source_type&&(0,b.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700/50 rounded text-[10px] font-medium flex-shrink-0",children:[(0,b.jsx)("svg",{className:"w-2.5 h-2.5 text-green-600 dark:text-green-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("span",{className:"text-green-700 dark:text-green-300",children:"原创"})]}),"reprint"===r.source_type&&(0,b.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700/50 rounded text-[10px] font-medium flex-shrink-0",children:[(0,b.jsx)("svg",{className:"w-2.5 h-2.5 text-orange-600 dark:text-orange-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),(0,b.jsx)("span",{className:"text-orange-700 dark:text-orange-300",children:"转载"})]}),r.content&&r.content.includes("[网盘资源]")&&(0,b.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700/50 rounded text-[10px] font-medium flex-shrink-0",children:[(0,b.jsx)("svg",{className:"w-2.5 h-2.5 text-blue-600 dark:text-blue-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,b.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"含网盘资源"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-text-tertiary",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(B.Clock,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:M(r.published_at||r.created_at)})]}),V.showNoteCategories&&r.category&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-700 rounded-full font-medium cursor-pointer hover:bg-primary-200 transition-colors",onClick:a=>{a.stopPropagation(),as(r.category),an()},children:r.category}),V.showNoteTags&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[r.Tags&&r.Tags.length>0&&(0,b.jsx)(b.Fragment,{children:r.Tags.map(a=>(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full font-medium cursor-pointer hover:bg-gray-200 transition-colors",style:a.color?{backgroundColor:`${a.color}20`,color:a.color}:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},onClick:b=>{b.stopPropagation(),ar(a.name),an()},children:a.name},a.id))}),(!r.Tags||0===r.Tags.length)&&r.tags&&(0,b.jsx)(b.Fragment,{children:r.tags.split(",").map((a,c)=>(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full font-medium cursor-pointer hover:bg-gray-200 transition-colors",style:{backgroundColor:"rgb(242 242 242)",color:"rgb(112 112 112)"},onClick:b=>{b.stopPropagation(),ar(a.trim()),an()},children:a.trim()},c))})]})]})]}),(0,b.jsx)("button",{onClick:an,className:"w-9 h-9 flex items-center justify-center rounded-full border-2 border-border-primary text-text-tertiary hover:text-text-primary hover:border-border-secondary hover:bg-bg-tertiary/50 transition-all flex-shrink-0 ml-3",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-5 bg-bg-secondary hide-scrollbar",children:(0,b.jsxs)("div",{className:"prose prose-lg max-w-none dark:prose-invert prose-headings:text-text-primary prose-headings:font-bold prose-h1:text-2xl prose-h1:mb-4 prose-h2:text-xl prose-h2:mb-3 prose-h2:mt-6 prose-h3:text-lg prose-h3:mb-2 prose-h3:mt-4 prose-h4:text-base prose-h4:mb-2 prose-h4:mt-3 prose-p:text-text-primary prose-p:leading-relaxed prose-p:mb-4 prose-a:text-primary-600 dark:prose-a:text-primary-400 prose-a:no-underline hover:prose-a:underline prose-blockquote:border-l-4 prose-blockquote:border-primary-500 prose-blockquote:bg-bg-tertiary/30 prose-blockquote:py-2 prose-blockquote:px-4 prose-blockquote:rounded-r-lg prose-blockquote:not-italic prose-strong:text-text-primary prose-strong:font-semibold prose-em:text-text-primary prose-em:italic prose-ul:list-disc prose-ul:pl-6 prose-ul:mb-4 prose-ol:list-decimal prose-ol:pl-6 prose-ol:mb-4 prose-li:text-text-primary prose-li:mb-1 prose-table:w-full prose-table:border-collapse prose-table:my-4 prose-th:bg-bg-tertiary prose-th:text-text-primary prose-th:font-semibold prose-th:p-2 prose-th:border prose-th:border-border-primary prose-td:p-2 prose-td:border prose-td:border-border-primary prose-td:text-text-primary prose-img:rounded-lg prose-img:shadow-md prose-img:mx-auto prose-hr:border-hr-color prose-hr:my-6 whitespace-normal ",children:[(0,b.jsx)(E.default,{remarkPlugins:[F.default],rehypePlugins:[G.default],components:{img:({src:a,alt:c,...d})=>{let e=a;return"string"==typeof a&&a.startsWith("/uploads/")&&(e=`${L}${a}`),(0,b.jsx)("div",{className:"flex justify-center my-4",children:(0,b.jsx)("img",{src:e,alt:c||"",className:"max-w-full h-auto rounded-lg shadow-md transition-all duration-300 hover:shadow-lg hover:scale-[1.02]",style:{maxHeight:"400px",objectFit:"contain"},loading:"lazy",onError:a=>{a.target.style.display="none"},...d})})},iframe:({node:a,...c})=>(0,b.jsx)("div",{className:"my-4 rounded-lg overflow-hidden shadow-md",children:(0,b.jsx)("iframe",{className:"w-full aspect-video",...c})}),pre:({node:a,children:d,...e})=>{let f=c.default.Children.toArray(d).join("");return(0,b.jsxs)("div",{className:"relative my-4 group",children:[(0,b.jsx)("pre",{className:"bg-code-block-bg text-code-block-text p-3 rounded-lg overflow-x-auto shadow-sm font-mono text-sm leading-relaxed",...e,children:d}),(0,b.jsx)(K.default,{text:f})]})},code:({node:a,inline:c,className:d,children:e,...f})=>c?(0,b.jsx)("code",{...f,children:e}):(0,b.jsx)("code",{className:`text-sm font-mono ${d||""}`,...f,children:e}),table:({node:a,children:c,...d})=>(0,b.jsx)("div",{className:"overflow-x-auto my-4 rounded shadow-sm",children:(0,b.jsx)("table",{className:"w-full min-w-full",...d,children:c})}),blockquote:({node:a,children:c,...d})=>(0,b.jsx)("blockquote",{className:"border-l-4 border-primary-500 bg-bg-tertiary/30 py-2 px-4 rounded-r-lg my-4 text-text-primary italic",...d,children:c}),a:({node:a,href:c,children:d,...e})=>(0,b.jsx)("a",{href:c,className:"text-primary-600 dark:text-primary-400 no-underline hover:underline transition-colors duration-200 font-medium",target:"_blank",rel:"noopener noreferrer",...e,children:d}),p:({node:a,children:d,...e})=>c.default.Children.toArray(d).some(a=>"string"==typeof a&&a.includes("\n"))?(0,b.jsx)("p",{className:"text-text-primary leading-relaxed mb-4 whitespace-normal break-words",...e,children:c.default.Children.map(d,(a,d)=>{if("string"==typeof a){let e=a.split("\n");return(0,b.jsx)(c.default.Fragment,{children:e.map((a,d)=>(0,b.jsxs)(c.default.Fragment,{children:[a,d<e.length-1&&(0,b.jsx)("br",{})]},d))},d)}return a})}):(0,b.jsx)("p",{className:"text-text-primary leading-relaxed mb-4 whitespace-normal break-words",...e,children:d})},children:r.content}),"reprint"===r.source_type&&r.source_text&&(0,b.jsx)("div",{className:"mt-8 pt-6 border-t border-dashed border-border-primary/15",children:(0,b.jsxs)("div",{className:"text-sm text-text-tertiary",children:[(0,b.jsx)("span",{className:"font-medium",children:"文章来源："}),(0,b.jsx)("span",{className:"ml-1",children:r.source_text})]})})]})}),(0,b.jsxs)("div",{className:"bg-bg-tertiary px-5 py-4 flex justify-between items-center sticky bottom-0 z-50",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[_&&(0,b.jsxs)("button",{onClick:()=>$(!0),className:"px-4 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),"下载资源"]}),(0,b.jsxs)("button",{onClick:()=>ae(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-sm rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"分享笔记"]})]}),(0,b.jsx)("button",{onClick:an,className:"px-4 py-2 bg-primary-500 text-white text-sm rounded-lg hover:bg-primary-600 transition-all",children:"关闭"})]})]})}),r&&(0,b.jsx)(I.default,{isOpen:Z,onClose:()=>$(!1),noteId:r.id,isAdmin:!1,password:ab}),ad&&r&&(0,b.jsx)(J.default,{noteId:r.id,title:r.title,password:r.password,onClose:()=>ae(!1)})]})}var Q=a.i(78987),R=a.i(68568);function S({searchQuery:a=""}){let[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,j]=(0,c.useState)(null);(0,c.useEffect)(()=>{k()},[]);let k=async()=>{try{let a=await (0,w.getServices)({});if(a&&a.success&&a.data){let b=a.data.services||[];e(b)}else a&&Array.isArray(a)?e(a):(console.warn("Unexpected services response format:",a),e([]))}catch(a){console.error("Failed to fetch services:",a),e([])}finally{g(!1)}},l=d.filter(b=>{if(!a.trim())return!0;let c=a.toLowerCase(),d=b.name?.toLowerCase().includes(c),e=b.description?.toLowerCase().includes(c),f=b.price?.toLowerCase().includes(c);return d||e||f});return f?(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)(y.default,{breakpointCols:{default:6,1536:6,1280:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:[...Array(12)].map((a,c)=>(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-xl shadow-sm border border-border-primary overflow-hidden animate-pulse",children:[(0,b.jsx)("div",{className:"aspect-square bg-bg-tertiary"}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-3/4 mb-2"}),(0,b.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,b.jsx)("div",{className:"h-5 bg-bg-tertiary rounded w-16"}),(0,b.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-12"})]})]})]})},c))})}):0===l.length?(0,b.jsxs)("div",{className:"bg-bg-secondary/40 rounded-2xl p-8 text-center",children:[(0,b.jsx)(Q.ShoppingBag,{className:"w-12 h-12 text-text-tertiary opacity-30 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-text-secondary",children:"暂无服务"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)(y.default,{breakpointCols:{default:6,1536:6,1280:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:l.map((a,c)=>(0,b.jsxs)(i.motion.div,{onClick:()=>{j(a)},className:"group bg-bg-secondary rounded-xl shadow-sm hover:shadow-xl hover:-translate-y-1 border border-border-primary transition-all duration-300 cursor-pointer overflow-hidden mb-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.03*c},children:[(0,b.jsxs)("div",{className:"relative aspect-square bg-bg-tertiary overflow-hidden",children:[a.cover_image?(0,b.jsx)("img",{src:(0,w.getImageUrl)(a.cover_image),alt:a.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:a=>{a.target.style.display="none"}}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(Q.ShoppingBag,{className:"w-16 h-16 text-text-tertiary opacity-30"})}),a.is_recommended&&(0,b.jsx)("div",{className:"absolute top-2 right-2 px-2 py-1 rounded text-xs font-semibold",style:{background:"linear-gradient(to right, var(--accent-gradient-from), var(--accent-gradient-to))",color:"var(--accent-text)"},children:"推荐"})]}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("h3",{className:"text-base font-semibold text-text-primary group-hover:text-primary-500 transition-colors mb-2 line-clamp-1",children:a.name}),(0,b.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,b.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:[(0,b.jsx)("span",{className:"text-base font-normal mr-0.5",children:"¥"}),a.price]}),a.Category&&(0,b.jsxs)("span",{className:"text-xs text-text-tertiary px-2 py-0.5 bg-bg-tertiary rounded",children:[a.Category.icon&&(0,b.jsx)("span",{className:"mr-1",children:a.Category.icon}),a.Category.name]})]})]})]},a.id))})}),(0,b.jsx)(R.default,{service:h,isOpen:!!h,onClose:()=>{j(null)}})]})}var T=a.i(38632),U=a.i(43108),V=a.i(38078);function W({searchQuery:a=""}){let[d,e]=(0,c.useState)([]),[f,h]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null);(0,c.useEffect)(()=>{n()},[]);let n=async()=>{try{let a=await (0,w.getGalleries)({});if(a.success&&a.data){let b=a.data.slice(0,12);e(b)}else console.warn("Unexpected galleries response format:",a),e([])}catch(a){console.error("Failed to fetch galleries:",a),e([])}finally{h(!1)}},o=d.filter(b=>{if(!a.trim())return!0;let c=a.toLowerCase(),d=b.title?.toLowerCase().includes(c),e=b.description?.toLowerCase().includes(c);return d||e});return f?(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)(y.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:[...Array(10)].map((a,c)=>(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-sm border border-border-primary overflow-hidden animate-pulse",children:[(0,b.jsx)("div",{className:"w-full pt-[100%] bg-bg-tertiary"}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-full"})]})]})},c))})}):0===o.length?(0,b.jsxs)("div",{className:"bg-bg-secondary/40 rounded-2xl p-8 text-center",children:[(0,b.jsx)(T.Image,{className:"w-12 h-12 text-text-tertiary opacity-30 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-text-secondary",children:"暂无图册"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-bg-secondary/40 rounded-2xl p-5",children:(0,b.jsx)(y.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:o.map((a,c)=>(0,b.jsxs)(i.motion.div,{onClick:()=>{m(a.id),k(!0)},className:"group block bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer overflow-hidden mb-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.03*c},children:[(0,b.jsxs)("div",{className:"relative w-full pt-[100%] bg-gradient-to-br from-primary-100 to-primary-200 overflow-hidden",children:[a.cover_image?(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.cover_image),alt:a.title,className:`absolute inset-0 w-full h-full object-cover transition-transform duration-300 ${a.hasPassword?"blur-xl scale-110":"group-hover:scale-105"}`,draggable:!1,onContextMenu:a=>a.preventDefault(),loading:"lazy"}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(T.Image,{className:"w-12 h-12 text-primary-400"})}),a.hasPassword&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"bg-black/60 backdrop-blur-sm rounded-full p-3",children:(0,b.jsx)(U.Lock,{className:"w-6 h-6 text-white"})})}),(0,b.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-white font-medium",children:[a.image_count," 张"]})]}),(0,b.jsxs)("div",{className:"p-3 text-left",children:[(0,b.jsx)("h3",{className:"font-medium text-sm text-text-primary group-hover:text-primary-500 transition-colors line-clamp-1 mb-1",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-xs text-text-tertiary line-clamp-2 leading-relaxed",children:a.description})]})]},a.id))})}),j&&l&&(0,b.jsx)(V.default,{galleryId:l,isOpen:j,onClose:()=>{k(!1),setTimeout(()=>{m(null)},300)}})]})}var X=a.i(13749),Y=a.i(50522),Z=a.i(87532);function $({tabs:a,defaultTab:d,onSearch:e,searchPlaceholder:g="搜索内容...",onTabChange:h,externalSearchQuery:k=""}){let{settings:l}=(0,f.useSettings)(),[m,n]=(0,c.useState)(d||a[0]?.key||""),[o,p]=(0,c.useState)(0),[r,s]=(0,c.useState)(0),[t,u]=(0,c.useState)(""),v=(0,c.useRef)(null),w=a[0],x=a[1],y=2===a.length,z=l.themeType||"default";(0,c.useEffect)(()=>{d&&n(d)},[d]),(0,c.useEffect)(()=>{h&&h(m)},[m]),(0,c.useEffect)(()=>{u(k)},[k]);let A=a=>{let b=a.target.value;u(b),e&&e(b,m)},B=()=>{u(""),e&&e("",m)};return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:`flex flex-col md:flex-row items-center md:items-center md:justify-between gap-4 ${"default"===z?"mb-0 md:mb-6":"mb-6"}`,children:[!y&&e?(0,b.jsxs)("div",{className:"relative w-72 flex-shrink-0 hidden md:block",children:[(0,b.jsx)(Z.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary"}),(0,b.jsx)("input",{type:"text",placeholder:g,value:t,onChange:A,className:"w-full pl-10 pr-10 py-2 bg-bg-secondary border border-border-primary rounded-xl text-sm text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off"}),t&&(0,b.jsx)("button",{type:"button",onClick:B,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors","aria-label":"清空搜索",children:(0,b.jsx)(q.X,{className:"w-4 h-4"})})]}):(0,b.jsxs)("div",{className:"flex items-center gap-3 mx-auto md:mx-0 md:flex-shrink-0",children:[y&&(0,b.jsx)("button",{onClick:()=>{y&&m===x?.key&&n(w.key)},disabled:m===w.key,className:`p-1.5 rounded-lg transition-all ${m===w.key?"opacity-20 cursor-not-allowed":"hover:bg-bg-secondary opacity-60 hover:opacity-100"}`,"aria-label":"上一页",children:(0,b.jsx)(X.ChevronLeft,{className:"w-5 h-5 text-text-primary"})}),(0,b.jsxs)("div",{className:"flex gap-2 bg-bg-secondary rounded-full p-1 border border-border-primary",children:[(0,b.jsx)("button",{onClick:()=>n(w.key),className:`px-5 py-2 rounded-full text-xs font-medium transition-all ${m===w.key?"bg-primary-500 text-white":"text-text-secondary hover:text-text-primary"}`,children:w.label}),x&&(0,b.jsx)("button",{onClick:()=>n(x.key),className:`px-5 py-2 rounded-full text-xs font-medium transition-all ${m===x.key?"bg-primary-500 text-white":"text-text-secondary hover:text-text-primary"}`,children:x.label})]}),y&&(0,b.jsx)("button",{onClick:()=>{y&&m===w.key&&x&&n(x.key)},disabled:m===x?.key,className:`p-1.5 rounded-lg transition-all ${m===x?.key?"opacity-20 cursor-not-allowed":"hover:bg-bg-secondary opacity-60 hover:opacity-100"}`,"aria-label":"下一页",children:(0,b.jsx)(Y.ChevronRight,{className:"w-5 h-5 text-text-primary"})})]}),y&&e&&(0,b.jsxs)("div",{className:"relative w-72 flex-shrink-0 hidden md:block",children:[(0,b.jsx)(Z.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-tertiary"}),(0,b.jsx)("input",{type:"text",placeholder:g,value:t,onChange:A,className:"w-full pl-10 pr-10 py-2 bg-bg-secondary border border-border-primary rounded-xl text-sm text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off"}),t&&(0,b.jsx)("button",{type:"button",onClick:B,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors","aria-label":"清空搜索",children:(0,b.jsx)(q.X,{className:"w-4 h-4"})})]})]}),(0,b.jsx)("div",{ref:v,className:"relative overflow-hidden",onTouchStart:a=>{p(a.targetTouches[0].clientX)},onTouchMove:a=>{s(a.targetTouches[0].clientX)},onTouchEnd:()=>{if(!o||!r||!y)return;let a=o-r;a>50&&m===w.key&&x&&n(x.key),a<-50&&m===x?.key&&w&&n(w.key),p(0),s(0)},children:(0,b.jsx)(j.AnimatePresence,{mode:"wait",children:m===w.key?(0,b.jsx)(i.motion.div,{initial:{opacity:0,x:-15},animate:{opacity:1,x:0},exit:{opacity:0,x:15},transition:{duration:.2},children:w.content},w.key):x&&m===x.key?(0,b.jsx)(i.motion.div,{initial:{opacity:0,x:15},animate:{opacity:1,x:0},exit:{opacity:0,x:-15},transition:{duration:.2},children:x.content},x.key):null})}),y&&(0,b.jsxs)("div",{className:"flex justify-center gap-1.5 mt-5",children:[(0,b.jsx)("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${m===w.key?"bg-primary-500 w-6":"bg-border-secondary"}`}),(0,b.jsx)("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${m===x?.key?"bg-primary-500 w-6":"bg-border-secondary"}`})]})]})}var _=a.i(11295);function aa(){let[a,d]=(0,c.useState)([]),[e,g]=(0,c.useState)(0),[h,i]=(0,c.useState)(!0),{settings:j,isLoading:k}=(0,f.useSettings)();return((0,c.useEffect)(()=>{if(!k){try{let a=JSON.parse(j.blogCarouselImages||"[]");d(a.filter(a=>a.url))}catch{d([])}i(!1)}},[j.blogCarouselImages,k]),(0,c.useEffect)(()=>{if(a.length>1){let b=null,c=setTimeout(()=>{g(1),b=setInterval(()=>{g(b=>(b+1)%a.length)},1500)},1500);return()=>{clearTimeout(c),b&&clearInterval(b)}}},[a.length]),h)?(0,b.jsx)("div",{className:"w-full aspect-video md:h-96 md:aspect-auto bg-bg-tertiary animate-pulse rounded-lg"}):0===a.length?(0,b.jsx)("div",{className:"relative w-full overflow-hidden rounded-lg shadow-sm bg-bg-secondary flex items-center justify-center aspect-video md:h-96 md:aspect-auto",children:(0,b.jsx)("p",{className:"text-text-tertiary text-sm",children:"暂无轮播图，请在后台上传"})}):(0,b.jsxs)("div",{className:"relative w-full overflow-hidden rounded-lg shadow-sm aspect-video md:h-96 md:aspect-auto",children:[(0,b.jsx)("div",{className:"relative w-full h-full",children:a.map((a,c)=>{let d=(0,b.jsx)("img",{src:(0,w.getImageUrl)(a.url),alt:a.alt,className:"w-full h-full object-cover",onError:a=>{a.target.style.display="none"}});return(0,b.jsx)("div",{className:`absolute inset-0 transition-opacity duration-500 ease-in-out ${c===e?"opacity-100":"opacity-0"}`,children:a.link?(0,b.jsx)("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:d}):d},c)})}),a.length>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{g(b=>(b-1+a.length)%a.length)},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-primary-500/50 hover:bg-primary-600 text-white p-2 rounded-full transition-colors duration-200",children:(0,b.jsx)(X.ChevronLeft,{className:"h-5 w-5"})}),(0,b.jsx)("button",{onClick:()=>{g(b=>(b+1)%a.length)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-primary-500/50 hover:bg-primary-600 text-white p-2 rounded-full transition-colors duration-200",children:(0,b.jsx)(Y.ChevronRight,{className:"h-5 w-5"})}),(0,b.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:a.map((a,c)=>(0,b.jsx)("button",{onClick:()=>{g(c)},className:`h-1 rounded-full transition-all duration-300 ${c===e?"w-8 bg-white shadow-md":"w-4 bg-white/40 hover:bg-white/60"}`},c))})]})]})}function ab(){let{profile:a,isLoading:d}=(0,e.useProfile)(),{profileSocialLinks:h}=(0,r.useSocialLinks)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),{settings:z}=(0,f.useSettings)(),A=z.avatarShape||"circle",B=()=>"rounded"===A?"rounded-xl":"rounded-full",C=()=>{j(!1),setTimeout(()=>l(null),300)},D=()=>{n(!1),t(!1),setTimeout(()=>p(null),300)},E=()=>{v(!1),setTimeout(()=>y(null),300)},F=async()=>{if(o)try{await navigator.clipboard.writeText(o.account),t(!0),setTimeout(()=>t(!1),2e3)}catch(a){console.error("Failed to copy:",a)}};return d?(0,b.jsx)("div",{className:"bg-bg-secondary rounded-lg shadow-sm p-6 border border-border-primary h-full",children:(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-bg-tertiary rounded-full animate-pulse"}),(0,b.jsxs)("div",{className:"w-full space-y-2",children:[(0,b.jsx)("div",{className:"h-6 w-32 bg-bg-tertiary animate-pulse mx-auto"}),(0,b.jsx)("div",{className:"h-4 w-48 bg-bg-tertiary animate-pulse mx-auto"})]})]})}):a?(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg transition-all duration-300 p-6 border border-border-primary h-full flex flex-col justify-center",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:a.avatar?(0,b.jsx)("img",{src:(0,w.getImageUrl)(a.avatar),alt:a.name||"头像",className:`w-20 h-20 ${B()} object-cover shadow-lg`,style:{boxShadow:"0 3px 10px 0 rgba(0, 0, 0, 0.12)"}}):(0,b.jsx)("div",{className:`w-20 h-20 ${B()} bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl font-bold shadow-lg`,style:{boxShadow:"0 3px 10px 0 rgba(0, 0, 0, 0.12)"},children:a.name?.[0]||"X"})}),(0,b.jsxs)("div",{className:"text-center mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-text-primary",children:z.siteTitle||a.name||""}),a.title&&(0,b.jsx)("p",{className:"text-sm text-text-secondary mt-2",children:a.title}),a.bio&&(0,b.jsx)("p",{className:"text-sm text-text-tertiary mt-3 line-clamp-3",children:a.bio})]}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-3 mb-4",children:[a.location&&(0,b.jsxs)("div",{className:"flex items-center text-xs text-text-tertiary",children:[(0,b.jsxs)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.location]},"location"),a.email&&(0,b.jsxs)("div",{className:"flex items-center text-xs text-text-tertiary",children:[(0,b.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.email]},"email"),a.website&&(0,b.jsxs)("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-xs text-primary-600 hover:text-primary-700 transition-colors",children:[(0,b.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),a.website_title||"个人网站"]},"website")].filter(Boolean)}),h.length>0&&(0,b.jsx)("div",{className:`flex items-center pt-5 border-t border-border-primary/20 px-8 ${1===h.length?"justify-center":"justify-between"}`,children:h.map((a,c)=>(0,b.jsx)("a",{href:a.link||"#",target:a.link?"_blank":"_self",rel:"noopener noreferrer",onClick:b=>{a.qrcode&&""!==a.qrcode.trim()?(b.preventDefault(),l({image:a.qrcode,platform:a.platform}),j(!0)):a.link&&""!==a.link.trim()&&"#"!==a.link?(b.preventDefault(),y({url:a.link,platform:a.platform}),v(!0)):(b.preventDefault(),p({account:a.account,platform:a.platform}),n(!0))},className:"group relative flex items-center justify-center transition-all hover:scale-110 hover:opacity-80 cursor-pointer",title:`${a.platform}: ${a.account}`,children:a.icon&&""!==a.icon.trim()?(0,b.jsx)("div",{className:`flex items-center justify-center ${1===h.length?"w-10 h-10":2===h.length?"w-9 h-9":3===h.length?"w-8 h-8":"w-7 h-7"}`,children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(a.icon),alt:a.platform,className:"w-full h-full object-contain transition-all group-hover:brightness-110 icon-themed",onError:a=>{a.target.style.display="none"}})}):(0,b.jsx)("div",{className:`rounded-full bg-primary-500/20 flex items-center justify-center text-primary-500 font-bold group-hover:bg-primary-500/30 transition-colors ${1===h.length?"w-10 h-10 text-base":2===h.length?"w-9 h-9 text-sm":3===h.length?"w-8 h-8 text-sm":"w-7 h-7 text-xs"}`,children:a.platform[0].toUpperCase()})},`social-link-${a.id}-${c}`))}),i&&k&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:C,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:C,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(q.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:k.platform}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl inline-block",children:(0,b.jsx)("img",{src:(0,g.getFileUrl)(k.image),alt:`${k.platform} QR Code`,className:"w-64 h-64 object-contain"})}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"扫描二维码添加联系方式"})]})]})}),m&&o&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:D,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:D,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(q.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:o.platform}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl mb-4",children:(0,b.jsx)("p",{className:"text-lg font-mono text-gray-900 dark:text-white break-all",children:o.account})}),(0,b.jsx)("button",{onClick:F,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${s?"bg-green-500 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`,children:s?"✓ 已复制":"复制账号"})]})]})}),u&&x&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:E,children:(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:E,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭",children:(0,b.jsx)(q.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 capitalize",children:x.platform}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"是否跳转到以下链接？"}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-xl mb-4",children:(0,b.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white break-all",children:x.url})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:E,className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-white",children:"取消"}),(0,b.jsx)("button",{onClick:()=>{x&&window.open(x.url,"_blank","noopener,noreferrer"),E()},className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors bg-primary-500 hover:bg-primary-600 text-white",children:"确认跳转"})]})]})]})})]}):null}function ac({announcements:a}){let[e,f]=(0,c.useState)(0),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(0),o=(0,c.useRef)(null),p=(0,c.useRef)(null),q=(0,c.useRef)(null),r=(0,c.useRef)(null),s=a.filter(a=>a&&a.text&&a.text.trim()),t=s.length>1,u=(0,c.useCallback)(()=>{s.length<=1||(h(!0),l(!1),setTimeout(()=>{f(a=>(a+1)%s.length),h(!1),n(a=>a+1)},300))},[s.length]);if((0,c.useEffect)(()=>{let a=()=>{if(o.current&&p.current){let a=o.current.scrollWidth,b=p.current.clientWidth;j(t&&a>b-20)}},b=setTimeout(a,100);return window.addEventListener("resize",a),()=>{clearTimeout(b),window.removeEventListener("resize",a)}},[e,s,t]),(0,c.useEffect)(()=>t?(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{l(!0)},1500),()=>{r.current&&clearTimeout(r.current)}):void l(!1),[e,m,t]),(0,c.useEffect)(()=>{if(!(s.length<=1)&&k)return q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{u()},i?15e3:3500),()=>{q.current&&clearTimeout(q.current)}},[s.length,i,k,u]),0===s.length)return null;let v=s[e];return(0,b.jsxs)("div",{onClick:()=>{v.url&&window.open(v.url,"_blank","noopener,noreferrer")},className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`w-full bg-bg-secondary/80 border border-border-primary rounded-xl shadow-sm backdrop-blur-sm overflow-hidden transition-all duration-300 ${v.url?"cursor-pointer hover:bg-bg-tertiary/80 hover:shadow-md":""}`,children:[(0,b.jsxs)("div",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" flex items-center px-4 py-3 gap-3",children:[(0,b.jsx)("span",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" flex-shrink-0 text-xs font-bold text-white bg-gradient-to-r from-blue-500 to-indigo-500 px-2.5 py-1 rounded-md shadow-sm",children:"公告"}),(0,b.jsx)("div",{ref:p,className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" flex-1 overflow-hidden relative min-w-0",children:(0,b.jsx)("div",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`transition-all duration-300 ease-in-out ${g?"opacity-0 -translate-y-3":"opacity-100 translate-y-0"}`,children:(0,b.jsxs)("div",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`overflow-hidden ${i&&k?"marquee-container":""}`,children:[(0,b.jsx)("span",{ref:o,className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`text-sm font-medium text-text-primary whitespace-nowrap inline-block ${i&&k?"marquee-text":""}`,children:v.text}),i&&k&&(0,b.jsx)("span",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" text-sm font-medium text-text-primary whitespace-nowrap inline-block marquee-text-copy",children:v.text})]})})}),s.length>1&&(0,b.jsx)("div",{className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" flex-shrink-0 flex items-center gap-1.5",children:s.map((a,c)=>(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),c!==e&&(q.current&&clearTimeout(q.current),r.current&&clearTimeout(r.current),h(!0),l(!1),setTimeout(()=>{f(c),h(!1),n(a=>a+1)},300))},className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" "+`h-2 rounded-full transition-all duration-300 ${c===e?"bg-primary w-4":"bg-text-tertiary/40 hover:bg-text-tertiary/60 w-2"}`},c))}),v.url&&(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:d.default.dynamic([["d6910ecd2e201128",[15]]])+" w-4 h-4 text-text-tertiary flex-shrink-0",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:d.default.dynamic([["d6910ecd2e201128",[15]]])})})]}),(0,b.jsx)(d.default,{id:"d6910ecd2e201128",dynamic:[15],children:".marquee-container.__jsx-style-dynamic-selector{gap:80px;display:flex}.marquee-text.__jsx-style-dynamic-selector,.marquee-text-copy.__jsx-style-dynamic-selector{animation:linear forwards marquee;animation-timeline:15s}@keyframes marquee{0%{transform:translate(0)}to{transform:translate(calc(-100% - 80px))}}"})]})}var ad=a.i(70042);function ae({forceThemeType:a,rawSettings:d,isLoading:e}){var f;let[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)("notes"),[m,n]=(0,c.useState)("notes"),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,u]=(0,c.useState)(null),v=(d.enableAvatarThemeSwitch,d.themeType||"default"),w=v;a&&(w=a);let x={showSiteNav:"false"!==d.showSiteNav,showNotes:"false"!==d.showNotes,showSocialLinks:"false"!==d.showSocialLinks,themeColor:d.themeColor||"white",themeType:w,footerCopyright:d.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,backgroundImage:(f=d.backgroundImage||"",(0,g.getFileUrl)(f)),backgroundOpacity:d.backgroundOpacity||"0.5",defaultDisplaySection:d.defaultDisplaySection||"notes",showTopNavbar:d.showTopNavbar||"true",showWapSidebar:d.showWapSidebar||"true",blogProfileEnabled:d.blogProfileEnabled||"true",blogCarouselEnabled:d.blogCarouselEnabled||"true"};(0,c.useEffect)(()=>{if(d.homeContentSections)try{let a=JSON.parse(d.homeContentSections),b={section1:a.section1||"",section2:a.section2||"",showInDefaultTheme:!1!==a.showInDefaultTheme};r(b);let c=b.section1||b.section2||"notes";n(c),l(c)}catch(a){console.error("Failed to parse homeContentSections:",a),r({section1:"notes",section2:"navigation",showInDefaultTheme:!0}),n("notes"),l("notes")}else r({section1:"notes",section2:"navigation",showInDefaultTheme:!0}),n("notes"),l("notes");if(d.pageTexts)try{let a=JSON.parse(d.pageTexts);u(a)}catch(a){console.error("Failed to parse pageTexts:",a),u(null)}},[d]),(0,c.useEffect)(()=>{let a=()=>{p(window.innerWidth>=1024)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);let{showSocialLinks:y,themeType:z,footerCopyright:B,backgroundImage:C,backgroundOpacity:D,blogProfileEnabled:E,blogCarouselEnabled:F}=x,G="blog"===z,H="false"!==x.showTopNavbar,I="false"!==x.showWapSidebar,J="false"!==F,K=a=>{j(a),l(m)},L=a=>{n(a),l(a)},M=(a,b)=>{j(a),b&&l(b)},N=(a,c)=>{switch(a){case"notes":default:return(0,b.jsx)(P,{searchQuery:c},`notes-${c}`);case"navigation":return(0,b.jsx)(A,{searchQuery:c},`navigation-${c}`);case"services":return(0,b.jsx)(S,{searchQuery:c},`services-${c}`);case"galleries":return(0,b.jsx)(W,{searchQuery:c},`galleries-${c}`)}},O=a=>s&&s[a]?.title?s[a].title:({notes:"笔记列表",navigation:"导航列表",services:"服务业务",galleries:"图库列表"})[a]||a,Q=q&&(G?q.section1||q.section2:q.showInDefaultTheme&&(q.section1||q.section2));return(0,b.jsx)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col overflow-x-hidden hide-scrollbar",children:e?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-text-secondary",children:"加载中..."})]})}):(0,b.jsxs)(b.Fragment,{children:[G?(0,b.jsx)(_.default,{onSearch:K,isBlogMode:!0,showWapSidebar:I}):H?(0,b.jsx)(_.default,{onSearch:K,isBlogMode:!1,showWapSidebar:I}):null,C&&(0,b.jsx)("div",{className:"absolute inset-0 z-0",style:{backgroundImage:`url(${C})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:parseFloat(D)}}),G&&(0,b.jsxs)("div",{className:"relative z-0",children:[(G||H)&&(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl pt-3 pb-4 md:py-8",children:[(0,b.jsxs)("section",{className:"animate-slide-up mb-8",style:{animationDelay:"0.1s"},children:[(0,b.jsxs)("div",{className:"hidden lg:flex gap-6 items-stretch",children:[J&&(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(aa,{})}),"false"!==E&&(0,b.jsx)("div",{className:`w-72 flex-shrink-0 h-96 ${!J?"mx-auto":""}`,children:o&&(0,b.jsx)(ab,{})})]}),J&&(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsx)(aa,{})})]}),"true"===d.blogAnnouncementEnabled&&(()=>{let a=[];try{let b=JSON.parse(d.blogAnnouncements||"[]");Array.isArray(b)&&(a=b.map(a=>"string"==typeof a?{text:a,url:""}:a))}catch{a=[]}let c=a.filter(a=>a&&a.text&&a.text.trim());return 0===c.length?null:(0,b.jsx)("section",{className:"animate-slide-up mb-6",style:{animationDelay:"0.15s"},children:(0,b.jsx)(ac,{announcements:c})})})(),Q&&q&&(0,b.jsx)("section",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:(0,b.jsx)($,{tabs:[q.section1&&{key:q.section1,label:O(q.section1),content:N(q.section1,i)},q.section2&&{key:q.section2,label:O(q.section2),content:N(q.section2,i)}].filter(Boolean),defaultTab:q.section1||q.section2,onSearch:M,onTabChange:L,searchPlaceholder:"搜索内容...",externalSearchQuery:i})})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{dangerouslySetInnerHTML:{__html:B}}),(0,b.jsx)(ad.default,{})]})]}),!G&&(0,b.jsxs)("div",{className:"relative z-0 flex flex-col min-h-screen",children:[H&&(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:`container mx-auto px-4 max-w-6xl ${Q?"py-8":"flex-1 flex items-center justify-center"}`,children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,b.jsx)("section",{className:"text-center animate-fade-in mb-5 md:mb-6",children:(0,b.jsx)(h,{})}),y&&(0,b.jsx)("section",{className:"animate-slide-up",style:{animationDelay:"0.1s"},children:(0,b.jsx)(t,{className:"gap-3 md:gap-4"})})]}),Q&&q&&(0,b.jsx)("section",{className:`animate-slide-up md:mt-12 ${G?"mt-8":"mt-0"}`,style:{animationDelay:"0.2s"},children:(0,b.jsx)($,{tabs:[q.section1&&{key:q.section1,label:O(q.section1),content:N(q.section1,i)},q.section2&&{key:q.section2,label:O(q.section2),content:N(q.section2,i)}].filter(Boolean),defaultTab:q.section1||q.section2,onSearch:M,onTabChange:L,searchPlaceholder:"搜索内容...",externalSearchQuery:i})})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{dangerouslySetInnerHTML:{__html:B}}),(0,b.jsx)(ad.default,{})]})]})]})})}a.s(["default",()=>ae],30499)}];

//# sourceMappingURL=src_components_HomeContent_tsx_7a23d521._.js.map