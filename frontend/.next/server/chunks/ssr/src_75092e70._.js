module.exports=[65763,a=>{"use strict";var b=a.i(72131),c=a.i(82572);let d=null;function e(a,f=!1){let[g,h]=(0,b.useState)(d||""),i=(0,c.useOptionalPageTitleContext)();(0,b.useEffect)(()=>{f&&i&&i.setTitle(a)},[a,f,i]),(0,b.useEffect)(()=>{d?h(d):(async()=>{try{let a=await fetch("/api/settings");if(a.ok){let b=await a.json();if(b.success&&b.data){let a={};b.data.forEach(b=>{a[b.key]=b.value});let c=a.siteTitle||"";d=c,h(c)}}}catch(a){console.error("Failed to fetch site title:",a)}})()},[]),(0,b.useEffect)(()=>{let b=document.title;return f?"仪表盘"===a?document.title=`${g} - 后台管理系统`:document.title=`${a} - ${g}后台管理系统`:document.title=`${a} - ${g}`,()=>{document.title=b}},[a,g,f])}a.s(["usePageTitle",()=>e])},57723,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(60137);let e=(0,d.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),f=(0,d.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var g=a.i(33508);function h({show:a,message:d,type:h,duration:i=3e3,onClose:j}){let[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(a){l(!0);let a=setTimeout(()=>{l(!1)},i);return()=>clearTimeout(a)}l(!1)},[a,i]),(0,c.useEffect)(()=>{if(!k&&a){let a=setTimeout(j,300);return()=>clearTimeout(a)}},[k,a,j]);let m=(()=>{switch(h){case"success":return{bg:"bg-green-50 border-green-200",text:"text-green-800",icon:(0,b.jsx)(e,{className:"w-5 h-5 text-green-500"})};case"error":return{bg:"bg-red-50 border-red-200",text:"text-red-800",icon:(0,b.jsx)(f,{className:"w-5 h-5 text-red-500"})};default:return{bg:"bg-blue-50 border-blue-200",text:"text-blue-800",icon:(0,b.jsx)(e,{className:"w-5 h-5 text-blue-500"})}}})();return(0,b.jsx)(b.Fragment,{children:k&&(0,b.jsx)("div",{className:"fixed top-4 right-4 z-[999999] min-w-[300px] max-w-md animate-slide-down",children:(0,b.jsxs)("div",{className:`${m.bg} border rounded-lg shadow-lg p-4 flex items-start gap-3`,children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:m.icon}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("p",{className:`${m.text} text-sm font-medium`,children:d})}),(0,b.jsx)("button",{onClick:()=>{l(!1)},className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)(g.X,{className:"w-4 h-4"})})]})})})}a.s(["default",()=>h],57723)},3512,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(11642),f=a.i(19032),g=a.i(65763),h=a.i(57723);let i=[{name:"黄色",value:"#fef68a"},{name:"绿色",value:"#d1fae5"},{name:"蓝色",value:"#bfdbfe"},{name:"粉色",value:"#fce7f3"},{name:"橙色",value:"#fed7aa"},{name:"紫色",value:"#e9d5ff"}];function j(){(0,g.usePageTitle)("便签管理",!0),(0,d.useRouter)();let{user:a}=(0,e.useAuth)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({title:"",content:"",category:"",color:"#fef68a",sort_order:0}),[v,w]=(0,c.useState)({show:!1,type:"success",message:""}),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),B=(0,c.useMemo)(()=>j.filter(a=>{let b=x.toLowerCase(),c=a.title.toLowerCase().includes(b)||a.content.toLowerCase().includes(b),d=!z||a.category===z;return c&&d}),[j,x,z]);(0,c.useEffect)(()=>{C()},[]);let C=async()=>{try{let a=await (0,f.getAdminStickyNotes)();if(a.success){let b=Array.isArray(a.data)?a.data:[];k(b)}let b=await (0,f.getAdminStickyNoteCategories)();b.success&&m(b.data||[])}catch(a){w({show:!0,type:"error",message:"加载便签失败"}),k([])}finally{o(!1)}},D=a=>{u({...t,[a.target.name]:a.target.value})},E=async a=>{a.preventDefault();try{p?.id?(await (0,f.updateAdminStickyNote)(p.id,t)).success&&(w({show:!0,type:"success",message:"便签更新成功"}),await C(),G()):(await (0,f.createAdminStickyNote)(t)).success&&(w({show:!0,type:"success",message:"便签添加成功"}),await C(),G())}catch(a){w({show:!0,type:"error",message:a.response?.data?.message||"操作失败"})}},F=async a=>{if(confirm("确定要删除这个便签吗？"))try{(await (0,f.deleteAdminStickyNote)(a)).success&&(w({show:!0,type:"success",message:"便签删除成功"}),await C())}catch(a){w({show:!0,type:"error",message:a.response?.data?.message||"删除失败"})}},G=()=>{u({title:"",content:"",category:"",color:"#fef68a",sort_order:0}),q(null),s(!1)},H=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.default,{show:v.show,message:v.message,type:v.type,onClose:()=>w({...v,show:!1})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,b.jsx)("button",{onClick:()=>s(!r),className:"btn btn-primary",children:r?"取消":"+ 添加便签"}),(0,b.jsx)("div",{className:"w-full sm:w-auto sm:flex-1 sm:max-w-md",children:(0,b.jsx)("input",{type:"text",placeholder:"搜索便签标题或内容...",value:x,onChange:a=>y(a.target.value),className:"input w-full"})})]}),l.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"分类筛选："}),(0,b.jsx)("button",{onClick:()=>A(""),className:`px-3 py-1 rounded-full text-sm transition-colors ${""===z?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"全部"}),l.map(a=>(0,b.jsx)("button",{onClick:()=>A(a),className:`px-3 py-1 rounded-full text-sm transition-colors ${z===a?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:a},a))]})]}),r&&(0,b.jsxs)("div",{className:"card mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:p?"编辑便签":"添加便签"}),(0,b.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"便签标题"}),(0,b.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:t.title,onChange:D,className:"input",placeholder:"输入便签标题..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"便签内容"}),(0,b.jsx)("textarea",{id:"content",name:"content",rows:5,required:!0,value:t.content,onChange:D,className:"input",placeholder:"输入便签内容..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"便签分类 (可选)"}),(0,b.jsx)("input",{id:"category",name:"category",type:"text",value:t.category,onChange:D,className:"input",placeholder:"输入分类，如：工作、学习、生活...",list:"category-suggestions"}),l.length>0&&(0,b.jsx)("datalist",{id:"category-suggestions",children:l.map(a=>(0,b.jsx)("option",{value:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-700 mb-2",children:"便签颜色"}),(0,b.jsx)("div",{className:"flex gap-2",children:i.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>u({...t,color:a.value}),className:`w-12 h-12 rounded-lg border-2 transition-all ${t.color===a.value?"border-gray-800 scale-110 shadow-lg":"border-gray-300 hover:border-gray-500"}`,style:{backgroundColor:a.value},title:a.name},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"sort_order",className:"block text-sm font-medium text-gray-700 mb-2",children:"排序 (可选)"}),(0,b.jsx)("input",{id:"sort_order",name:"sort_order",type:"number",value:t.sort_order,onChange:D,className:"input",placeholder:"0"})]}),(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",children:p?"更新":"添加"}),(0,b.jsx)("button",{type:"button",onClick:G,className:"btn btn-secondary",children:"取消"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["便签列表 ",x&&`(找到 ${B.length} 个结果)`]}),0===B.length?(0,b.jsx)("div",{className:"card text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:x?"没有找到匹配的便签":"还没有添加任何便签"})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(a=>(0,b.jsxs)("div",{className:"rounded-lg shadow-md p-5 relative transition-transform hover:scale-105",style:{backgroundColor:a.color},children:[(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 text-lg mb-2",children:a.title}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.category&&(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-500/70 text-white rounded",children:a.category}),void 0!==a.sort_order&&a.sort_order>0&&(0,b.jsxs)("span",{className:"text-xs px-2 py-1 bg-white/70 text-gray-700 rounded",children:["排序: ",a.sort_order]})]})]}),(0,b.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap mb-4 min-h-[60px]",children:a.content}),(0,b.jsxs)("div",{className:"text-xs text-gray-600 mb-3 space-y-1",children:[a.created_at&&(0,b.jsxs)("div",{children:["创建: ",H(a.created_at)]}),a.updated_at&&a.updated_at!==a.created_at&&(0,b.jsxs)("div",{children:["修改: ",H(a.updated_at)]})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{q(a),u({title:a.title,content:a.content,category:a.category||"",color:a.color||"#fef68a",sort_order:a.sort_order||0}),s(!0)},className:"flex-1 px-3 py-1.5 bg-white/80 hover:bg-white text-gray-800 rounded text-sm font-medium transition-colors",children:"编辑"}),(0,b.jsx)("button",{onClick:()=>a.id&&F(a.id),className:"flex-1 px-3 py-1.5 bg-red-500/80 hover:bg-red-500 text-white rounded text-sm font-medium transition-colors",children:"删除"})]})]},a.id))})]})]})})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_75092e70._.js.map