module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},62036,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(86723),e=a.i(74290),f=a.i(1703),g=a.i(14800),h=a.i(91128),i=c,j=a.i(65802);function k(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class l extends i.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,h.isHTMLElement)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:a,isPresent:d,anchorX:e,root:f}){let g=(0,i.useId)(),h=(0,i.useRef)(null),m=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:n}=(0,i.useContext)(j.MotionConfigContext),o=function(...a){return c.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=k(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():k(a[b],null)}}}}(...a),a)}(h,a?.ref);return(0,i.useInsertionEffect)(()=>{let{width:a,height:b,top:c,left:i,right:j}=m.current;if(d||!h.current||!a||!b)return;let k="left"===e?`left: ${i}`:`right: ${j}`;h.current.dataset.motionPopId=g;let l=document.createElement("style");n&&(l.nonce=n);let o=f??document.head;return o.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${k}px !important;
            top: ${c}px !important;
          }
        `),()=>{o.contains(l)&&o.removeChild(l)}},[d]),(0,b.jsx)(l,{isPresent:d,childRef:h,sizeRef:m,children:i.cloneElement(a,{ref:o})})}let n=({children:a,initial:d,isPresent:f,onExitComplete:h,custom:i,presenceAffectsLayout:j,mode:k,anchorX:l,root:n})=>{let p=(0,e.useConstant)(o),q=(0,c.useId)(),r=!0,s=(0,c.useMemo)(()=>(r=!1,{id:q,initial:d,isPresent:f,custom:i,onExitComplete:a=>{for(let b of(p.set(a,!0),p.values()))if(!b)return;h&&h()},register:a=>(p.set(a,!1),()=>p.delete(a))}),[f,p,h]);return j&&r&&(s={...s}),(0,c.useMemo)(()=>{p.forEach((a,b)=>p.set(b,!1))},[f]),c.useEffect(()=>{f||p.size||!h||h()},[f]),"popLayout"===k&&(a=(0,b.jsx)(m,{isPresent:f,anchorX:l,root:n,children:a})),(0,b.jsx)(g.PresenceContext.Provider,{value:s,children:a})};function o(){return new Map}var p=a.i(20410);let q=a=>a.key||"";function r(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}let s=({children:a,custom:g,initial:h=!0,onExitComplete:i,presenceAffectsLayout:j=!0,mode:k="sync",propagate:l=!1,anchorX:m="left",root:o})=>{let[s,t]=(0,p.usePresence)(l),u=(0,c.useMemo)(()=>r(a),[a]),v=l&&!s?[]:u.map(q),w=(0,c.useRef)(!0),x=(0,c.useRef)(u),y=(0,e.useConstant)(()=>new Map),[z,A]=(0,c.useState)(u),[B,C]=(0,c.useState)(u);(0,f.useIsomorphicLayoutEffect)(()=>{w.current=!1,x.current=u;for(let a=0;a<B.length;a++){let b=q(B[a]);v.includes(b)?y.delete(b):!0!==y.get(b)&&y.set(b,!1)}},[B,v.length,v.join("-")]);let D=[];if(u!==z){let a=[...u];for(let b=0;b<B.length;b++){let c=B[b],d=q(c);v.includes(d)||(a.splice(b,0,c),D.push(c))}return"wait"===k&&D.length&&(a=D),C(r(a)),A(u),null}let{forceRender:E}=(0,c.useContext)(d.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:B.map(a=>{let c=q(a),d=(!l||!!s)&&(u===B||v.includes(c));return(0,b.jsx)(n,{isPresent:d,initial:(!w.current||!!h)&&void 0,custom:g,presenceAffectsLayout:j,mode:k,root:o,onExitComplete:d?void 0:()=>{if(!y.has(c))return;y.set(c,!0);let a=!0;y.forEach(b=>{b||(a=!1)}),a&&(E?.(),C(x.current),l&&t?.(),i&&i())},anchorX:m,children:a},c)})})};a.s(["AnimatePresence",()=>s],62036)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},77156,41379,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>c],77156);let d=(0,b.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["EyeOff",()=>d],41379)},84505,a=>{"use strict";let b=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],84505)},38632,a=>{"use strict";let b=(0,a.i(70106).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);a.s(["Image",()=>b],38632)},50522,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],50522)},13749,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749)},38078,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(46271),e=a.i(62036),f=a.i(33508),g=a.i(13749),h=a.i(50522),i=a.i(70106);(0,i.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),(0,i.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var j=a.i(84505),k=a.i(43108),l=a.i(77156),m=a.i(41379),n=a.i(19032),o=a.i(68114);function p({galleryId:a,isOpen:i,onClose:p}){let[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(0),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null);(0,c.useEffect)(()=>{i&&a&&O()},[i,a]),(0,c.useEffect)(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[i]),(0,c.useEffect)(()=>{if(!i)return;let a=a=>{"Escape"===a.key?p():"ArrowLeft"===a.key?Q():"ArrowRight"===a.key?P():"+"===a.key||"="===a.key?R():"-"===a.key&&S()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[i,s,y,q]);let O=async b=>{v(!0),x(null);try{let c=await (0,n.getGallery)(a,b);c.success?(r(c.data),B(!1),F("")):c.requirePassword?B(!0):x(c.message||"加载图册失败")}catch(a){a.response?.status===401?a.response?.data?.requirePassword?B(!0):(B(!0),F("密码错误")):x("加载图册失败")}finally{v(!1)}},P=()=>{q&&0!==q.images.length&&(t(a=>(a+1)%q.images.length),z(1))},Q=()=>{q&&0!==q.images.length&&(t(a=>(a-1+q.images.length)%q.images.length),z(1))},R=()=>{z(a=>Math.min(a+.25,3))},S=()=>{z(a=>Math.max(a-.25,.5))};return i&&(e.AnimatePresence,d.motion.div,!u&&!A&&q&&q.images.length>1&&q.images.length,!u&&!A&&q&&q.images.length>0&&j.Download,A||f.X,A&&(d.motion.div,f.X,k.Lock,G?m.EyeOff:l.Eye),!u&&!w&&!A&&q&&q.images.length>0&&(b.Fragment,d.motion.img,(0,o.getFileUrl)(q.images[s].path),q.images[s].filename,q.images.length>1&&(b.Fragment,g.ChevronLeft,h.ChevronRight)),u||w||A||!q||q.images.length,!u&&!w&&!A&&q&&q.images.length>0&&q.images.length>1&&q.images.map((a,c)=>(0,b.jsx)("button",{onClick:()=>{t(c),z(1)},className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all ${c===s?"border-primary-500 opacity-100":"border-white/20 opacity-50 hover:opacity-75"}`,children:(0,b.jsx)("img",{src:(0,o.getFileUrl)(a.path),alt:a.filename,className:"w-full h-full object-cover"})},a.id))),null}a.s(["default",()=>p],38078)},34845,a=>{"use strict";var b=a.i(87924),c=a.i(46271),d=a.i(87532),e=a.i(33508),f=a.i(43108),g=a.i(38632),h=a.i(72131),i=a.i(68114),j=a.i(11295),k=a.i(38078),l=a.i(70042),m=a.i(19032),n=a.i(30230),o=a.i(46712),p=a.i(78891);function q(){let[a,q]=(0,h.useState)([]),[r,s]=(0,h.useState)([]),[t,u]=(0,h.useState)(!0),[v,w]=(0,h.useState)(""),[x,y]=(0,h.useState)(null),[z,A]=(0,h.useState)(!1),[B,C]=(0,h.useState)(null),[D,E]=(0,h.useState)(1),[F]=(0,h.useState)(20),[G,H]=(0,h.useState)(!0),[I,J]=(0,h.useState)(!1),[K,L]=(0,h.useState)([]),M={themeType:"default",footerCopyright:`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:"true",showWapSidebar:"true"},[N,O]=(0,h.useState)(M),[P,Q]=(0,h.useState)({title:"图库列表",description:"探索精彩的图片合集",browserTitle:"图库列表",browserSubtitle:""}),[R,S]=(0,h.useState)(!1);(0,h.useEffect)(()=>{T()},[]),(0,h.useEffect)(()=>{document.title=P.browserTitle},[P.browserTitle]);let T=async()=>{E(1);try{await Promise.all([U(),V(1,!0),X()])}catch(a){console.error("Failed to load data:",a)}finally{u(!1)}},U=async()=>{try{let[a,b]=await Promise.all([(0,m.getSettings)(),(0,m.getPageText)("galleries")]);if(a.success&&a.data){let b={};a.data.forEach(a=>{b[a.key]=a.value}),O({themeType:b.themeType||"default",footerCopyright:b.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:b.showTopNavbar||"true",showWapSidebar:b.showWapSidebar||"true"})}b.success&&b.data&&(Q({title:b.data.title||"图库列表",description:b.data.description||"探索精彩的图片合集",browserTitle:b.data.browserTitle||"图库列表",browserSubtitle:b.data.browserSubtitle||""}),S(!0))}catch(a){console.error("Failed to load settings:",a),S(!0)}},V=async(a=D,b=!1,c)=>{try{let d=await (0,m.getGalleries)(c);if(d.success&&d.data){let c=d.data;b&&L(c);let e=(a-1)*F,f=e+F,g=c.slice(e,f);b?q(g):q(a=>[...a,...g]),H(f<c.length)}}catch(a){console.error("Failed to fetch galleries:",a),q([])}},W=async()=>{if(I||!G)return;J(!0);let a=D+1;E(a);try{let b=(a-1)*F,c=b+F,d=K.slice(b,c);q(a=>[...a,...d]),H(c<K.length)}catch(a){console.error("Failed to load more galleries:",a)}finally{J(!1)}},X=async()=>{try{let a=await (0,m.getGalleryCategories)();a.success&&a.data&&s(a.data)}catch(a){console.error("Failed to fetch categories:",a),s([])}},Y=a=>{y(a),E(1),V(1,!0,{search:v||void 0,category_id:a||void 0})};N?.themeType,N?.showTopNavbar;let Z=N?.showWapSidebar!=="false";return(0,b.jsxs)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col hide-scrollbar",children:[(0,b.jsx)(o.default,{}),(0,b.jsx)(p.default,{}),(0,b.jsx)(j.default,{showWapSidebar:Z}),(0,b.jsxs)("div",{className:"relative z-0 flex-1 flex flex-col",children:[(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl py-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:P.title}),(0,b.jsx)("p",{className:"text-text-secondary",children:P.description})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("form",{onSubmit:a=>{a.preventDefault(),E(1),V(1,!0,{search:v,category_id:x||void 0})},children:(0,b.jsxs)("div",{className:"relative max-w-2xl mx-auto",children:[(0,b.jsx)(d.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-tertiary"}),(0,b.jsx)("input",{type:"text",placeholder:"搜索图册...",value:v,onChange:a=>w(a.target.value),className:"w-full pl-12 pr-12 py-3 bg-bg-secondary border border-border-primary rounded-xl text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off"}),v&&(0,b.jsx)("button",{type:"button",onClick:()=>{w(""),E(1),V(1,!0,{category_id:x||void 0})},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors","aria-label":"清空搜索",children:(0,b.jsx)(e.X,{className:"w-5 h-5"})})]})})}),r.length>0&&(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[(0,b.jsx)("button",{onClick:()=>Y(null),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${null===x?"bg-primary-500 text-white shadow-md":"bg-bg-secondary text-text-secondary hover:bg-primary-100 hover:text-primary-600"}`,children:"全部"}),r.map(a=>(0,b.jsx)("button",{onClick:()=>Y(a.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${x===a.id?"bg-primary-500 text-white shadow-md":"bg-bg-secondary text-text-secondary hover:bg-primary-100 hover:text-primary-600"}`,children:a.name},a.id))]})}),t?(0,b.jsx)(n.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-4 w-auto",columnClassName:"pl-4 bg-clip-padding",children:[...Array(10)].map((a,c)=>(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-sm border border-border-primary overflow-hidden animate-pulse",children:[(0,b.jsx)("div",{className:"w-full pt-[100%] bg-bg-tertiary"}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-full"})]})]})},c))}):0===a.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(g.Image,{className:"w-16 h-16 text-text-tertiary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-text-tertiary",children:"暂无图册"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.default,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-4 w-auto",columnClassName:"pl-4 bg-clip-padding",children:a.map((a,d)=>{let e;return(0,b.jsx)("div",{className:"mb-4",children:(e=a.hasPassword,(0,b.jsxs)(c.motion.button,{onClick:()=>{C(a.id),A(!0)},className:"group block bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer overflow-hidden w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.03*d},children:[(0,b.jsxs)("div",{className:"relative w-full pt-[100%] bg-gradient-to-br from-primary-100 to-primary-200 overflow-hidden",children:[a.cover_image?(0,b.jsx)("img",{src:(0,i.getFileUrl)(a.cover_image),alt:a.title,className:`absolute inset-0 w-full h-full object-cover transition-transform duration-300 ${e?"blur-xl scale-110":"group-hover:scale-105"}`,draggable:!1,onContextMenu:a=>a.preventDefault(),loading:"lazy"}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(g.Image,{className:"w-12 h-12 text-primary-400"})}),e&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"bg-black/60 backdrop-blur-sm rounded-full p-3",children:(0,b.jsx)(f.Lock,{className:"w-6 h-6 text-white"})})}),(0,b.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-white font-medium",children:[a.image_count," 张"]})]}),(0,b.jsxs)("div",{className:"p-3 text-left",children:[(0,b.jsx)("h3",{className:"font-medium text-sm text-text-primary group-hover:text-primary-500 transition-colors line-clamp-1 mb-1",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-xs text-text-tertiary line-clamp-2 leading-relaxed",children:a.description})]})]},`gallery-${a.id}`))},a.id)})}),G&&(0,b.jsx)("div",{className:"text-center mt-8",children:(0,b.jsx)("button",{onClick:W,disabled:I,className:"px-8 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:I?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"加载中..."]}):"加载更多"})})]})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{children:N.footerCopyright}),(0,b.jsx)(l.default,{})]})]}),B&&(0,b.jsx)(k.default,{galleryId:B,isOpen:z,onClose:()=>{A(!1),setTimeout(()=>{C(null)},300)}})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=_b17550f6._.js.map