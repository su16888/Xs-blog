module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},70106,a=>{"use strict";var b=a.i(72131);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],70106)},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},54427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},11642,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(19032);let d=(0,c.createContext)(void 0);function e({children:a}){let[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!0),i=(0,c.useRef)(!1),j=async()=>{try{f(null),h(!1);return}catch{f(null)}finally{h(!1)}};(0,c.useEffect)(()=>{i.current||(i.current=!0,j())},[]);let k=async()=>{h(!0),await j()};return(0,b.jsx)(d.Provider,{value:{user:e,isLoading:g,isAuthenticated:!!e,refreshUser:k,setUser:f,logout:()=>{f(null)}},children:a})}function f(){let a=(0,c.useContext)(d);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>e,"useAuth",()=>f])},54897,a=>{"use strict";var b=a.i(95193);let c="admins";a.s(["getAdminRoute",0,(a="")=>((a="")=>{let b=a.startsWith("/")?a.slice(1):a;return`/${c}${b?`/${b}`:""}`})(a),"getApiUrl",0,()=>(0,b.getRuntimeConfig)().apiUrl,"isAdminPage",0,a=>!a.startsWith("/note/")&&a.startsWith(`/${c}`)])},68114,a=>{"use strict";class b{storage=null;prefix="xs-blog-cache:";defaultTTL=3e5;pendingRequests=new Map;pendingTimeout=3e4;constructor(){}async getCacheTTL(){try{let a=this.storage?.getItem("xs-blog-cache:settings");if(a){let b=JSON.parse(a),c=parseInt(b.cacheTime||"5");if(!isNaN(c)&&c>=0)return 60*c*1e3}}catch(a){}return this.defaultTTL}updateCacheTTL(a){if(this.storage)try{this.storage.setItem("xs-blog-cache:settings",JSON.stringify({cacheTime:a}))}catch(a){console.error("更新缓存配置失败:",a)}}getCacheKey(a){return`${this.prefix}${a}`}async set(a,b,c){if(this.storage)try{let d=void 0!==c?c:await this.getCacheTTL();if(0===d)return;let e={data:b,timestamp:Date.now(),ttl:d},f=this.getCacheKey(a);this.storage.setItem(f,JSON.stringify(e))}catch(a){console.warn("缓存设置失败:",a)}}get(a){if(!this.storage)return null;try{let b=this.getCacheKey(a),c=this.storage.getItem(b);if(!c)return null;let d=JSON.parse(c);if(Date.now()-d.timestamp>d.ttl)return this.storage.removeItem(b),null;return d.data}catch(a){return console.warn("读取缓存失败:",a),null}}async dedupeRequest(a,b){let c=Date.now(),d=this.pendingRequests.get(a);if(d)if(c-d.timestamp<this.pendingTimeout)return d.promise;else this.pendingRequests.delete(a);let e=b().then(b=>(this.pendingRequests.delete(a),b)).catch(b=>{throw this.pendingRequests.delete(a),b});return this.pendingRequests.set(a,{promise:e,timestamp:c}),e}cleanPendingRequests(){let a=Date.now(),b=[];this.pendingRequests.forEach((c,d)=>{a-c.timestamp>=this.pendingTimeout&&b.push(d)}),b.forEach(a=>{this.pendingRequests.delete(a)}),b.length}remove(a){if(this.storage)try{let b=this.getCacheKey(a);this.storage.removeItem(b)}catch(a){console.warn("删除缓存失败:",a)}}clear(){if(this.storage)try{let a=[];for(let b=0;b<this.storage.length;b++){let c=this.storage.key(b);c&&c.startsWith(this.prefix)&&a.push(c)}a.forEach(a=>this.storage.removeItem(a))}catch(a){console.warn("清除缓存失败:",a)}}clearByPrefix(a){if(this.storage)try{let b=[],c=this.getCacheKey(a);for(let a=0;a<this.storage.length;a++){let d=this.storage.key(a);d&&d.startsWith(c)&&b.push(d)}b.forEach(a=>this.storage.removeItem(a))}catch(a){console.warn("按前缀清除缓存失败:",a)}}getStats(){if(!this.storage)return{count:0,size:0};try{let a=0,b=0;for(let c=0;c<this.storage.length;c++){let d=this.storage.key(c);if(d&&d.startsWith(this.prefix)){a++;let c=this.storage.getItem(d);c&&(b+=c.length)}}return{count:a,size:b}}catch(a){return console.warn("获取缓存统计失败:",a),{count:0,size:0}}}cleanExpired(){if(this.storage)try{let a=[],b=Date.now();for(let c=0;c<this.storage.length;c++){let d=this.storage.key(c);if(d&&d.startsWith(this.prefix)){let c=this.storage.getItem(d);if(c)try{let e=JSON.parse(c);b-e.timestamp>e.ttl&&a.push(d)}catch{a.push(d)}}}a.forEach(a=>this.storage.removeItem(a))}catch(a){console.warn("清理过期缓存失败:",a)}}}function c(...a){return function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}(a)}function d(){return"/api".replace(/\/api$/,"")}function e(a){if(!a)return"";let b="string"==typeof a?a:String(a);if(b.startsWith("http://")||b.startsWith("https://"))return b;let c=d(),e=b.startsWith("/")?b:`/${b}`;return`${c}${e}`}async function f(a,b,c=!0,d){let e=b?.method?.toUpperCase()||"GET";return g(a,b,"GET"===e,c,d)}async function g(a,b,c=!0,e=!0,f){if(a.startsWith("http://")||a.startsWith("https://"))return await fetch(a,b);{let c="/api";if(c&&c.startsWith("/")){let c=process.env.NEXT_PUBLIC_API_PROTOCOL||"http",d=process.env.NEXT_PUBLIC_API_HOST||"localhost",e=process.env.NEXT_PUBLIC_API_PORT||"3001";return fetch(`${c}://${d}:${e}${a}`,b)}let e=d();return fetch(a.startsWith("/")?`${e}${a}`:`${e}/${a}`,b)}}new b,a.s(["cn",()=>c,"getApiBaseUrl",()=>d,"getFileUrl",()=>e,"safeFetch",()=>f],68114)},55488,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19032);let e=(0,c.createContext)(void 0);function f({children:a}){let[f,g]=(0,c.useState)({}),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0),l=(0,c.useRef)(!1),m=async(a=!1)=>{await n()},n=async()=>{try{let[a,b]=await Promise.all([(0,d.getSettings)(),(0,d.getPageTexts)()]);if(a.success&&a.data){let b={};a.data.forEach(a=>{b[a.key]=a.value}),void 0===b.promoThemeEnabled&&(b.promoThemeEnabled="false"),void 0===b.socialFeedThemeEnabled&&(b.socialFeedThemeEnabled="false"),void 0===b.docsThemeEnabled&&(b.docsThemeEnabled="false"),g(b)}b.success&&b.data&&(i(b.data),b.data)}catch(a){console.error("Failed to load settings:",a)}finally{k(!1)}};(0,c.useEffect)(()=>{l.current||(l.current=!0,m())},[]);let o=async()=>{k(!0),await m(!0)};return(0,b.jsx)(e.Provider,{value:{settings:f,pageTexts:h,isLoading:j,refreshSettings:o},children:a})}function g(){let a=(0,c.useContext)(e);if(void 0===a)throw Error("useSettings must be used within a SettingsProvider");return a}function h(a,b=!0){let{settings:c}=g(),d=c[a];return void 0===d?b:"false"!==d}function i(a,b=""){let{settings:c}=g();return c[a]||b}a.s(["SettingsProvider",()=>f,"useSettingBoolean",()=>h,"useSettingString",()=>i,"useSettings",()=>g])},90914,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19032);let e=(0,c.createContext)(void 0);function f({children:a}){let[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0),j=(0,c.useRef)(!1),k=async(a=!1)=>{await l()},l=async()=>{try{let a=await (0,d.getProfile)();g(a)}catch(a){console.error("Failed to load profile:",a),g(null)}finally{i(!1)}};(0,c.useEffect)(()=>{j.current||(j.current=!0,k())},[]);let m=async()=>{i(!0),await k(!0)};return(0,b.jsx)(e.Provider,{value:{profile:f,isLoading:h,refreshProfile:m},children:a})}function g(){let a=(0,c.useContext)(e);if(void 0===a)throw Error("useProfile must be used within a ProfileProvider");return a}a.s(["ProfileProvider",()=>f,"useProfile",()=>g])},15831,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19032);let e=(0,c.createContext)(void 0);function f({children:a}){let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),j=(0,c.useRef)(!1),k=async(a=!1)=>{await l()},l=async()=>{try{let a=await d.default.get("/social-links?visible=true"),b=a.data?.data,c=Array.isArray(b)?b:[];g(c)}catch(a){console.error("Failed to load social links:",a),g([])}finally{i(!1)}};(0,c.useEffect)(()=>{j.current||(j.current=!0,k())},[]);let m=async()=>{i(!0),await k(!0)},n=f.filter(a=>a.show_in_profile).slice(0,4);return(0,b.jsx)(e.Provider,{value:{socialLinks:f,profileSocialLinks:n,isLoading:h,refreshSocialLinks:m},children:a})}function g(){let a=(0,c.useContext)(e);if(void 0===a)throw Error("useSocialLinks must be used within a SocialLinksProvider");return a}a.s(["SocialLinksProvider",()=>f,"useSocialLinks",()=>g])},88308,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(54897),e=a.i(50944);let f=(0,c.createContext)(void 0);function g({children:a}){let g=(0,e.usePathname)(),h=(0,d.isAdminPage)(g),[i,j]=(0,c.useState)(()=>"black");return(0,c.useEffect)(()=>{if(!h)try{let a=function(a){let b=a+"=",c=document.cookie.split(";");for(let a=0;a<c.length;a++){let d=c[a];for(;" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(b))return d.substring(b.length,d.length)}return null}("theme");a&&["white","gray","black"].includes(a)&&j(a)}catch(a){}},[h]),(0,c.useEffect)(()=>{if(h){document.documentElement.setAttribute("data-theme","white"),document.documentElement.classList.remove("theme-white","theme-gray","theme-black"),document.documentElement.classList.add("theme-white");return}try{!function(a,b,c=365){let d=new Date;d.setTime(d.getTime()+24*c*36e5),document.cookie=`${a}=${b};expires=${d.toUTCString()};path=/;SameSite=Lax`}("theme",i,365)}catch(a){}document.documentElement.classList.remove("theme-white","theme-gray","theme-black"),document.documentElement.classList.add(`theme-${i}`),document.documentElement.setAttribute("data-theme",i);let a="white"===i||"gray"===i?"#f8fafc":"#0F172A";document.documentElement.style.backgroundColor=a,document.body.style.backgroundColor=a},[i,h]),(0,b.jsx)(f.Provider,{value:{theme:i,setTheme:j},children:a})}function h(){let a=(0,c.useContext)(f);if(void 0===a)throw Error("useTheme must be used within a ThemeProvider");return a}a.s(["ThemeProvider",()=>g,"useTheme",()=>h])},65196,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(68114);let f=["/admins/dashboard","/admins/login"];function g({children:a}){let g=(0,d.usePathname)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),n=f.some(a=>g?.startsWith(a));return((0,c.useEffect)(()=>{let a;if(!n)return void i(!0);let b=async()=>{try{let c=await (0,e.safeFetch)("/api/system/integrity",{method:"GET",cache:"no-store",headers:{Accept:"application/json"}});if(!c.ok){i(!0),k(!0),m(!0),a=setTimeout(b,18e5);return}let d=await c.json(),f=!0===d.s;i(f),k(!0),m(!1),f||(document.body.style.pointerEvents="none"),a=setTimeout(b,6e5)}catch(c){i(!0),k(!0),m(!0),a=setTimeout(b,18e5)}};return b(),()=>{a&&clearTimeout(a),document.body.style.pointerEvents="auto"}},[n,g]),j&&j&&!1===h)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{filter:"blur(8px)",pointerEvents:"none",userSelect:"none"},children:a}),(0,b.jsx)("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-[99999] p-4",style:{pointerEvents:"auto"},children:(0,b.jsx)("div",{className:"bg-white rounded-2xl max-w-md w-full p-8 shadow-2xl animate-fadeIn",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,b.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"程序错误"}),(0,b.jsx)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"代码安全审核失败！"}),(0,b.jsx)("a",{href:(a=>{try{return atob(a)}catch{return""}})("aHR0cHM6Ly9naXRodWIuY29tL3N1MTY4ODgvWHMtYmxvZw=="),target:"_blank",rel:"noopener noreferrer",className:"inline-block w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:"访问仓库"})]})})})]}):(0,b.jsx)(b.Fragment,{children:a})}a.s(["default",()=>g])},42310,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(54897),f=a.i(70106);let g=(0,f.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),h=(0,f.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),i=(0,f.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var j=a.i(88308);function k(){let a,f,k=(0,d.usePathname)();if(k.startsWith("/enterprise")||k.startsWith("/promo")||k.startsWith("/social-feed"))return null;let l=(0,e.isAdminPage)(k),{theme:m,setTheme:n}=(0,j.useTheme)(),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)({x:0,y:0}),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)({x:0,y:0}),C=(0,c.useRef)(null),D=(0,c.useRef)(!1),E=(0,c.useRef)(null),F=(0,c.useRef)(!1),G=(0,c.useCallback)((a=!1)=>{s&&(a&&(F.current=!0,setTimeout(()=>{F.current=!1},500)),v(!1),E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{v(!0)},1e3))},[s]);(0,c.useEffect)(()=>{let a=()=>{let a=window.innerWidth<768;t(a),a||v(!1)},b=()=>{p(!0),a(),window.addEventListener("resize",a);let b=localStorage.getItem("floatingButtonsPosition");if(b)try{x(JSON.parse(b))}catch(a){}};return"requestIdleCallback"in window?window.requestIdleCallback(b,{timeout:2e3}):setTimeout(b,500),()=>{window.removeEventListener("resize",a),E.current&&clearTimeout(E.current)}},[G]),(0,c.useEffect)(()=>{let a=()=>{r(window.scrollY>300)},b=a=>{r(a.detail.canScrollTop)};return window.addEventListener("scroll",a),window.addEventListener("docsPageScroll",b),()=>{window.removeEventListener("scroll",a),window.removeEventListener("docsPageScroll",b)}},[]);let H=(0,c.useCallback)(a=>{localStorage.setItem("floatingButtonsPosition",JSON.stringify(a))},[]),I=(0,c.useCallback)(a=>{if(!s)return;let b=a.touches[0];B({x:b.clientX-w.x,y:b.clientY-w.y}),z(!0),D.current=!1,G()},[s,w,G]),J=(0,c.useCallback)(a=>{if(!y||!s)return;a.preventDefault();let b=a.touches[0],c=b.clientX-A.x,d=b.clientY-A.y,e=C.current;if(e){let a=e.getBoundingClientRect();x({x:Math.max(-(window.innerWidth-a.width),Math.min(0,c)),y:Math.max(-(window.innerHeight-a.height),Math.min(0,d))}),D.current=!0}},[y,s,A]),K=(0,c.useCallback)(()=>{y&&D.current&&H(w),z(!1),G()},[y,w,H,G]);if(l||!o)return null;let L=`
    w-12 h-12 rounded-full shadow-lg border-2 transition-all duration-300
    flex items-center justify-center relative overflow-hidden
    hover:scale-110 active:scale-95
    ${"black"===m?"bg-bg-secondary text-text-primary border-border-primary hover:bg-bg-tertiary":"bg-bg-tertiary text-text-primary border-border-primary hover:bg-bg-secondary"}
  `;return(0,b.jsxs)("div",{ref:C,className:"fixed right-4 md:right-8 z-[9998] flex flex-col gap-3 transition-all duration-500 ease-out cursor-pointer",style:{bottom:"102px",transform:(a=s?w.x:0,f=s?w.y:0,s&&u&&!y&&(a+=40),`translate(${a}px, ${f}px)`),touchAction:"none",opacity:s?y?.8:u?.3:1:1},onClick:a=>{s&&u&&(a.stopPropagation(),G(!0))},onTouchStart:I,onTouchMove:J,onTouchEnd:K,onMouseEnter:()=>{s&&u&&G(!0)},children:[(0,b.jsx)("button",{onClick:()=>{if(D.current||s&&(u||F.current))return;let a=document.querySelector("[data-docs-content]");a?a.scrollTo({top:0,behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})},className:`${L} ${q?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-label":"回到顶部",children:(0,b.jsx)(i,{className:"w-5 h-5",style:{color:"var(--text-primary)"}})}),(0,b.jsx)("button",{onClick:()=>{D.current||s&&(u||F.current)||n("black"===m?"white":"black")},className:L,"aria-label":"切换主题",children:"black"===m?(0,b.jsx)(h,{className:"w-5 h-5",style:{color:"var(--text-primary)"}}):(0,b.jsx)(g,{className:"w-5 h-5",style:{color:"var(--text-primary)"}})})]})}a.s(["default",()=>k],42310)},29315,a=>{"use strict";var b=a.i(72131),c=a.i(50944),d=a.i(19032);let e={"/":"home","/social-feed":"social-feed","/notes":"notes","/navigation":"navigation","/galleries":"galleries","/services":"services","/messages":"messages","/docs":"docs"};function f(){let a=(0,c.usePathname)(),f=(0,b.useRef)("");return(0,b.useEffect)(()=>{if(f.current===a)return;let b=function(a){if(a.startsWith("/admins"))return null;if(e[a])return e[a];for(let[b,c]of Object.entries(e))if("/"!==b&&a.startsWith(b))return c;return null}(a);if(!b)return;let c=()=>{(0,d.recordPageVisit)(b,a),f.current=a},g=null,h=null;return"requestIdleCallback"in window?g=window.requestIdleCallback(c,{timeout:3e3}):h=setTimeout(c,1e3),()=>{null!==g&&"cancelIdleCallback"in window&&window.cancelIdleCallback(g),null!==h&&clearTimeout(h)}},[a]),null}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6ed6a535._.js.map