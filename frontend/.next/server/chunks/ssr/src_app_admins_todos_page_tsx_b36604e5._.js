module.exports=[45651,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(11642),f=a.i(19032),g=a.i(65763),h=a.i(57723);let i=a=>{if(!a)return"";try{let b=new Date(a);if(isNaN(b.getTime()))return"";let c=b.getFullYear(),d=String(b.getMonth()+1).padStart(2,"0"),e=String(b.getDate()).padStart(2,"0"),f=String(b.getHours()).padStart(2,"0"),g=String(b.getMinutes()).padStart(2,"0");return`${c}-${d}-${e}T${f}:${g}`}catch(a){return""}};function j(){(0,g.usePageTitle)("å¾…åŠžäº‹é¡¹ç®¡ç†",!0),(0,d.useRouter)();let{user:a}=(0,e.useAuth)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)({title:"",description:"",due_date:"",reminder_enabled:!1,reminder_time:"",is_completed:!1,progress:0,priority:"medium",status:"todo",category:"",estimated_hours:void 0,actual_hours:void 0,start_date:"",time_logs:[]}),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)({title:"",description:"",due_date:"",reminder_enabled:!1,reminder_time:"",is_completed:!1,progress:0,priority:"medium",status:"todo",category:"",estimated_hours:void 0,actual_hours:void 0,start_date:"",time_logs:[]}),[F,G]=(0,c.useState)({time:"",description:""}),[H,I]=(0,c.useState)({show:!1,type:"success",message:""});(0,c.useEffect)(()=>{J()},[]);let J=async()=>{try{let a=await (0,f.getAdminTodos)();if(a.success){let b=Array.isArray(a.data)?a.data:[];k(b)}}catch(a){I({show:!0,type:"error",message:a.response?.data?.message||a.message||"åŠ è½½å¾…åŠžäº‹é¡¹å¤±è´¥"}),k([])}finally{m(!1)}},K=a=>{let{name:b,type:c,value:d}=a.target,e=d;"checkbox"===c&&(e=a.target.checked),s({...r,[b]:e})},L=async a=>{a.preventDefault();try{let a={...r,due_date:r.due_date||void 0,reminder_time:r.reminder_time||void 0,progress:x?r.progress:0,priority:x?r.priority:"medium",status:x?r.status:"todo",category:x?r.category:null,estimated_hours:x?r.estimated_hours:null,actual_hours:x?r.actual_hours:null,start_date:x?r.start_date||void 0:null,time_logs:x?r.time_logs:[]};if(n?.id){if(!j.find(a=>a.id===n.id)){I({show:!0,type:"error",message:"å¾…åŠžäº‹é¡¹ä¸å­˜åœ¨ï¼Œå¯èƒ½å·²è¢«åˆ é™¤"}),O();return}(await (0,f.updateAdminTodo)(n.id,a)).success&&(I({show:!0,type:"success",message:"å¾…åŠžäº‹é¡¹æ›´æ–°æˆåŠŸ"}),await J(),O())}else(await (0,f.createAdminTodo)(a)).success&&(I({show:!0,type:"success",message:"å¾…åŠžäº‹é¡¹åˆ›å»ºæˆåŠŸ"}),await J(),O())}catch(a){a.response?.status===404?(I({show:!0,type:"error",message:"å¾…åŠžäº‹é¡¹ä¸å­˜åœ¨ï¼Œå¯èƒ½å·²è¢«åˆ é™¤"}),O()):I({show:!0,type:"error",message:a.response?.data?.message||"æ“ä½œå¤±è´¥"})}},M=async a=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¾…åŠžäº‹é¡¹å—ï¼Ÿ"))try{(await (0,f.deleteAdminTodo)(a)).success&&(I({show:!0,type:"success",message:"å¾…åŠžäº‹é¡¹åˆ é™¤æˆåŠŸ"}),n?.id===a&&O(),await J())}catch(a){I({show:!0,type:"error",message:a.response?.data?.message||"åˆ é™¤å¤±è´¥"})}},N=async(a,b)=>{try{(await (0,f.updateAdminTodo)(a,{is_completed:!b})).success&&(I({show:!0,type:"success",message:b?"æ ‡è®°ä¸ºæœªå®Œæˆ":"æ ‡è®°ä¸ºå·²å®Œæˆ"}),await J())}catch(a){I({show:!0,type:"error",message:a.response?.data?.message||"æ“ä½œå¤±è´¥"})}},O=()=>{s({title:"",description:"",due_date:"",reminder_enabled:!1,reminder_time:"",is_completed:!1,progress:0,priority:"medium",status:"todo",category:"",estimated_hours:void 0,actual_hours:void 0,start_date:"",time_logs:[]}),o(null),q(!1),y(!1)},P=()=>{A(!1),C(null),G({time:"",description:""})},Q=a=>{let{name:b,type:c,value:d}=a.target,e=d;"checkbox"===c?e=a.target.checked:"progress"===b?e=parseInt(d):("estimated_hours"===b||"actual_hours"===b)&&(e=""===d?void 0:parseFloat(d)),E({...D,[b]:e})},R=()=>{if(!F.time||!F.description.trim())return void I({show:!0,type:"error",message:"è¯·å¡«å†™å®Œæ•´çš„æ—¶é—´ç‚¹å’Œæè¿°"});let a={id:Date.now(),time:F.time,description:F.description.trim()};E({...D,time_logs:[...D.time_logs||[],a]}),G({time:"",description:""}),I({show:!0,type:"success",message:"æ—¶é—´ç‚¹è®°å½•å·²æ·»åŠ "})},S=(a,b,c)=>{E({...D,time_logs:(D.time_logs||[]).map(d=>d.id===a?{...d,[b]:c}:d)})},T=async()=>{if(B?.id)try{let a={...D,due_date:D.due_date||void 0,reminder_time:D.reminder_time||void 0,start_date:D.start_date||void 0};(await (0,f.updateAdminTodo)(B.id,a)).success&&(I({show:!0,type:"success",message:"é¡¹ç›®è¿›åº¦æ›´æ–°æˆåŠŸ"}),await J(),P())}catch(a){I({show:!0,type:"error",message:a.response?.data?.message||"ä¿å­˜å¤±è´¥"})}},U=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),V=(0,c.useMemo)(()=>j.filter(a=>{let b=a.title.toLowerCase().includes(t.toLowerCase())||a.description?.toLowerCase().includes(t.toLowerCase()),c="all"===v||"pending"===v&&!a.is_completed||"completed"===v&&a.is_completed;return b&&c}),[j,t,v]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.default,{show:H.show,message:H.message,type:H.type,onClose:()=>I({...H,show:!1})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",placeholder:"æœç´¢å¾…åŠžäº‹é¡¹...",value:t,onChange:a=>u(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,b.jsxs)("select",{value:v,onChange:a=>w(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"all",children:"å…¨éƒ¨çŠ¶æ€"}),(0,b.jsx)("option",{value:"pending",children:"æœªå®Œæˆ"}),(0,b.jsx)("option",{value:"completed",children:"å·²å®Œæˆ"})]})]})}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("button",{onClick:()=>{p?O():q(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:p?"å–æ¶ˆ":"+ æ·»åŠ å¾…åŠžäº‹é¡¹"})}),p&&(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:n?"ç¼–è¾‘å¾…åŠžäº‹é¡¹":"æ·»åŠ å¾…åŠžäº‹é¡¹"}),(0,b.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["æ ‡é¢˜ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:r.title,onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"å¾…åŠžäº‹é¡¹æ ‡é¢˜"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"æè¿°"}),(0,b.jsx)("textarea",{id:"description",name:"description",rows:3,value:r.description,onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"è¯¦ç»†æè¿°..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"æˆªæ­¢æ—¥æœŸ"}),(0,b.jsx)("input",{id:"due_date",name:"due_date",type:"datetime-local",value:r.due_date,onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)("input",{id:"reminder_enabled",name:"reminder_enabled",type:"checkbox",checked:r.reminder_enabled,onChange:K,className:"w-4 h-4 mt-1 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("label",{htmlFor:"reminder_enabled",className:"font-medium text-gray-900",children:"å¯ç”¨æé†’åŠŸèƒ½"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"å¼€å¯åŽï¼Œå°†åœ¨è®¾å®šçš„æ—¶é—´é€šè¿‡å¼¹çª—æé†’æ‚¨å¤„ç†æ­¤å¾…åŠžäº‹é¡¹"})]})]}),r.reminder_enabled&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"reminder_time",className:"block text-sm font-medium text-gray-700 mb-2",children:"æé†’æ—¶é—´"}),(0,b.jsx)("input",{id:"reminder_time",name:"reminder_time",type:"datetime-local",value:r.reminder_time,onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"å¿«é€Ÿè®¾ç½®ï¼š"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{let a=new Date;a.setHours(a.getHours()+1),s({...r,reminder_time:i(a.toISOString())})},className:"px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",children:"1å°æ—¶åŽ"}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a=new Date;a.setHours(a.getHours()+3),s({...r,reminder_time:i(a.toISOString())})},className:"px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",children:"3å°æ—¶åŽ"}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a=new Date;a.setDate(a.getDate()+1),a.setHours(9,0,0,0),s({...r,reminder_time:i(a.toISOString())})},className:"px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",children:"æ˜Žå¤©ä¸Šåˆ9ç‚¹"}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a=new Date;a.setDate(a.getDate()+1),a.setHours(14,0,0,0),s({...r,reminder_time:i(a.toISOString())})},className:"px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",children:"æ˜Žå¤©ä¸‹åˆ2ç‚¹"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)("input",{id:"progress_management_enabled",name:"progress_management_enabled",type:"checkbox",checked:x,onChange:a=>y(a.target.checked),className:"w-4 h-4 mt-1 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 focus:ring-2"}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("label",{htmlFor:"progress_management_enabled",className:"font-medium text-gray-900",children:"å¯ç”¨é¡¹ç›®è¿›åº¦ç®¡ç†"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"å¼€å¯åŽï¼Œå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ã€çŠ¶æ€ã€è¿›åº¦ã€å·¥æ—¶ç­‰è¯¦ç»†çš„é¡¹ç›®ç®¡ç†ä¿¡æ¯"})]})]}),x&&(0,b.jsx)("div",{className:"space-y-4 pt-3 border-t border-purple-200",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"ä¼˜å…ˆçº§"}),(0,b.jsxs)("select",{id:"priority",name:"priority",value:r.priority,onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"low",children:"ðŸŸ¢ ä½Ž"}),(0,b.jsx)("option",{value:"medium",children:"ðŸŸ¡ ä¸­"}),(0,b.jsx)("option",{value:"high",children:"ðŸŸ  é«˜"}),(0,b.jsx)("option",{value:"urgent",children:"ðŸ”´ ç´§æ€¥"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"ä»»åŠ¡çŠ¶æ€"}),(0,b.jsxs)("select",{id:"status",name:"status",value:r.status,onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"todo",children:"ðŸ“‹ å¾…å¼€å§‹"}),(0,b.jsx)("option",{value:"in_progress",children:"âš™ï¸ è¿›è¡Œä¸­"}),(0,b.jsx)("option",{value:"completed",children:"âœ… å·²å®Œæˆ"}),(0,b.jsx)("option",{value:"cancelled",children:"âŒ å·²å–æ¶ˆ"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»æ ‡ç­¾"}),(0,b.jsx)("input",{id:"category",name:"category",type:"text",value:r.category||"",onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼šå‰ç«¯å¼€å‘"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"progress",className:"block text-sm font-medium text-gray-700 mb-2",children:["å®Œæˆè¿›åº¦ (",r.progress,"%)"]}),(0,b.jsx)("input",{id:"progress",name:"progress",type:"range",min:"0",max:"100",value:r.progress||0,onChange:K,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"estimated_hours",className:"block text-sm font-medium text-gray-700 mb-2",children:"é¢„è®¡å·¥æ—¶ (å°æ—¶)"}),(0,b.jsx)("input",{id:"estimated_hours",name:"estimated_hours",type:"number",step:"0.5",min:"0",value:r.estimated_hours||"",onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼š8"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"actual_hours",className:"block text-sm font-medium text-gray-700 mb-2",children:"å®žé™…å·¥æ—¶ (å°æ—¶)"}),(0,b.jsx)("input",{id:"actual_hours",name:"actual_hours",type:"number",step:"0.5",min:"0",value:r.actual_hours||"",onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼š10"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"å¼€å§‹æ—¥æœŸ"}),(0,b.jsx)("input",{id:"start_date",name:"start_date",type:"datetime-local",value:r.start_date||"",onChange:K,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{id:"is_completed",name:"is_completed",type:"checkbox",checked:r.is_completed,onChange:K,className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2"}),(0,b.jsx)("label",{htmlFor:"is_completed",className:"ml-2 text-sm font-medium text-gray-700",children:"æ ‡è®°ä¸ºå·²å®Œæˆ"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:n?"æ›´æ–°":"æ·»åŠ "}),(0,b.jsx)("button",{type:"button",onClick:O,className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"å–æ¶ˆ"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["å¾…åŠžäº‹é¡¹åˆ—è¡¨ (",V.length,")"]}),0===V.length?(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,b.jsx)("p",{className:"text-sm",children:t||"all"!==v?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å¾…åŠžäº‹é¡¹":"è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•å¾…åŠžäº‹é¡¹"})]}):(0,b.jsx)("div",{className:"space-y-2",children:V.map(a=>{let c=a.progress&&a.progress>0||a.priority&&"medium"!==a.priority||a.status&&"todo"!==a.status||a.category||a.estimated_hours||a.actual_hours||a.start_date||a.time_logs&&a.time_logs.length>0;return(0,b.jsx)("div",{className:`p-3 sm:p-4 rounded-lg border transition-colors ${a.is_completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,b.jsx)("button",{onClick:()=>a.id&&N(a.id,a.is_completed),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-colors ${a.is_completed?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-green-500"}`,children:a.is_completed&&(0,b.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,b.jsx)("h3",{className:`font-medium break-words ${a.is_completed?"text-gray-500 line-through":"text-gray-900"}`,children:a.title}),a.priority&&"medium"!==a.priority&&(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded flex-shrink-0 ${"urgent"===a.priority?"bg-red-100 text-red-700":"high"===a.priority?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:"urgent"===a.priority?"ðŸ”´ ç´§æ€¥":"high"===a.priority?"ðŸŸ  é«˜":"ðŸŸ¢ ä½Ž"}),a.status&&"todo"!==a.status&&(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded flex-shrink-0 ${"completed"===a.status?"bg-green-100 text-green-700":"in_progress"===a.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:"completed"===a.status?"âœ… å·²å®Œæˆ":"in_progress"===a.status?"âš™ï¸ è¿›è¡Œä¸­":"âŒ å·²å–æ¶ˆ"}),a.category&&(0,b.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded flex-shrink-0",children:["ðŸ·ï¸ ",a.category]}),a.reminder_enabled&&(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded flex-shrink-0",children:"ðŸ”” æé†’"})]}),void 0!==a.progress&&a.progress>0&&(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[(0,b.jsx)("span",{children:"è¿›åº¦"}),(0,b.jsxs)("span",{className:"font-semibold",children:[a.progress,"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,b.jsx)("div",{className:`h-1.5 rounded-full transition-all ${100===a.progress?"bg-green-500":a.progress>=75?"bg-blue-500":a.progress>=50?"bg-yellow-500":"bg-orange-500"}`,style:{width:`${a.progress}%`}})})]}),a.description&&(0,b.jsx)("p",{className:`text-sm mb-1.5 break-words ${a.is_completed?"text-gray-400":"text-gray-600"}`,children:a.description}),(a.estimated_hours||a.actual_hours||a.start_date||a.due_date||a.reminder_enabled&&a.reminder_time)&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 space-y-0.5",children:[(a.estimated_hours||a.actual_hours)&&(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[a.estimated_hours&&(0,b.jsxs)("span",{children:["â±ï¸ é¢„è®¡: ",a.estimated_hours,"h"]}),a.actual_hours&&(0,b.jsxs)("span",{children:["â° å®žé™…: ",a.actual_hours,"h"]}),a.estimated_hours&&a.actual_hours&&(0,b.jsxs)("span",{className:`font-semibold ${a.actual_hours>a.estimated_hours?"text-red-600":"text-green-600"}`,children:["(",a.actual_hours>a.estimated_hours?"+":"",(a.actual_hours-a.estimated_hours).toFixed(1),"h)"]})]}),a.start_date&&(0,b.jsxs)("div",{children:["ðŸ“… å¼€å§‹: ",U(a.start_date)]}),a.due_date&&(0,b.jsxs)("div",{children:["â° æˆªæ­¢: ",U(a.due_date)]}),a.reminder_enabled&&a.reminder_time&&(0,b.jsxs)("div",{children:["ðŸ”” æé†’: ",U(a.reminder_time)]})]})]}),(0,b.jsxs)("div",{className:"flex sm:flex-col gap-2 flex-shrink-0",children:[c&&(0,b.jsx)("button",{onClick:()=>{C(a),E({...a,time_logs:a.time_logs||[]}),A(!0)},className:"flex-1 sm:flex-initial px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded transition-colors whitespace-nowrap",children:"ðŸ“Š è¿›åº¦è®°å½•"}),(0,b.jsx)("button",{onClick:()=>{o(a),s({title:a.title,description:a.description||"",due_date:i(a.due_date),reminder_enabled:a.reminder_enabled,reminder_time:i(a.reminder_time),is_completed:a.is_completed,progress:a.progress||0,priority:a.priority||"medium",status:a.status||"todo",category:a.category||"",estimated_hours:a.estimated_hours,actual_hours:a.actual_hours,start_date:i(a.start_date),time_logs:a.time_logs||[]}),y(!!(a.progress&&a.progress>0||a.priority&&"medium"!==a.priority||a.status&&"todo"!==a.status||a.category||a.estimated_hours||a.actual_hours||a.start_date||a.time_logs&&a.time_logs.length>0)),q(!0)},className:"flex-1 sm:flex-initial px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"ç¼–è¾‘"}),(0,b.jsx)("button",{onClick:()=>a.id&&M(a.id),className:"flex-1 sm:flex-initial px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors",children:"åˆ é™¤"})]})]})},a.id)})})]})]})}),z&&B&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 sm:px-6 py-3 z-10",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:["ðŸ“Š é¡¹ç›®è¿›åº¦ç®¡ç† - ",B.title]}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-0.5",children:"ç®¡ç†é¡¹ç›®è¿›åº¦ã€æ—¶é—´ç‚¹è®°å½•å’Œé¡¹ç›®ä¿¡æ¯"})]}),(0,b.jsx)("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,b.jsxs)("div",{className:"p-4 sm:p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-3 border border-purple-200",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"ðŸ“Š é¡¹ç›®ä¿¡æ¯æ€»è§ˆ"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg p-2 text-center",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"ä¼˜å…ˆçº§"}),(0,b.jsx)("div",{className:"text-sm font-semibold mt-0.5",children:"urgent"===D.priority?"ðŸ”´ ç´§æ€¥":"high"===D.priority?"ðŸŸ  é«˜":"low"===D.priority?"ðŸŸ¢ ä½Ž":"ðŸŸ¡ ä¸­"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-2 text-center",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"çŠ¶æ€"}),(0,b.jsx)("div",{className:"text-sm font-semibold mt-0.5",children:"completed"===D.status?"âœ… å·²å®Œæˆ":"in_progress"===D.status?"âš™ï¸ è¿›è¡Œä¸­":"cancelled"===D.status?"âŒ å·²å–æ¶ˆ":"ðŸ“‹ å¾…å¼€å§‹"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-2 text-center",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"è¿›åº¦"}),(0,b.jsxs)("div",{className:"text-sm font-semibold mt-0.5 text-purple-600",children:[D.progress,"%"]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-2 text-center",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"åˆ†ç±»"}),(0,b.jsx)("div",{className:"text-sm font-semibold mt-0.5 truncate",children:D.category||"æœªåˆ†ç±»"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"ðŸ“‹ åŸºç¡€ä¿¡æ¯"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ä¼˜å…ˆçº§"}),(0,b.jsxs)("select",{name:"priority",value:D.priority,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"low",children:"ðŸŸ¢ ä½Ž"}),(0,b.jsx)("option",{value:"medium",children:"ðŸŸ¡ ä¸­"}),(0,b.jsx)("option",{value:"high",children:"ðŸŸ  é«˜"}),(0,b.jsx)("option",{value:"urgent",children:"ðŸ”´ ç´§æ€¥"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ä»»åŠ¡çŠ¶æ€"}),(0,b.jsxs)("select",{name:"status",value:D.status,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"todo",children:"ðŸ“‹ å¾…å¼€å§‹"}),(0,b.jsx)("option",{value:"in_progress",children:"âš™ï¸ è¿›è¡Œä¸­"}),(0,b.jsx)("option",{value:"completed",children:"âœ… å·²å®Œæˆ"}),(0,b.jsx)("option",{value:"cancelled",children:"âŒ å·²å–æ¶ˆ"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»æ ‡ç­¾"}),(0,b.jsx)("input",{name:"category",type:"text",value:D.category||"",onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼šå‰ç«¯å¼€å‘"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å¼€å§‹æ—¥æœŸ"}),(0,b.jsx)("input",{name:"start_date",type:"datetime-local",value:D.start_date||"",onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"ðŸ“ˆ è¿›åº¦è·Ÿè¸ª"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["å®Œæˆè¿›åº¦: ",D.progress,"%"]}),(0,b.jsx)("input",{name:"progress",type:"range",min:"0",max:"100",step:"5",value:D.progress,onChange:Q,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[(0,b.jsx)("span",{children:"0%"}),(0,b.jsx)("span",{children:"25%"}),(0,b.jsx)("span",{children:"50%"}),(0,b.jsx)("span",{children:"75%"}),(0,b.jsx)("span",{children:"100%"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4",children:[(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"â±ï¸ å·¥æ—¶ç»Ÿè®¡"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"é¢„è®¡å·¥æ—¶ (å°æ—¶)"}),(0,b.jsx)("input",{name:"estimated_hours",type:"number",min:"0",step:"0.5",value:D.estimated_hours||"",onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼š8"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å®žé™…å·¥æ—¶ (å°æ—¶)"}),(0,b.jsx)("input",{name:"actual_hours",type:"number",min:"0",step:"0.5",value:D.actual_hours||"",onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"å¦‚ï¼š10"})]})]}),D.estimated_hours&&D.actual_hours&&(0,b.jsx)("div",{className:`mt-3 text-xs sm:text-sm p-2 sm:p-3 rounded-lg ${D.actual_hours>D.estimated_hours?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-semibold",children:D.actual_hours>D.estimated_hours?"âš ï¸ è¶…æ—¶":"âœ… æå‰å®Œæˆ"}),(0,b.jsxs)("span",{children:["åå·®: ",D.actual_hours>D.estimated_hours?"+":"",(D.actual_hours-D.estimated_hours).toFixed(1),"h (",((D.actual_hours-D.estimated_hours)/D.estimated_hours*100).toFixed(1),"%)"]})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4",children:[(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"ðŸ• æ—¶é—´ç‚¹è®°å½•"}),(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-3",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"æ·»åŠ æ—¶é—´ç‚¹"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["æ—¶é—´ç‚¹ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"datetime-local",value:F.time,onChange:a=>G({...F,time:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["å·¥ä½œå†…å®¹ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:F.description,onChange:a=>G({...F,description:a.target.value}),onKeyPress:a=>"Enter"===a.key&&R(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"å¦‚ï¼šå®Œæˆäº†ç”¨æˆ·ç™»å½•æ¨¡å—"}),(0,b.jsx)("button",{type:"button",onClick:R,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors whitespace-nowrap",children:"æ·»åŠ "})]})]})]})]}),D.time_logs&&D.time_logs.length>0?(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["å·²è®°å½• ",D.time_logs.length," ä¸ªæ—¶é—´ç‚¹"]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"åºå·"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ—¶é—´ç‚¹"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"å·¥ä½œå†…å®¹"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ“ä½œ"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[...D.time_logs].sort((a,b)=>new Date(a.time).getTime()-new Date(b.time).getTime()).map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:c+1}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:(0,b.jsx)("input",{type:"datetime-local",value:a.time,onChange:b=>S(a.id,"time",b.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,b.jsx)("input",{type:"text",value:a.description,onChange:b=>S(a.id,"description",b.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void(E({...D,time_logs:(D.time_logs||[]).filter(a=>a.id!==b)}),I({show:!0,type:"success",message:"æ—¶é—´ç‚¹è®°å½•å·²åˆ é™¤"}))},className:"text-red-600 hover:text-red-900",children:"åˆ é™¤"})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"mt-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"æ—¶é—´è½´é¢„è§ˆ"}),(0,b.jsx)("div",{className:"space-y-3",children:[...D.time_logs].sort((a,b)=>new Date(a.time).getTime()-new Date(b.time).getTime()).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start bg-white rounded-lg p-3 shadow-sm",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:c+1}),(0,b.jsxs)("div",{className:"ml-3 flex-1",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500",children:U(a.time)}),(0,b.jsx)("div",{className:"text-sm text-gray-900 mt-1",children:a.description})]})]},a.id))})]})]}):(0,b.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[(0,b.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("h4",{className:"text-base font-medium text-gray-900 mb-2",children:"æš‚æ— æ—¶é—´ç‚¹è®°å½•"}),(0,b.jsx)("p",{className:"text-gray-500",children:"è¯·æ·»åŠ ç¬¬ä¸€ä¸ªæ—¶é—´ç‚¹è®°å½•æ¥è·Ÿè¸ªä»»åŠ¡è¿›åº¦"})]})]})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-4 sm:px-6 py-3 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:P,className:"px-4 sm:px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"å–æ¶ˆ"}),(0,b.jsx)("button",{onClick:T,className:"px-4 sm:px-6 py-2 text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors",children:"ä¿å­˜æ›´æ”¹"})]})]})})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_app_admins_todos_page_tsx_b36604e5._.js.map