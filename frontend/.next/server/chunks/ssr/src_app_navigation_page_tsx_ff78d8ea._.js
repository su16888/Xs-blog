module.exports=[69643,a=>{"use strict";var b=a.i(87924),c=a.i(19721),d=a.i(52495),e=a.i(87532),f=a.i(33508),g=a.i(21374),h=a.i(96101),i=a.i(5784),j=a.i(72131),k=a.i(68114);function l({src:a,alt:c,placeholder:d='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"%3E%3Crect fill="%23f0f0f0" width="400" height="300"/%3E%3C/svg%3E',fallback:e='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"%3E%3Crect fill="%23e0e0e0" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" fill="%23999" font-size="20"%3E加载失败%3C/text%3E%3C/svg%3E',rootMargin:f="200px",className:g,wrapperClassName:h,showLoader:i=!1,onLoad:l,onError:m,...n}){let[o,p]=(0,j.useState)(d),[q,r]=(0,j.useState)("loading"),s=(0,j.useRef)(null),t=(0,j.useRef)(null);(0,j.useEffect)(()=>"IntersectionObserver"in window?(t.current=new IntersectionObserver(b=>{b.forEach(b=>{b.isIntersecting&&(u(a),s.current&&t.current&&t.current.unobserve(s.current))})},{rootMargin:f,threshold:.01}),s.current&&t.current.observe(s.current),()=>{t.current&&t.current.disconnect()}):void u(a),[a,f]);let u=a=>{let b=new Image;b.onload=()=>{p(a),r("loaded"),l?.()},b.onerror=()=>{p(e),r("error"),m?.()},b.src=a};return(0,b.jsxs)("div",{className:(0,k.cn)("relative overflow-hidden",h),children:[(0,b.jsx)("img",{ref:s,src:o,alt:c||"",className:(0,k.cn)("transition-opacity duration-300","loaded"===q?"opacity-100":"opacity-0",g),...n}),i&&"loading"===q&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:(0,b.jsxs)("div",{className:"relative w-12 h-12",children:[(0,b.jsx)("div",{className:"absolute inset-0 border-4 border-gray-300 rounded-full"}),(0,b.jsx)("div",{className:"absolute inset-0 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"})]})}),!i&&"loading"===q&&(0,b.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"})]})}var m=a.i(19032),n=j;function o(){return(o=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}function p(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function q(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?p(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],e in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):p(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}class r extends n.default.Component{constructor(a){let b;super(a),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),b=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:b}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})):this.reCalculateColumnCount()}reCalculateColumnCount(){let a=window&&window.innerWidth||1/0,b=this.props.breakpointCols;"object"!=typeof b&&(b={default:parseInt(b)||2});let c=1/0,d=b.default||2;for(let e in b){let f=parseInt(e);f>0&&a<=f&&f<c&&(c=f,d=b[e])}d=Math.max(1,parseInt(d)||1),this.state.columnCount!==d&&this.setState({columnCount:d})}itemsInColumns(){let a=this.state.columnCount,b=Array(a),c=n.default.Children.toArray(this.props.children);for(let d=0;d<c.length;d++){let e=d%a;b[e]||(b[e]=[]),b[e].push(c[d])}return b}renderColumns(){let{column:a,columnAttrs:b={},columnClassName:c}=this.props,d=this.itemsInColumns(),e=`${100/d.length}%`,f=c;f&&"string"!=typeof f&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===f&&(f="my-masonry-grid_column"));let g=q(q(q({},a),b),{},{style:q(q({},b.style),{},{width:e}),className:f});return d.map((a,b)=>n.default.createElement("div",o({},g,{key:b}),a))}logDeprecated(a){console.error("[Masonry]",a)}render(){let a=this.props,{children:b,breakpointCols:c,columnClassName:d,columnAttrs:e,column:f,className:g}=a,h=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),i=g;return"string"!=typeof g&&(this.logDeprecated('The property "className" requires a string'),void 0===g&&(i="my-masonry-grid")),n.default.createElement("div",o({},h,{className:i}),this.renderColumns())}}r.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0};var s=a.i(26971),t=a.i(46712),u=a.i(78891);let v=(0,c.default)(async()=>{},{loadableGenerated:{modules:[97449]},ssr:!1});function w(){let[a,c]=(0,j.useState)({showRecommended:!1,recommended:[],categories:[]}),[n,o]=(0,j.useState)(!0),[p,q]=(0,j.useState)(!1),[w,x]=(0,j.useState)(null),[y,z]=(0,j.useState)(""),[A,B]=(0,j.useState)(!1),[C,D]=(0,j.useState)(null),[E,F]=(0,j.useState)(!1),[G,H]=(0,j.useState)({title:"",description:"",browserTitle:"",browserSubtitle:""}),[I,J]=(0,j.useState)(!1),K={themeType:"default",footerCopyright:`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:"true",showWapSidebar:"true"},[L,M]=(0,j.useState)(K);(0,j.useEffect)(()=>{N()},[]),(0,j.useEffect)(()=>{if(!G.browserTitle)return;let a=G.browserSubtitle?` - ${G.browserSubtitle}`:"";document.title=`${G.browserTitle}${a}`},[G.browserTitle,G.browserSubtitle]);let N=async()=>{try{await Promise.all([O(),P()])}catch(a){console.error("Failed to load data:",a)}finally{o(!1)}},O=async()=>{try{let[a,b]=await Promise.all([(0,m.getSettings)(),(0,m.getPageText)("navigation")]);if(a.success&&a.data){let b={};a.data.forEach(a=>{b[a.key]=a.value}),M({themeType:b.themeType||"default",footerCopyright:b.footerCopyright||`\xa9 ${new Date().getFullYear()} 个人主页. All rights reserved.`,showTopNavbar:b.showTopNavbar||"true",showWapSidebar:b.showWapSidebar||"true"})}b.success&&b.data&&(H({title:b.data.title||"导航列表",description:b.data.description||"探索精选的网站导航",browserTitle:b.data.browserTitle||"导航列表",browserSubtitle:b.data.browserSubtitle||""}),J(!0))}catch(a){console.error("Failed to load settings:",a),J(!0)}},P=async()=>{try{let a=await (0,m.getSitesGroupedByCategory)();a.success&&a.data&&c(a.data)}catch(a){console.error("Failed to fetch navigation data:",a),c({showRecommended:!1,recommended:[],categories:[]})}},Q=(0,j.useMemo)(()=>a=>{if(!y.trim())return a;let b=y.toLowerCase();return a.filter(a=>{let c=a.name.toLowerCase().includes(b),d=a.description?.toLowerCase().includes(b);return c||d})},[y]),R=(a,c,e)=>(0,b.jsx)("button",{onClick:()=>{x(a),q(!0)},className:"group block p-3 bg-bg-secondary rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-0.5 border border-border-primary transition-all duration-300 cursor-pointer text-left w-full animate-fade-in",children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center",children:[a.logo?(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md overflow-hidden flex items-center justify-center",children:(0,b.jsx)(l,{src:(0,k.getFileUrl)(a.logo),alt:a.name,className:"w-full h-full object-cover"})}):(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-semibold text-base shadow-sm",children:a.name[0]}),(0,b.jsxs)("div",{className:"relative flex flex-col items-center mb-1",children:[(0,b.jsx)("h3",{className:"font-medium text-xs text-text-primary group-hover:text-primary-500 transition-colors",children:a.name}),(0,b.jsx)(d.ExternalLink,{className:"w-3 h-3 text-primary-500 opacity-0 group-hover:opacity-100 transition-opacity absolute -right-4 top-1/2 transform -translate-y-1/2"})]}),a.description&&(0,b.jsx)("p",{className:"text-[10px] text-text-tertiary line-clamp-2 text-center leading-relaxed",children:a.description})]})},`site-${void 0!==e?`${e}-`:""}${c}`);L?.themeType,L?.showTopNavbar,L?.showWapSidebar;let S=(0,j.useMemo)(()=>null===C?Q(a?.recommended||[]):[],[C,Q,a?.recommended]),T=(0,j.useMemo)(()=>(a?.categories||[]).filter(a=>null===C||a.category.name===C).map(a=>({...a,sites:Q(a.sites)})).filter(a=>a.sites.length>0),[a?.categories,C,Q]),U=S.length>0||T.length>0,V=y.trim()&&U,W=y.trim()&&!U;return(0,b.jsxs)("main",{className:"min-h-screen bg-bg-primary relative flex flex-col hide-scrollbar",children:[(0,b.jsx)(t.default,{}),(0,b.jsx)(u.default,{}),(0,b.jsxs)("div",{className:"relative z-0 flex-1 flex flex-col",children:[(0,b.jsx)("div",{className:"h-16"}),(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl py-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:G.title}),(0,b.jsx)("p",{className:"text-text-secondary",children:G.description})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 mb-3",children:[!n&&a&&a.categories.length>0&&(0,b.jsxs)("div",{className:"relative md:w-48 flex-shrink-0",children:[(0,b.jsxs)("button",{onClick:()=>F(!E),className:"w-full flex items-center justify-between px-4 py-3 bg-bg-secondary rounded-lg border border-border-primary hover:bg-bg-tertiary transition-all",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.FolderOpen,{className:"w-4 h-4 text-text-secondary"}),(0,b.jsx)("span",{className:"text-sm font-medium text-text-primary truncate",children:null===C?"全部分类":C})]}),(0,b.jsx)(i.ChevronDown,{className:`w-4 h-4 text-text-tertiary transition-transform flex-shrink-0 ${E?"rotate-180":""}`})]}),E&&(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 p-3 bg-bg-secondary rounded-lg border border-border-primary shadow-lg z-20",children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsx)("button",{onClick:()=>{D(null),F(!1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${null===C?"bg-primary-500 text-white shadow-md":"bg-bg-tertiary text-text-secondary hover:bg-bg-primary border border-border-primary"}`,children:"全部"}),a.categories.map(a=>(0,b.jsxs)("button",{onClick:()=>{D(a.category.name),F(!1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${C===a.category.name?"bg-primary-500 text-white shadow-md":"bg-bg-tertiary text-text-secondary hover:bg-bg-primary border border-border-primary"}`,children:[a.category.icon&&(0,b.jsx)("span",{className:"mr-1.5",children:a.category.icon}),a.category.name]},a.category.name))]})})]}),(0,b.jsx)("div",{className:"hidden md:flex items-center",children:A?(0,b.jsx)("div",{className:"w-64",children:(0,b.jsxs)("div",{className:"relative flex items-center",children:[(0,b.jsx)(e.Search,{className:"absolute left-3 top-0 bottom-0 my-auto w-4 h-4 text-text-tertiary pointer-events-none"}),(0,b.jsx)("input",{type:"text",placeholder:"搜索导航站点...",value:y,onChange:a=>z(a.target.value),className:"w-full h-[46px] pl-9 pr-9 bg-bg-secondary border border-border-primary rounded-lg text-sm text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",autoComplete:"off",autoFocus:!0}),(0,b.jsx)("button",{type:"button",onClick:()=>{z(""),B(!1)},className:"absolute right-3 top-0 bottom-0 my-auto w-5 h-5 flex items-center justify-center text-text-tertiary hover:text-text-primary transition-colors","aria-label":"关闭搜索",children:(0,b.jsx)(f.X,{className:"w-4 h-4"})})]})}):(0,b.jsx)("button",{type:"button",onClick:()=>B(!0),className:"flex items-center justify-center w-[46px] h-[46px] bg-bg-secondary border border-border-primary rounded-lg text-text-secondary hover:bg-bg-tertiary hover:text-text-primary transition-all","aria-label":"搜索",children:(0,b.jsx)(e.Search,{className:"w-5 h-5"})})})]}),V&&(0,b.jsx)("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"var(--info-bg)",borderColor:"var(--info-border)"},children:(0,b.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm",style:{color:"var(--info-text)"},children:["搜索结果: 找到 ",S.length+T.reduce((a,b)=>a+b.sites.length,0)," 个相关网站",(0,b.jsxs)("span",{className:"font-medium ml-1",children:['"',y,'"']})]})})}),W&&(0,b.jsx)("div",{className:"p-4 bg-bg-tertiary/50 rounded-xl border border-border-primary/50 text-center",children:(0,b.jsxs)("span",{className:"text-sm text-text-secondary",children:['没有找到包含 "',y,'" 的网站']})})]}),n&&(0,b.jsx)(r,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:[...Array(15)].map((a,c)=>(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)("div",{className:"p-3 bg-bg-secondary rounded-lg shadow-sm border border-border-primary animate-pulse",children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 mb-2 rounded-md bg-bg-tertiary"}),(0,b.jsx)("div",{className:"h-3 bg-bg-tertiary rounded w-16 mb-1"}),(0,b.jsx)("div",{className:"h-2 bg-bg-tertiary rounded w-20"})]})})},c))}),!n&&a?.showRecommended&&S.length>0&&(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 mb-4",children:[(0,b.jsx)(g.Star,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,b.jsx)("h2",{className:"text-lg font-bold text-text-primary",children:"导航推荐"})]}),(0,b.jsx)(r,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:S.map((a,c)=>(0,b.jsx)("div",{className:"mb-3",children:R(a,c)},`recommended-${c}`))})]}),!n&&T.map((a,c)=>(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[a.category.icon&&(0,b.jsx)("span",{className:"text-lg",children:a.category.icon}),(0,b.jsx)("h2",{className:"text-lg font-bold text-text-primary",children:a.category.name})]}),a.category.description&&(0,b.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:a.category.description})]}),(0,b.jsx)(r,{breakpointCols:{default:5,1024:4,768:3,640:2},className:"flex -ml-3 w-auto",columnClassName:"pl-3 bg-clip-padding",children:a.sites.map((a,d)=>(0,b.jsx)("div",{className:"mb-3",children:R(a,d,c)},`site-${c}-${d}`))})]},`category-${c}`)),!n&&!a?.showRecommended&&0===(a?.categories?.length||0)&&(0,b.jsxs)("div",{className:"text-center py-16 text-text-tertiary",children:[(0,b.jsx)("p",{className:"text-lg",children:"暂无导航数据"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:"请在后台添加导航分类和站点"})]})]}),(0,b.jsxs)("footer",{className:"mt-auto border-t border-border-primary py-6 text-center text-sm text-text-tertiary",children:[(0,b.jsx)("p",{children:L.footerCopyright}),(0,b.jsx)(s.default,{})]})]}),(0,b.jsx)(v,{isOpen:p,onClose:()=>{q(!1),setTimeout(()=>{x(null)},300)},site:w,logoUrl:w?.logo?(0,k.getFileUrl)(w.logo):void 0})]})}a.s(["default",()=>w],69643)}];

//# sourceMappingURL=src_app_navigation_page_tsx_ff78d8ea._.js.map