(()=>{var e={};e.id=750,e.ids=[750],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},39329:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>l}),t(8501),t(43538),t(12523);var s=t(23191),a=t(88716),o=t(37922),n=t.n(o),i=t(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(r,c);let l=["",{children:["messages",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8501)),"D:\\360Downloads\\www\\tool-new\\Xs-blog\\frontend\\src\\app\\messages\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,43538)),"D:\\360Downloads\\www\\tool-new\\Xs-blog\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"D:\\360Downloads\\www\\tool-new\\Xs-blog\\frontend\\src\\app\\not-found.tsx"]}],d=["D:\\360Downloads\\www\\tool-new\\Xs-blog\\frontend\\src\\app\\messages\\page.tsx"],m="/messages/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/messages/page",pathname:"/messages",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},70341:(e,r,t)=>{Promise.resolve().then(t.bind(t,94879))},94879:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(10326),a=t(17577),o=t(67905);function n(){let[e,r]=(0,a.useState)([]),[t,n]=(0,a.useState)(null),[i,c]=(0,a.useState)(!1),[l,d]=(0,a.useState)(""),[m,u]=(0,a.useState)("success"),[x,p]=(0,a.useState)({name:"",contact:"",category_id:"",content:"",captcha:""}),b=async()=>{try{let[e,t]=await Promise.all([(0,o.HQu)(),(0,o.anM)()]);e.success&&r(e.data),t.success&&n(t.data)}catch(e){console.error("加载数据失败:",e)}},g=async e=>{e.preventDefault(),c(!0),d("");try{let e={...x,category_id:x.category_id?parseInt(x.category_id):null,captcha:{id:t?.id,text:x.captcha}},r=await (0,o.uCC)(e);r.success?(d("留言提交成功，我们会尽快处理！"),u("success"),p({name:"",contact:"",category_id:"",content:"",captcha:""})):(d(r.message||"提交失败，请重试"),u("error")),b()}catch(e){console.error("提交留言失败:",e),d(e.response?.data?.message||e.message||"提交失败，请重试"),u("error"),b()}finally{c(!1)}},h=e=>{let{name:r,value:t}=e.target;p(e=>({...e,[r]:t}))},y=async()=>{try{let e=await (0,o.anM)();e.success&&(n(e.data),p(e=>({...e,captcha:""})))}catch(e){console.error("刷新验证码失败:",e)}};return s.jsx("main",{className:"min-h-screen bg-bg-primary relative flex flex-col",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl py-10",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"联系我们"}),s.jsx("a",{href:"/",className:"text-sm text-primary-500 hover:text-primary-600 transition-colors flex items-center gap-1",children:"访问首页 →"})]}),s.jsx("p",{className:"text-text-secondary max-w-2xl mx-auto",children:"有任何问题都可以通过这里进行提交你的想法！"})]}),(0,s.jsxs)("div",{className:"bg-bg-secondary rounded-lg shadow-lg p-6 max-w-2xl mx-auto",children:[l&&s.jsx("div",{className:`mb-6 p-4 rounded-lg ${"success"===m?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:l}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-text-primary mb-2",children:"用户称呼 *"}),s.jsx("input",{type:"text",id:"name",name:"name",value:x.name,onChange:h,required:!0,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",placeholder:"请输入您的称呼"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"contact",className:"block text-sm font-medium text-text-primary mb-2",children:"联系方式 *"}),s.jsx("input",{type:"text",id:"contact",name:"contact",value:x.contact,onChange:h,required:!0,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",placeholder:"请输入您的联系方式（邮箱、微信、电话等）"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"category_id",className:"block text-sm font-medium text-text-primary mb-2",children:"留言分类"}),(0,s.jsxs)("select",{id:"category_id",name:"category_id",value:x.category_id,onChange:h,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",children:[s.jsx("option",{value:"",children:"请选择分类"}),e.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-text-primary mb-2",children:"留言内容 *"}),s.jsx("textarea",{id:"content",name:"content",value:x.content,onChange:h,required:!0,rows:6,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary resize-none",placeholder:"请输入您的留言内容..."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"captcha",className:"block text-sm font-medium text-text-primary mb-2",children:"验证码 *"}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",id:"captcha",name:"captcha",value:x.captcha,onChange:h,required:!0,className:"w-full px-3 py-2 border border-border-primary rounded-lg focus:outline-none focus:ring-0 focus:border-border-primary bg-bg-primary text-text-primary",placeholder:"请输入验证码"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[t&&s.jsx("div",{className:"border border-border-primary rounded-lg overflow-hidden bg-bg-secondary h-[42px] w-[120px] flex items-center justify-center captcha-container",dangerouslySetInnerHTML:{__html:t.svg}}),s.jsx("button",{type:"button",onClick:y,className:"mt-2 text-xs text-text-secondary hover:text-primary-500 transition-colors",children:"看不清？换一张"})]})]})]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{type:"submit",disabled:i,className:"w-full bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white font-medium py-3 px-4 rounded-lg transition-colors focus:outline-none focus:ring-0",children:i?"提交中...":"提交留言"})})]}),s.jsx("div",{className:"mt-8 pt-6 border-t border-border",children:(0,s.jsxs)("div",{className:"text-sm text-text-secondary space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{})}),s.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.jsx("li",{children:"我们会在收到留言后尽快处理并联系您"})})]})})]})]})})}},8501:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`D:\360Downloads\www\tool-new\Xs-blog\frontend\src\app\messages\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[380,804,964],()=>t(39329));module.exports=s})();